{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","back/logoutdb.json","common/pass-trans-table.json","chai","optimal-select","../../node_modules/assertion-error/index.js","../../node_modules/base64-js/index.js","../../node_modules/buffer/index.js","../../node_modules/chai/lib/chai.js","../../node_modules/chai/lib/chai/assertion.js","../../node_modules/chai/lib/chai/config.js","../../node_modules/chai/lib/chai/core/assertions.js","../../node_modules/chai/lib/chai/interface/assert.js","../../node_modules/chai/lib/chai/interface/expect.js","../../node_modules/chai/lib/chai/interface/should.js","../../node_modules/chai/lib/chai/utils/addChainableMethod.js","../../node_modules/chai/lib/chai/utils/addMethod.js","../../node_modules/chai/lib/chai/utils/addProperty.js","../../node_modules/chai/lib/chai/utils/expectTypes.js","../../node_modules/chai/lib/chai/utils/flag.js","../../node_modules/chai/lib/chai/utils/getActual.js","../../node_modules/chai/lib/chai/utils/getEnumerableProperties.js","../../node_modules/chai/lib/chai/utils/getMessage.js","../../node_modules/chai/lib/chai/utils/getName.js","../../node_modules/chai/lib/chai/utils/getPathInfo.js","../../node_modules/chai/lib/chai/utils/getPathValue.js","../../node_modules/chai/lib/chai/utils/getProperties.js","../../node_modules/chai/lib/chai/utils/hasProperty.js","../../node_modules/chai/lib/chai/utils/index.js","../../node_modules/chai/lib/chai/utils/inspect.js","../../node_modules/chai/lib/chai/utils/objDisplay.js","../../node_modules/chai/lib/chai/utils/overwriteChainableMethod.js","../../node_modules/chai/lib/chai/utils/overwriteMethod.js","../../node_modules/chai/lib/chai/utils/overwriteProperty.js","../../node_modules/chai/lib/chai/utils/test.js","../../node_modules/chai/lib/chai/utils/transferFlags.js","../../node_modules/deep-eql/index.js","../../node_modules/deep-eql/lib/eql.js","../../node_modules/deep-eql/node_modules/type-detect/index.js","../../node_modules/deep-eql/node_modules/type-detect/lib/type.js","../../node_modules/domurl/url.js","../../node_modules/gonzales/lib/cssp.translator.node.js","../../node_modules/gonzales/lib/gonzales.cssp.node.js","../../node_modules/gonzales/lib/gonzales.js","../../node_modules/ieee754/index.js","../../node_modules/is-buffer/index.js","../../node_modules/optimal-select/lib/adapt.js","../../node_modules/optimal-select/lib/match.js","../../node_modules/optimal-select/lib/optimize.js","../../node_modules/optimal-select/lib/select.js","../../node_modules/path-browserify/index.js","../../node_modules/process/browser.js","../../node_modules/source-map/lib/array-set.js","../../node_modules/source-map/lib/base64-vlq.js","../../node_modules/source-map/lib/base64.js","../../node_modules/source-map/lib/binary-search.js","../../node_modules/source-map/lib/mapping-list.js","../../node_modules/source-map/lib/quick-sort.js","../../node_modules/source-map/lib/source-map-consumer.js","../../node_modules/source-map/lib/source-map-generator.js","../../node_modules/source-map/lib/source-node.js","../../node_modules/source-map/lib/util.js","../../node_modules/source-map/source-map.js","../../node_modules/type-detect/lib/type.js","../../node_modules/urijs/src/IPv6.js","../../node_modules/urijs/src/SecondLevelDomains.js","../../node_modules/urijs/src/URI.js","../../node_modules/urijs/src/punycode.js","../../node_modules/uuid-lib/uuid-lib.js","chrome/content.coffee","chrome/front-transport.coffee","common/domain-extractor.coffee","common/dumper.coffee","common/frame-utils.coffee","common/ga.coffee","common/log.coffee","common/md5.coffee","common/rlog.coffee","common/utils.coffee","front/applier-manager.coffee","front/iframe-observer.coffee","front/parser-helpers.coffee","front/send-log.coffee","thirdparty/clone.js","thirdparty/soundex.coffee","thirdparty/source-map-support.js"],"names":["exclude","excludeProps","res","obj","Object","keys","forEach","key","excludes","indexOf","slice","call","arguments","args","i","length","AssertionError","message","_props","ssf","extend","props","this","showDiff","Error","captureStackTrace","e","stack","module","exports","prototype","create","name","constructor","toJSON","getLens","b64","len","validLen","byteLength","lens","placeHoldersLen","_byteLength","toByteArray","tmp","arr","Arr","curByte","revLookup","charCodeAt","tripletToBase64","num","lookup","encodeChunk","uint8","start","end","output","push","join","fromByteArray","extraBytes","parts","len2","Uint8Array","Array","code","typedArraySupport","proto","foo","setPrototypeOf","createBuffer","K_MAX_LENGTH","RangeError","buf","Buffer","arg","encodingOrOffset","TypeError","allocUnsafe","from","value","fromString","ArrayBuffer","isView","fromArrayLike","isInstance","buffer","fromArrayBuffer","SharedArrayBuffer","valueOf","b","fromObject","Symbol","toPrimitive","assertSize","size","alloc","fill","encoding","undefined","checked","string","isEncoding","actual","write","array","byteOffset","isBuffer","copy","numberIsNaN","type","isArray","data","toString","SlowBuffer","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","read","indexSize","readUInt16BE","arrLength","valLength","String","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","base64","Math","min","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","max","checkIEEE754","writeFloat","littleEndian","noAssert","ieee754","writeDouble","base64clean","str","split","trim","replace","INVALID_BASE64_RE","units","Infinity","leadSurrogate","byteArray","c","hi","lo","src","dst","require","customInspectSymbol","for","INSPECT_MAX_BYTES","kMaxLength","TYPED_ARRAY_SUPPORT","console","error","defineProperty","enumerable","get","poolSize","allocUnsafeSlow","_isBuffer","compare","a","x","y","concat","list","pos","swap16","swap32","swap64","toLocaleString","equals","inspect","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","newBuf","subarray","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","set","table","i16","used","version","util","use","fn","config","assertion","core","expect","should","assert","_chai","Assertion","msg","flag","callee","warn","includeStack","addProperty","addMethod","addChainableMethod","chainingBehavior","overwriteProperty","overwriteMethod","overwriteChainableMethod","expr","negateMsg","expected","_actual","ok","test","getMessage","getActual","truncateThreshold","chai","_","an","article","charAt","includeChainingBehavior","include","expectTypes","eql","k","property","subset","checkArguments","assertEqual","_obj","assertEql","assertAbove","to","have","assertLeast","assertBelow","assertMost","assertInstanceOf","getName","assertOwnProperty","hasOwnProperty","assertOwnPropertyDescriptor","descriptor","actualDescriptor","getOwnPropertyDescriptor","assertLengthChain","assertLength","assertMatch","re","exec","assertKeys","mixedArgsMsg","any","all","filter","every","map","last","pop","sort","assertThrows","errMsg","is","thrown","desiredError","thrownError","RegExp","err","actuallyGot","expectedThrown","respondTo","method","itself","context","satisfy","matcher","result","objDisplay","negate","closeTo","delta","abs","isSubsetOf","superset","cmp","elem","some","elem2","oneOf","be","assertChanges","object","prop","initial","assertIncreases","assertDecreases","chain","isNaN","finish","range","isDeep","pathInfo","getPathInfo","hasProperty","exists","isExtensible","isSealed","isFrozen","express","errmsg","fail","operator","isOk","isNotOk","not","equal","act","exp","notEqual","strictEqual","notStrictEqual","deepEqual","notDeepEqual","isAbove","abv","above","isAtLeast","atlst","least","isBelow","blw","below","isAtMost","atmst","most","isTrue","isNotTrue","isFalse","isNotFalse","isNull","isNotNull","NaN","isNotNaN","isUndefined","isDefined","isFunction","isNotFunction","isObject","isNotObject","isNotArray","isString","isNotString","isNumber","isNotNumber","isBoolean","isNotBoolean","typeOf","notTypeOf","instanceOf","notInstanceOf","inc","notInclude","match","notMatch","notProperty","deepProperty","deep","notDeepProperty","propertyVal","propertyNotVal","deepPropertyVal","deepPropertyNotVal","lengthOf","throws","errt","errs","assertErr","throw","doesNotThrow","Throw","val2","approximately","sameMembers","set1","set2","same","members","sameDeepMembers","includeMembers","includeDeepMembers","inList","changes","change","doesNotChange","increases","increase","doesNotIncrease","decreases","decrease","doesNotDecrease","ifError","extensible","isNotExtensible","sealed","isNotSealed","frozen","isNotFrozen","alias","as","loadShould","shouldGetter","Boolean","shouldSetter","configurable","writable","val1","exist","Should","transferFlags","hasProtoSupport","excludeNames","Function","ctx","chainableBehavior","__methods","__proto__","getOwnPropertyNames","asserterName","pd","getter","types","t","index","art","flags","__flags","flagMsg","func","parsePath","path","mArr","parseFloat","p","_getPathValue","l","part","info","parent","getPrototypeOf","literals","number","ot","getPathValue","showHidden","depth","colors","formatValue","seen","stylize","recurseTimes","primitive","formatPrimitive","isDOMElement","outerHTML","document","xmlVersion","XMLSerializer","serializeToString","container","createElementNS","appendChild","cloneNode","html","innerHTML","visibleKeys","getEnumerableProperties","getProperties","isError","nameSuffix","isRegExp","isDate","Date","toUTCString","formatError","base","braces","formatArray","formatProperty","reduceToSingleString","simple","JSON","stringify","__lookupGetter__","__lookupSetter__","line","numLinesEst","reduce","prev","cur","ar","objectToString","d","o","HTMLElement","nodeType","nodeName","splice","_chainingBehavior","_method","_super","_get","includeAll","sameValue","dateEqual","regexpEqual","bufferEqual","argumentsEqual","typeEqual","objectEqual","getTime","iterableEqual","isValue","ka","kb","ex","getType","natives","Library","tests","[object Array]","[object RegExp]","[object Function]","[object Arguments]","[object Date]","of","define","ReferenceError","ns","urlConfig","url","query","hash","protocol","host","port","user","pass","parse","self","absolutize","link","auth","currUrl","isNode","process","platform","nodeRequire","realpathSync","location","href","createElement","decode","defaultPorts","Url","basePath","selfPath","s","shift","paths","QueryString","encode","encodeURIComponent","hex1","hex2","hex3","n1","n2","n3","hex","qs","decodeURIComponent","noTransform","window","global","ftp","gopher","http","https","ws","wss","ii","clearQuery","queryLength","count","isEmptyQuery","prefix","isAbsolute","csspToSrc","tree","hasInfo","_t","_m_primitive","_m_simple","_simple","_m_composite","_composite","_unique","unary","nth","combinator","ident","attrselector","raw","unknown","simpleselector","dimension","selector","filterv","progid","ruleset","atruleb","atrulerq","atrulers","stylesheet","cdo","cdc","decldelim","namespace","delim","percentage","comment","clazz","atkeyword","shash","vhash","attrib","important","nthselector","funktion","declaration","block","atrules","atruler","pseudoe","pseudoc","uri","functionExpression","srcToCSSP","TokenType","StringSQ","StringDQ","CommentML","CommentSL","Newline","Space","Tab","ExclamationMark","QuotationMark","NumberSign","DollarSign","PercentSign","Ampersand","Apostrophe","LeftParenthesis","RightParenthesis","Asterisk","PlusSign","Comma","HyphenMinus","FullStop","Solidus","Colon","Semicolon","LessThanSign","EqualsSign","GreaterThanSign","QuestionMark","CommercialAt","LeftSquareBracket","ReverseSolidus","RightSquareBracket","CircumflexAccent","LowLine","LeftCurlyBracket","VerticalLine","RightCurlyBracket","Tilde","Identifier","DecimalNumber","getTokens","isDecimalDigit","_getTokens","tokens","cn","parseMLComment","urlMode","parseString","parseSpaces","Punctuation","pushToken","ln","blockMode","parseDecimalNumber","parseIdentifier","parseSLComment","mark","tn","substring","q","ps","sbs","cbs","left","right"," ","\n","\r","\t","!","\"","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","]","^","{","|","}","~","getCSSPAST","token","failLN","throwError","currentBlockLN","_getAST","_tokens","rule","_needInfo","needInfo","markSC","CSSPRules","checkAny","_i","checkBraces","checkString","checkPercentage","checkDimension","checkNumber","checkUri","checkFunctionExpression","checkFunktion","checkIdent","checkUnary","getAny","getBraces","getString","getPercentage","getDimension","getNumber","getUri","getFunctionExpression","getFunktion","getIdent","getUnary","checkAtkeyword","getAtkeyword","startPos","CSSPNodeType","AtkeywordType","checkAttrib","checkAttrib1","checkSC","checkAttrselector","getAttrib1","AttribType","getSC","getAttrselector","checkAttrib2","getAttrib2","getAttrib","AttrselectorType","checkAtrule","atrule_l","checkAtruler","atrule_type","checkAtruleb","checkAtrules","getAtrule","getAtruler","getAtruleb","getAtrules","checkTsets","checkBlock","AtrulebType","getTsets","getBlock","checkAtrulerq","checkAtrulers","AtrulerType","getAtrulerq","getAtrulers","AtrulerqType","checkRuleset","atrulers_end","AtrulersType","getRuleset","AtrulesType","BlockType","checkBlockdecl","getBlockdecl","_checkBlockdecl0","bd_type","_checkBlockdecl1","_checkBlockdecl2","_checkBlockdecl3","_getBlockdecl0","_getBlockdecl1","_getBlockdecl2","_getBlockdecl3","checkFilter","bd_filter","checkDeclaration","bd_decl","checkDecldelim","getFilter","getDeclaration","getDecldelim","tsets","BracesType","checkClazz","clazz_l","getClazz","ClazzType","checkCombinator","getCombinator","CombinatorType","checkComment","getComment","CommentType","checkProperty","checkValue","DeclarationType","getProperty","getValue","DecldelimType","checkDelim","getDelim","DelimType","li","checkNmName2","IdentType","getNmName2","DimensionType","checkFilterp","checkFilterv","FilterType","getFilterp","getFilterv","joinValues2","filterp_l","PropertyType","checkProgid","last_progid","checkImportant","FiltervType","getProgid","getImportant","joinValues","FunctionExpressionType","body","getFunctionBody","getNotFunctionBody","FunktionType","checkTset","getTset","FunctionBodyType","checkSimpleselector","getSimpleSelector","wasIdent","checkIdentLowLine","ident_last","sc","ImportantType","checkNamespace","getNamespace","NamespaceType","checkNth","checkNth1","checkNth2","nth_last","getNth","NthType","checkNthf","nthf_last","getNthf","checkNthselector","rp","getNthselector","nthf","NthselectorType","number_l","NumberType","checkOperator","getOperator","OperatorType","PercentageType","_start","progid_end","ProgidType","_getProgid","RawType","checkPseudo","checkPseudoe","checkPseudoc","getPseudo","getPseudoe","getPseudoc","PseudoeType","PseudocType","ruleset_l","checkSelector","RulesetType","getSelector","checkS","ws_last","getS","SType","lsc","selector_end","SelectorType","checkShash","checkNmName","getShash","ShashType","getNmName","_checkSimpleSelector","ss","SimpleselectorType","_getSimpleSelector","StringType","checkStylesheet","checkUnknown","getStylesheet","StylesheetType","getUnknown","checkVhash","getVhash","UnaryType","UnknownType","uriExcluding","checkUri1","UriType","checkExcluding","_checkValue","ValueType","_getValue","VhashType","nm_name_last","sc_last","CdoType","CdcType","checkRaw","getRaw","dummySpaces","csspToTree","level","spaces","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","floor","log","LN2","isSlowBuffer","adapt","element","options","root","ElementPrototype","children","node","attribs","attributesNames","NamedNodeMap","attributes","attributeName","getAttribute","getElementsByTagName","tagName","HTMLCollection","traverseDescendants","childTags","descendant","getElementsByClassName","className","names","descendantClassName","class","querySelectorAll","selectors","_this","_getInstructions","getInstructions","_getInstructions2","_toArray","discover","ascendings","total","step","contains","inclusive","done","reverse","_selector$split","_selector$split2","_slicedToArray","pseudo","validate","instruction","nodeClassName","getAncestor","_type$replace$split","_type$replace$split2","attributeKey","attributeValue","_ret","NodeList","v","_typeof","id","_ret2","_ret3","_ret4","kind","validatePseudo","compareSet","findIndex","child","matchedNode","nodes","handler","progress","_options$root","_options$skip","skip","_options$ignore","ignore","skipCompare","entry","ignoreClass","predicate","bind","ignoreAttribute","attribute","defaultPredicate","checkId","checkClassGlobal","checkAttributeGlobal","checkTagGlobal","checkClassLocal","checkAttributeLocal","checkTagLocal","checkClassChild","checkAttributeChild","checkTagChild","parentNode","unshift","checkClass","checkIgnore","checkChild","checkAttribute","defaultIgnore","checkTag","tag","pattern","check","optimize","globalModified","_adapt2","default","shortened","current","prePart","postPart","optimizePart","matches","references","description","curr","next","partial","_references","_description","_adapt","getQuerySelector","input","getMultiSelector","getSingleSelector","_match2","optimized","_optimize2","elements","commonParentNode","commonClassName","commonTagName","longer","shorter","classNames","_match","_optimize","normalizeArray","allowAboveRoot","up","basename","matchedSlash","xs","f","resolve","resolvedPath","resolvedAbsolute","cwd","normalize","trailingSlash","relative","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","extname","startDot","startPart","preDotState","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","run","Item","noop","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask","ArraySet","_array","_set","hasNativeMap","Map","has","fromArray","aArray","aAllowDuplicates","add","aStr","sStr","toSetString","isDuplicate","idx","at","aIdx","toArray","toVLQSigned","aValue","fromVLQSigned","isNegative","shifted","VLQ_BASE_SHIFT","VLQ_BASE","VLQ_BASE_MASK","VLQ_CONTINUATION_BIT","digit","encoded","vlq","aIndex","aOutParam","continuation","rest","intToCharMap","charCode","recursiveSearch","aLow","aHigh","aNeedle","aHaystack","aCompare","aBias","mid","LEAST_UPPER_BOUND","GREATEST_LOWER_BOUND","search","generatedPositionAfter","mappingA","mappingB","lineA","generatedLine","lineB","columnA","generatedColumn","columnB","compareByGeneratedPositionsInflated","MappingList","_sorted","_last","unsortedForEach","aCallback","aThisArg","aMapping","ary","temp","randomIntInRange","low","high","round","random","doQuickSort","comparator","r","pivotIndex","pivot","quickSort","SourceMapConsumer","aSourceMap","sourceMap","sections","IndexedSourceMapConsumer","BasicSourceMapConsumer","getArg","sources","sourceRoot","sourcesContent","mappings","file","_version","source","_names","_sources","_mappings","Mapping","originalLine","originalColumn","lastOffset","column","_sections","offsetLine","offsetColumn","generatedOffset","consumer","binarySearch","base64VLQ","fromSourceMap","__generatedMappings","_parseMappings","__originalMappings","_charIsMappingSeparator","aSourceRoot","GENERATED_ORDER","ORIGINAL_ORDER","eachMapping","aContext","aOrder","order","_generatedMappings","_originalMappings","mapping","allGeneratedPositionsFor","aArgs","needle","_findMapping","compareByOriginalPositions","lastColumn","smc","_sourceRoot","_generateSourcesContent","_file","generatedMappings","destGeneratedMappings","destOriginalMappings","srcMapping","destMapping","segment","previousGeneratedColumn","previousOriginalLine","previousOriginalColumn","previousSource","previousName","cachedSegments","originalMappings","compareByGeneratedPositionsDeflated","aMappings","aLineName","aColumnName","aComparator","computeColumnSpans","nextMapping","lastGeneratedColumn","originalPositionFor","hasContentsOfAllSources","sourceContentFor","aSource","nullOnMissing","urlParse","fileUriAbsPath","scheme","generatedPositionFor","sectionIndex","section","bias","content","generatedPosition","sectionMappings","adjustedMapping","SourceMapGenerator","_skipValidation","_sourcesContents","aSourceMapConsumer","generator","newMapping","generated","original","addMapping","sourceFile","setSourceContent","_validateMapping","aSourceFile","aSourceContent","applySourceMap","aSourceMapPath","newSources","newNames","aGenerated","aOriginal","aName","_serializeMappings","nameIdx","sourceIdx","previousGeneratedLine","aSources","SourceNode","aLine","aColumn","aChunks","sourceContents","isSourceNode","REGEX_NEWLINE","NEWLINE_CODE","fromStringWithSourceMap","aGeneratedCode","aRelativePath","addMappingWithCode","remainingLines","remainingLinesIndex","shiftNextLine","getNextLine","lastGeneratedLine","lastMapping","nextLine","aChunk","chunk","prepend","walk","aFn","aSep","newChildren","replaceRight","aPattern","aReplacement","lastChild","walkSourceContents","fromSetString","toStringWithSourceMap","sourceMappingActive","lastOriginalSource","lastOriginalLine","lastOriginalColumn","lastOriginalName","sourceContent","aDefaultValue","aUrl","urlRegexp","urlGenerate","aParsedUrl","aPath","aRoot","aPathUrl","aRootUrl","dataUrlRegexp","joined","identity","isProtoString","onlyCompareOriginal","onlyCompareGenerated","strcmp","aStr1","aStr2","supportsNullProto","objectTypeRegexp","Promise","factory","amd","IPv6","bestPresentation","address","_address","segments","_segments","best","_best","_current","inzeroes","noConflict","_IPv6","SecondLevelDomains","_SecondLevelDomains","SLD","ac","ae","af","al","ao","au","ba","bb","bh","bn","bo","br","bs","bz","ca","ck","co","cr","cy","do","dz","ec","eg","er","es","et","fj","fk","fr","gg","gh","gn","gr","gt","gu","hk","hu","il","in","iq","ir","it","je","jo","jp","ke","kh","ki","km","kn","kr","kw","ky","kz","lb","lk","lr","lv","ly","ma","mc","me","mg","mk","ml","mn","mo","mt","mv","mw","mx","my","nf","ng","ni","np","nr","om","pe","ph","pk","pl","pr","pw","ro","rs","sb","sh","sl","st","sv","sz","tr","tt","tw","mu","mz","na","nz","pa","pt","py","qa","ru","rw","sa","sd","se","sg","sn","sy","th","tj","tz","ua","ug","uk","us","uy","ve","vi","vn","ye","yu","za","zm","com","net","org","de","domain","tldOffset","sldOffset","sldList","URI","punycode","_urlSupplied","_baseSupplied","absoluteTo","isInteger","escapeRegEx","filterArrayValues","arrayContains","_type","arraysEqual","one","two","trimSlashes","text","trim_expression","escapeForDumbFirefox36","escape","strictEncodeURIComponent","generateSimpleAccessor","_part","build","_parts","generatePrefixAccessor","_key","_URI","hasOwn","username","password","hostname","urn","fragment","preventInvalidHostname","duplicateQueryParameters","escapeQuerySpace","protocol_expression","idn_expression","punycode_expression","ip4_expression","ip6_expression","find_uri_expression","findUri","parens","hostProtocols","invalid_hostname_characters","domAttributes","blockquote","script","form","img","area","iframe","embed","track","audio","video","getDomAttribute","iso8859","unescape","unicode","characters","pathname","expression","%24","%26","%2B","%2C","%3B","%3D","%3A","%40","reserved","%2F","%3F","%23","%5B","%5D","%21","%27","%28","%29","%2A","urnpath","encodeQuery","escaped","decodeQuery","generateAccessor","_group","generateSegmentedPathFunction","_sep","_codingFuncName","_innerCodingFuncName","actualCodingFunc","decodePath","decodeUrnPath","recodePath","recodeUrnPath","encodeReserved","parseAuthority","parseHost","bracketPos","firstColon","firstSlash","nextColon","ensureValidHostname","ensureValidPort","parseUserinfo","parseQuery","items","splits","requireAbsolutePath","buildAuthority","buildHost","buildUserinfo","buildQuery","unique","buildQueryParameter","addQuery","setQuery","removeQuery","hasQuery","withinArray","joinPaths","nonEmptySegments","commonPath","withinString","callback","_end","_trim","_parens","_attributeOpen","lastIndex","ignoreHtml","attributeOpen","parensEnd","parensMatch","parensMatchEnd","hasHostname","hasProtocol","rejectEmptyHostname","toASCII","removeAll","unconflicted","URITemplate","deferBuild","_deferred_build","_string","clone","_object","what","ip","ip4","ip6","sld","idn","_protocol","_port","_hostname","origin","authority","userinfo","resource","subdomain","tld","directory","filename","decodePathSegment","mutatedDirectory","normalizePath","suffix","separator","absolute","segmentCoded","setSearch","addSearch","removeSearch","hasSearch","normalizeProtocol","normalizeQuery","normalizeFragment","normalizeHostname","normalizePort","_path","_was_relative","_parent","_pos","_leadingParents","normalizePathname","normalizeSearch","normalizeHash","readable","toUnicode","qp","kv","basedir","resolved","properties","relativeTo","relativeParts","baseParts","common","relativePath","parents","one_query","two_query","one_map","two_map","errors","mapDomain","regexSeparators","ucs2decode","extra","counter","ucs2encode","stringFromCharCode","basicToDigit","digitToBasic","numPoints","firstTime","damp","baseMinusTMin","tMax","skew","basic","oldi","w","baseMinusT","inputLength","initialN","initialBias","maxInt","tMin","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","regexPunycode","regexNonASCII","freeExports","freeModule","freeGlobal","overflow","not-basic","invalid-input","ucs2","gen","Uuid","uuid","EMPTY","isUuid","other","isEmpty","validator","OptimalSelect","applierManager","contentLoadedHandler","domainExtractor","enableExecuting","errorHandler","fileContentsCache","ga","init","isPassword","logout_urls","messageEventHandler","observer","prevActiveElement","removeInitListeners","startContentScriptInIframeHandler","startStop","started","topFrameMessageHandler","utils","axt_context","axt_sid","axt_fid","axt_tid","axt_url","axt_src","axt_dst","axt_frameVisibility","isPasswordInput","evt","input_observer","origUrl","ref","ref1","runContentScript","scriptWasExecuted","head","querySelector","hasAttribute","visibilityState","setAttribute","ref2","lineno","exDescription","exFatal","addEventListener","gs","delayCall","ge","mutations","len1","mutation","ref3","addedNodes","disconnect","MutationObserver","observe","childList","subtree","removeEventListener","enable_executing","startIframeObserver","stop","removeAttribute","isFocusable","event","cmd","postMessage","request","sender","sendResponse","activeElement","active_element_info","button","buttons","clickButton","nextElement","nextType","prevElement","searchButton","searchButtons","typeValue","tab","startsWith","top","chrome","runtime","sendMessage","isTextInput","getNextTabStopElement","isSelectInput","isTextArea","axt_activeElement","axt_nextElement","activeInputType","nextInputType","activeElementInfo","focus","dispatchEvent","UIEvent","bubbles","MouseEvent","KeyboardEvent","activeInputValue","nextInputValue","star","evaluate","XPathResult","ANY_TYPE","iterateNext","click","install","retrieveFile","contents","fname","xhr","extension","getURL","XMLHttpRequest","open","send","readyState","status","responseText","ApplierManager","Transport","changeValueEventHandler","surl","classList","clipboardData","axt_valueChanged","getUrlWithoutParams","transport","onMessage","ChromeFrontTransport","callbackObject","connect","messageEventListener","sid","close","sendToExt","getExtUrl","addMessageListener","DOMAIN_EXCEPTIONS","USA_STATES","gov","mil","edu","exceptions","checkDomains","domain_parts","extractUrlInfoFromTestFilePath","templates","HTML_ELEMENT_BASE_PROPERTIES","OBFUSCATED_FIELDS","TRUNCATED_FIELDS","dumper","safeApply","item","error1","deep_level","all_props","log_mode","obfuscated_fields","truncated_fields","_dumper","_obfuscate_field_value","circular","list_delim","list_sep","obfuscated_fields_re","str_delim","truncated_fields_re","_trunc","cur_deep_level","parent_keyname","p_keyname","displayName","getFrameId","getFramePath","child_frame_window","_get_frame_id","f_idx","frame_path","frames","win","frame_idx","frameId","windowObject","sendException","setEnabled","fatal","level2","err_str","initGoogleAnalytics","ga_id","new_state","old_state","deeplevel","rlog","ts","time_begin","time","te","time_end","timeEnd","debug","group","begin","groupEnd","dump","param","params","alert","add32","cmn","ff","hex_chr","hh","md5","md51","md5blk","md5cycle","rhex","state","tail","md5blks","DEEP_LEVEL","MAX_MESSAGE_LENGTH","filename_re","getSource","sendLog","source_re","funcname","slevel","tags","endsWith","EvalCodeError","ORIG_URL","PARSED_TYPES","PASSWORD_RANGE_TABLE","PATH_PARSING_RE","RTL","TEXT_TYPES","arrangePasswords","belongToAncestor","defCompFunc","elementVisibilityChanged","evalCode","expandArrayWithArrayOrObject","extendArray","getActualURL","getAttributesNames","getClientRect","getCommonBlock","getFieldset","getLegend","getRandomInt","getStyle","getZIndex","innerTextList","insertSorted","isAncestor","isBlockElement","isCheckBoxInput","isElementVisible","isEmptyObject","isHiddenInput","isInList","isInput","isParsedInput","isRadioInput","isVisible","isVisibleHitBased","isVisibleNew","isVisibleNewTest","orderBy","parentIsInList","reEscape","xor","zip","ctor","hasProp","__super__","error_message","ref4","ref5","max_inclusive","element1","element2","parentElement","superClass","param_name","param_value","htmlElement","cached","rect","axt_rectStamp","axt_stamp","axt_rect","getBoundingClientRect","bottom","width","height","style","axt_styleStamp","axt_style","getComputedStyle","px","zIndex","axt_zIndexStamp","axt_zIndex","_isVisibleTest","visible","el","offsp","lft","h","SAFARI","box","element_type","horScroll","isOffsetParent","pBorderLeftWidth","pBorderRightWidth","pBorderTopWidth","pOffsetLeft","pOffsetTop","pOverflowX","pOverflowXScrolled","pOverflowY","pOverflowYScrolled","pPosition","parent_style","pb","tagname","vertScroll","offsetParent","compareDocumentPosition","offsetWidth","offsetHeight","offsetTop","offsetLeft","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","scrollWidth","scrollLeft","scrollTop","axt_vStamp","axt_vCache","_isVisible","sTransform","tag_name","transformOffsetX","transformOffsetY","transform","use_hit","body_height","body_width","client_height","client_width","efp","form_mid_x","form_mid_y","form_rect","mid_x","mid_y","prevStylePointerEvents","rect_bottom","rect_left","rect_right","rect_top","sX","sY","elementFromPoint","scrollX","scrollY","scrollHeight","display","visibility","pointerEvents","cache","labels","changed","prev_visible","prev_visible_attr","is_block","HTMLInputElement","HTMLSelectElement","multiple","exclude_element","only_visible","exclude_tagNames","_inner_text","_element","len3","lst","childNodes","nodeValue","alt","before","cond","exactly","comp_fun","use_opt","_idxRateOf","_isInList","_rateWordInList","idx_list","t_list","total_match_rate","etalon_word","start_idx","end_idx","cur_idx","rate","word","_exectly","_idx_list","prev_rate","sentence","sentence_len","_cond","_and_op","_total_match_rate","cur_match_rate","exist_mark","list_not_op","match_rate","not_op","t_idx_list","array1","array2","zip_func","_zip_func","arr1","arr2","pair","v1","v2","_a","_b","array_or_object","before_pos","len4","comp","legend","closest","fieldset","legends","activeElem","focusable","indexedList","queryResult","queryString","tabIndex","parentList","ancestor","passwords","new_tags","p1","p2","p3","passlist","max_length","rates","confirm","old","new","IframeObserver","TRANSITION_PROPERTIES","fillInputValue","futils","putils","removeAxtAttributes","textIsInPage","login","userName","email","phone","phone_prefix","firstName","lastName","fullName","company","account","applicantId","zipcode","currentLogin","currentPassword","FIRST_ORDERED_NODE_TYPE","singleNodeValue","transportClass","extended_mode","auto_submit","auto_logout","registration_autosubmit","parser_init","inprogress","reposition_timeout","DOMchanged","parser","FormParser","parserScanTimerId","chooseUserAccountTimerId","iframeObserver","forms_info","accounts_info","parser_run","login_val","_initReq","$$restoreLastEventFromExt","last_event","_saveForm","_started","input_vals","vals","timestamp","now","is_active_event","last_event_urls","urls","values","input_values","registration","onBeforeUnloadHandler","letSaveLoginInfo","has_password","password_changed","_saveLoginFormReq","_startReq","removeEventListeners","onTransitionEventHandler","reposition_input_icons","onSelectChangedHandler","clearInterval","iconsRepositionInterval","method_name","and","empty","which","$$done","who","button_type","form_type","input_type","inputs","parse_duration","parse_start_time","performance","timing","toFixed","forms","hasInputMutationsInDOM","_onDOMChanged","$$prepare","init_info","axt_enable_ga","GoogleAnalytics","Analytics","axt_extended_mode","axt_auto_submit","axt_auto_logout","_getParserInfoReq","checkInputs","stopChooseUserAccountTimer","parseForm","last_event_unload","_beforeUnloadReq","propertyName","$$chooseAccount","$$parserInit","button_raters","check_inputs","fill_forms","form_raters","input_raters","parser_fun","parser_info","post_page_raters","post_raters","pre_page_raters","pre_raters","prepRaters","ref6","doubleClickEventHandler","appliers","default_appliers","prepParserFun","FormsObserver","setVisibilityChangedCallback","prepAppliers","setInterval","add_input_icons","dbg","form_info","add_input_icon","form_tag","input_tag","results","results1","reposition_input_icon","_now","last_event_type","last_form_tag","login_value","password_value","ref10","ref11","ref7","ref8","ref9","prev_last_event","last_form","_storeLastEventReq","saving_in_progress","_cancelLoginFormSavingReq","getFormsInfo","_importCredentialsReq","current_step","steps","_getFormsInfoReq","_getFitLoginVal","acc_count","acc_lists","accounts_names","accs","change_password_mode","cnt_dict","email_labels","field_names","is_login_visible","label","label_words","login_acc_info","login_button","login_form_info","login_input","login_input_readonly","login_input_vals","login_list","login_name","login_predict","login_predict_list","login_val_re","matched","mfa_input","norm_phone_labels","old_password_input","password_input","phone_labels","ref12","ref13","ref14","ref15","ref16","ref17","ref18","ref19","ref20","ref21","ref22","ref23","ref24","ref25","ref26","ref27","ref28","ref29","ref30","ref31","ref32","ref33","ref34","ref35","ref36","ref37","strong_login","verify_form_info","acc","dict","field_name","selectedOptions","parentHasOnlyOneChild","axt_forms","getFormTitle","getAltInputLabels","hidden_inputs","winners","normalized_label","normalized_val","normalizePhone","EMAILS_RE","PHONES_RE","EMAIL_RE","PHONE_RE","name_list","normalize_phone","data_list","splitString","_list","acc_login","found_acc","isLoginFinal","change_icon_value","_get2FACodeReq","_chooseUserAccountReq","disabled","$$getSelectedUserAccountInfo","account_info","acc_info","account_name","autoSubmit","_getUserPasswordReq","$$applyInputData","_getRegistrationProfilesInfoReq","input_data","new_password","_applier","$$dataStored","action","test_credentials","updated","$$apply2FACode","mfa_data","prevCode","nextCode","period","startTimestamp","mfa-code","mfa-code2","_passToExt","navigation_type","navigation","redirect_count","redirectCount","referrer","_sendLogReq","log_obj","_getExtInfoReq","pause","credentials","forms_req_info","accounts","_chooseUserAccountTimerId","_readyToSaveReq","_getApplier","applier","cur_step","current_login","ival","login_tags","reg_button","reg_form_info","url_err","verify_button","DOMChanged","axt_form","winner","GET_VISIBILITY_CMD","SET_VISIBILITY_CMD","checkAndSendVisibilityInfo","requestVisibilityInfo","sendVisibilityInfo","sendVisibilityToAllIframes","frameElement","contentWindow","_frames","_isIframeDOMmutated","_iframeVisibilityChangedCallback","attrName","newValue","oldValue","removedNodes","compareVisibleStyleAttributes","iframeMessageHandler","characterData","attributeFilter","attributeOldValue","frame","frameElements","frameWin","frm","newFrameVisibility","ABBREVIATIONS","ABBREVIATIONS_RE","ALL_BUTTON_SELECTORS","BUTTON_INPUT_SELECTORS","BUTTON_SELECTORS","FORMS_ETALONS","FORM_TITLE_TAG_NAMES","FULL_MATCHING_RANK","GT","MAX_PLACEHOLDER_LENGTH","RATE_DELTA","RangedArray","RatesProp","SOCIAL_SITES","SUBMIT_ETALONS","SUBSTR_MATCHING_RANK","Soundex","TITLES_ETALONS","VISIBLE_STYLE_ATTRIBUTES","compareArrays","compareSimpleDict","cssParser","filterButtons","frameDepthCache","g_const","getButtonText","getCorrectValue","getElementDisplayStyle","getFrameDepth","getNodeText","getPageButtons","getParentsChildren","getSelectedCssAttributes","isButtonTextCorrect","remove_input_icon","replaceCustomNames","select","show_rate_info","tagsByStr","transferButton","transferHiddenInput","transferInput","LOGIN_CANDIDATES","REGISTRATION_FIELDS","FORM_SELECTORS","INPUT_SELECTORS","ANCHOR_SELECTORS","sel","save","clear","update","login-link","change-password","change-phone","change-email","reset-password","forgot-email","forgot-login","reset-security-question","password-gen","load","delete","disable","play","show","special-requests","go","profile","verify","subscription","cancel","github","google","yahoo","linkedin","twitter","facebook","odnoklassniki","vkontakte","disqus","amazon","help","add-photo","add-video","send-code","language","add-card","mfa-setup","login-reg","payment-info","security-code","security-questions","change-username","change-mobile-phone","change-name","disable-account","forgot-pin","-mfa","-emailed","ZINDEX_DELTA","iframe_url","iframe_level","input_visibility","page_state","form_selector","input_label","input_kind","input_id","input_ptype","form_ptype","attr_list","first_dict","second_dict","ignore_values","diff","first_dict_keys","second_dict_keys","old_style","new_style","new_css","old_css","old_form","new_form","onRateChanged","becomesDirty","remove","axt_elements","corner_svg","input_offsetLeft","input_offsetTop","input_offsetWidth","input_style","offset_parent","span1","span2","position","axt_spans","textContent","transition","insertBefore","nextSibling","opacity","new_left","new_top","style1","style2","span","input_icon_spans","typed_value","current_value","new_param","axt_ga_id","pageview_sent","_getFrameDepth","winToID","html_element","displayStyle","getPropertyValue","words","translit","a_len","a_rate","b_len","b_rate","parent_child_forms","titles","previousElementSibling","selector_or_array","etalons","already_splitted","_rate","added_rules","complex_tags","prev_added_rules_count","strings","tags_dict","tags_etalons","used_tags","word_list","words_etalons","_etalons","_already_splitted","_use_opt","_rated_tags","etalon_tag","etalons_list","matched_rank","matched_words","_rank","rank","tag_hash","_dict","cnt","outer","on_rate_changed","_idx","_outer","_dirty_winners","_winners","_rateChangedCallback","tag_dict","_log","getWinners","rater","getLog","record","reset","rater_name","old_callback","_insertSortedTag","compFunc","t1","t2","l1","l1_len","l2","l2_len","max_l","min_l","r1","r2","desc","getSummaryRate","summary_rate","sorted_tags","summary_rates","win_summary_rate","win_tag","removed_tag_dict","rateByStr","rateByParentsAttrs","attrs","top_element","INPUT_BUTTON_SELECTORS","attr","attr_text","rateByParentsTagText","tag_names","inner_text","prev_parent","index_or_object","deleted_element","getWinners_old","winnersHaveManyElements","applyTags","_hasInputMutationsCallback","start_time","_isInputDOMmutated","takeRecords","form_box","form_class","form_id","form_idx","form_name","form_rates","form_visibility","form_zIndex","show_input","input_class","input_name","input_rates","input_zIndex","placeholder","defaultValue","axt_prev_title","innerText","rater_src","raters","page_rates","analytics","addCheckInputs","addFillForms","addFormRater","addInputRater","addButtonRater","addPreRater","addPostRater","addPrePageRater","addPostPageRater","startUserActivityMonitoring","removeLastEventListeners","removeElementEventListeners","_regLastEvent","evt_type","target_type","_getVal","account_value","applicantId_value","company_value","current_login_value","email_value","firstName_value","fullName_value","lastName_value","phone_prefix_value","phone_value","prev_login_value","userName_value","winner_inputs","zipcode_value","_password_changed","_changed","_tag","prev_value","clearLastEvent","_regChangeEvent","axt_type","_regSubmitEvent","_regKeyEvent","_regClickEvent","ext_target","winner_tag","_copyInputValueEventHandler","fillForms","insertCheckInputs","check_input","insertFillForms","insertFormRater","insertInputRater","insertButtonRater","insertPreRater","insertPostRater","insertPrePageRater","insertPostPageRater","resetFormRaters","form_to_reset","reset_form_inputs","reset_buttons","_reset_form","ratePageStatus","repackForm","_form","for_del","rateForms","i1","len10","len5","len6","len7","len8","len9","u","z","getParsedForms","rated_forms","logged_in","skip_node_with_inputs","with_pseudo","skip_links_buttons","_getNodeText","_add_line_to_text","after","line_list","node_name","text_list","value_len","all_above","skip_links_and_buttons","previousSibling","label_id","txt","toUpperCase","getElementById","checkVisible","button_groups","button_pairs","has_inner_input","inner_anchors_cnt","bg","b2","buffer_class","_clone","__isArray","__isRegExp","__getRegExpFlags","__isDate","useBuffer","Buf","allParents","allChildren","__objToStr","ignoreCase","multiline","clonePrototype","accented","calc","codes","ru_en","A","0","I","J","Y","U","B","C","1","Z","S","K","H","D","T","R","E","W","F","G","O","L","M","N","P","Q","V","X","А","а","Б","б","В","в","Г","г","Д","д","Е","е","Ё","ё","Ж","ж","З","з","И","и","Й","й","К","к","Л","л","М","м","Н","н","О","о","П","п","Р","р","С","с","Т","т","У","у","Ф","ф","Х","х","Ц","ц","Ч","ч","Ш","ш","Щ","щ","Ъ","ъ","Ы","ы","Ь","ь","Э","э","Ю","ю","Я","я","І","і","Ї","ї","Є","є","Ґ","ґ","ñ","Ñ","ó","Ó","ú","Ú","é","É","í","Í","iscyr","power","previous","tc","letter","str1","str2","isInBrowser","environment","hasGlobalProcessEventEmitter","handlerExec","supportRelativeURL","retrieveSourceMapURL","fileData","inBrowser","sourceMapHeader","getResponseHeader","lastMatch","mapSourcePosition","position_key","originalPosition","positionCache","sourceMapCache","urlAndMap","retrieveSourceMap","mapEvalOrigin","CallSiteToString","fileName","fileLocation","isNative","getScriptNameOrSourceURL","isEval","getEvalOrigin","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","addSuffix","isConstructor","isToplevel","typeName","getTypeName","methodName","getMethodName","cloneCallSite","wrapCallSite","getFileName","prepareStackTrace","emptyCacheBetweenOperations","stackLevel","getErrorSource","fs","existsSync","readFileSync","printErrorAndExit","exit","shimEmitUncaughtException","origEmit","hasStack","hasListeners","_atob","errorFormatterInstalled","uncaughtShimInstalled","reSourceMap","retrieveFileHandlers","retrieveMapHandlers","sourceMappingURL","sourceMapData","rawData","overrideRetrieveFile","overrideRetrieveSourceMap","handleUncaughtExceptions"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports={\"aws.amazon.com\":\"\",\"google.com\":\"\",\"live.com\":\"\",\"skype.com\":\"\",\"msn.com\":\"\",\"bing.com\":\"\",\"onenote.com\":\"\",\"microsoft.com\":\"\",\"office.com\":\"\",\"facebook.com\":\"\",\"trello.com\":\"\",\"paypal.com\":\"\",\"linkedin.com\":\"\",\"pinterest.com\":\"\",\"instagram.com\":\"\"}","module.exports={\"password\":[\"password\"],\"password|password\":[\"password\",\"confirm-password\"],\"password|password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"password|password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|confirm-password\":[\"password\",\"confirm-password\"],\"password|confirm-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"password|confirm-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|confirm-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"password|confirm-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|confirm-password|new-password\":[\"old -password\",\"confirm-new-password\",\"new-password\"],\"password|old-password\":[\"new-password\",\"old-password\"],\"password|old-password|password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"password|old-password|confirm-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"password|old-password|old-password\":[\"new-password\",\"old-password\",\"confirm-old-password\"],\"password|old-password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"password|old-password|new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"password|confirm-new-password\":[\"password\",\"confirm-password\"],\"password|confirm-new-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"password|confirm-new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|confirm-new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"password|confirm-new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|confirm-new-password|new-password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"password|new-password\":[\"old-password\",\"new-password\"],\"password|new-password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"password|new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"password|new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password\":[\"password\"],\"confirm-password|password\":[\"confirm-password\",\"password\"],\"confirm-password|password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|password|old-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-password|password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|confirm-password\":[\"password\",\"confirm-password\"],\"confirm-password|confirm-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"confirm-password|confirm-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|confirm-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"confirm-password|confirm-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|confirm-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|old-password\":[\"confirm-password\",\"password\"],\"confirm-password|old-password|password\":[\"confirm-new-password\",\"old-password\",\"new-password\"],\"confirm-password|old-password|confirm-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"confirm-password|old-password|old-password\":[\"new-password\",\"old-password\",\"confirm-old-password\"],\"confirm-password|old-password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"confirm-password|old-password|new-password\":[\"confirm-new-password\",\"old-password\",\"new-password\"],\"confirm-password|confirm-new-password\":[\"old-password\",\"new-password\"],\"confirm-password|confirm-new-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"confirm-password|confirm-new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|confirm-new-password|old-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-password|confirm-new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|confirm-new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|new-password\":[\"old-password\",\"new-password\"],\"confirm-password|new-password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|new-password|old-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-password|new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-password|new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password\":[\"password\"],\"old-password|password\":[\"old-password\",\"new-password\"],\"old-password|password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|password|old-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-password\":[\"password\",\"confirm-password\"],\"old-password|confirm-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"old-password|confirm-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-password|old-password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"old-password|confirm-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-password|new-password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"old-password|old-password\":[\"password\",\"confirm-password\"],\"old-password|old-password|password\":[\"old-password\",\"confirm-old-password\",\"new-password\"],\"old-password|old-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|old-password|old-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|old-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|old-password|new-password\":[\"old-password\",\"confirm-old-password\",\"new-password\"],\"old-password|confirm-new-password\":[\"old-password\",\"new-password\"],\"old-password|confirm-new-password|password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"old-password|confirm-new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-new-password|old-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|confirm-new-password|new-password\":[\"old-password\",\"confirm-new-password\",\"new-password\"],\"old-password|new-password\":[\"old-password\",\"new-password\"],\"old-password|new-password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|new-password|old-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"old-password|new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password\":[\"password\"],\"confirm-new-password|password\":[\"confirm-password\",\"password\"],\"confirm-new-password|password|password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-new-password|password|confirm-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-new-password|password|old-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-new-password|password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-password\":[\"password\",\"confirm-password\"],\"confirm-new-password|confirm-password|password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"confirm-new-password|confirm-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|old-password\":[\"new-password\",\"old-password\"],\"confirm-new-password|old-password|password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"confirm-new-password|old-password|confirm-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"confirm-new-password|old-password|old-password\":[\"new-password\",\"old-password\",\"confirm-old-password\"],\"confirm-new-password|old-password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"confirm-new-password|old-password|new-password\":[\"confirm-new-password\",\"old-password\",\"new-password\"],\"confirm-new-password|confirm-new-password\":[\"password\",\"confirm-password\"],\"confirm-new-password|confirm-new-password|password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"confirm-new-password|confirm-new-password|confirm-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"confirm-new-password|confirm-new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|confirm-new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|new-password\":[\"confirm-password\",\"password\"],\"confirm-new-password|new-password|password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-new-password|new-password|confirm-password\":[\"confirm-new-password\",\"new-password\",\"old-password\"],\"confirm-new-password|new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"confirm-new-password|new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"confirm-new-password|new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"new-password\":[\"password\"],\"new-password|password\":[\"password\",\"confirm-password\"],\"new-password|password|password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|password|confirm-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|password|new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|confirm-password\":[\"password\",\"confirm-password\"],\"new-password|confirm-password|password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-password|confirm-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|confirm-password|new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|old-password\":[\"new-password\",\"old-password\"],\"new-password|old-password|password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|old-password|confirm-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|old-password|old-password\":[\"new-password\",\"old-password\",\"confirm-old-password\"],\"new-password|old-password|confirm-new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|old-password|new-password\":[\"new-password\",\"old-password\",\"confirm-new-password\"],\"new-password|confirm-new-password\":[\"password\",\"confirm-password\"],\"new-password|confirm-new-password|password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-new-password|confirm-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|confirm-new-password|confirm-new-password\":[\"new-password\",\"confirm-new-password\",\"confirm-new-password2\"],\"new-password|confirm-new-password|new-password\":[\"new-password\",\"confirm-new-password\",\"new-password2\"],\"new-password|new-password\":[\"password\",\"confirm-password\"],\"new-password|new-password|password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|new-password|confirm-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|new-password|old-password\":[\"new-password\",\"confirm-new-password\",\"old-password\"],\"new-password|new-password|confirm-new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"],\"new-password|new-password|new-password\":[\"old-password\",\"new-password\",\"confirm-new-password\"]}","module.exports = require(\"./lib/chai\");","\"use strict\";\n\nfunction _interopRequireDefault(e) {\n    return e && e.__esModule ? e : {\n        default: e\n    };\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: !0\n}), exports.default = exports.optimize = exports.select = void 0;\n\nvar _select2 = require(\"./select\"), _select3 = _interopRequireDefault(_select2), _optimize2 = require(\"./optimize\"), _optimize3 = _interopRequireDefault(_optimize2);\n\nexports.select = _select3.default, exports.optimize = _optimize3.default, exports.default = _select3.default;","/*!\n * assertion-error\n * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>\n * MIT Licensed\n */\n\n/*!\n * Return a function that will copy properties from\n * one object to another excluding any originally\n * listed. Returned function will create a new `{}`.\n *\n * @param {String} excluded properties ...\n * @return {Function}\n */\n\nfunction exclude () {\n  var excludes = [].slice.call(arguments);\n\n  function excludeProps (res, obj) {\n    Object.keys(obj).forEach(function (key) {\n      if (!~excludes.indexOf(key)) res[key] = obj[key];\n    });\n  }\n\n  return function extendExclude () {\n    var args = [].slice.call(arguments)\n      , i = 0\n      , res = {};\n\n    for (; i < args.length; i++) {\n      excludeProps(res, args[i]);\n    }\n\n    return res;\n  };\n};\n\n/*!\n * Primary Exports\n */\n\nmodule.exports = AssertionError;\n\n/**\n * ### AssertionError\n *\n * An extension of the JavaScript `Error` constructor for\n * assertion and validation scenarios.\n *\n * @param {String} message\n * @param {Object} properties to include (optional)\n * @param {callee} start stack function (optional)\n */\n\nfunction AssertionError (message, _props, ssf) {\n  var extend = exclude('name', 'message', 'stack', 'constructor', 'toJSON')\n    , props = extend(_props || {});\n\n  // default values\n  this.message = message || 'Unspecified AssertionError';\n  this.showDiff = false;\n\n  // copy from properties\n  for (var key in props) {\n    this[key] = props[key];\n  }\n\n  // capture stack trace\n  ssf = ssf || AssertionError;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, ssf);\n  } else {\n    try {\n      throw new Error();\n    } catch(e) {\n      this.stack = e.stack;\n    }\n  }\n}\n\n/*!\n * Inherit from Error.prototype\n */\n\nAssertionError.prototype = Object.create(Error.prototype);\n\n/*!\n * Statically set name\n */\n\nAssertionError.prototype.name = 'AssertionError';\n\n/*!\n * Ensure correct constructor\n */\n\nAssertionError.prototype.constructor = AssertionError;\n\n/**\n * Allow errors to be converted to JSON for static transfer.\n *\n * @param {Boolean} include stack (default: `true`)\n * @return {Object} object that can be `JSON.stringify`\n */\n\nAssertionError.prototype.toJSON = function (stack) {\n  var extend = exclude('constructor', 'toJSON', 'stack')\n    , props = extend({ name: this.name }, this);\n\n  // include stack if exists and not turned off\n  if (false !== stack && this.stack) {\n    props.stack = this.stack;\n  }\n\n  return props;\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? Symbol.for('nodejs.util.inspect.custom')\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*!\n * chai\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar used = []\n  , exports = module.exports = {};\n\n/*!\n * Chai version\n */\n\nexports.version = '3.5.0';\n\n/*!\n * Assertion Error\n */\n\nexports.AssertionError = require('assertion-error');\n\n/*!\n * Utils for plugins (not exported)\n */\n\nvar util = require('./chai/utils');\n\n/**\n * # .use(function)\n *\n * Provides a way to extend the internals of Chai\n *\n * @param {Function}\n * @returns {this} for chaining\n * @api public\n */\n\nexports.use = function (fn) {\n  if (!~used.indexOf(fn)) {\n    fn(this, util);\n    used.push(fn);\n  }\n\n  return this;\n};\n\n/*!\n * Utility Functions\n */\n\nexports.util = util;\n\n/*!\n * Configuration\n */\n\nvar config = require('./chai/config');\nexports.config = config;\n\n/*!\n * Primary `Assertion` prototype\n */\n\nvar assertion = require('./chai/assertion');\nexports.use(assertion);\n\n/*!\n * Core Assertions\n */\n\nvar core = require('./chai/core/assertions');\nexports.use(core);\n\n/*!\n * Expect interface\n */\n\nvar expect = require('./chai/interface/expect');\nexports.use(expect);\n\n/*!\n * Should interface\n */\n\nvar should = require('./chai/interface/should');\nexports.use(should);\n\n/*!\n * Assert interface\n */\n\nvar assert = require('./chai/interface/assert');\nexports.use(assert);\n","/*!\n * chai\n * http://chaijs.com\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar config = require('./config');\n\nmodule.exports = function (_chai, util) {\n  /*!\n   * Module dependencies.\n   */\n\n  var AssertionError = _chai.AssertionError\n    , flag = util.flag;\n\n  /*!\n   * Module export.\n   */\n\n  _chai.Assertion = Assertion;\n\n  /*!\n   * Assertion Constructor\n   *\n   * Creates object for chaining.\n   *\n   * @api private\n   */\n\n  function Assertion (obj, msg, stack) {\n    flag(this, 'ssfi', stack || arguments.callee);\n    flag(this, 'object', obj);\n    flag(this, 'message', msg);\n  }\n\n  Object.defineProperty(Assertion, 'includeStack', {\n    get: function() {\n      console.warn('Assertion.includeStack is deprecated, use chai.config.includeStack instead.');\n      return config.includeStack;\n    },\n    set: function(value) {\n      console.warn('Assertion.includeStack is deprecated, use chai.config.includeStack instead.');\n      config.includeStack = value;\n    }\n  });\n\n  Object.defineProperty(Assertion, 'showDiff', {\n    get: function() {\n      console.warn('Assertion.showDiff is deprecated, use chai.config.showDiff instead.');\n      return config.showDiff;\n    },\n    set: function(value) {\n      console.warn('Assertion.showDiff is deprecated, use chai.config.showDiff instead.');\n      config.showDiff = value;\n    }\n  });\n\n  Assertion.addProperty = function (name, fn) {\n    util.addProperty(this.prototype, name, fn);\n  };\n\n  Assertion.addMethod = function (name, fn) {\n    util.addMethod(this.prototype, name, fn);\n  };\n\n  Assertion.addChainableMethod = function (name, fn, chainingBehavior) {\n    util.addChainableMethod(this.prototype, name, fn, chainingBehavior);\n  };\n\n  Assertion.overwriteProperty = function (name, fn) {\n    util.overwriteProperty(this.prototype, name, fn);\n  };\n\n  Assertion.overwriteMethod = function (name, fn) {\n    util.overwriteMethod(this.prototype, name, fn);\n  };\n\n  Assertion.overwriteChainableMethod = function (name, fn, chainingBehavior) {\n    util.overwriteChainableMethod(this.prototype, name, fn, chainingBehavior);\n  };\n\n  /**\n   * ### .assert(expression, message, negateMessage, expected, actual, showDiff)\n   *\n   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.\n   *\n   * @name assert\n   * @param {Philosophical} expression to be tested\n   * @param {String|Function} message or function that returns message to display if expression fails\n   * @param {String|Function} negatedMessage or function that returns negatedMessage to display if negated expression fails\n   * @param {Mixed} expected value (remember to check for negation)\n   * @param {Mixed} actual (optional) will default to `this.obj`\n   * @param {Boolean} showDiff (optional) when set to `true`, assert will display a diff in addition to the message if expression fails\n   * @api private\n   */\n\n  Assertion.prototype.assert = function (expr, msg, negateMsg, expected, _actual, showDiff) {\n    var ok = util.test(this, arguments);\n    if (true !== showDiff) showDiff = false;\n    if (true !== config.showDiff) showDiff = false;\n\n    if (!ok) {\n      var msg = util.getMessage(this, arguments)\n        , actual = util.getActual(this, arguments);\n      throw new AssertionError(msg, {\n          actual: actual\n        , expected: expected\n        , showDiff: showDiff\n      }, (config.includeStack) ? this.assert : flag(this, 'ssfi'));\n    }\n  };\n\n  /*!\n   * ### ._obj\n   *\n   * Quick reference to stored `actual` value for plugin developers.\n   *\n   * @api private\n   */\n\n  Object.defineProperty(Assertion.prototype, '_obj',\n    { get: function () {\n        return flag(this, 'object');\n      }\n    , set: function (val) {\n        flag(this, 'object', val);\n      }\n  });\n};\n","module.exports = {\n\n  /**\n   * ### config.includeStack\n   *\n   * User configurable property, influences whether stack trace\n   * is included in Assertion error message. Default of false\n   * suppresses stack trace in the error message.\n   *\n   *     chai.config.includeStack = true;  // enable stack on error\n   *\n   * @param {Boolean}\n   * @api public\n   */\n\n   includeStack: false,\n\n  /**\n   * ### config.showDiff\n   *\n   * User configurable property, influences whether or not\n   * the `showDiff` flag should be included in the thrown\n   * AssertionErrors. `false` will always be `false`; `true`\n   * will be true when the assertion has requested a diff\n   * be shown.\n   *\n   * @param {Boolean}\n   * @api public\n   */\n\n  showDiff: true,\n\n  /**\n   * ### config.truncateThreshold\n   *\n   * User configurable property, sets length threshold for actual and\n   * expected values in assertion errors. If this threshold is exceeded, for\n   * example for large data structures, the value is replaced with something\n   * like `[ Array(3) ]` or `{ Object (prop1, prop2) }`.\n   *\n   * Set it to zero if you want to disable truncating altogether.\n   *\n   * This is especially userful when doing assertions on arrays: having this\n   * set to a reasonable large value makes the failure messages readily\n   * inspectable.\n   *\n   *     chai.config.truncateThreshold = 0;  // disable truncating\n   *\n   * @param {Number}\n   * @api public\n   */\n\n  truncateThreshold: 40\n\n};\n","/*!\n * chai\n * http://chaijs.com\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nmodule.exports = function (chai, _) {\n  var Assertion = chai.Assertion\n    , toString = Object.prototype.toString\n    , flag = _.flag;\n\n  /**\n   * ### Language Chains\n   *\n   * The following are provided as chainable getters to\n   * improve the readability of your assertions. They\n   * do not provide testing capabilities unless they\n   * have been overwritten by a plugin.\n   *\n   * **Chains**\n   *\n   * - to\n   * - be\n   * - been\n   * - is\n   * - that\n   * - which\n   * - and\n   * - has\n   * - have\n   * - with\n   * - at\n   * - of\n   * - same\n   *\n   * @name language chains\n   * @namespace BDD\n   * @api public\n   */\n\n  [ 'to', 'be', 'been'\n  , 'is', 'and', 'has', 'have'\n  , 'with', 'that', 'which', 'at'\n  , 'of', 'same' ].forEach(function (chain) {\n    Assertion.addProperty(chain, function () {\n      return this;\n    });\n  });\n\n  /**\n   * ### .not\n   *\n   * Negates any of assertions following in the chain.\n   *\n   *     expect(foo).to.not.equal('bar');\n   *     expect(goodFn).to.not.throw(Error);\n   *     expect({ foo: 'baz' }).to.have.property('foo')\n   *       .and.not.equal('bar');\n   *\n   * @name not\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('not', function () {\n    flag(this, 'negate', true);\n  });\n\n  /**\n   * ### .deep\n   *\n   * Sets the `deep` flag, later used by the `equal` and\n   * `property` assertions.\n   *\n   *     expect(foo).to.deep.equal({ bar: 'baz' });\n   *     expect({ foo: { bar: { baz: 'quux' } } })\n   *       .to.have.deep.property('foo.bar.baz', 'quux');\n   *\n   * `.deep.property` special characters can be escaped\n   * by adding two slashes before the `.` or `[]`.\n   *\n   *     var deepCss = { '.link': { '[target]': 42 }};\n   *     expect(deepCss).to.have.deep.property('\\\\.link.\\\\[target\\\\]', 42);\n   *\n   * @name deep\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('deep', function () {\n    flag(this, 'deep', true);\n  });\n\n  /**\n   * ### .any\n   *\n   * Sets the `any` flag, (opposite of the `all` flag)\n   * later used in the `keys` assertion.\n   *\n   *     expect(foo).to.have.any.keys('bar', 'baz');\n   *\n   * @name any\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('any', function () {\n    flag(this, 'any', true);\n    flag(this, 'all', false)\n  });\n\n\n  /**\n   * ### .all\n   *\n   * Sets the `all` flag (opposite of the `any` flag)\n   * later used by the `keys` assertion.\n   *\n   *     expect(foo).to.have.all.keys('bar', 'baz');\n   *\n   * @name all\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('all', function () {\n    flag(this, 'all', true);\n    flag(this, 'any', false);\n  });\n\n  /**\n   * ### .a(type)\n   *\n   * The `a` and `an` assertions are aliases that can be\n   * used either as language chains or to assert a value's\n   * type.\n   *\n   *     // typeof\n   *     expect('test').to.be.a('string');\n   *     expect({ foo: 'bar' }).to.be.an('object');\n   *     expect(null).to.be.a('null');\n   *     expect(undefined).to.be.an('undefined');\n   *     expect(new Error).to.be.an('error');\n   *     expect(new Promise).to.be.a('promise');\n   *     expect(new Float32Array()).to.be.a('float32array');\n   *     expect(Symbol()).to.be.a('symbol');\n   *\n   *     // es6 overrides\n   *     expect({[Symbol.toStringTag]:()=>'foo'}).to.be.a('foo');\n   *\n   *     // language chain\n   *     expect(foo).to.be.an.instanceof(Foo);\n   *\n   * @name a\n   * @alias an\n   * @param {String} type\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function an (type, msg) {\n    if (msg) flag(this, 'message', msg);\n    type = type.toLowerCase();\n    var obj = flag(this, 'object')\n      , article = ~[ 'a', 'e', 'i', 'o', 'u' ].indexOf(type.charAt(0)) ? 'an ' : 'a ';\n\n    this.assert(\n        type === _.type(obj)\n      , 'expected #{this} to be ' + article + type\n      , 'expected #{this} not to be ' + article + type\n    );\n  }\n\n  Assertion.addChainableMethod('an', an);\n  Assertion.addChainableMethod('a', an);\n\n  /**\n   * ### .include(value)\n   *\n   * The `include` and `contain` assertions can be used as either property\n   * based language chains or as methods to assert the inclusion of an object\n   * in an array or a substring in a string. When used as language chains,\n   * they toggle the `contains` flag for the `keys` assertion.\n   *\n   *     expect([1,2,3]).to.include(2);\n   *     expect('foobar').to.contain('foo');\n   *     expect({ foo: 'bar', hello: 'universe' }).to.include.keys('foo');\n   *\n   * @name include\n   * @alias contain\n   * @alias includes\n   * @alias contains\n   * @param {Object|String|Number} obj\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function includeChainingBehavior () {\n    flag(this, 'contains', true);\n  }\n\n  function include (val, msg) {\n    _.expectTypes(this, ['array', 'object', 'string']);\n\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    var expected = false;\n\n    if (_.type(obj) === 'array' && _.type(val) === 'object') {\n      for (var i in obj) {\n        if (_.eql(obj[i], val)) {\n          expected = true;\n          break;\n        }\n      }\n    } else if (_.type(val) === 'object') {\n      if (!flag(this, 'negate')) {\n        for (var k in val) new Assertion(obj).property(k, val[k]);\n        return;\n      }\n      var subset = {};\n      for (var k in val) subset[k] = obj[k];\n      expected = _.eql(subset, val);\n    } else {\n      expected = (obj != undefined) && ~obj.indexOf(val);\n    }\n    this.assert(\n        expected\n      , 'expected #{this} to include ' + _.inspect(val)\n      , 'expected #{this} to not include ' + _.inspect(val));\n  }\n\n  Assertion.addChainableMethod('include', include, includeChainingBehavior);\n  Assertion.addChainableMethod('contain', include, includeChainingBehavior);\n  Assertion.addChainableMethod('contains', include, includeChainingBehavior);\n  Assertion.addChainableMethod('includes', include, includeChainingBehavior);\n\n  /**\n   * ### .ok\n   *\n   * Asserts that the target is truthy.\n   *\n   *     expect('everything').to.be.ok;\n   *     expect(1).to.be.ok;\n   *     expect(false).to.not.be.ok;\n   *     expect(undefined).to.not.be.ok;\n   *     expect(null).to.not.be.ok;\n   *\n   * @name ok\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('ok', function () {\n    this.assert(\n        flag(this, 'object')\n      , 'expected #{this} to be truthy'\n      , 'expected #{this} to be falsy');\n  });\n\n  /**\n   * ### .true\n   *\n   * Asserts that the target is `true`.\n   *\n   *     expect(true).to.be.true;\n   *     expect(1).to.not.be.true;\n   *\n   * @name true\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('true', function () {\n    this.assert(\n        true === flag(this, 'object')\n      , 'expected #{this} to be true'\n      , 'expected #{this} to be false'\n      , this.negate ? false : true\n    );\n  });\n\n  /**\n   * ### .false\n   *\n   * Asserts that the target is `false`.\n   *\n   *     expect(false).to.be.false;\n   *     expect(0).to.not.be.false;\n   *\n   * @name false\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('false', function () {\n    this.assert(\n        false === flag(this, 'object')\n      , 'expected #{this} to be false'\n      , 'expected #{this} to be true'\n      , this.negate ? true : false\n    );\n  });\n\n  /**\n   * ### .null\n   *\n   * Asserts that the target is `null`.\n   *\n   *     expect(null).to.be.null;\n   *     expect(undefined).to.not.be.null;\n   *\n   * @name null\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('null', function () {\n    this.assert(\n        null === flag(this, 'object')\n      , 'expected #{this} to be null'\n      , 'expected #{this} not to be null'\n    );\n  });\n\n  /**\n   * ### .undefined\n   *\n   * Asserts that the target is `undefined`.\n   *\n   *     expect(undefined).to.be.undefined;\n   *     expect(null).to.not.be.undefined;\n   *\n   * @name undefined\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('undefined', function () {\n    this.assert(\n        undefined === flag(this, 'object')\n      , 'expected #{this} to be undefined'\n      , 'expected #{this} not to be undefined'\n    );\n  });\n\n  /**\n   * ### .NaN\n   * Asserts that the target is `NaN`.\n   *\n   *     expect('foo').to.be.NaN;\n   *     expect(4).not.to.be.NaN;\n   *\n   * @name NaN\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('NaN', function () {\n    this.assert(\n        isNaN(flag(this, 'object'))\n        , 'expected #{this} to be NaN'\n        , 'expected #{this} not to be NaN'\n    );\n  });\n\n  /**\n   * ### .exist\n   *\n   * Asserts that the target is neither `null` nor `undefined`.\n   *\n   *     var foo = 'hi'\n   *       , bar = null\n   *       , baz;\n   *\n   *     expect(foo).to.exist;\n   *     expect(bar).to.not.exist;\n   *     expect(baz).to.not.exist;\n   *\n   * @name exist\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('exist', function () {\n    this.assert(\n        null != flag(this, 'object')\n      , 'expected #{this} to exist'\n      , 'expected #{this} to not exist'\n    );\n  });\n\n\n  /**\n   * ### .empty\n   *\n   * Asserts that the target's length is `0`. For arrays and strings, it checks\n   * the `length` property. For objects, it gets the count of\n   * enumerable keys.\n   *\n   *     expect([]).to.be.empty;\n   *     expect('').to.be.empty;\n   *     expect({}).to.be.empty;\n   *\n   * @name empty\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('empty', function () {\n    var obj = flag(this, 'object')\n      , expected = obj;\n\n    if (Array.isArray(obj) || 'string' === typeof object) {\n      expected = obj.length;\n    } else if (typeof obj === 'object') {\n      expected = Object.keys(obj).length;\n    }\n\n    this.assert(\n        !expected\n      , 'expected #{this} to be empty'\n      , 'expected #{this} not to be empty'\n    );\n  });\n\n  /**\n   * ### .arguments\n   *\n   * Asserts that the target is an arguments object.\n   *\n   *     function test () {\n   *       expect(arguments).to.be.arguments;\n   *     }\n   *\n   * @name arguments\n   * @alias Arguments\n   * @namespace BDD\n   * @api public\n   */\n\n  function checkArguments () {\n    var obj = flag(this, 'object')\n      , type = Object.prototype.toString.call(obj);\n    this.assert(\n        '[object Arguments]' === type\n      , 'expected #{this} to be arguments but got ' + type\n      , 'expected #{this} to not be arguments'\n    );\n  }\n\n  Assertion.addProperty('arguments', checkArguments);\n  Assertion.addProperty('Arguments', checkArguments);\n\n  /**\n   * ### .equal(value)\n   *\n   * Asserts that the target is strictly equal (`===`) to `value`.\n   * Alternately, if the `deep` flag is set, asserts that\n   * the target is deeply equal to `value`.\n   *\n   *     expect('hello').to.equal('hello');\n   *     expect(42).to.equal(42);\n   *     expect(1).to.not.equal(true);\n   *     expect({ foo: 'bar' }).to.not.equal({ foo: 'bar' });\n   *     expect({ foo: 'bar' }).to.deep.equal({ foo: 'bar' });\n   *\n   * @name equal\n   * @alias equals\n   * @alias eq\n   * @alias deep.equal\n   * @param {Mixed} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertEqual (val, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    if (flag(this, 'deep')) {\n      return this.eql(val);\n    } else {\n      this.assert(\n          val === obj\n        , 'expected #{this} to equal #{exp}'\n        , 'expected #{this} to not equal #{exp}'\n        , val\n        , this._obj\n        , true\n      );\n    }\n  }\n\n  Assertion.addMethod('equal', assertEqual);\n  Assertion.addMethod('equals', assertEqual);\n  Assertion.addMethod('eq', assertEqual);\n\n  /**\n   * ### .eql(value)\n   *\n   * Asserts that the target is deeply equal to `value`.\n   *\n   *     expect({ foo: 'bar' }).to.eql({ foo: 'bar' });\n   *     expect([ 1, 2, 3 ]).to.eql([ 1, 2, 3 ]);\n   *\n   * @name eql\n   * @alias eqls\n   * @param {Mixed} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertEql(obj, msg) {\n    if (msg) flag(this, 'message', msg);\n    this.assert(\n        _.eql(obj, flag(this, 'object'))\n      , 'expected #{this} to deeply equal #{exp}'\n      , 'expected #{this} to not deeply equal #{exp}'\n      , obj\n      , this._obj\n      , true\n    );\n  }\n\n  Assertion.addMethod('eql', assertEql);\n  Assertion.addMethod('eqls', assertEql);\n\n  /**\n   * ### .above(value)\n   *\n   * Asserts that the target is greater than `value`.\n   *\n   *     expect(10).to.be.above(5);\n   *\n   * Can also be used in conjunction with `length` to\n   * assert a minimum length. The benefit being a\n   * more informative error message than if the length\n   * was supplied directly.\n   *\n   *     expect('foo').to.have.length.above(2);\n   *     expect([ 1, 2, 3 ]).to.have.length.above(2);\n   *\n   * @name above\n   * @alias gt\n   * @alias greaterThan\n   * @param {Number} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertAbove (n, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    if (flag(this, 'doLength')) {\n      new Assertion(obj, msg).to.have.property('length');\n      var len = obj.length;\n      this.assert(\n          len > n\n        , 'expected #{this} to have a length above #{exp} but got #{act}'\n        , 'expected #{this} to not have a length above #{exp}'\n        , n\n        , len\n      );\n    } else {\n      this.assert(\n          obj > n\n        , 'expected #{this} to be above ' + n\n        , 'expected #{this} to be at most ' + n\n      );\n    }\n  }\n\n  Assertion.addMethod('above', assertAbove);\n  Assertion.addMethod('gt', assertAbove);\n  Assertion.addMethod('greaterThan', assertAbove);\n\n  /**\n   * ### .least(value)\n   *\n   * Asserts that the target is greater than or equal to `value`.\n   *\n   *     expect(10).to.be.at.least(10);\n   *\n   * Can also be used in conjunction with `length` to\n   * assert a minimum length. The benefit being a\n   * more informative error message than if the length\n   * was supplied directly.\n   *\n   *     expect('foo').to.have.length.of.at.least(2);\n   *     expect([ 1, 2, 3 ]).to.have.length.of.at.least(3);\n   *\n   * @name least\n   * @alias gte\n   * @param {Number} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertLeast (n, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    if (flag(this, 'doLength')) {\n      new Assertion(obj, msg).to.have.property('length');\n      var len = obj.length;\n      this.assert(\n          len >= n\n        , 'expected #{this} to have a length at least #{exp} but got #{act}'\n        , 'expected #{this} to have a length below #{exp}'\n        , n\n        , len\n      );\n    } else {\n      this.assert(\n          obj >= n\n        , 'expected #{this} to be at least ' + n\n        , 'expected #{this} to be below ' + n\n      );\n    }\n  }\n\n  Assertion.addMethod('least', assertLeast);\n  Assertion.addMethod('gte', assertLeast);\n\n  /**\n   * ### .below(value)\n   *\n   * Asserts that the target is less than `value`.\n   *\n   *     expect(5).to.be.below(10);\n   *\n   * Can also be used in conjunction with `length` to\n   * assert a maximum length. The benefit being a\n   * more informative error message than if the length\n   * was supplied directly.\n   *\n   *     expect('foo').to.have.length.below(4);\n   *     expect([ 1, 2, 3 ]).to.have.length.below(4);\n   *\n   * @name below\n   * @alias lt\n   * @alias lessThan\n   * @param {Number} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertBelow (n, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    if (flag(this, 'doLength')) {\n      new Assertion(obj, msg).to.have.property('length');\n      var len = obj.length;\n      this.assert(\n          len < n\n        , 'expected #{this} to have a length below #{exp} but got #{act}'\n        , 'expected #{this} to not have a length below #{exp}'\n        , n\n        , len\n      );\n    } else {\n      this.assert(\n          obj < n\n        , 'expected #{this} to be below ' + n\n        , 'expected #{this} to be at least ' + n\n      );\n    }\n  }\n\n  Assertion.addMethod('below', assertBelow);\n  Assertion.addMethod('lt', assertBelow);\n  Assertion.addMethod('lessThan', assertBelow);\n\n  /**\n   * ### .most(value)\n   *\n   * Asserts that the target is less than or equal to `value`.\n   *\n   *     expect(5).to.be.at.most(5);\n   *\n   * Can also be used in conjunction with `length` to\n   * assert a maximum length. The benefit being a\n   * more informative error message than if the length\n   * was supplied directly.\n   *\n   *     expect('foo').to.have.length.of.at.most(4);\n   *     expect([ 1, 2, 3 ]).to.have.length.of.at.most(3);\n   *\n   * @name most\n   * @alias lte\n   * @param {Number} value\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertMost (n, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    if (flag(this, 'doLength')) {\n      new Assertion(obj, msg).to.have.property('length');\n      var len = obj.length;\n      this.assert(\n          len <= n\n        , 'expected #{this} to have a length at most #{exp} but got #{act}'\n        , 'expected #{this} to have a length above #{exp}'\n        , n\n        , len\n      );\n    } else {\n      this.assert(\n          obj <= n\n        , 'expected #{this} to be at most ' + n\n        , 'expected #{this} to be above ' + n\n      );\n    }\n  }\n\n  Assertion.addMethod('most', assertMost);\n  Assertion.addMethod('lte', assertMost);\n\n  /**\n   * ### .within(start, finish)\n   *\n   * Asserts that the target is within a range.\n   *\n   *     expect(7).to.be.within(5,10);\n   *\n   * Can also be used in conjunction with `length` to\n   * assert a length range. The benefit being a\n   * more informative error message than if the length\n   * was supplied directly.\n   *\n   *     expect('foo').to.have.length.within(2,4);\n   *     expect([ 1, 2, 3 ]).to.have.length.within(2,4);\n   *\n   * @name within\n   * @param {Number} start lowerbound inclusive\n   * @param {Number} finish upperbound inclusive\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addMethod('within', function (start, finish, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object')\n      , range = start + '..' + finish;\n    if (flag(this, 'doLength')) {\n      new Assertion(obj, msg).to.have.property('length');\n      var len = obj.length;\n      this.assert(\n          len >= start && len <= finish\n        , 'expected #{this} to have a length within ' + range\n        , 'expected #{this} to not have a length within ' + range\n      );\n    } else {\n      this.assert(\n          obj >= start && obj <= finish\n        , 'expected #{this} to be within ' + range\n        , 'expected #{this} to not be within ' + range\n      );\n    }\n  });\n\n  /**\n   * ### .instanceof(constructor)\n   *\n   * Asserts that the target is an instance of `constructor`.\n   *\n   *     var Tea = function (name) { this.name = name; }\n   *       , Chai = new Tea('chai');\n   *\n   *     expect(Chai).to.be.an.instanceof(Tea);\n   *     expect([ 1, 2, 3 ]).to.be.instanceof(Array);\n   *\n   * @name instanceof\n   * @param {Constructor} constructor\n   * @param {String} message _optional_\n   * @alias instanceOf\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertInstanceOf (constructor, msg) {\n    if (msg) flag(this, 'message', msg);\n    var name = _.getName(constructor);\n    this.assert(\n        flag(this, 'object') instanceof constructor\n      , 'expected #{this} to be an instance of ' + name\n      , 'expected #{this} to not be an instance of ' + name\n    );\n  };\n\n  Assertion.addMethod('instanceof', assertInstanceOf);\n  Assertion.addMethod('instanceOf', assertInstanceOf);\n\n  /**\n   * ### .property(name, [value])\n   *\n   * Asserts that the target has a property `name`, optionally asserting that\n   * the value of that property is strictly equal to  `value`.\n   * If the `deep` flag is set, you can use dot- and bracket-notation for deep\n   * references into objects and arrays.\n   *\n   *     // simple referencing\n   *     var obj = { foo: 'bar' };\n   *     expect(obj).to.have.property('foo');\n   *     expect(obj).to.have.property('foo', 'bar');\n   *\n   *     // deep referencing\n   *     var deepObj = {\n   *         green: { tea: 'matcha' }\n   *       , teas: [ 'chai', 'matcha', { tea: 'konacha' } ]\n   *     };\n   *\n   *     expect(deepObj).to.have.deep.property('green.tea', 'matcha');\n   *     expect(deepObj).to.have.deep.property('teas[1]', 'matcha');\n   *     expect(deepObj).to.have.deep.property('teas[2].tea', 'konacha');\n   *\n   * You can also use an array as the starting point of a `deep.property`\n   * assertion, or traverse nested arrays.\n   *\n   *     var arr = [\n   *         [ 'chai', 'matcha', 'konacha' ]\n   *       , [ { tea: 'chai' }\n   *         , { tea: 'matcha' }\n   *         , { tea: 'konacha' } ]\n   *     ];\n   *\n   *     expect(arr).to.have.deep.property('[0][1]', 'matcha');\n   *     expect(arr).to.have.deep.property('[1][2].tea', 'konacha');\n   *\n   * Furthermore, `property` changes the subject of the assertion\n   * to be the value of that property from the original object. This\n   * permits for further chainable assertions on that property.\n   *\n   *     expect(obj).to.have.property('foo')\n   *       .that.is.a('string');\n   *     expect(deepObj).to.have.property('green')\n   *       .that.is.an('object')\n   *       .that.deep.equals({ tea: 'matcha' });\n   *     expect(deepObj).to.have.property('teas')\n   *       .that.is.an('array')\n   *       .with.deep.property('[2]')\n   *         .that.deep.equals({ tea: 'konacha' });\n   *\n   * Note that dots and bracket in `name` must be backslash-escaped when\n   * the `deep` flag is set, while they must NOT be escaped when the `deep`\n   * flag is not set.\n   *\n   *     // simple referencing\n   *     var css = { '.link[target]': 42 };\n   *     expect(css).to.have.property('.link[target]', 42);\n   *\n   *     // deep referencing\n   *     var deepCss = { '.link': { '[target]': 42 }};\n   *     expect(deepCss).to.have.deep.property('\\\\.link.\\\\[target\\\\]', 42);\n   *\n   * @name property\n   * @alias deep.property\n   * @param {String} name\n   * @param {Mixed} value (optional)\n   * @param {String} message _optional_\n   * @returns value of property for chaining\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addMethod('property', function (name, val, msg) {\n    if (msg) flag(this, 'message', msg);\n\n    var isDeep = !!flag(this, 'deep')\n      , descriptor = isDeep ? 'deep property ' : 'property '\n      , negate = flag(this, 'negate')\n      , obj = flag(this, 'object')\n      , pathInfo = isDeep ? _.getPathInfo(name, obj) : null\n      , hasProperty = isDeep\n        ? pathInfo.exists\n        : _.hasProperty(name, obj)\n      , value = isDeep\n        ? pathInfo.value\n        : obj[name];\n\n    if (negate && arguments.length > 1) {\n      if (undefined === value) {\n        msg = (msg != null) ? msg + ': ' : '';\n        throw new Error(msg + _.inspect(obj) + ' has no ' + descriptor + _.inspect(name));\n      }\n    } else {\n      this.assert(\n          hasProperty\n        , 'expected #{this} to have a ' + descriptor + _.inspect(name)\n        , 'expected #{this} to not have ' + descriptor + _.inspect(name));\n    }\n\n    if (arguments.length > 1) {\n      this.assert(\n          val === value\n        , 'expected #{this} to have a ' + descriptor + _.inspect(name) + ' of #{exp}, but got #{act}'\n        , 'expected #{this} to not have a ' + descriptor + _.inspect(name) + ' of #{act}'\n        , val\n        , value\n      );\n    }\n\n    flag(this, 'object', value);\n  });\n\n\n  /**\n   * ### .ownProperty(name)\n   *\n   * Asserts that the target has an own property `name`.\n   *\n   *     expect('test').to.have.ownProperty('length');\n   *\n   * @name ownProperty\n   * @alias haveOwnProperty\n   * @param {String} name\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertOwnProperty (name, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    this.assert(\n        obj.hasOwnProperty(name)\n      , 'expected #{this} to have own property ' + _.inspect(name)\n      , 'expected #{this} to not have own property ' + _.inspect(name)\n    );\n  }\n\n  Assertion.addMethod('ownProperty', assertOwnProperty);\n  Assertion.addMethod('haveOwnProperty', assertOwnProperty);\n\n  /**\n   * ### .ownPropertyDescriptor(name[, descriptor[, message]])\n   *\n   * Asserts that the target has an own property descriptor `name`, that optionally matches `descriptor`.\n   *\n   *     expect('test').to.have.ownPropertyDescriptor('length');\n   *     expect('test').to.have.ownPropertyDescriptor('length', { enumerable: false, configurable: false, writable: false, value: 4 });\n   *     expect('test').not.to.have.ownPropertyDescriptor('length', { enumerable: false, configurable: false, writable: false, value: 3 });\n   *     expect('test').ownPropertyDescriptor('length').to.have.property('enumerable', false);\n   *     expect('test').ownPropertyDescriptor('length').to.have.keys('value');\n   *\n   * @name ownPropertyDescriptor\n   * @alias haveOwnPropertyDescriptor\n   * @param {String} name\n   * @param {Object} descriptor _optional_\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertOwnPropertyDescriptor (name, descriptor, msg) {\n    if (typeof descriptor === 'string') {\n      msg = descriptor;\n      descriptor = null;\n    }\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    var actualDescriptor = Object.getOwnPropertyDescriptor(Object(obj), name);\n    if (actualDescriptor && descriptor) {\n      this.assert(\n          _.eql(descriptor, actualDescriptor)\n        , 'expected the own property descriptor for ' + _.inspect(name) + ' on #{this} to match ' + _.inspect(descriptor) + ', got ' + _.inspect(actualDescriptor)\n        , 'expected the own property descriptor for ' + _.inspect(name) + ' on #{this} to not match ' + _.inspect(descriptor)\n        , descriptor\n        , actualDescriptor\n        , true\n      );\n    } else {\n      this.assert(\n          actualDescriptor\n        , 'expected #{this} to have an own property descriptor for ' + _.inspect(name)\n        , 'expected #{this} to not have an own property descriptor for ' + _.inspect(name)\n      );\n    }\n    flag(this, 'object', actualDescriptor);\n  }\n\n  Assertion.addMethod('ownPropertyDescriptor', assertOwnPropertyDescriptor);\n  Assertion.addMethod('haveOwnPropertyDescriptor', assertOwnPropertyDescriptor);\n\n  /**\n   * ### .length\n   *\n   * Sets the `doLength` flag later used as a chain precursor to a value\n   * comparison for the `length` property.\n   *\n   *     expect('foo').to.have.length.above(2);\n   *     expect([ 1, 2, 3 ]).to.have.length.above(2);\n   *     expect('foo').to.have.length.below(4);\n   *     expect([ 1, 2, 3 ]).to.have.length.below(4);\n   *     expect('foo').to.have.length.within(2,4);\n   *     expect([ 1, 2, 3 ]).to.have.length.within(2,4);\n   *\n   * *Deprecation notice:* Using `length` as an assertion will be deprecated\n   * in version 2.4.0 and removed in 3.0.0. Code using the old style of\n   * asserting for `length` property value using `length(value)` should be\n   * switched to use `lengthOf(value)` instead.\n   *\n   * @name length\n   * @namespace BDD\n   * @api public\n   */\n\n  /**\n   * ### .lengthOf(value[, message])\n   *\n   * Asserts that the target's `length` property has\n   * the expected value.\n   *\n   *     expect([ 1, 2, 3]).to.have.lengthOf(3);\n   *     expect('foobar').to.have.lengthOf(6);\n   *\n   * @name lengthOf\n   * @param {Number} length\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertLengthChain () {\n    flag(this, 'doLength', true);\n  }\n\n  function assertLength (n, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    new Assertion(obj, msg).to.have.property('length');\n    var len = obj.length;\n\n    this.assert(\n        len == n\n      , 'expected #{this} to have a length of #{exp} but got #{act}'\n      , 'expected #{this} to not have a length of #{act}'\n      , n\n      , len\n    );\n  }\n\n  Assertion.addChainableMethod('length', assertLength, assertLengthChain);\n  Assertion.addMethod('lengthOf', assertLength);\n\n  /**\n   * ### .match(regexp)\n   *\n   * Asserts that the target matches a regular expression.\n   *\n   *     expect('foobar').to.match(/^foo/);\n   *\n   * @name match\n   * @alias matches\n   * @param {RegExp} RegularExpression\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n  function assertMatch(re, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    this.assert(\n        re.exec(obj)\n      , 'expected #{this} to match ' + re\n      , 'expected #{this} not to match ' + re\n    );\n  }\n\n  Assertion.addMethod('match', assertMatch);\n  Assertion.addMethod('matches', assertMatch);\n\n  /**\n   * ### .string(string)\n   *\n   * Asserts that the string target contains another string.\n   *\n   *     expect('foobar').to.have.string('bar');\n   *\n   * @name string\n   * @param {String} string\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addMethod('string', function (str, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    new Assertion(obj, msg).is.a('string');\n\n    this.assert(\n        ~obj.indexOf(str)\n      , 'expected #{this} to contain ' + _.inspect(str)\n      , 'expected #{this} to not contain ' + _.inspect(str)\n    );\n  });\n\n\n  /**\n   * ### .keys(key1, [key2], [...])\n   *\n   * Asserts that the target contains any or all of the passed-in keys.\n   * Use in combination with `any`, `all`, `contains`, or `have` will affect\n   * what will pass.\n   *\n   * When used in conjunction with `any`, at least one key that is passed\n   * in must exist in the target object. This is regardless whether or not\n   * the `have` or `contain` qualifiers are used. Note, either `any` or `all`\n   * should be used in the assertion. If neither are used, the assertion is\n   * defaulted to `all`.\n   *\n   * When both `all` and `contain` are used, the target object must have at\n   * least all of the passed-in keys but may have more keys not listed.\n   *\n   * When both `all` and `have` are used, the target object must both contain\n   * all of the passed-in keys AND the number of keys in the target object must\n   * match the number of keys passed in (in other words, a target object must\n   * have all and only all of the passed-in keys).\n   *\n   *     expect({ foo: 1, bar: 2 }).to.have.any.keys('foo', 'baz');\n   *     expect({ foo: 1, bar: 2 }).to.have.any.keys('foo');\n   *     expect({ foo: 1, bar: 2 }).to.contain.any.keys('bar', 'baz');\n   *     expect({ foo: 1, bar: 2 }).to.contain.any.keys(['foo']);\n   *     expect({ foo: 1, bar: 2 }).to.contain.any.keys({'foo': 6});\n   *     expect({ foo: 1, bar: 2 }).to.have.all.keys(['bar', 'foo']);\n   *     expect({ foo: 1, bar: 2 }).to.have.all.keys({'bar': 6, 'foo': 7});\n   *     expect({ foo: 1, bar: 2, baz: 3 }).to.contain.all.keys(['bar', 'foo']);\n   *     expect({ foo: 1, bar: 2, baz: 3 }).to.contain.all.keys({'bar': 6});\n   *\n   *\n   * @name keys\n   * @alias key\n   * @param {...String|Array|Object} keys\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertKeys (keys) {\n    var obj = flag(this, 'object')\n      , str\n      , ok = true\n      , mixedArgsMsg = 'keys must be given single argument of Array|Object|String, or multiple String arguments';\n\n    switch (_.type(keys)) {\n      case \"array\":\n        if (arguments.length > 1) throw (new Error(mixedArgsMsg));\n        break;\n      case \"object\":\n        if (arguments.length > 1) throw (new Error(mixedArgsMsg));\n        keys = Object.keys(keys);\n        break;\n      default:\n        keys = Array.prototype.slice.call(arguments);\n    }\n\n    if (!keys.length) throw new Error('keys required');\n\n    var actual = Object.keys(obj)\n      , expected = keys\n      , len = keys.length\n      , any = flag(this, 'any')\n      , all = flag(this, 'all');\n\n    if (!any && !all) {\n      all = true;\n    }\n\n    // Has any\n    if (any) {\n      var intersection = expected.filter(function(key) {\n        return ~actual.indexOf(key);\n      });\n      ok = intersection.length > 0;\n    }\n\n    // Has all\n    if (all) {\n      ok = keys.every(function(key){\n        return ~actual.indexOf(key);\n      });\n      if (!flag(this, 'negate') && !flag(this, 'contains')) {\n        ok = ok && keys.length == actual.length;\n      }\n    }\n\n    // Key string\n    if (len > 1) {\n      keys = keys.map(function(key){\n        return _.inspect(key);\n      });\n      var last = keys.pop();\n      if (all) {\n        str = keys.join(', ') + ', and ' + last;\n      }\n      if (any) {\n        str = keys.join(', ') + ', or ' + last;\n      }\n    } else {\n      str = _.inspect(keys[0]);\n    }\n\n    // Form\n    str = (len > 1 ? 'keys ' : 'key ') + str;\n\n    // Have / include\n    str = (flag(this, 'contains') ? 'contain ' : 'have ') + str;\n\n    // Assertion\n    this.assert(\n        ok\n      , 'expected #{this} to ' + str\n      , 'expected #{this} to not ' + str\n      , expected.slice(0).sort()\n      , actual.sort()\n      , true\n    );\n  }\n\n  Assertion.addMethod('keys', assertKeys);\n  Assertion.addMethod('key', assertKeys);\n\n  /**\n   * ### .throw(constructor)\n   *\n   * Asserts that the function target will throw a specific error, or specific type of error\n   * (as determined using `instanceof`), optionally with a RegExp or string inclusion test\n   * for the error's message.\n   *\n   *     var err = new ReferenceError('This is a bad function.');\n   *     var fn = function () { throw err; }\n   *     expect(fn).to.throw(ReferenceError);\n   *     expect(fn).to.throw(Error);\n   *     expect(fn).to.throw(/bad function/);\n   *     expect(fn).to.not.throw('good function');\n   *     expect(fn).to.throw(ReferenceError, /bad function/);\n   *     expect(fn).to.throw(err);\n   *\n   * Please note that when a throw expectation is negated, it will check each\n   * parameter independently, starting with error constructor type. The appropriate way\n   * to check for the existence of a type of error but for a message that does not match\n   * is to use `and`.\n   *\n   *     expect(fn).to.throw(ReferenceError)\n   *        .and.not.throw(/good function/);\n   *\n   * @name throw\n   * @alias throws\n   * @alias Throw\n   * @param {ErrorConstructor} constructor\n   * @param {String|RegExp} expected error message\n   * @param {String} message _optional_\n   * @see https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error#Error_types\n   * @returns error for chaining (null if no error)\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertThrows (constructor, errMsg, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    new Assertion(obj, msg).is.a('function');\n\n    var thrown = false\n      , desiredError = null\n      , name = null\n      , thrownError = null;\n\n    if (arguments.length === 0) {\n      errMsg = null;\n      constructor = null;\n    } else if (constructor && (constructor instanceof RegExp || 'string' === typeof constructor)) {\n      errMsg = constructor;\n      constructor = null;\n    } else if (constructor && constructor instanceof Error) {\n      desiredError = constructor;\n      constructor = null;\n      errMsg = null;\n    } else if (typeof constructor === 'function') {\n      name = constructor.prototype.name;\n      if (!name || (name === 'Error' && constructor !== Error)) {\n        name = constructor.name || (new constructor()).name;\n      }\n    } else {\n      constructor = null;\n    }\n\n    try {\n      obj();\n    } catch (err) {\n      // first, check desired error\n      if (desiredError) {\n        this.assert(\n            err === desiredError\n          , 'expected #{this} to throw #{exp} but #{act} was thrown'\n          , 'expected #{this} to not throw #{exp}'\n          , (desiredError instanceof Error ? desiredError.toString() : desiredError)\n          , (err instanceof Error ? err.toString() : err)\n        );\n\n        flag(this, 'object', err);\n        return this;\n      }\n\n      // next, check constructor\n      if (constructor) {\n        this.assert(\n            err instanceof constructor\n          , 'expected #{this} to throw #{exp} but #{act} was thrown'\n          , 'expected #{this} to not throw #{exp} but #{act} was thrown'\n          , name\n          , (err instanceof Error ? err.toString() : err)\n        );\n\n        if (!errMsg) {\n          flag(this, 'object', err);\n          return this;\n        }\n      }\n\n      // next, check message\n      var message = 'error' === _.type(err) && \"message\" in err\n        ? err.message\n        : '' + err;\n\n      if ((message != null) && errMsg && errMsg instanceof RegExp) {\n        this.assert(\n            errMsg.exec(message)\n          , 'expected #{this} to throw error matching #{exp} but got #{act}'\n          , 'expected #{this} to throw error not matching #{exp}'\n          , errMsg\n          , message\n        );\n\n        flag(this, 'object', err);\n        return this;\n      } else if ((message != null) && errMsg && 'string' === typeof errMsg) {\n        this.assert(\n            ~message.indexOf(errMsg)\n          , 'expected #{this} to throw error including #{exp} but got #{act}'\n          , 'expected #{this} to throw error not including #{act}'\n          , errMsg\n          , message\n        );\n\n        flag(this, 'object', err);\n        return this;\n      } else {\n        thrown = true;\n        thrownError = err;\n      }\n    }\n\n    var actuallyGot = ''\n      , expectedThrown = name !== null\n        ? name\n        : desiredError\n          ? '#{exp}' //_.inspect(desiredError)\n          : 'an error';\n\n    if (thrown) {\n      actuallyGot = ' but #{act} was thrown'\n    }\n\n    this.assert(\n        thrown === true\n      , 'expected #{this} to throw ' + expectedThrown + actuallyGot\n      , 'expected #{this} to not throw ' + expectedThrown + actuallyGot\n      , (desiredError instanceof Error ? desiredError.toString() : desiredError)\n      , (thrownError instanceof Error ? thrownError.toString() : thrownError)\n    );\n\n    flag(this, 'object', thrownError);\n  };\n\n  Assertion.addMethod('throw', assertThrows);\n  Assertion.addMethod('throws', assertThrows);\n  Assertion.addMethod('Throw', assertThrows);\n\n  /**\n   * ### .respondTo(method)\n   *\n   * Asserts that the object or class target will respond to a method.\n   *\n   *     Klass.prototype.bar = function(){};\n   *     expect(Klass).to.respondTo('bar');\n   *     expect(obj).to.respondTo('bar');\n   *\n   * To check if a constructor will respond to a static function,\n   * set the `itself` flag.\n   *\n   *     Klass.baz = function(){};\n   *     expect(Klass).itself.to.respondTo('baz');\n   *\n   * @name respondTo\n   * @alias respondsTo\n   * @param {String} method\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function respondTo (method, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object')\n      , itself = flag(this, 'itself')\n      , context = ('function' === _.type(obj) && !itself)\n        ? obj.prototype[method]\n        : obj[method];\n\n    this.assert(\n        'function' === typeof context\n      , 'expected #{this} to respond to ' + _.inspect(method)\n      , 'expected #{this} to not respond to ' + _.inspect(method)\n    );\n  }\n\n  Assertion.addMethod('respondTo', respondTo);\n  Assertion.addMethod('respondsTo', respondTo);\n\n  /**\n   * ### .itself\n   *\n   * Sets the `itself` flag, later used by the `respondTo` assertion.\n   *\n   *     function Foo() {}\n   *     Foo.bar = function() {}\n   *     Foo.prototype.baz = function() {}\n   *\n   *     expect(Foo).itself.to.respondTo('bar');\n   *     expect(Foo).itself.not.to.respondTo('baz');\n   *\n   * @name itself\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('itself', function () {\n    flag(this, 'itself', true);\n  });\n\n  /**\n   * ### .satisfy(method)\n   *\n   * Asserts that the target passes a given truth test.\n   *\n   *     expect(1).to.satisfy(function(num) { return num > 0; });\n   *\n   * @name satisfy\n   * @alias satisfies\n   * @param {Function} matcher\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function satisfy (matcher, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n    var result = matcher(obj);\n    this.assert(\n        result\n      , 'expected #{this} to satisfy ' + _.objDisplay(matcher)\n      , 'expected #{this} to not satisfy' + _.objDisplay(matcher)\n      , this.negate ? false : true\n      , result\n    );\n  }\n\n  Assertion.addMethod('satisfy', satisfy);\n  Assertion.addMethod('satisfies', satisfy);\n\n  /**\n   * ### .closeTo(expected, delta)\n   *\n   * Asserts that the target is equal `expected`, to within a +/- `delta` range.\n   *\n   *     expect(1.5).to.be.closeTo(1, 0.5);\n   *\n   * @name closeTo\n   * @alias approximately\n   * @param {Number} expected\n   * @param {Number} delta\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function closeTo(expected, delta, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n\n    new Assertion(obj, msg).is.a('number');\n    if (_.type(expected) !== 'number' || _.type(delta) !== 'number') {\n      throw new Error('the arguments to closeTo or approximately must be numbers');\n    }\n\n    this.assert(\n        Math.abs(obj - expected) <= delta\n      , 'expected #{this} to be close to ' + expected + ' +/- ' + delta\n      , 'expected #{this} not to be close to ' + expected + ' +/- ' + delta\n    );\n  }\n\n  Assertion.addMethod('closeTo', closeTo);\n  Assertion.addMethod('approximately', closeTo);\n\n  function isSubsetOf(subset, superset, cmp) {\n    return subset.every(function(elem) {\n      if (!cmp) return superset.indexOf(elem) !== -1;\n\n      return superset.some(function(elem2) {\n        return cmp(elem, elem2);\n      });\n    })\n  }\n\n  /**\n   * ### .members(set)\n   *\n   * Asserts that the target is a superset of `set`,\n   * or that the target and `set` have the same strictly-equal (===) members.\n   * Alternately, if the `deep` flag is set, set members are compared for deep\n   * equality.\n   *\n   *     expect([1, 2, 3]).to.include.members([3, 2]);\n   *     expect([1, 2, 3]).to.not.include.members([3, 2, 8]);\n   *\n   *     expect([4, 2]).to.have.members([2, 4]);\n   *     expect([5, 2]).to.not.have.members([5, 2, 1]);\n   *\n   *     expect([{ id: 1 }]).to.deep.include.members([{ id: 1 }]);\n   *\n   * @name members\n   * @param {Array} set\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addMethod('members', function (subset, msg) {\n    if (msg) flag(this, 'message', msg);\n    var obj = flag(this, 'object');\n\n    new Assertion(obj).to.be.an('array');\n    new Assertion(subset).to.be.an('array');\n\n    var cmp = flag(this, 'deep') ? _.eql : undefined;\n\n    if (flag(this, 'contains')) {\n      return this.assert(\n          isSubsetOf(subset, obj, cmp)\n        , 'expected #{this} to be a superset of #{act}'\n        , 'expected #{this} to not be a superset of #{act}'\n        , obj\n        , subset\n      );\n    }\n\n    this.assert(\n        isSubsetOf(obj, subset, cmp) && isSubsetOf(subset, obj, cmp)\n        , 'expected #{this} to have the same members as #{act}'\n        , 'expected #{this} to not have the same members as #{act}'\n        , obj\n        , subset\n    );\n  });\n\n  /**\n   * ### .oneOf(list)\n   *\n   * Assert that a value appears somewhere in the top level of array `list`.\n   *\n   *     expect('a').to.be.oneOf(['a', 'b', 'c']);\n   *     expect(9).to.not.be.oneOf(['z']);\n   *     expect([3]).to.not.be.oneOf([1, 2, [3]]);\n   *\n   *     var three = [3];\n   *     // for object-types, contents are not compared\n   *     expect(three).to.not.be.oneOf([1, 2, [3]]);\n   *     // comparing references works\n   *     expect(three).to.be.oneOf([1, 2, three]);\n   *\n   * @name oneOf\n   * @param {Array<*>} list\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function oneOf (list, msg) {\n    if (msg) flag(this, 'message', msg);\n    var expected = flag(this, 'object');\n    new Assertion(list).to.be.an('array');\n\n    this.assert(\n        list.indexOf(expected) > -1\n      , 'expected #{this} to be one of #{exp}'\n      , 'expected #{this} to not be one of #{exp}'\n      , list\n      , expected\n    );\n  }\n\n  Assertion.addMethod('oneOf', oneOf);\n\n\n  /**\n   * ### .change(function)\n   *\n   * Asserts that a function changes an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val += 3 };\n   *     var noChangeFn = function() { return 'foo' + 'bar'; }\n   *     expect(fn).to.change(obj, 'val');\n   *     expect(noChangeFn).to.not.change(obj, 'val')\n   *\n   * @name change\n   * @alias changes\n   * @alias Change\n   * @param {String} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertChanges (object, prop, msg) {\n    if (msg) flag(this, 'message', msg);\n    var fn = flag(this, 'object');\n    new Assertion(object, msg).to.have.property(prop);\n    new Assertion(fn).is.a('function');\n\n    var initial = object[prop];\n    fn();\n\n    this.assert(\n      initial !== object[prop]\n      , 'expected .' + prop + ' to change'\n      , 'expected .' + prop + ' to not change'\n    );\n  }\n\n  Assertion.addChainableMethod('change', assertChanges);\n  Assertion.addChainableMethod('changes', assertChanges);\n\n  /**\n   * ### .increase(function)\n   *\n   * Asserts that a function increases an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 15 };\n   *     expect(fn).to.increase(obj, 'val');\n   *\n   * @name increase\n   * @alias increases\n   * @alias Increase\n   * @param {String} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertIncreases (object, prop, msg) {\n    if (msg) flag(this, 'message', msg);\n    var fn = flag(this, 'object');\n    new Assertion(object, msg).to.have.property(prop);\n    new Assertion(fn).is.a('function');\n\n    var initial = object[prop];\n    fn();\n\n    this.assert(\n      object[prop] - initial > 0\n      , 'expected .' + prop + ' to increase'\n      , 'expected .' + prop + ' to not increase'\n    );\n  }\n\n  Assertion.addChainableMethod('increase', assertIncreases);\n  Assertion.addChainableMethod('increases', assertIncreases);\n\n  /**\n   * ### .decrease(function)\n   *\n   * Asserts that a function decreases an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 5 };\n   *     expect(fn).to.decrease(obj, 'val');\n   *\n   * @name decrease\n   * @alias decreases\n   * @alias Decrease\n   * @param {String} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace BDD\n   * @api public\n   */\n\n  function assertDecreases (object, prop, msg) {\n    if (msg) flag(this, 'message', msg);\n    var fn = flag(this, 'object');\n    new Assertion(object, msg).to.have.property(prop);\n    new Assertion(fn).is.a('function');\n\n    var initial = object[prop];\n    fn();\n\n    this.assert(\n      object[prop] - initial < 0\n      , 'expected .' + prop + ' to decrease'\n      , 'expected .' + prop + ' to not decrease'\n    );\n  }\n\n  Assertion.addChainableMethod('decrease', assertDecreases);\n  Assertion.addChainableMethod('decreases', assertDecreases);\n\n  /**\n   * ### .extensible\n   *\n   * Asserts that the target is extensible (can have new properties added to\n   * it).\n   *\n   *     var nonExtensibleObject = Object.preventExtensions({});\n   *     var sealedObject = Object.seal({});\n   *     var frozenObject = Object.freeze({});\n   *\n   *     expect({}).to.be.extensible;\n   *     expect(nonExtensibleObject).to.not.be.extensible;\n   *     expect(sealedObject).to.not.be.extensible;\n   *     expect(frozenObject).to.not.be.extensible;\n   *\n   * @name extensible\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('extensible', function() {\n    var obj = flag(this, 'object');\n\n    // In ES5, if the argument to this method is not an object (a primitive), then it will cause a TypeError.\n    // In ES6, a non-object argument will be treated as if it was a non-extensible ordinary object, simply return false.\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible\n    // The following provides ES6 behavior when a TypeError is thrown under ES5.\n\n    var isExtensible;\n\n    try {\n      isExtensible = Object.isExtensible(obj);\n    } catch (err) {\n      if (err instanceof TypeError) isExtensible = false;\n      else throw err;\n    }\n\n    this.assert(\n      isExtensible\n      , 'expected #{this} to be extensible'\n      , 'expected #{this} to not be extensible'\n    );\n  });\n\n  /**\n   * ### .sealed\n   *\n   * Asserts that the target is sealed (cannot have new properties added to it\n   * and its existing properties cannot be removed).\n   *\n   *     var sealedObject = Object.seal({});\n   *     var frozenObject = Object.freeze({});\n   *\n   *     expect(sealedObject).to.be.sealed;\n   *     expect(frozenObject).to.be.sealed;\n   *     expect({}).to.not.be.sealed;\n   *\n   * @name sealed\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('sealed', function() {\n    var obj = flag(this, 'object');\n\n    // In ES5, if the argument to this method is not an object (a primitive), then it will cause a TypeError.\n    // In ES6, a non-object argument will be treated as if it was a sealed ordinary object, simply return true.\n    // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isSealed\n    // The following provides ES6 behavior when a TypeError is thrown under ES5.\n\n    var isSealed;\n\n    try {\n      isSealed = Object.isSealed(obj);\n    } catch (err) {\n      if (err instanceof TypeError) isSealed = true;\n      else throw err;\n    }\n\n    this.assert(\n      isSealed\n      , 'expected #{this} to be sealed'\n      , 'expected #{this} to not be sealed'\n    );\n  });\n\n  /**\n   * ### .frozen\n   *\n   * Asserts that the target is frozen (cannot have new properties added to it\n   * and its existing properties cannot be modified).\n   *\n   *     var frozenObject = Object.freeze({});\n   *\n   *     expect(frozenObject).to.be.frozen;\n   *     expect({}).to.not.be.frozen;\n   *\n   * @name frozen\n   * @namespace BDD\n   * @api public\n   */\n\n  Assertion.addProperty('frozen', function() {\n    var obj = flag(this, 'object');\n\n    // In ES5, if the argument to this method is not an object (a primitive), then it will cause a TypeError.\n    // In ES6, a non-object argument will be treated as if it was a frozen ordinary object, simply return true.\n    // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isFrozen\n    // The following provides ES6 behavior when a TypeError is thrown under ES5.\n\n    var isFrozen;\n\n    try {\n      isFrozen = Object.isFrozen(obj);\n    } catch (err) {\n      if (err instanceof TypeError) isFrozen = true;\n      else throw err;\n    }\n\n    this.assert(\n      isFrozen\n      , 'expected #{this} to be frozen'\n      , 'expected #{this} to not be frozen'\n    );\n  });\n};\n","/*!\n * chai\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n\nmodule.exports = function (chai, util) {\n\n  /*!\n   * Chai dependencies.\n   */\n\n  var Assertion = chai.Assertion\n    , flag = util.flag;\n\n  /*!\n   * Module export.\n   */\n\n  /**\n   * ### assert(expression, message)\n   *\n   * Write your own test expressions.\n   *\n   *     assert('foo' !== 'bar', 'foo is not bar');\n   *     assert(Array.isArray([]), 'empty arrays are arrays');\n   *\n   * @param {Mixed} expression to test for truthiness\n   * @param {String} message to display on error\n   * @name assert\n   * @namespace Assert\n   * @api public\n   */\n\n  var assert = chai.assert = function (express, errmsg) {\n    var test = new Assertion(null, null, chai.assert);\n    test.assert(\n        express\n      , errmsg\n      , '[ negation message unavailable ]'\n    );\n  };\n\n  /**\n   * ### .fail(actual, expected, [message], [operator])\n   *\n   * Throw a failure. Node.js `assert` module-compatible.\n   *\n   * @name fail\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @param {String} operator\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.fail = function (actual, expected, message, operator) {\n    message = message || 'assert.fail()';\n    throw new chai.AssertionError(message, {\n        actual: actual\n      , expected: expected\n      , operator: operator\n    }, assert.fail);\n  };\n\n  /**\n   * ### .isOk(object, [message])\n   *\n   * Asserts that `object` is truthy.\n   *\n   *     assert.isOk('everything', 'everything is ok');\n   *     assert.isOk(false, 'this will fail');\n   *\n   * @name isOk\n   * @alias ok\n   * @param {Mixed} object to test\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isOk = function (val, msg) {\n    new Assertion(val, msg).is.ok;\n  };\n\n  /**\n   * ### .isNotOk(object, [message])\n   *\n   * Asserts that `object` is falsy.\n   *\n   *     assert.isNotOk('everything', 'this will fail');\n   *     assert.isNotOk(false, 'this will pass');\n   *\n   * @name isNotOk\n   * @alias notOk\n   * @param {Mixed} object to test\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotOk = function (val, msg) {\n    new Assertion(val, msg).is.not.ok;\n  };\n\n  /**\n   * ### .equal(actual, expected, [message])\n   *\n   * Asserts non-strict equality (`==`) of `actual` and `expected`.\n   *\n   *     assert.equal(3, '3', '== coerces values to strings');\n   *\n   * @name equal\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.equal = function (act, exp, msg) {\n    var test = new Assertion(act, msg, assert.equal);\n\n    test.assert(\n        exp == flag(test, 'object')\n      , 'expected #{this} to equal #{exp}'\n      , 'expected #{this} to not equal #{act}'\n      , exp\n      , act\n    );\n  };\n\n  /**\n   * ### .notEqual(actual, expected, [message])\n   *\n   * Asserts non-strict inequality (`!=`) of `actual` and `expected`.\n   *\n   *     assert.notEqual(3, 4, 'these numbers are not equal');\n   *\n   * @name notEqual\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notEqual = function (act, exp, msg) {\n    var test = new Assertion(act, msg, assert.notEqual);\n\n    test.assert(\n        exp != flag(test, 'object')\n      , 'expected #{this} to not equal #{exp}'\n      , 'expected #{this} to equal #{act}'\n      , exp\n      , act\n    );\n  };\n\n  /**\n   * ### .strictEqual(actual, expected, [message])\n   *\n   * Asserts strict equality (`===`) of `actual` and `expected`.\n   *\n   *     assert.strictEqual(true, true, 'these booleans are strictly equal');\n   *\n   * @name strictEqual\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.strictEqual = function (act, exp, msg) {\n    new Assertion(act, msg).to.equal(exp);\n  };\n\n  /**\n   * ### .notStrictEqual(actual, expected, [message])\n   *\n   * Asserts strict inequality (`!==`) of `actual` and `expected`.\n   *\n   *     assert.notStrictEqual(3, '3', 'no coercion for strict equality');\n   *\n   * @name notStrictEqual\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notStrictEqual = function (act, exp, msg) {\n    new Assertion(act, msg).to.not.equal(exp);\n  };\n\n  /**\n   * ### .deepEqual(actual, expected, [message])\n   *\n   * Asserts that `actual` is deeply equal to `expected`.\n   *\n   *     assert.deepEqual({ tea: 'green' }, { tea: 'green' });\n   *\n   * @name deepEqual\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.deepEqual = function (act, exp, msg) {\n    new Assertion(act, msg).to.eql(exp);\n  };\n\n  /**\n   * ### .notDeepEqual(actual, expected, [message])\n   *\n   * Assert that `actual` is not deeply equal to `expected`.\n   *\n   *     assert.notDeepEqual({ tea: 'green' }, { tea: 'jasmine' });\n   *\n   * @name notDeepEqual\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notDeepEqual = function (act, exp, msg) {\n    new Assertion(act, msg).to.not.eql(exp);\n  };\n\n   /**\n   * ### .isAbove(valueToCheck, valueToBeAbove, [message])\n   *\n   * Asserts `valueToCheck` is strictly greater than (>) `valueToBeAbove`\n   *\n   *     assert.isAbove(5, 2, '5 is strictly greater than 2');\n   *\n   * @name isAbove\n   * @param {Mixed} valueToCheck\n   * @param {Mixed} valueToBeAbove\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isAbove = function (val, abv, msg) {\n    new Assertion(val, msg).to.be.above(abv);\n  };\n\n   /**\n   * ### .isAtLeast(valueToCheck, valueToBeAtLeast, [message])\n   *\n   * Asserts `valueToCheck` is greater than or equal to (>=) `valueToBeAtLeast`\n   *\n   *     assert.isAtLeast(5, 2, '5 is greater or equal to 2');\n   *     assert.isAtLeast(3, 3, '3 is greater or equal to 3');\n   *\n   * @name isAtLeast\n   * @param {Mixed} valueToCheck\n   * @param {Mixed} valueToBeAtLeast\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isAtLeast = function (val, atlst, msg) {\n    new Assertion(val, msg).to.be.least(atlst);\n  };\n\n   /**\n   * ### .isBelow(valueToCheck, valueToBeBelow, [message])\n   *\n   * Asserts `valueToCheck` is strictly less than (<) `valueToBeBelow`\n   *\n   *     assert.isBelow(3, 6, '3 is strictly less than 6');\n   *\n   * @name isBelow\n   * @param {Mixed} valueToCheck\n   * @param {Mixed} valueToBeBelow\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isBelow = function (val, blw, msg) {\n    new Assertion(val, msg).to.be.below(blw);\n  };\n\n   /**\n   * ### .isAtMost(valueToCheck, valueToBeAtMost, [message])\n   *\n   * Asserts `valueToCheck` is less than or equal to (<=) `valueToBeAtMost`\n   *\n   *     assert.isAtMost(3, 6, '3 is less than or equal to 6');\n   *     assert.isAtMost(4, 4, '4 is less than or equal to 4');\n   *\n   * @name isAtMost\n   * @param {Mixed} valueToCheck\n   * @param {Mixed} valueToBeAtMost\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isAtMost = function (val, atmst, msg) {\n    new Assertion(val, msg).to.be.most(atmst);\n  };\n\n  /**\n   * ### .isTrue(value, [message])\n   *\n   * Asserts that `value` is true.\n   *\n   *     var teaServed = true;\n   *     assert.isTrue(teaServed, 'the tea has been served');\n   *\n   * @name isTrue\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isTrue = function (val, msg) {\n    new Assertion(val, msg).is['true'];\n  };\n\n  /**\n   * ### .isNotTrue(value, [message])\n   *\n   * Asserts that `value` is not true.\n   *\n   *     var tea = 'tasty chai';\n   *     assert.isNotTrue(tea, 'great, time for tea!');\n   *\n   * @name isNotTrue\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotTrue = function (val, msg) {\n    new Assertion(val, msg).to.not.equal(true);\n  };\n\n  /**\n   * ### .isFalse(value, [message])\n   *\n   * Asserts that `value` is false.\n   *\n   *     var teaServed = false;\n   *     assert.isFalse(teaServed, 'no tea yet? hmm...');\n   *\n   * @name isFalse\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isFalse = function (val, msg) {\n    new Assertion(val, msg).is['false'];\n  };\n\n  /**\n   * ### .isNotFalse(value, [message])\n   *\n   * Asserts that `value` is not false.\n   *\n   *     var tea = 'tasty chai';\n   *     assert.isNotFalse(tea, 'great, time for tea!');\n   *\n   * @name isNotFalse\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotFalse = function (val, msg) {\n    new Assertion(val, msg).to.not.equal(false);\n  };\n\n  /**\n   * ### .isNull(value, [message])\n   *\n   * Asserts that `value` is null.\n   *\n   *     assert.isNull(err, 'there was no error');\n   *\n   * @name isNull\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNull = function (val, msg) {\n    new Assertion(val, msg).to.equal(null);\n  };\n\n  /**\n   * ### .isNotNull(value, [message])\n   *\n   * Asserts that `value` is not null.\n   *\n   *     var tea = 'tasty chai';\n   *     assert.isNotNull(tea, 'great, time for tea!');\n   *\n   * @name isNotNull\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotNull = function (val, msg) {\n    new Assertion(val, msg).to.not.equal(null);\n  };\n\n  /**\n   * ### .isNaN\n   * Asserts that value is NaN\n   *\n   *    assert.isNaN('foo', 'foo is NaN');\n   *\n   * @name isNaN\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNaN = function (val, msg) {\n    new Assertion(val, msg).to.be.NaN;\n  };\n\n  /**\n   * ### .isNotNaN\n   * Asserts that value is not NaN\n   *\n   *    assert.isNotNaN(4, '4 is not NaN');\n   *\n   * @name isNotNaN\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n  assert.isNotNaN = function (val, msg) {\n    new Assertion(val, msg).not.to.be.NaN;\n  };\n\n  /**\n   * ### .isUndefined(value, [message])\n   *\n   * Asserts that `value` is `undefined`.\n   *\n   *     var tea;\n   *     assert.isUndefined(tea, 'no tea defined');\n   *\n   * @name isUndefined\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isUndefined = function (val, msg) {\n    new Assertion(val, msg).to.equal(undefined);\n  };\n\n  /**\n   * ### .isDefined(value, [message])\n   *\n   * Asserts that `value` is not `undefined`.\n   *\n   *     var tea = 'cup of chai';\n   *     assert.isDefined(tea, 'tea has been defined');\n   *\n   * @name isDefined\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isDefined = function (val, msg) {\n    new Assertion(val, msg).to.not.equal(undefined);\n  };\n\n  /**\n   * ### .isFunction(value, [message])\n   *\n   * Asserts that `value` is a function.\n   *\n   *     function serveTea() { return 'cup of tea'; };\n   *     assert.isFunction(serveTea, 'great, we can have tea now');\n   *\n   * @name isFunction\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isFunction = function (val, msg) {\n    new Assertion(val, msg).to.be.a('function');\n  };\n\n  /**\n   * ### .isNotFunction(value, [message])\n   *\n   * Asserts that `value` is _not_ a function.\n   *\n   *     var serveTea = [ 'heat', 'pour', 'sip' ];\n   *     assert.isNotFunction(serveTea, 'great, we have listed the steps');\n   *\n   * @name isNotFunction\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotFunction = function (val, msg) {\n    new Assertion(val, msg).to.not.be.a('function');\n  };\n\n  /**\n   * ### .isObject(value, [message])\n   *\n   * Asserts that `value` is an object of type 'Object' (as revealed by `Object.prototype.toString`).\n   * _The assertion does not match subclassed objects._\n   *\n   *     var selection = { name: 'Chai', serve: 'with spices' };\n   *     assert.isObject(selection, 'tea selection is an object');\n   *\n   * @name isObject\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isObject = function (val, msg) {\n    new Assertion(val, msg).to.be.a('object');\n  };\n\n  /**\n   * ### .isNotObject(value, [message])\n   *\n   * Asserts that `value` is _not_ an object of type 'Object' (as revealed by `Object.prototype.toString`).\n   *\n   *     var selection = 'chai'\n   *     assert.isNotObject(selection, 'tea selection is not an object');\n   *     assert.isNotObject(null, 'null is not an object');\n   *\n   * @name isNotObject\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotObject = function (val, msg) {\n    new Assertion(val, msg).to.not.be.a('object');\n  };\n\n  /**\n   * ### .isArray(value, [message])\n   *\n   * Asserts that `value` is an array.\n   *\n   *     var menu = [ 'green', 'chai', 'oolong' ];\n   *     assert.isArray(menu, 'what kind of tea do we want?');\n   *\n   * @name isArray\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isArray = function (val, msg) {\n    new Assertion(val, msg).to.be.an('array');\n  };\n\n  /**\n   * ### .isNotArray(value, [message])\n   *\n   * Asserts that `value` is _not_ an array.\n   *\n   *     var menu = 'green|chai|oolong';\n   *     assert.isNotArray(menu, 'what kind of tea do we want?');\n   *\n   * @name isNotArray\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotArray = function (val, msg) {\n    new Assertion(val, msg).to.not.be.an('array');\n  };\n\n  /**\n   * ### .isString(value, [message])\n   *\n   * Asserts that `value` is a string.\n   *\n   *     var teaOrder = 'chai';\n   *     assert.isString(teaOrder, 'order placed');\n   *\n   * @name isString\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isString = function (val, msg) {\n    new Assertion(val, msg).to.be.a('string');\n  };\n\n  /**\n   * ### .isNotString(value, [message])\n   *\n   * Asserts that `value` is _not_ a string.\n   *\n   *     var teaOrder = 4;\n   *     assert.isNotString(teaOrder, 'order placed');\n   *\n   * @name isNotString\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotString = function (val, msg) {\n    new Assertion(val, msg).to.not.be.a('string');\n  };\n\n  /**\n   * ### .isNumber(value, [message])\n   *\n   * Asserts that `value` is a number.\n   *\n   *     var cups = 2;\n   *     assert.isNumber(cups, 'how many cups');\n   *\n   * @name isNumber\n   * @param {Number} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNumber = function (val, msg) {\n    new Assertion(val, msg).to.be.a('number');\n  };\n\n  /**\n   * ### .isNotNumber(value, [message])\n   *\n   * Asserts that `value` is _not_ a number.\n   *\n   *     var cups = '2 cups please';\n   *     assert.isNotNumber(cups, 'how many cups');\n   *\n   * @name isNotNumber\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotNumber = function (val, msg) {\n    new Assertion(val, msg).to.not.be.a('number');\n  };\n\n  /**\n   * ### .isBoolean(value, [message])\n   *\n   * Asserts that `value` is a boolean.\n   *\n   *     var teaReady = true\n   *       , teaServed = false;\n   *\n   *     assert.isBoolean(teaReady, 'is the tea ready');\n   *     assert.isBoolean(teaServed, 'has tea been served');\n   *\n   * @name isBoolean\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isBoolean = function (val, msg) {\n    new Assertion(val, msg).to.be.a('boolean');\n  };\n\n  /**\n   * ### .isNotBoolean(value, [message])\n   *\n   * Asserts that `value` is _not_ a boolean.\n   *\n   *     var teaReady = 'yep'\n   *       , teaServed = 'nope';\n   *\n   *     assert.isNotBoolean(teaReady, 'is the tea ready');\n   *     assert.isNotBoolean(teaServed, 'has tea been served');\n   *\n   * @name isNotBoolean\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotBoolean = function (val, msg) {\n    new Assertion(val, msg).to.not.be.a('boolean');\n  };\n\n  /**\n   * ### .typeOf(value, name, [message])\n   *\n   * Asserts that `value`'s type is `name`, as determined by\n   * `Object.prototype.toString`.\n   *\n   *     assert.typeOf({ tea: 'chai' }, 'object', 'we have an object');\n   *     assert.typeOf(['chai', 'jasmine'], 'array', 'we have an array');\n   *     assert.typeOf('tea', 'string', 'we have a string');\n   *     assert.typeOf(/tea/, 'regexp', 'we have a regular expression');\n   *     assert.typeOf(null, 'null', 'we have a null');\n   *     assert.typeOf(undefined, 'undefined', 'we have an undefined');\n   *\n   * @name typeOf\n   * @param {Mixed} value\n   * @param {String} name\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.typeOf = function (val, type, msg) {\n    new Assertion(val, msg).to.be.a(type);\n  };\n\n  /**\n   * ### .notTypeOf(value, name, [message])\n   *\n   * Asserts that `value`'s type is _not_ `name`, as determined by\n   * `Object.prototype.toString`.\n   *\n   *     assert.notTypeOf('tea', 'number', 'strings are not numbers');\n   *\n   * @name notTypeOf\n   * @param {Mixed} value\n   * @param {String} typeof name\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notTypeOf = function (val, type, msg) {\n    new Assertion(val, msg).to.not.be.a(type);\n  };\n\n  /**\n   * ### .instanceOf(object, constructor, [message])\n   *\n   * Asserts that `value` is an instance of `constructor`.\n   *\n   *     var Tea = function (name) { this.name = name; }\n   *       , chai = new Tea('chai');\n   *\n   *     assert.instanceOf(chai, Tea, 'chai is an instance of tea');\n   *\n   * @name instanceOf\n   * @param {Object} object\n   * @param {Constructor} constructor\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.instanceOf = function (val, type, msg) {\n    new Assertion(val, msg).to.be.instanceOf(type);\n  };\n\n  /**\n   * ### .notInstanceOf(object, constructor, [message])\n   *\n   * Asserts `value` is not an instance of `constructor`.\n   *\n   *     var Tea = function (name) { this.name = name; }\n   *       , chai = new String('chai');\n   *\n   *     assert.notInstanceOf(chai, Tea, 'chai is not an instance of tea');\n   *\n   * @name notInstanceOf\n   * @param {Object} object\n   * @param {Constructor} constructor\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notInstanceOf = function (val, type, msg) {\n    new Assertion(val, msg).to.not.be.instanceOf(type);\n  };\n\n  /**\n   * ### .include(haystack, needle, [message])\n   *\n   * Asserts that `haystack` includes `needle`. Works\n   * for strings and arrays.\n   *\n   *     assert.include('foobar', 'bar', 'foobar contains string \"bar\"');\n   *     assert.include([ 1, 2, 3 ], 3, 'array contains value');\n   *\n   * @name include\n   * @param {Array|String} haystack\n   * @param {Mixed} needle\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.include = function (exp, inc, msg) {\n    new Assertion(exp, msg, assert.include).include(inc);\n  };\n\n  /**\n   * ### .notInclude(haystack, needle, [message])\n   *\n   * Asserts that `haystack` does not include `needle`. Works\n   * for strings and arrays.\n   *\n   *     assert.notInclude('foobar', 'baz', 'string not include substring');\n   *     assert.notInclude([ 1, 2, 3 ], 4, 'array not include contain value');\n   *\n   * @name notInclude\n   * @param {Array|String} haystack\n   * @param {Mixed} needle\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notInclude = function (exp, inc, msg) {\n    new Assertion(exp, msg, assert.notInclude).not.include(inc);\n  };\n\n  /**\n   * ### .match(value, regexp, [message])\n   *\n   * Asserts that `value` matches the regular expression `regexp`.\n   *\n   *     assert.match('foobar', /^foo/, 'regexp matches');\n   *\n   * @name match\n   * @param {Mixed} value\n   * @param {RegExp} regexp\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.match = function (exp, re, msg) {\n    new Assertion(exp, msg).to.match(re);\n  };\n\n  /**\n   * ### .notMatch(value, regexp, [message])\n   *\n   * Asserts that `value` does not match the regular expression `regexp`.\n   *\n   *     assert.notMatch('foobar', /^foo/, 'regexp does not match');\n   *\n   * @name notMatch\n   * @param {Mixed} value\n   * @param {RegExp} regexp\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notMatch = function (exp, re, msg) {\n    new Assertion(exp, msg).to.not.match(re);\n  };\n\n  /**\n   * ### .property(object, property, [message])\n   *\n   * Asserts that `object` has a property named by `property`.\n   *\n   *     assert.property({ tea: { green: 'matcha' }}, 'tea');\n   *\n   * @name property\n   * @param {Object} object\n   * @param {String} property\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.property = function (obj, prop, msg) {\n    new Assertion(obj, msg).to.have.property(prop);\n  };\n\n  /**\n   * ### .notProperty(object, property, [message])\n   *\n   * Asserts that `object` does _not_ have a property named by `property`.\n   *\n   *     assert.notProperty({ tea: { green: 'matcha' }}, 'coffee');\n   *\n   * @name notProperty\n   * @param {Object} object\n   * @param {String} property\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notProperty = function (obj, prop, msg) {\n    new Assertion(obj, msg).to.not.have.property(prop);\n  };\n\n  /**\n   * ### .deepProperty(object, property, [message])\n   *\n   * Asserts that `object` has a property named by `property`, which can be a\n   * string using dot- and bracket-notation for deep reference.\n   *\n   *     assert.deepProperty({ tea: { green: 'matcha' }}, 'tea.green');\n   *\n   * @name deepProperty\n   * @param {Object} object\n   * @param {String} property\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.deepProperty = function (obj, prop, msg) {\n    new Assertion(obj, msg).to.have.deep.property(prop);\n  };\n\n  /**\n   * ### .notDeepProperty(object, property, [message])\n   *\n   * Asserts that `object` does _not_ have a property named by `property`, which\n   * can be a string using dot- and bracket-notation for deep reference.\n   *\n   *     assert.notDeepProperty({ tea: { green: 'matcha' }}, 'tea.oolong');\n   *\n   * @name notDeepProperty\n   * @param {Object} object\n   * @param {String} property\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.notDeepProperty = function (obj, prop, msg) {\n    new Assertion(obj, msg).to.not.have.deep.property(prop);\n  };\n\n  /**\n   * ### .propertyVal(object, property, value, [message])\n   *\n   * Asserts that `object` has a property named by `property` with value given\n   * by `value`.\n   *\n   *     assert.propertyVal({ tea: 'is good' }, 'tea', 'is good');\n   *\n   * @name propertyVal\n   * @param {Object} object\n   * @param {String} property\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.propertyVal = function (obj, prop, val, msg) {\n    new Assertion(obj, msg).to.have.property(prop, val);\n  };\n\n  /**\n   * ### .propertyNotVal(object, property, value, [message])\n   *\n   * Asserts that `object` has a property named by `property`, but with a value\n   * different from that given by `value`.\n   *\n   *     assert.propertyNotVal({ tea: 'is good' }, 'tea', 'is bad');\n   *\n   * @name propertyNotVal\n   * @param {Object} object\n   * @param {String} property\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.propertyNotVal = function (obj, prop, val, msg) {\n    new Assertion(obj, msg).to.not.have.property(prop, val);\n  };\n\n  /**\n   * ### .deepPropertyVal(object, property, value, [message])\n   *\n   * Asserts that `object` has a property named by `property` with value given\n   * by `value`. `property` can use dot- and bracket-notation for deep\n   * reference.\n   *\n   *     assert.deepPropertyVal({ tea: { green: 'matcha' }}, 'tea.green', 'matcha');\n   *\n   * @name deepPropertyVal\n   * @param {Object} object\n   * @param {String} property\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.deepPropertyVal = function (obj, prop, val, msg) {\n    new Assertion(obj, msg).to.have.deep.property(prop, val);\n  };\n\n  /**\n   * ### .deepPropertyNotVal(object, property, value, [message])\n   *\n   * Asserts that `object` has a property named by `property`, but with a value\n   * different from that given by `value`. `property` can use dot- and\n   * bracket-notation for deep reference.\n   *\n   *     assert.deepPropertyNotVal({ tea: { green: 'matcha' }}, 'tea.green', 'konacha');\n   *\n   * @name deepPropertyNotVal\n   * @param {Object} object\n   * @param {String} property\n   * @param {Mixed} value\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.deepPropertyNotVal = function (obj, prop, val, msg) {\n    new Assertion(obj, msg).to.not.have.deep.property(prop, val);\n  };\n\n  /**\n   * ### .lengthOf(object, length, [message])\n   *\n   * Asserts that `object` has a `length` property with the expected value.\n   *\n   *     assert.lengthOf([1,2,3], 3, 'array has length of 3');\n   *     assert.lengthOf('foobar', 6, 'string has length of 6');\n   *\n   * @name lengthOf\n   * @param {Mixed} object\n   * @param {Number} length\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.lengthOf = function (exp, len, msg) {\n    new Assertion(exp, msg).to.have.length(len);\n  };\n\n  /**\n   * ### .throws(function, [constructor/string/regexp], [string/regexp], [message])\n   *\n   * Asserts that `function` will throw an error that is an instance of\n   * `constructor`, or alternately that it will throw an error with message\n   * matching `regexp`.\n   *\n   *     assert.throws(fn, 'function throws a reference error');\n   *     assert.throws(fn, /function throws a reference error/);\n   *     assert.throws(fn, ReferenceError);\n   *     assert.throws(fn, ReferenceError, 'function throws a reference error');\n   *     assert.throws(fn, ReferenceError, /function throws a reference error/);\n   *\n   * @name throws\n   * @alias throw\n   * @alias Throw\n   * @param {Function} function\n   * @param {ErrorConstructor} constructor\n   * @param {RegExp} regexp\n   * @param {String} message\n   * @see https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error#Error_types\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.throws = function (fn, errt, errs, msg) {\n    if ('string' === typeof errt || errt instanceof RegExp) {\n      errs = errt;\n      errt = null;\n    }\n\n    var assertErr = new Assertion(fn, msg).to.throw(errt, errs);\n    return flag(assertErr, 'object');\n  };\n\n  /**\n   * ### .doesNotThrow(function, [constructor/regexp], [message])\n   *\n   * Asserts that `function` will _not_ throw an error that is an instance of\n   * `constructor`, or alternately that it will not throw an error with message\n   * matching `regexp`.\n   *\n   *     assert.doesNotThrow(fn, Error, 'function does not throw');\n   *\n   * @name doesNotThrow\n   * @param {Function} function\n   * @param {ErrorConstructor} constructor\n   * @param {RegExp} regexp\n   * @param {String} message\n   * @see https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error#Error_types\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.doesNotThrow = function (fn, type, msg) {\n    if ('string' === typeof type) {\n      msg = type;\n      type = null;\n    }\n\n    new Assertion(fn, msg).to.not.Throw(type);\n  };\n\n  /**\n   * ### .operator(val1, operator, val2, [message])\n   *\n   * Compares two values using `operator`.\n   *\n   *     assert.operator(1, '<', 2, 'everything is ok');\n   *     assert.operator(1, '>', 2, 'this will fail');\n   *\n   * @name operator\n   * @param {Mixed} val1\n   * @param {String} operator\n   * @param {Mixed} val2\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.operator = function (val, operator, val2, msg) {\n    var ok;\n    switch(operator) {\n      case '==':\n        ok = val == val2;\n        break;\n      case '===':\n        ok = val === val2;\n        break;\n      case '>':\n        ok = val > val2;\n        break;\n      case '>=':\n        ok = val >= val2;\n        break;\n      case '<':\n        ok = val < val2;\n        break;\n      case '<=':\n        ok = val <= val2;\n        break;\n      case '!=':\n        ok = val != val2;\n        break;\n      case '!==':\n        ok = val !== val2;\n        break;\n      default:\n        throw new Error('Invalid operator \"' + operator + '\"');\n    }\n    var test = new Assertion(ok, msg);\n    test.assert(\n        true === flag(test, 'object')\n      , 'expected ' + util.inspect(val) + ' to be ' + operator + ' ' + util.inspect(val2)\n      , 'expected ' + util.inspect(val) + ' to not be ' + operator + ' ' + util.inspect(val2) );\n  };\n\n  /**\n   * ### .closeTo(actual, expected, delta, [message])\n   *\n   * Asserts that the target is equal `expected`, to within a +/- `delta` range.\n   *\n   *     assert.closeTo(1.5, 1, 0.5, 'numbers are close');\n   *\n   * @name closeTo\n   * @param {Number} actual\n   * @param {Number} expected\n   * @param {Number} delta\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.closeTo = function (act, exp, delta, msg) {\n    new Assertion(act, msg).to.be.closeTo(exp, delta);\n  };\n\n  /**\n   * ### .approximately(actual, expected, delta, [message])\n   *\n   * Asserts that the target is equal `expected`, to within a +/- `delta` range.\n   *\n   *     assert.approximately(1.5, 1, 0.5, 'numbers are close');\n   *\n   * @name approximately\n   * @param {Number} actual\n   * @param {Number} expected\n   * @param {Number} delta\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.approximately = function (act, exp, delta, msg) {\n    new Assertion(act, msg).to.be.approximately(exp, delta);\n  };\n\n  /**\n   * ### .sameMembers(set1, set2, [message])\n   *\n   * Asserts that `set1` and `set2` have the same members.\n   * Order is not taken into account.\n   *\n   *     assert.sameMembers([ 1, 2, 3 ], [ 2, 1, 3 ], 'same members');\n   *\n   * @name sameMembers\n   * @param {Array} set1\n   * @param {Array} set2\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.sameMembers = function (set1, set2, msg) {\n    new Assertion(set1, msg).to.have.same.members(set2);\n  }\n\n  /**\n   * ### .sameDeepMembers(set1, set2, [message])\n   *\n   * Asserts that `set1` and `set2` have the same members - using a deep equality checking.\n   * Order is not taken into account.\n   *\n   *     assert.sameDeepMembers([ {b: 3}, {a: 2}, {c: 5} ], [ {c: 5}, {b: 3}, {a: 2} ], 'same deep members');\n   *\n   * @name sameDeepMembers\n   * @param {Array} set1\n   * @param {Array} set2\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.sameDeepMembers = function (set1, set2, msg) {\n    new Assertion(set1, msg).to.have.same.deep.members(set2);\n  }\n\n  /**\n   * ### .includeMembers(superset, subset, [message])\n   *\n   * Asserts that `subset` is included in `superset`.\n   * Order is not taken into account.\n   *\n   *     assert.includeMembers([ 1, 2, 3 ], [ 2, 1 ], 'include members');\n   *\n   * @name includeMembers\n   * @param {Array} superset\n   * @param {Array} subset\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.includeMembers = function (superset, subset, msg) {\n    new Assertion(superset, msg).to.include.members(subset);\n  }\n\n  /**\n   * ### .includeDeepMembers(superset, subset, [message])\n   *\n   * Asserts that `subset` is included in `superset` - using deep equality checking.\n   * Order is not taken into account.\n   * Duplicates are ignored.\n   *\n   *     assert.includeDeepMembers([ {a: 1}, {b: 2}, {c: 3} ], [ {b: 2}, {a: 1}, {b: 2} ], 'include deep members');\n   *\n   * @name includeDeepMembers\n   * @param {Array} superset\n   * @param {Array} subset\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.includeDeepMembers = function (superset, subset, msg) {\n    new Assertion(superset, msg).to.include.deep.members(subset);\n  }\n\n  /**\n   * ### .oneOf(inList, list, [message])\n   *\n   * Asserts that non-object, non-array value `inList` appears in the flat array `list`.\n   *\n   *     assert.oneOf(1, [ 2, 1 ], 'Not found in list');\n   *\n   * @name oneOf\n   * @param {*} inList\n   * @param {Array<*>} list\n   * @param {String} message\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.oneOf = function (inList, list, msg) {\n    new Assertion(inList, msg).to.be.oneOf(list);\n  }\n\n   /**\n   * ### .changes(function, object, property)\n   *\n   * Asserts that a function changes the value of a property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 22 };\n   *     assert.changes(fn, obj, 'val');\n   *\n   * @name changes\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.changes = function (fn, obj, prop) {\n    new Assertion(fn).to.change(obj, prop);\n  }\n\n   /**\n   * ### .doesNotChange(function, object, property)\n   *\n   * Asserts that a function does not changes the value of a property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { console.log('foo'); };\n   *     assert.doesNotChange(fn, obj, 'val');\n   *\n   * @name doesNotChange\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.doesNotChange = function (fn, obj, prop) {\n    new Assertion(fn).to.not.change(obj, prop);\n  }\n\n   /**\n   * ### .increases(function, object, property)\n   *\n   * Asserts that a function increases an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 13 };\n   *     assert.increases(fn, obj, 'val');\n   *\n   * @name increases\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.increases = function (fn, obj, prop) {\n    new Assertion(fn).to.increase(obj, prop);\n  }\n\n   /**\n   * ### .doesNotIncrease(function, object, property)\n   *\n   * Asserts that a function does not increase object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 8 };\n   *     assert.doesNotIncrease(fn, obj, 'val');\n   *\n   * @name doesNotIncrease\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.doesNotIncrease = function (fn, obj, prop) {\n    new Assertion(fn).to.not.increase(obj, prop);\n  }\n\n   /**\n   * ### .decreases(function, object, property)\n   *\n   * Asserts that a function decreases an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 5 };\n   *     assert.decreases(fn, obj, 'val');\n   *\n   * @name decreases\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.decreases = function (fn, obj, prop) {\n    new Assertion(fn).to.decrease(obj, prop);\n  }\n\n   /**\n   * ### .doesNotDecrease(function, object, property)\n   *\n   * Asserts that a function does not decreases an object property\n   *\n   *     var obj = { val: 10 };\n   *     var fn = function() { obj.val = 15 };\n   *     assert.doesNotDecrease(fn, obj, 'val');\n   *\n   * @name doesNotDecrease\n   * @param {Function} modifier function\n   * @param {Object} object\n   * @param {String} property name\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.doesNotDecrease = function (fn, obj, prop) {\n    new Assertion(fn).to.not.decrease(obj, prop);\n  }\n\n  /*!\n   * ### .ifError(object)\n   *\n   * Asserts if value is not a false value, and throws if it is a true value.\n   * This is added to allow for chai to be a drop-in replacement for Node's\n   * assert class.\n   *\n   *     var err = new Error('I am a custom error');\n   *     assert.ifError(err); // Rethrows err!\n   *\n   * @name ifError\n   * @param {Object} object\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.ifError = function (val) {\n    if (val) {\n      throw(val);\n    }\n  };\n\n  /**\n   * ### .isExtensible(object)\n   *\n   * Asserts that `object` is extensible (can have new properties added to it).\n   *\n   *     assert.isExtensible({});\n   *\n   * @name isExtensible\n   * @alias extensible\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isExtensible = function (obj, msg) {\n    new Assertion(obj, msg).to.be.extensible;\n  };\n\n  /**\n   * ### .isNotExtensible(object)\n   *\n   * Asserts that `object` is _not_ extensible.\n   *\n   *     var nonExtensibleObject = Object.preventExtensions({});\n   *     var sealedObject = Object.seal({});\n   *     var frozenObject = Object.freese({});\n   *\n   *     assert.isNotExtensible(nonExtensibleObject);\n   *     assert.isNotExtensible(sealedObject);\n   *     assert.isNotExtensible(frozenObject);\n   *\n   * @name isNotExtensible\n   * @alias notExtensible\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotExtensible = function (obj, msg) {\n    new Assertion(obj, msg).to.not.be.extensible;\n  };\n\n  /**\n   * ### .isSealed(object)\n   *\n   * Asserts that `object` is sealed (cannot have new properties added to it\n   * and its existing properties cannot be removed).\n   *\n   *     var sealedObject = Object.seal({});\n   *     var frozenObject = Object.seal({});\n   *\n   *     assert.isSealed(sealedObject);\n   *     assert.isSealed(frozenObject);\n   *\n   * @name isSealed\n   * @alias sealed\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isSealed = function (obj, msg) {\n    new Assertion(obj, msg).to.be.sealed;\n  };\n\n  /**\n   * ### .isNotSealed(object)\n   *\n   * Asserts that `object` is _not_ sealed.\n   *\n   *     assert.isNotSealed({});\n   *\n   * @name isNotSealed\n   * @alias notSealed\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotSealed = function (obj, msg) {\n    new Assertion(obj, msg).to.not.be.sealed;\n  };\n\n  /**\n   * ### .isFrozen(object)\n   *\n   * Asserts that `object` is frozen (cannot have new properties added to it\n   * and its existing properties cannot be modified).\n   *\n   *     var frozenObject = Object.freeze({});\n   *     assert.frozen(frozenObject);\n   *\n   * @name isFrozen\n   * @alias frozen\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isFrozen = function (obj, msg) {\n    new Assertion(obj, msg).to.be.frozen;\n  };\n\n  /**\n   * ### .isNotFrozen(object)\n   *\n   * Asserts that `object` is _not_ frozen.\n   *\n   *     assert.isNotFrozen({});\n   *\n   * @name isNotFrozen\n   * @alias notFrozen\n   * @param {Object} object\n   * @param {String} message _optional_\n   * @namespace Assert\n   * @api public\n   */\n\n  assert.isNotFrozen = function (obj, msg) {\n    new Assertion(obj, msg).to.not.be.frozen;\n  };\n\n  /*!\n   * Aliases.\n   */\n\n  (function alias(name, as){\n    assert[as] = assert[name];\n    return alias;\n  })\n  ('isOk', 'ok')\n  ('isNotOk', 'notOk')\n  ('throws', 'throw')\n  ('throws', 'Throw')\n  ('isExtensible', 'extensible')\n  ('isNotExtensible', 'notExtensible')\n  ('isSealed', 'sealed')\n  ('isNotSealed', 'notSealed')\n  ('isFrozen', 'frozen')\n  ('isNotFrozen', 'notFrozen');\n};\n","/*!\n * chai\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nmodule.exports = function (chai, util) {\n  chai.expect = function (val, message) {\n    return new chai.Assertion(val, message);\n  };\n\n  /**\n   * ### .fail(actual, expected, [message], [operator])\n   *\n   * Throw a failure.\n   *\n   * @name fail\n   * @param {Mixed} actual\n   * @param {Mixed} expected\n   * @param {String} message\n   * @param {String} operator\n   * @namespace Expect\n   * @api public\n   */\n\n  chai.expect.fail = function (actual, expected, message, operator) {\n    message = message || 'expect.fail()';\n    throw new chai.AssertionError(message, {\n        actual: actual\n      , expected: expected\n      , operator: operator\n    }, chai.expect.fail);\n  };\n};\n","/*!\n * chai\n * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nmodule.exports = function (chai, util) {\n  var Assertion = chai.Assertion;\n\n  function loadShould () {\n    // explicitly define this method as function as to have it's name to include as `ssfi`\n    function shouldGetter() {\n      if (this instanceof String || this instanceof Number || this instanceof Boolean ) {\n        return new Assertion(this.valueOf(), null, shouldGetter);\n      }\n      return new Assertion(this, null, shouldGetter);\n    }\n    function shouldSetter(value) {\n      // See https://github.com/chaijs/chai/issues/86: this makes\n      // `whatever.should = someValue` actually set `someValue`, which is\n      // especially useful for `global.should = require('chai').should()`.\n      //\n      // Note that we have to use [[DefineProperty]] instead of [[Put]]\n      // since otherwise we would trigger this very setter!\n      Object.defineProperty(this, 'should', {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    }\n    // modify Object.prototype to have `should`\n    Object.defineProperty(Object.prototype, 'should', {\n      set: shouldSetter\n      , get: shouldGetter\n      , configurable: true\n    });\n\n    var should = {};\n\n    /**\n     * ### .fail(actual, expected, [message], [operator])\n     *\n     * Throw a failure.\n     *\n     * @name fail\n     * @param {Mixed} actual\n     * @param {Mixed} expected\n     * @param {String} message\n     * @param {String} operator\n     * @namespace Should\n     * @api public\n     */\n\n    should.fail = function (actual, expected, message, operator) {\n      message = message || 'should.fail()';\n      throw new chai.AssertionError(message, {\n          actual: actual\n        , expected: expected\n        , operator: operator\n      }, should.fail);\n    };\n\n    /**\n     * ### .equal(actual, expected, [message])\n     *\n     * Asserts non-strict equality (`==`) of `actual` and `expected`.\n     *\n     *     should.equal(3, '3', '== coerces values to strings');\n     *\n     * @name equal\n     * @param {Mixed} actual\n     * @param {Mixed} expected\n     * @param {String} message\n     * @namespace Should\n     * @api public\n     */\n\n    should.equal = function (val1, val2, msg) {\n      new Assertion(val1, msg).to.equal(val2);\n    };\n\n    /**\n     * ### .throw(function, [constructor/string/regexp], [string/regexp], [message])\n     *\n     * Asserts that `function` will throw an error that is an instance of\n     * `constructor`, or alternately that it will throw an error with message\n     * matching `regexp`.\n     *\n     *     should.throw(fn, 'function throws a reference error');\n     *     should.throw(fn, /function throws a reference error/);\n     *     should.throw(fn, ReferenceError);\n     *     should.throw(fn, ReferenceError, 'function throws a reference error');\n     *     should.throw(fn, ReferenceError, /function throws a reference error/);\n     *\n     * @name throw\n     * @alias Throw\n     * @param {Function} function\n     * @param {ErrorConstructor} constructor\n     * @param {RegExp} regexp\n     * @param {String} message\n     * @see https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error#Error_types\n     * @namespace Should\n     * @api public\n     */\n\n    should.Throw = function (fn, errt, errs, msg) {\n      new Assertion(fn, msg).to.Throw(errt, errs);\n    };\n\n    /**\n     * ### .exist\n     *\n     * Asserts that the target is neither `null` nor `undefined`.\n     *\n     *     var foo = 'hi';\n     *\n     *     should.exist(foo, 'foo exists');\n     *\n     * @name exist\n     * @namespace Should\n     * @api public\n     */\n\n    should.exist = function (val, msg) {\n      new Assertion(val, msg).to.exist;\n    }\n\n    // negation\n    should.not = {}\n\n    /**\n     * ### .not.equal(actual, expected, [message])\n     *\n     * Asserts non-strict inequality (`!=`) of `actual` and `expected`.\n     *\n     *     should.not.equal(3, 4, 'these numbers are not equal');\n     *\n     * @name not.equal\n     * @param {Mixed} actual\n     * @param {Mixed} expected\n     * @param {String} message\n     * @namespace Should\n     * @api public\n     */\n\n    should.not.equal = function (val1, val2, msg) {\n      new Assertion(val1, msg).to.not.equal(val2);\n    };\n\n    /**\n     * ### .throw(function, [constructor/regexp], [message])\n     *\n     * Asserts that `function` will _not_ throw an error that is an instance of\n     * `constructor`, or alternately that it will not throw an error with message\n     * matching `regexp`.\n     *\n     *     should.not.throw(fn, Error, 'function does not throw');\n     *\n     * @name not.throw\n     * @alias not.Throw\n     * @param {Function} function\n     * @param {ErrorConstructor} constructor\n     * @param {RegExp} regexp\n     * @param {String} message\n     * @see https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error#Error_types\n     * @namespace Should\n     * @api public\n     */\n\n    should.not.Throw = function (fn, errt, errs, msg) {\n      new Assertion(fn, msg).to.not.Throw(errt, errs);\n    };\n\n    /**\n     * ### .not.exist\n     *\n     * Asserts that the target is neither `null` nor `undefined`.\n     *\n     *     var bar = null;\n     *\n     *     should.not.exist(bar, 'bar does not exist');\n     *\n     * @name not.exist\n     * @namespace Should\n     * @api public\n     */\n\n    should.not.exist = function (val, msg) {\n      new Assertion(val, msg).to.not.exist;\n    }\n\n    should['throw'] = should['Throw'];\n    should.not['throw'] = should.not['Throw'];\n\n    return should;\n  };\n\n  chai.should = loadShould;\n  chai.Should = loadShould;\n};\n","/*!\n * Chai - addChainingMethod utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Module dependencies\n */\n\nvar transferFlags = require('./transferFlags');\nvar flag = require('./flag');\nvar config = require('../config');\n\n/*!\n * Module variables\n */\n\n// Check whether `__proto__` is supported\nvar hasProtoSupport = '__proto__' in Object;\n\n// Without `__proto__` support, this module will need to add properties to a function.\n// However, some Function.prototype methods cannot be overwritten,\n// and there seems no easy cross-platform way to detect them (@see chaijs/chai/issues/69).\nvar excludeNames = /^(?:length|name|arguments|caller)$/;\n\n// Cache `Function` properties\nvar call  = Function.prototype.call,\n    apply = Function.prototype.apply;\n\n/**\n * ### addChainableMethod (ctx, name, method, chainingBehavior)\n *\n * Adds a method to an object, such that the method can also be chained.\n *\n *     utils.addChainableMethod(chai.Assertion.prototype, 'foo', function (str) {\n *       var obj = utils.flag(this, 'object');\n *       new chai.Assertion(obj).to.be.equal(str);\n *     });\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.addChainableMethod('foo', fn, chainingBehavior);\n *\n * The result can then be used as both a method assertion, executing both `method` and\n * `chainingBehavior`, or as a language chain, which only executes `chainingBehavior`.\n *\n *     expect(fooStr).to.be.foo('bar');\n *     expect(fooStr).to.be.foo.equal('foo');\n *\n * @param {Object} ctx object to which the method is added\n * @param {String} name of method to add\n * @param {Function} method function to be used for `name`, when called\n * @param {Function} chainingBehavior function to be called every time the property is accessed\n * @namespace Utils\n * @name addChainableMethod\n * @api public\n */\n\nmodule.exports = function (ctx, name, method, chainingBehavior) {\n  if (typeof chainingBehavior !== 'function') {\n    chainingBehavior = function () { };\n  }\n\n  var chainableBehavior = {\n      method: method\n    , chainingBehavior: chainingBehavior\n  };\n\n  // save the methods so we can overwrite them later, if we need to.\n  if (!ctx.__methods) {\n    ctx.__methods = {};\n  }\n  ctx.__methods[name] = chainableBehavior;\n\n  Object.defineProperty(ctx, name,\n    { get: function () {\n        chainableBehavior.chainingBehavior.call(this);\n\n        var assert = function assert() {\n          var old_ssfi = flag(this, 'ssfi');\n          if (old_ssfi && config.includeStack === false)\n            flag(this, 'ssfi', assert);\n          var result = chainableBehavior.method.apply(this, arguments);\n          return result === undefined ? this : result;\n        };\n\n        // Use `__proto__` if available\n        if (hasProtoSupport) {\n          // Inherit all properties from the object by replacing the `Function` prototype\n          var prototype = assert.__proto__ = Object.create(this);\n          // Restore the `call` and `apply` methods from `Function`\n          prototype.call = call;\n          prototype.apply = apply;\n        }\n        // Otherwise, redefine all properties (slow!)\n        else {\n          var asserterNames = Object.getOwnPropertyNames(ctx);\n          asserterNames.forEach(function (asserterName) {\n            if (!excludeNames.test(asserterName)) {\n              var pd = Object.getOwnPropertyDescriptor(ctx, asserterName);\n              Object.defineProperty(assert, asserterName, pd);\n            }\n          });\n        }\n\n        transferFlags(this, assert);\n        return assert;\n      }\n    , configurable: true\n  });\n};\n","/*!\n * Chai - addMethod utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar config = require('../config');\n\n/**\n * ### .addMethod (ctx, name, method)\n *\n * Adds a method to the prototype of an object.\n *\n *     utils.addMethod(chai.Assertion.prototype, 'foo', function (str) {\n *       var obj = utils.flag(this, 'object');\n *       new chai.Assertion(obj).to.be.equal(str);\n *     });\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.addMethod('foo', fn);\n *\n * Then can be used as any other assertion.\n *\n *     expect(fooStr).to.be.foo('bar');\n *\n * @param {Object} ctx object to which the method is added\n * @param {String} name of method to add\n * @param {Function} method function to be used for name\n * @namespace Utils\n * @name addMethod\n * @api public\n */\nvar flag = require('./flag');\n\nmodule.exports = function (ctx, name, method) {\n  ctx[name] = function () {\n    var old_ssfi = flag(this, 'ssfi');\n    if (old_ssfi && config.includeStack === false)\n      flag(this, 'ssfi', ctx[name]);\n    var result = method.apply(this, arguments);\n    return result === undefined ? this : result;\n  };\n};\n","/*!\n * Chai - addProperty utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar config = require('../config');\nvar flag = require('./flag');\n\n/**\n * ### addProperty (ctx, name, getter)\n *\n * Adds a property to the prototype of an object.\n *\n *     utils.addProperty(chai.Assertion.prototype, 'foo', function () {\n *       var obj = utils.flag(this, 'object');\n *       new chai.Assertion(obj).to.be.instanceof(Foo);\n *     });\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.addProperty('foo', fn);\n *\n * Then can be used as any other assertion.\n *\n *     expect(myFoo).to.be.foo;\n *\n * @param {Object} ctx object to which the property is added\n * @param {String} name of property to add\n * @param {Function} getter function to be used for name\n * @namespace Utils\n * @name addProperty\n * @api public\n */\n\nmodule.exports = function (ctx, name, getter) {\n  Object.defineProperty(ctx, name,\n    { get: function addProperty() {\n        var old_ssfi = flag(this, 'ssfi');\n        if (old_ssfi && config.includeStack === false)\n          flag(this, 'ssfi', addProperty);\n\n        var result = getter.call(this);\n        return result === undefined ? this : result;\n      }\n    , configurable: true\n  });\n};\n","/*!\n * Chai - expectTypes utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### expectTypes(obj, types)\n *\n * Ensures that the object being tested against is of a valid type.\n *\n *     utils.expectTypes(this, ['array', 'object', 'string']);\n *\n * @param {Mixed} obj constructed Assertion\n * @param {Array} type A list of allowed types for this assertion\n * @namespace Utils\n * @name expectTypes\n * @api public\n */\n\nvar AssertionError = require('assertion-error');\nvar flag = require('./flag');\nvar type = require('type-detect');\n\nmodule.exports = function (obj, types) {\n  var obj = flag(obj, 'object');\n  types = types.map(function (t) { return t.toLowerCase(); });\n  types.sort();\n\n  // Transforms ['lorem', 'ipsum'] into 'a lirum, or an ipsum'\n  var str = types.map(function (t, index) {\n    var art = ~[ 'a', 'e', 'i', 'o', 'u' ].indexOf(t.charAt(0)) ? 'an' : 'a';\n    var or = types.length > 1 && index === types.length - 1 ? 'or ' : '';\n    return or + art + ' ' + t;\n  }).join(', ');\n\n  if (!types.some(function (expected) { return type(obj) === expected; })) {\n    throw new AssertionError(\n      'object tested must be ' + str + ', but ' + type(obj) + ' given'\n    );\n  }\n};\n","/*!\n * Chai - flag utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### flag(object, key, [value])\n *\n * Get or set a flag value on an object. If a\n * value is provided it will be set, else it will\n * return the currently set value or `undefined` if\n * the value is not set.\n *\n *     utils.flag(this, 'foo', 'bar'); // setter\n *     utils.flag(this, 'foo'); // getter, returns `bar`\n *\n * @param {Object} object constructed Assertion\n * @param {String} key\n * @param {Mixed} value (optional)\n * @namespace Utils\n * @name flag\n * @api private\n */\n\nmodule.exports = function (obj, key, value) {\n  var flags = obj.__flags || (obj.__flags = Object.create(null));\n  if (arguments.length === 3) {\n    flags[key] = value;\n  } else {\n    return flags[key];\n  }\n};\n","/*!\n * Chai - getActual utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * # getActual(object, [actual])\n *\n * Returns the `actual` value for an Assertion\n *\n * @param {Object} object (constructed Assertion)\n * @param {Arguments} chai.Assertion.prototype.assert arguments\n * @namespace Utils\n * @name getActual\n */\n\nmodule.exports = function (obj, args) {\n  return args.length > 4 ? args[4] : obj._obj;\n};\n","/*!\n * Chai - getEnumerableProperties utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### .getEnumerableProperties(object)\n *\n * This allows the retrieval of enumerable property names of an object,\n * inherited or not.\n *\n * @param {Object} object\n * @returns {Array}\n * @namespace Utils\n * @name getEnumerableProperties\n * @api public\n */\n\nmodule.exports = function getEnumerableProperties(object) {\n  var result = [];\n  for (var name in object) {\n    result.push(name);\n  }\n  return result;\n};\n","/*!\n * Chai - message composition utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Module dependancies\n */\n\nvar flag = require('./flag')\n  , getActual = require('./getActual')\n  , inspect = require('./inspect')\n  , objDisplay = require('./objDisplay');\n\n/**\n * ### .getMessage(object, message, negateMessage)\n *\n * Construct the error message based on flags\n * and template tags. Template tags will return\n * a stringified inspection of the object referenced.\n *\n * Message template tags:\n * - `#{this}` current asserted object\n * - `#{act}` actual value\n * - `#{exp}` expected value\n *\n * @param {Object} object (constructed Assertion)\n * @param {Arguments} chai.Assertion.prototype.assert arguments\n * @namespace Utils\n * @name getMessage\n * @api public\n */\n\nmodule.exports = function (obj, args) {\n  var negate = flag(obj, 'negate')\n    , val = flag(obj, 'object')\n    , expected = args[3]\n    , actual = getActual(obj, args)\n    , msg = negate ? args[2] : args[1]\n    , flagMsg = flag(obj, 'message');\n\n  if(typeof msg === \"function\") msg = msg();\n  msg = msg || '';\n  msg = msg\n    .replace(/#\\{this\\}/g, function () { return objDisplay(val); })\n    .replace(/#\\{act\\}/g, function () { return objDisplay(actual); })\n    .replace(/#\\{exp\\}/g, function () { return objDisplay(expected); });\n\n  return flagMsg ? flagMsg + ': ' + msg : msg;\n};\n","/*!\n * Chai - getName utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * # getName(func)\n *\n * Gets the name of a function, in a cross-browser way.\n *\n * @param {Function} a function (usually a constructor)\n * @namespace Utils\n * @name getName\n */\n\nmodule.exports = function (func) {\n  if (func.name) return func.name;\n\n  var match = /^\\s?function ([^(]*)\\(/.exec(func);\n  return match && match[1] ? match[1] : \"\";\n};\n","/*!\n * Chai - getPathInfo utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar hasProperty = require('./hasProperty');\n\n/**\n * ### .getPathInfo(path, object)\n *\n * This allows the retrieval of property info in an\n * object given a string path.\n *\n * The path info consists of an object with the\n * following properties:\n *\n * * parent - The parent object of the property referenced by `path`\n * * name - The name of the final property, a number if it was an array indexer\n * * value - The value of the property, if it exists, otherwise `undefined`\n * * exists - Whether the property exists or not\n *\n * @param {String} path\n * @param {Object} object\n * @returns {Object} info\n * @namespace Utils\n * @name getPathInfo\n * @api public\n */\n\nmodule.exports = function getPathInfo(path, obj) {\n  var parsed = parsePath(path),\n      last = parsed[parsed.length - 1];\n\n  var info = {\n    parent: parsed.length > 1 ? _getPathValue(parsed, obj, parsed.length - 1) : obj,\n    name: last.p || last.i,\n    value: _getPathValue(parsed, obj)\n  };\n  info.exists = hasProperty(info.name, info.parent);\n\n  return info;\n};\n\n\n/*!\n * ## parsePath(path)\n *\n * Helper function used to parse string object\n * paths. Use in conjunction with `_getPathValue`.\n *\n *      var parsed = parsePath('myobject.property.subprop');\n *\n * ### Paths:\n *\n * * Can be as near infinitely deep and nested\n * * Arrays are also valid using the formal `myobject.document[3].property`.\n * * Literal dots and brackets (not delimiter) must be backslash-escaped.\n *\n * @param {String} path\n * @returns {Object} parsed\n * @api private\n */\n\nfunction parsePath (path) {\n  var str = path.replace(/([^\\\\])\\[/g, '$1.[')\n    , parts = str.match(/(\\\\\\.|[^.]+?)+/g);\n  return parts.map(function (value) {\n    var re = /^\\[(\\d+)\\]$/\n      , mArr = re.exec(value);\n    if (mArr) return { i: parseFloat(mArr[1]) };\n    else return { p: value.replace(/\\\\([.\\[\\]])/g, '$1') };\n  });\n}\n\n\n/*!\n * ## _getPathValue(parsed, obj)\n *\n * Helper companion function for `.parsePath` that returns\n * the value located at the parsed address.\n *\n *      var value = getPathValue(parsed, obj);\n *\n * @param {Object} parsed definition from `parsePath`.\n * @param {Object} object to search against\n * @param {Number} object to search against\n * @returns {Object|Undefined} value\n * @api private\n */\n\nfunction _getPathValue (parsed, obj, index) {\n  var tmp = obj\n    , res;\n\n  index = (index === undefined ? parsed.length : index);\n\n  for (var i = 0, l = index; i < l; i++) {\n    var part = parsed[i];\n    if (tmp) {\n      if ('undefined' !== typeof part.p)\n        tmp = tmp[part.p];\n      else if ('undefined' !== typeof part.i)\n        tmp = tmp[part.i];\n      if (i == (l - 1)) res = tmp;\n    } else {\n      res = undefined;\n    }\n  }\n  return res;\n}\n","/*!\n * Chai - getPathValue utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * @see https://github.com/logicalparadox/filtr\n * MIT Licensed\n */\n\nvar getPathInfo = require('./getPathInfo');\n\n/**\n * ### .getPathValue(path, object)\n *\n * This allows the retrieval of values in an\n * object given a string path.\n *\n *     var obj = {\n *         prop1: {\n *             arr: ['a', 'b', 'c']\n *           , str: 'Hello'\n *         }\n *       , prop2: {\n *             arr: [ { nested: 'Universe' } ]\n *           , str: 'Hello again!'\n *         }\n *     }\n *\n * The following would be the results.\n *\n *     getPathValue('prop1.str', obj); // Hello\n *     getPathValue('prop1.att[2]', obj); // b\n *     getPathValue('prop2.arr[0].nested', obj); // Universe\n *\n * @param {String} path\n * @param {Object} object\n * @returns {Object} value or `undefined`\n * @namespace Utils\n * @name getPathValue\n * @api public\n */\nmodule.exports = function(path, obj) {\n  var info = getPathInfo(path, obj);\n  return info.value;\n};\n","/*!\n * Chai - getProperties utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### .getProperties(object)\n *\n * This allows the retrieval of property names of an object, enumerable or not,\n * inherited or not.\n *\n * @param {Object} object\n * @returns {Array}\n * @namespace Utils\n * @name getProperties\n * @api public\n */\n\nmodule.exports = function getProperties(object) {\n  var result = Object.getOwnPropertyNames(object);\n\n  function addProperty(property) {\n    if (result.indexOf(property) === -1) {\n      result.push(property);\n    }\n  }\n\n  var proto = Object.getPrototypeOf(object);\n  while (proto !== null) {\n    Object.getOwnPropertyNames(proto).forEach(addProperty);\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return result;\n};\n","/*!\n * Chai - hasProperty utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\nvar type = require('type-detect');\n\n/**\n * ### .hasProperty(object, name)\n *\n * This allows checking whether an object has\n * named property or numeric array index.\n *\n * Basically does the same thing as the `in`\n * operator but works properly with natives\n * and null/undefined values.\n *\n *     var obj = {\n *         arr: ['a', 'b', 'c']\n *       , str: 'Hello'\n *     }\n *\n * The following would be the results.\n *\n *     hasProperty('str', obj);  // true\n *     hasProperty('constructor', obj);  // true\n *     hasProperty('bar', obj);  // false\n *\n *     hasProperty('length', obj.str); // true\n *     hasProperty(1, obj.str);  // true\n *     hasProperty(5, obj.str);  // false\n *\n *     hasProperty('length', obj.arr);  // true\n *     hasProperty(2, obj.arr);  // true\n *     hasProperty(3, obj.arr);  // false\n *\n * @param {Objuect} object\n * @param {String|Number} name\n * @returns {Boolean} whether it exists\n * @namespace Utils\n * @name getPathInfo\n * @api public\n */\n\nvar literals = {\n    'number': Number\n  , 'string': String\n};\n\nmodule.exports = function hasProperty(name, obj) {\n  var ot = type(obj);\n\n  // Bad Object, obviously no props at all\n  if(ot === 'null' || ot === 'undefined')\n    return false;\n\n  // The `in` operator does not work with certain literals\n  // box these before the check\n  if(literals[ot] && typeof obj !== 'object')\n    obj = new literals[ot](obj);\n\n  return name in obj;\n};\n","/*!\n * chai\n * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Main exports\n */\n\nvar exports = module.exports = {};\n\n/*!\n * test utility\n */\n\nexports.test = require('./test');\n\n/*!\n * type utility\n */\n\nexports.type = require('type-detect');\n\n/*!\n * expectTypes utility\n */\nexports.expectTypes = require('./expectTypes');\n\n/*!\n * message utility\n */\n\nexports.getMessage = require('./getMessage');\n\n/*!\n * actual utility\n */\n\nexports.getActual = require('./getActual');\n\n/*!\n * Inspect util\n */\n\nexports.inspect = require('./inspect');\n\n/*!\n * Object Display util\n */\n\nexports.objDisplay = require('./objDisplay');\n\n/*!\n * Flag utility\n */\n\nexports.flag = require('./flag');\n\n/*!\n * Flag transferring utility\n */\n\nexports.transferFlags = require('./transferFlags');\n\n/*!\n * Deep equal utility\n */\n\nexports.eql = require('deep-eql');\n\n/*!\n * Deep path value\n */\n\nexports.getPathValue = require('./getPathValue');\n\n/*!\n * Deep path info\n */\n\nexports.getPathInfo = require('./getPathInfo');\n\n/*!\n * Check if a property exists\n */\n\nexports.hasProperty = require('./hasProperty');\n\n/*!\n * Function name\n */\n\nexports.getName = require('./getName');\n\n/*!\n * add Property\n */\n\nexports.addProperty = require('./addProperty');\n\n/*!\n * add Method\n */\n\nexports.addMethod = require('./addMethod');\n\n/*!\n * overwrite Property\n */\n\nexports.overwriteProperty = require('./overwriteProperty');\n\n/*!\n * overwrite Method\n */\n\nexports.overwriteMethod = require('./overwriteMethod');\n\n/*!\n * Add a chainable method\n */\n\nexports.addChainableMethod = require('./addChainableMethod');\n\n/*!\n * Overwrite chainable method\n */\n\nexports.overwriteChainableMethod = require('./overwriteChainableMethod');\n","// This is (almost) directly from Node.js utils\n// https://github.com/joyent/node/blob/f8c335d0caf47f16d31413f89aa28eda3878e3aa/lib/util.js\n\nvar getName = require('./getName');\nvar getProperties = require('./getProperties');\nvar getEnumerableProperties = require('./getEnumerableProperties');\n\nmodule.exports = inspect;\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Boolean} showHidden Flag that shows hidden (not enumerable)\n *    properties of objects.\n * @param {Number} depth Depth in which to descend in object. Default is 2.\n * @param {Boolean} colors Flag to turn on ANSI escape codes to color the\n *    output. Default is false (no coloring).\n * @namespace Utils\n * @name inspect\n */\nfunction inspect(obj, showHidden, depth, colors) {\n  var ctx = {\n    showHidden: showHidden,\n    seen: [],\n    stylize: function (str) { return str; }\n  };\n  return formatValue(ctx, obj, (typeof depth === 'undefined' ? 2 : depth));\n}\n\n// Returns true if object is a DOM element.\nvar isDOMElement = function (object) {\n  if (typeof HTMLElement === 'object') {\n    return object instanceof HTMLElement;\n  } else {\n    return object &&\n      typeof object === 'object' &&\n      object.nodeType === 1 &&\n      typeof object.nodeName === 'string';\n  }\n};\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (value && typeof value.inspect === 'function' &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes);\n    if (typeof ret !== 'string') {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // If this is a DOM element, try to get the outer HTML.\n  if (isDOMElement(value)) {\n    if ('outerHTML' in value) {\n      return value.outerHTML;\n      // This value does not have an outerHTML attribute,\n      //   it could still be an XML element\n    } else {\n      // Attempt to serialize it\n      try {\n        if (document.xmlVersion) {\n          var xmlSerializer = new XMLSerializer();\n          return xmlSerializer.serializeToString(value);\n        } else {\n          // Firefox 11- do not support outerHTML\n          //   It does, however, support innerHTML\n          //   Use the following to render the element\n          var ns = \"http://www.w3.org/1999/xhtml\";\n          var container = document.createElementNS(ns, '_');\n\n          container.appendChild(value.cloneNode(false));\n          html = container.innerHTML\n            .replace('><', '>' + value.innerHTML + '<');\n          container.innerHTML = '';\n          return html;\n        }\n      } catch (err) {\n        // This could be a non-native DOM implementation,\n        //   continue with the normal flow:\n        //   printing the element as if it is an object.\n      }\n    }\n  }\n\n  // Look up the keys of the object.\n  var visibleKeys = getEnumerableProperties(value);\n  var keys = ctx.showHidden ? getProperties(value) : visibleKeys;\n\n  // Some type of object without properties can be shortcutted.\n  // In IE, errors have a single `stack` property, or if they are vanilla `Error`,\n  // a `stack` plus `description` property; ignore those for consistency.\n  if (keys.length === 0 || (isError(value) && (\n      (keys.length === 1 && keys[0] === 'stack') ||\n      (keys.length === 2 && keys[0] === 'description' && keys[1] === 'stack')\n     ))) {\n    if (typeof value === 'function') {\n      var name = getName(value);\n      var nameSuffix = name ? ': ' + name : '';\n      return ctx.stylize('[Function' + nameSuffix + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toUTCString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (typeof value === 'function') {\n    var name = getName(value);\n    var nameSuffix = name ? ': ' + name : '';\n    base = ' [Function' + nameSuffix + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    return formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  switch (typeof value) {\n    case 'undefined':\n      return ctx.stylize('undefined', 'undefined');\n\n    case 'string':\n      var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                               .replace(/'/g, \"\\\\'\")\n                                               .replace(/\\\\\"/g, '\"') + '\\'';\n      return ctx.stylize(simple, 'string');\n\n    case 'number':\n      if (value === 0 && (1/value) === -Infinity) {\n        return ctx.stylize('-0', 'number');\n      }\n      return ctx.stylize('' + value, 'number');\n\n    case 'boolean':\n      return ctx.stylize('' + value, 'boolean');\n  }\n  // For some reason typeof null is \"object\", so special case here.\n  if (value === null) {\n    return ctx.stylize('null', 'null');\n  }\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (Object.prototype.hasOwnProperty.call(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str;\n  if (value.__lookupGetter__) {\n    if (value.__lookupGetter__(key)) {\n      if (value.__lookupSetter__(key)) {\n        str = ctx.stylize('[Getter/Setter]', 'special');\n      } else {\n        str = ctx.stylize('[Getter]', 'special');\n      }\n    } else {\n      if (value.__lookupSetter__(key)) {\n        str = ctx.stylize('[Setter]', 'special');\n      }\n    }\n  }\n  if (visibleKeys.indexOf(key) < 0) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(value[key]) < 0) {\n      if (recurseTimes === null) {\n        str = formatValue(ctx, value[key], null);\n      } else {\n        str = formatValue(ctx, value[key], recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (typeof name === 'undefined') {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\nfunction isArray(ar) {\n  return Array.isArray(ar) ||\n         (typeof ar === 'object' && objectToString(ar) === '[object Array]');\n}\n\nfunction isRegExp(re) {\n  return typeof re === 'object' && objectToString(re) === '[object RegExp]';\n}\n\nfunction isDate(d) {\n  return typeof d === 'object' && objectToString(d) === '[object Date]';\n}\n\nfunction isError(e) {\n  return typeof e === 'object' && objectToString(e) === '[object Error]';\n}\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","/*!\n * Chai - flag utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Module dependancies\n */\n\nvar inspect = require('./inspect');\nvar config = require('../config');\n\n/**\n * ### .objDisplay (object)\n *\n * Determines if an object or an array matches\n * criteria to be inspected in-line for error\n * messages or should be truncated.\n *\n * @param {Mixed} javascript object to inspect\n * @name objDisplay\n * @namespace Utils\n * @api public\n */\n\nmodule.exports = function (obj) {\n  var str = inspect(obj)\n    , type = Object.prototype.toString.call(obj);\n\n  if (config.truncateThreshold && str.length >= config.truncateThreshold) {\n    if (type === '[object Function]') {\n      return !obj.name || obj.name === ''\n        ? '[Function]'\n        : '[Function: ' + obj.name + ']';\n    } else if (type === '[object Array]') {\n      return '[ Array(' + obj.length + ') ]';\n    } else if (type === '[object Object]') {\n      var keys = Object.keys(obj)\n        , kstr = keys.length > 2\n          ? keys.splice(0, 2).join(', ') + ', ...'\n          : keys.join(', ');\n      return '{ Object (' + kstr + ') }';\n    } else {\n      return str;\n    }\n  } else {\n    return str;\n  }\n};\n","/*!\n * Chai - overwriteChainableMethod utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### overwriteChainableMethod (ctx, name, method, chainingBehavior)\n *\n * Overwites an already existing chainable method\n * and provides access to the previous function or\n * property.  Must return functions to be used for\n * name.\n *\n *     utils.overwriteChainableMethod(chai.Assertion.prototype, 'length',\n *       function (_super) {\n *       }\n *     , function (_super) {\n *       }\n *     );\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.overwriteChainableMethod('foo', fn, fn);\n *\n * Then can be used as any other assertion.\n *\n *     expect(myFoo).to.have.length(3);\n *     expect(myFoo).to.have.length.above(3);\n *\n * @param {Object} ctx object whose method / property is to be overwritten\n * @param {String} name of method / property to overwrite\n * @param {Function} method function that returns a function to be used for name\n * @param {Function} chainingBehavior function that returns a function to be used for property\n * @namespace Utils\n * @name overwriteChainableMethod\n * @api public\n */\n\nmodule.exports = function (ctx, name, method, chainingBehavior) {\n  var chainableBehavior = ctx.__methods[name];\n\n  var _chainingBehavior = chainableBehavior.chainingBehavior;\n  chainableBehavior.chainingBehavior = function () {\n    var result = chainingBehavior(_chainingBehavior).call(this);\n    return result === undefined ? this : result;\n  };\n\n  var _method = chainableBehavior.method;\n  chainableBehavior.method = function () {\n    var result = method(_method).apply(this, arguments);\n    return result === undefined ? this : result;\n  };\n};\n","/*!\n * Chai - overwriteMethod utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### overwriteMethod (ctx, name, fn)\n *\n * Overwites an already existing method and provides\n * access to previous function. Must return function\n * to be used for name.\n *\n *     utils.overwriteMethod(chai.Assertion.prototype, 'equal', function (_super) {\n *       return function (str) {\n *         var obj = utils.flag(this, 'object');\n *         if (obj instanceof Foo) {\n *           new chai.Assertion(obj.value).to.equal(str);\n *         } else {\n *           _super.apply(this, arguments);\n *         }\n *       }\n *     });\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.overwriteMethod('foo', fn);\n *\n * Then can be used as any other assertion.\n *\n *     expect(myFoo).to.equal('bar');\n *\n * @param {Object} ctx object whose method is to be overwritten\n * @param {String} name of method to overwrite\n * @param {Function} method function that returns a function to be used for name\n * @namespace Utils\n * @name overwriteMethod\n * @api public\n */\n\nmodule.exports = function (ctx, name, method) {\n  var _method = ctx[name]\n    , _super = function () { return this; };\n\n  if (_method && 'function' === typeof _method)\n    _super = _method;\n\n  ctx[name] = function () {\n    var result = method(_super).apply(this, arguments);\n    return result === undefined ? this : result;\n  }\n};\n","/*!\n * Chai - overwriteProperty utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### overwriteProperty (ctx, name, fn)\n *\n * Overwites an already existing property getter and provides\n * access to previous value. Must return function to use as getter.\n *\n *     utils.overwriteProperty(chai.Assertion.prototype, 'ok', function (_super) {\n *       return function () {\n *         var obj = utils.flag(this, 'object');\n *         if (obj instanceof Foo) {\n *           new chai.Assertion(obj.name).to.equal('bar');\n *         } else {\n *           _super.call(this);\n *         }\n *       }\n *     });\n *\n *\n * Can also be accessed directly from `chai.Assertion`.\n *\n *     chai.Assertion.overwriteProperty('foo', fn);\n *\n * Then can be used as any other assertion.\n *\n *     expect(myFoo).to.be.ok;\n *\n * @param {Object} ctx object whose property is to be overwritten\n * @param {String} name of property to overwrite\n * @param {Function} getter function that returns a getter function to be used for name\n * @namespace Utils\n * @name overwriteProperty\n * @api public\n */\n\nmodule.exports = function (ctx, name, getter) {\n  var _get = Object.getOwnPropertyDescriptor(ctx, name)\n    , _super = function () {};\n\n  if (_get && 'function' === typeof _get.get)\n    _super = _get.get\n\n  Object.defineProperty(ctx, name,\n    { get: function () {\n        var result = getter(_super).call(this);\n        return result === undefined ? this : result;\n      }\n    , configurable: true\n  });\n};\n","/*!\n * Chai - test utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Module dependancies\n */\n\nvar flag = require('./flag');\n\n/**\n * # test(object, expression)\n *\n * Test and object for expression.\n *\n * @param {Object} object (constructed Assertion)\n * @param {Arguments} chai.Assertion.prototype.assert arguments\n * @namespace Utils\n * @name test\n */\n\nmodule.exports = function (obj, args) {\n  var negate = flag(obj, 'negate')\n    , expr = args[0];\n  return negate ? !expr : expr;\n};\n","/*!\n * Chai - transferFlags utility\n * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/**\n * ### transferFlags(assertion, object, includeAll = true)\n *\n * Transfer all the flags for `assertion` to `object`. If\n * `includeAll` is set to `false`, then the base Chai\n * assertion flags (namely `object`, `ssfi`, and `message`)\n * will not be transferred.\n *\n *\n *     var newAssertion = new Assertion();\n *     utils.transferFlags(assertion, newAssertion);\n *\n *     var anotherAsseriton = new Assertion(myObj);\n *     utils.transferFlags(assertion, anotherAssertion, false);\n *\n * @param {Assertion} assertion the assertion to transfer the flags from\n * @param {Object} object the object to transfer the flags to; usually a new assertion\n * @param {Boolean} includeAll\n * @namespace Utils\n * @name transferFlags\n * @api private\n */\n\nmodule.exports = function (assertion, object, includeAll) {\n  var flags = assertion.__flags || (assertion.__flags = Object.create(null));\n\n  if (!object.__flags) {\n    object.__flags = Object.create(null);\n  }\n\n  includeAll = arguments.length === 3 ? includeAll : true;\n\n  for (var flag in flags) {\n    if (includeAll ||\n        (flag !== 'object' && flag !== 'ssfi' && flag != 'message')) {\n      object.__flags[flag] = flags[flag];\n    }\n  }\n};\n","module.exports = require('./lib/eql');\n","/*!\n * deep-eql\n * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Module dependencies\n */\n\nvar type = require('type-detect');\n\n/*!\n * Buffer.isBuffer browser shim\n */\n\nvar Buffer;\ntry { Buffer = require('buffer').Buffer; }\ncatch(ex) {\n  Buffer = {};\n  Buffer.isBuffer = function() { return false; }\n}\n\n/*!\n * Primary Export\n */\n\nmodule.exports = deepEqual;\n\n/**\n * Assert super-strict (egal) equality between\n * two objects of any type.\n *\n * @param {Mixed} a\n * @param {Mixed} b\n * @param {Array} memoised (optional)\n * @return {Boolean} equal match\n */\n\nfunction deepEqual(a, b, m) {\n  if (sameValue(a, b)) {\n    return true;\n  } else if ('date' === type(a)) {\n    return dateEqual(a, b);\n  } else if ('regexp' === type(a)) {\n    return regexpEqual(a, b);\n  } else if (Buffer.isBuffer(a)) {\n    return bufferEqual(a, b);\n  } else if ('arguments' === type(a)) {\n    return argumentsEqual(a, b, m);\n  } else if (!typeEqual(a, b)) {\n    return false;\n  } else if (('object' !== type(a) && 'object' !== type(b))\n  && ('array' !== type(a) && 'array' !== type(b))) {\n    return sameValue(a, b);\n  } else {\n    return objectEqual(a, b, m);\n  }\n}\n\n/*!\n * Strict (egal) equality test. Ensures that NaN always\n * equals NaN and `-0` does not equal `+0`.\n *\n * @param {Mixed} a\n * @param {Mixed} b\n * @return {Boolean} equal match\n */\n\nfunction sameValue(a, b) {\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  return a !== a && b !== b;\n}\n\n/*!\n * Compare the types of two given objects and\n * return if they are equal. Note that an Array\n * has a type of `array` (not `object`) and arguments\n * have a type of `arguments` (not `array`/`object`).\n *\n * @param {Mixed} a\n * @param {Mixed} b\n * @return {Boolean} result\n */\n\nfunction typeEqual(a, b) {\n  return type(a) === type(b);\n}\n\n/*!\n * Compare two Date objects by asserting that\n * the time values are equal using `saveValue`.\n *\n * @param {Date} a\n * @param {Date} b\n * @return {Boolean} result\n */\n\nfunction dateEqual(a, b) {\n  if ('date' !== type(b)) return false;\n  return sameValue(a.getTime(), b.getTime());\n}\n\n/*!\n * Compare two regular expressions by converting them\n * to string and checking for `sameValue`.\n *\n * @param {RegExp} a\n * @param {RegExp} b\n * @return {Boolean} result\n */\n\nfunction regexpEqual(a, b) {\n  if ('regexp' !== type(b)) return false;\n  return sameValue(a.toString(), b.toString());\n}\n\n/*!\n * Assert deep equality of two `arguments` objects.\n * Unfortunately, these must be sliced to arrays\n * prior to test to ensure no bad behavior.\n *\n * @param {Arguments} a\n * @param {Arguments} b\n * @param {Array} memoize (optional)\n * @return {Boolean} result\n */\n\nfunction argumentsEqual(a, b, m) {\n  if ('arguments' !== type(b)) return false;\n  a = [].slice.call(a);\n  b = [].slice.call(b);\n  return deepEqual(a, b, m);\n}\n\n/*!\n * Get enumerable properties of a given object.\n *\n * @param {Object} a\n * @return {Array} property names\n */\n\nfunction enumerable(a) {\n  var res = [];\n  for (var key in a) res.push(key);\n  return res;\n}\n\n/*!\n * Simple equality for flat iterable objects\n * such as Arrays or Node.js buffers.\n *\n * @param {Iterable} a\n * @param {Iterable} b\n * @return {Boolean} result\n */\n\nfunction iterableEqual(a, b) {\n  if (a.length !==  b.length) return false;\n\n  var i = 0;\n  var match = true;\n\n  for (; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      match = false;\n      break;\n    }\n  }\n\n  return match;\n}\n\n/*!\n * Extension to `iterableEqual` specifically\n * for Node.js Buffers.\n *\n * @param {Buffer} a\n * @param {Mixed} b\n * @return {Boolean} result\n */\n\nfunction bufferEqual(a, b) {\n  if (!Buffer.isBuffer(b)) return false;\n  return iterableEqual(a, b);\n}\n\n/*!\n * Block for `objectEqual` ensuring non-existing\n * values don't get in.\n *\n * @param {Mixed} object\n * @return {Boolean} result\n */\n\nfunction isValue(a) {\n  return a !== null && a !== undefined;\n}\n\n/*!\n * Recursively check the equality of two objects.\n * Once basic sameness has been established it will\n * defer to `deepEqual` for each enumerable key\n * in the object.\n *\n * @param {Mixed} a\n * @param {Mixed} b\n * @return {Boolean} result\n */\n\nfunction objectEqual(a, b, m) {\n  if (!isValue(a) || !isValue(b)) {\n    return false;\n  }\n\n  if (a.prototype !== b.prototype) {\n    return false;\n  }\n\n  var i;\n  if (m) {\n    for (i = 0; i < m.length; i++) {\n      if ((m[i][0] === a && m[i][1] === b)\n      ||  (m[i][0] === b && m[i][1] === a)) {\n        return true;\n      }\n    }\n  } else {\n    m = [];\n  }\n\n  try {\n    var ka = enumerable(a);\n    var kb = enumerable(b);\n  } catch (ex) {\n    return false;\n  }\n\n  ka.sort();\n  kb.sort();\n\n  if (!iterableEqual(ka, kb)) {\n    return false;\n  }\n\n  m.push([ a, b ]);\n\n  var key;\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], m)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","module.exports = require('./lib/type');\n","/*!\n * type-detect\n * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Primary Exports\n */\n\nvar exports = module.exports = getType;\n\n/*!\n * Detectable javascript natives\n */\n\nvar natives = {\n    '[object Array]': 'array'\n  , '[object RegExp]': 'regexp'\n  , '[object Function]': 'function'\n  , '[object Arguments]': 'arguments'\n  , '[object Date]': 'date'\n};\n\n/**\n * ### typeOf (obj)\n *\n * Use several different techniques to determine\n * the type of object being tested.\n *\n *\n * @param {Mixed} object\n * @return {String} object type\n * @api public\n */\n\nfunction getType (obj) {\n  var str = Object.prototype.toString.call(obj);\n  if (natives[str]) return natives[str];\n  if (obj === null) return 'null';\n  if (obj === undefined) return 'undefined';\n  if (obj === Object(obj)) return 'object';\n  return typeof obj;\n}\n\nexports.Library = Library;\n\n/**\n * ### Library\n *\n * Create a repository for custom type detection.\n *\n * ```js\n * var lib = new type.Library;\n * ```\n *\n */\n\nfunction Library () {\n  this.tests = {};\n}\n\n/**\n * #### .of (obj)\n *\n * Expose replacement `typeof` detection to the library.\n *\n * ```js\n * if ('string' === lib.of('hello world')) {\n *   // ...\n * }\n * ```\n *\n * @param {Mixed} object to test\n * @return {String} type\n */\n\nLibrary.prototype.of = getType;\n\n/**\n * #### .define (type, test)\n *\n * Add a test to for the `.test()` assertion.\n *\n * Can be defined as a regular expression:\n *\n * ```js\n * lib.define('int', /^[0-9]+$/);\n * ```\n *\n * ... or as a function:\n *\n * ```js\n * lib.define('bln', function (obj) {\n *   if ('boolean' === lib.of(obj)) return true;\n *   var blns = [ 'yes', 'no', 'true', 'false', 1, 0 ];\n *   if ('string' === lib.of(obj)) obj = obj.toLowerCase();\n *   return !! ~blns.indexOf(obj);\n * });\n * ```\n *\n * @param {String} type\n * @param {RegExp|Function} test\n * @api public\n */\n\nLibrary.prototype.define = function (type, test) {\n  if (arguments.length === 1) return this.tests[type];\n  this.tests[type] = test;\n  return this;\n};\n\n/**\n * #### .test (obj, test)\n *\n * Assert that an object is of type. Will first\n * check natives, and if that does not pass it will\n * use the user defined custom tests.\n *\n * ```js\n * assert(lib.test('1', 'int'));\n * assert(lib.test('yes', 'bln'));\n * ```\n *\n * @param {Mixed} object\n * @param {String} type\n * @return {Boolean} result\n * @api public\n */\n\nLibrary.prototype.test = function (obj, type) {\n  if (type === getType(obj)) return true;\n  var test = this.tests[type];\n\n  if (test && 'regexp' === getType(test)) {\n    return test.test(obj);\n  } else if (test && 'function' === getType(test)) {\n    return test(obj);\n  } else {\n    throw new ReferenceError('Type test \"' + type + '\" not defined or invalid.');\n  }\n};\n","/*!\n * Lightweight URL manipulation with JavaScript\n * This library is independent of any other libraries and has pretty simple\n * interface and lightweight code-base.\n * Some ideas of query string parsing had been taken from Jan Wolter\n * @see http://unixpapa.com/js/querystring.html\n *\n * @license MIT\n * @author Mykhailo Stadnyk <mikhus@gmail.com>\n */\n(function (ns) {\n    'use strict';\n\n    // configure given url options\n    function urlConfig (url) {\n        var config = {\n            path: true,\n            query: true,\n            hash: true\n        };\n\n        if (!url) {\n            return config;\n        }\n\n        if (/^[a-z]+[-a-z]*:/.test(url)) {\n            config.protocol = true;\n            config.host = true;\n\n            if (/[-a-z0-9]+(\\.[-a-z0-9])*:\\d+/i.test(url)) {\n                config.port = true;\n            }\n\n            if (/\\/\\/(.*?)(?::(.*?))?@/.test(url)) {\n                config.user = true;\n                config.pass = true;\n            }\n        }\n\n        return config;\n    }\n\n    var isNode = typeof window === 'undefined' &&\n        typeof global !== 'undefined' &&\n        typeof require === 'function';\n\n    // Trick to bypass Webpack's require at compile time\n    var nodeRequire = isNode ? ns['require'] : null;\n\n    // mapping between what we want and <a> element properties\n    var map = {\n        protocol: 'protocol',\n        host: 'hostname',\n        port: 'port',\n        path: 'pathname',\n        query: 'search',\n        hash: 'hash'\n    };\n\n    // jscs: disable\n    /**\n     * default ports as defined by http://url.spec.whatwg.org/#default-port\n     * We need them to fix IE behavior, @see https://github.com/Mikhus/jsurl/issues/2\n     */\n    // jscs: enable\n    var defaultPorts = {\n        ftp: 21,\n        gopher: 70,\n        http: 80,\n        https: 443,\n        ws: 80,\n        wss: 443\n    };\n\n    function parse (self, url, absolutize) {\n        var link, i, auth;\n        var currUrl = isNode ? ('file://' +\n            (process.platform.match(/^win/i) ? '/' : '') +\n            nodeRequire('fs').realpathSync('.')\n        ) : document.location.href;\n\n        if (!url) {\n            url = currUrl;\n        }\n\n        if (isNode) {\n            link = nodeRequire('url').parse(url);\n        }\n\n        else {\n            link = document.createElement('a');\n            link.href = url;\n        }\n\n        var config = urlConfig(url);\n\n        auth = url.match(/\\/\\/(.*?)(?::(.*?))?@/) || [];\n\n        for (i in map) {\n            if (config[i]) {\n                self[i] = link[map[i]] || '';\n            }\n\n            else {\n                self[i] = '';\n            }\n        }\n\n        // fix-up some parts\n        self.protocol = self.protocol.replace(/:$/, '');\n        self.query = self.query.replace(/^\\?/, '');\n        self.hash = decode(self.hash.replace(/^#/, ''));\n        self.user = decode(auth[1] || '');\n        self.pass = decode(auth[2] || '');\n        /* jshint ignore:start */\n        self.port = (\n            // loosely compare because port can be a string\n            defaultPorts[self.protocol] == self.port || self.port == 0\n        ) ? '' : self.port; // IE fix, Android browser fix\n        /* jshint ignore:end */\n\n        if (!config.protocol && /[^/#?]/.test(url.charAt(0))) {\n            self.path = url.split('?')[0].split('#')[0];\n        }\n\n        if (!config.protocol && absolutize) {\n            // is IE and path is relative\n            var base = new Url(currUrl.match(/(.*\\/)/)[0]);\n            var basePath = base.path.split('/');\n            var selfPath = self.path.split('/');\n            var props = ['protocol', 'user', 'pass', 'host', 'port'];\n            var s = props.length;\n\n            basePath.pop();\n\n            for (i = 0; i < s; i++) {\n                self[props[i]] = base[props[i]];\n            }\n\n            while (selfPath[0] === '..') { // skip all \"../\n                basePath.pop();\n                selfPath.shift();\n            }\n\n            self.path =\n                (url.charAt(0) !== '/' ? basePath.join('/') : '') +\n                '/' + selfPath.join('/')\n            ;\n        }\n\n        self.path = self.path.replace(/^\\/{2,}/, '/');\n\n        self.paths((self.path.charAt(0) === '/' ?\n            self.path.slice(1) : self.path).split('/')\n        );\n\n        self.query = new QueryString(self.query);\n    }\n\n    function encode (s) {\n        return encodeURIComponent(s).replace(/'/g, '%27');\n    }\n\n    function decode (s) {\n        s = s.replace(/\\+/g, ' ');\n\n        s = s.replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,\n            function (code, hex1, hex2, hex3) {\n                var n1 = parseInt(hex1, 16) - 0xE0;\n                var n2 = parseInt(hex2, 16) - 0x80;\n\n                if (n1 === 0 && n2 < 32) {\n                    return code;\n                }\n\n                var n3 = parseInt(hex3, 16) - 0x80;\n                var n = (n1 << 12) + (n2 << 6) + n3;\n\n                if (n > 0xFFFF) {\n                    return code;\n                }\n\n                return String.fromCharCode(n);\n            }\n        );\n\n        s = s.replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,\n            function (code, hex1, hex2) {\n                var n1 = parseInt(hex1, 16) - 0xC0;\n\n                if (n1 < 2) {\n                    return code;\n                }\n\n                var n2 = parseInt(hex2, 16) - 0x80;\n\n                return String.fromCharCode((n1 << 6) + n2);\n            }\n        );\n\n        return s.replace(/%([0-7][0-9a-f])/gi,\n            function (code, hex) {\n                return String.fromCharCode(parseInt(hex, 16));\n            }\n        );\n    }\n\n    /**\n     * Class QueryString\n     *\n     * @param {string} qs - string representation of QueryString\n     * @constructor\n     */\n    function QueryString (qs) {\n        var re = /([^=&]+)(=([^&]*))?/g;\n        var match;\n\n        while ((match = re.exec(qs))) {\n            var key = decodeURIComponent(match[1].replace(/\\+/g, ' '));\n            var value = match[3] ? decode(match[3]) : '';\n\n            if (!(this[key] === undefined || this[key] === null)) {\n                if (!(this[key] instanceof Array)) {\n                    this[key] = [this[key]];\n                }\n\n                this[key].push(value);\n            }\n\n            else {\n                this[key] = value;\n            }\n        }\n    }\n\n    /**\n     * Converts QueryString object back to string representation\n     *\n     * @returns {string}\n     */\n    QueryString.prototype.toString = function () {\n        var s = '';\n        var e = encode;\n        var i, ii;\n\n        for (i in this) {\n            if (this[i] instanceof Function || this[i] === null) {\n                continue;\n            }\n\n            if (this[i] instanceof Array) {\n                var len = this[i].length;\n\n                if (len) {\n                    for (ii = 0; ii < len; ii++) {\n                        s += s ? '&' : '';\n                        s += e(i) + '=' + e(this[i][ii]);\n                    }\n                }\n\n                else {\n                    // parameter is an empty array, so treat as\n                    // an empty argument\n                    s += (s ? '&' : '') + e(i) + '=';\n                }\n            }\n\n            else {\n                s += s ? '&' : '';\n                s += e(i) + '=' + e(this[i]);\n            }\n        }\n\n        return s;\n    };\n\n    /**\n     * Class Url\n     *\n     * @param {string} [url] - string URL representation\n     * @param {boolean} [noTransform] - do not transform to absolute URL\n     * @constructor\n     */\n    function Url (url, noTransform) {\n        parse(this, url, !noTransform);\n    }\n\n    /**\n     * Clears QueryString, making it contain no params at all\n     *\n     * @returns {Url}\n     */\n    Url.prototype.clearQuery = function () {\n        for (var key in this.query) {\n            if (!(this.query[key] instanceof Function)) {\n                delete this.query[key];\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Returns total number of parameters in QueryString\n     *\n     * @returns {number}\n     */\n    Url.prototype.queryLength = function () {\n        var count = 0;\n        var key;\n\n        for (key in this) {\n            if (!(this[key] instanceof Function)) {\n                count++;\n            }\n        }\n\n        return count;\n    };\n\n    /**\n     * Returns true if QueryString contains no parameters, false otherwise\n     *\n     * @returns {boolean}\n     */\n    Url.prototype.isEmptyQuery = function () {\n        return this.queryLength() === 0;\n    };\n\n    /**\n     *\n     * @param {Array} [paths] - an array pf path parts (if given will modify\n     *                          Url.path property\n     * @returns {Array} - an array representation of the Url.path property\n     */\n    Url.prototype.paths = function (paths) {\n        var prefix = '';\n        var i = 0;\n        var s;\n\n        if (paths && paths.length && paths + '' !== paths) {\n            if (this.isAbsolute()) {\n                prefix = '/';\n            }\n\n            for (s = paths.length; i < s; i++) {\n                paths[i] = !i && paths[i].match(/^\\w:$/) ? paths[i] :\n                    encode(paths[i]);\n            }\n\n            this.path = prefix + paths.join('/');\n        }\n\n        paths = (this.path.charAt(0) === '/' ?\n            this.path.slice(1) : this.path).split('/');\n\n        for (i = 0, s = paths.length; i < s; i++) {\n            paths[i] = decode(paths[i]);\n        }\n\n        return paths;\n    };\n\n    /**\n     * Performs URL-specific encoding of the given string\n     *\n     * @method Url#encode\n     * @param {string} s - string to encode\n     * @returns {string}\n     */\n    Url.prototype.encode = encode;\n\n    /**\n     * Performs URL-specific decoding of the given encoded string\n     *\n     * @method Url#decode\n     * @param {string} s - string to decode\n     * @returns {string}\n     */\n    Url.prototype.decode = decode;\n\n    /**\n     * Checks if current URL is an absolute resource locator (globally absolute\n     * or absolute path to current server)\n     *\n     * @returns {boolean}\n     */\n    Url.prototype.isAbsolute = function () {\n        return this.protocol || this.path.charAt(0) === '/';\n    };\n\n    /**\n     * Returns string representation of current Url object\n     *\n     * @returns {string}\n     */\n    Url.prototype.toString = function () {\n        return (\n            (this.protocol && (this.protocol + '://')) +\n            (this.user && (\n            encode(this.user) + (this.pass && (':' + encode(this.pass))\n            ) + '@')) +\n            (this.host && this.host) +\n            (this.port && (':' + this.port)) +\n            (this.path && this.path) +\n            (this.query.toString() && ('?' + this.query)) +\n            (this.hash && ('#' + encode(this.hash)))\n        );\n    };\n\n    ns[ns.exports ? 'exports' : 'Url'] = Url;\n}(typeof module !== 'undefined' && module.exports ? module : window));\n","// version: 1.0.0\n\nfunction csspToSrc(tree, hasInfo) {\n\n    var _m_simple = {\n            'unary': 1, 'nth': 1, 'combinator': 1, 'ident': 1, 'number': 1, 's': 1,\n            'string': 1, 'attrselector': 1, 'operator': 1, 'raw': 1, 'unknown': 1\n        },\n        _m_composite = {\n            'simpleselector': 1, 'dimension': 1, 'selector': 1, 'property': 1, 'value': 1,\n            'filterv': 1, 'progid': 1, 'ruleset': 1, 'atruleb': 1, 'atrulerq': 1, 'atrulers': 1,\n            'stylesheet': 1\n        },\n        _m_primitive = {\n            'cdo': 'cdo', 'cdc': 'cdc', 'decldelim': ';', 'namespace': '|', 'delim': ','\n        };\n\n    function _t(tree) {\n        var t = tree[hasInfo? 1 : 0];\n        if (t in _m_primitive) return _m_primitive[t];\n        else if (t in _m_simple) return _simple(tree);\n        else if (t in _m_composite) return _composite(tree);\n        return _unique[t](tree);\n    }\n\n    function _composite(t, i) {\n        var s = '';\n        i = i === undefined ? (hasInfo? 2 : 1) : i;\n        for (; i < t.length; i++) s += _t(t[i]);\n        return s;\n    }\n\n    function _simple(t) {\n        return t[hasInfo? 2 : 1];\n    }\n\n    var _unique = {\n        percentage: function(t) {\n            return _t(t[hasInfo? 2 : 1]) + '%';\n        },\n        comment: function (t) {\n            return '/*' + t[hasInfo? 2 : 1] + '*/';\n        },\n        clazz: function(t) {\n            return '.' + _t(t[hasInfo? 2 : 1]);\n        },\n        atkeyword: function(t) {\n            return '@' + _t(t[hasInfo? 2 : 1]);\n        },\n        shash: function (t) {\n            return '#' + t[hasInfo? 2 : 1];\n        },\n        vhash: function(t) {\n            return '#' + t[hasInfo? 2 : 1];\n        },\n        attrib: function(t) {\n            return '[' + _composite(t) + ']';\n        },\n        important: function(t) {\n            return '!' + _composite(t) + 'important';\n        },\n        nthselector: function(t) {\n            return ':' + _simple(t[hasInfo? 2 : 1]) + '(' + _composite(t, hasInfo? 3 : 2) + ')';\n        },\n        funktion: function(t) {\n            return _simple(t[hasInfo? 2 : 1]) + '(' + _composite(t[hasInfo? 3: 2]) + ')';\n        },\n        declaration: function(t) {\n            return _t(t[hasInfo? 2 : 1]) + ':' + _t(t[hasInfo? 3 : 2]);\n        },\n        filter: function(t) {\n            return _t(t[hasInfo? 2 : 1]) + ':' + _t(t[hasInfo? 3 : 2]);\n        },\n        block: function(t) {\n            return '{' + _composite(t) + '}';\n        },\n        braces: function(t) {\n            return t[hasInfo? 2 : 1] + _composite(t, hasInfo? 4 : 3) + t[hasInfo? 3 : 2];\n        },\n        atrules: function(t) {\n            return _composite(t) + ';';\n        },\n        atruler: function(t) {\n            return _t(t[hasInfo? 2 : 1]) + _t(t[hasInfo? 3 : 2]) + '{' + _t(t[hasInfo? 4 : 3]) + '}';\n        },\n        pseudoe: function(t) {\n            return '::' + _t(t[hasInfo? 2 : 1]);\n        },\n        pseudoc: function(t) {\n            return ':' + _t(t[hasInfo? 2 : 1]);\n        },\n        uri: function(t) {\n            return 'url(' + _composite(t) + ')';\n        },\n        functionExpression: function(t) {\n            return 'expression(' + t[hasInfo? 2 : 1] + ')';\n        }\n    };\n\n    return _t(tree);\n}\nexports.csspToSrc = csspToSrc;\n","var srcToCSSP = (function() {\nvar TokenType = {\n    StringSQ: 'StringSQ',\n    StringDQ: 'StringDQ',\n    CommentML: 'CommentML',\n    CommentSL: 'CommentSL',\n\n    Newline: 'Newline',\n    Space: 'Space',\n    Tab: 'Tab',\n\n    ExclamationMark: 'ExclamationMark',         // !\n    QuotationMark: 'QuotationMark',             // \"\n    NumberSign: 'NumberSign',                   // #\n    DollarSign: 'DollarSign',                   // $\n    PercentSign: 'PercentSign',                 // %\n    Ampersand: 'Ampersand',                     // &\n    Apostrophe: 'Apostrophe',                   // '\n    LeftParenthesis: 'LeftParenthesis',         // (\n    RightParenthesis: 'RightParenthesis',       // )\n    Asterisk: 'Asterisk',                       // *\n    PlusSign: 'PlusSign',                       // +\n    Comma: 'Comma',                             // ,\n    HyphenMinus: 'HyphenMinus',                 // -\n    FullStop: 'FullStop',                       // .\n    Solidus: 'Solidus',                         // /\n    Colon: 'Colon',                             // :\n    Semicolon: 'Semicolon',                     // ;\n    LessThanSign: 'LessThanSign',               // <\n    EqualsSign: 'EqualsSign',                   // =\n    GreaterThanSign: 'GreaterThanSign',         // >\n    QuestionMark: 'QuestionMark',               // ?\n    CommercialAt: 'CommercialAt',               // @\n    LeftSquareBracket: 'LeftSquareBracket',     // [\n    ReverseSolidus: 'ReverseSolidus',           // \\\n    RightSquareBracket: 'RightSquareBracket',   // ]\n    CircumflexAccent: 'CircumflexAccent',       // ^\n    LowLine: 'LowLine',                         // _\n    LeftCurlyBracket: 'LeftCurlyBracket',       // {\n    VerticalLine: 'VerticalLine',               // |\n    RightCurlyBracket: 'RightCurlyBracket',     // }\n    Tilde: 'Tilde',                             // ~\n\n    Identifier: 'Identifier',\n    DecimalNumber: 'DecimalNumber'\n};\n\nvar getTokens = (function() {\n\n    var Punctuation,\n        urlMode = false,\n        blockMode = 0;\n\n    Punctuation = {\n        ' ': TokenType.Space,\n        '\\n': TokenType.Newline,\n        '\\r': TokenType.Newline,\n        '\\t': TokenType.Tab,\n        '!': TokenType.ExclamationMark,\n        '\"': TokenType.QuotationMark,\n        '#': TokenType.NumberSign,\n        '$': TokenType.DollarSign,\n        '%': TokenType.PercentSign,\n        '&': TokenType.Ampersand,\n        '\\'': TokenType.Apostrophe,\n        '(': TokenType.LeftParenthesis,\n        ')': TokenType.RightParenthesis,\n        '*': TokenType.Asterisk,\n        '+': TokenType.PlusSign,\n        ',': TokenType.Comma,\n        '-': TokenType.HyphenMinus,\n        '.': TokenType.FullStop,\n        '/': TokenType.Solidus,\n        ':': TokenType.Colon,\n        ';': TokenType.Semicolon,\n        '<': TokenType.LessThanSign,\n        '=': TokenType.EqualsSign,\n        '>': TokenType.GreaterThanSign,\n        '?': TokenType.QuestionMark,\n        '@': TokenType.CommercialAt,\n        '[': TokenType.LeftSquareBracket,\n    //        '\\\\': TokenType.ReverseSolidus,\n        ']': TokenType.RightSquareBracket,\n        '^': TokenType.CircumflexAccent,\n        '_': TokenType.LowLine,\n        '{': TokenType.LeftCurlyBracket,\n        '|': TokenType.VerticalLine,\n        '}': TokenType.RightCurlyBracket,\n        '~': TokenType.Tilde\n    };\n\n    function isDecimalDigit(c) {\n        return '0123456789'.indexOf(c) >= 0;\n    }\n\n    function throwError(message) {\n        throw message;\n    }\n\n    var buffer = '',\n        tokens = [],\n        pos,\n        tn = 0,\n        ln = 1;\n\n    function _getTokens(s) {\n        if (!s) return [];\n\n        tokens = [];\n\n        var c, cn;\n\n        for (pos = 0; pos < s.length; pos++) {\n            c = s.charAt(pos);\n            cn = s.charAt(pos + 1);\n\n            if (c === '/' && cn === '*') {\n                parseMLComment(s);\n            } else if (!urlMode && c === '/' && cn === '/') {\n                if (blockMode > 0) parseIdentifier(s); \n                else parseSLComment(s);\n            } else if (c === '\"' || c === \"'\") {\n                parseString(s, c);\n            } else if (c === ' ') {\n                parseSpaces(s)\n            } else if (c in Punctuation) {\n                pushToken(Punctuation[c], c);\n                if (c === '\\n' || c === '\\r') ln++;\n                if (c === ')') urlMode = false;\n                if (c === '{') blockMode++;\n                if (c === '}') blockMode--;\n            } else if (isDecimalDigit(c)) {\n                parseDecimalNumber(s);\n            } else {\n                parseIdentifier(s);\n            }\n        }\n\n        mark();\n\n        return tokens;\n    }\n\n    function pushToken(type, value) {\n        tokens.push({ tn: tn++, ln: ln, type: type, value: value });\n    }\n\n    function parseSpaces(s) {\n        var start = pos;\n\n        for (; pos < s.length; pos++) {\n            if (s.charAt(pos) !== ' ') break;\n        }\n\n        pushToken(TokenType.Space, s.substring(start, pos));\n        pos--;\n    }\n\n    function parseMLComment(s) {\n        var start = pos;\n\n        for (pos = pos + 2; pos < s.length; pos++) {\n            if (s.charAt(pos) === '*') {\n                if (s.charAt(pos + 1) === '/') {\n                    pos++;\n                    break;\n                }\n            }\n        }\n\n        pushToken(TokenType.CommentML, s.substring(start, pos + 1));\n    }\n\n    function parseSLComment(s) {\n        var start = pos;\n\n        for (pos = pos + 2; pos < s.length; pos++) {\n            if (s.charAt(pos) === '\\n' || s.charAt(pos) === '\\r') {\n                pos++;\n                break;\n            }\n        }\n\n        pushToken(TokenType.CommentSL, s.substring(start, pos));\n        pos--;\n    }\n\n    function parseString(s, q) {\n        var start = pos;\n\n        for (pos = pos + 1; pos < s.length; pos++) {\n            if (s.charAt(pos) === '\\\\') pos++;\n            else if (s.charAt(pos) === q) break;\n        }\n\n        pushToken(q === '\"' ? TokenType.StringDQ : TokenType.StringSQ, s.substring(start, pos + 1));\n    }\n\n    function parseDecimalNumber(s) {\n        var start = pos;\n\n        for (; pos < s.length; pos++) {\n            if (!isDecimalDigit(s.charAt(pos))) break;\n        }\n\n        pushToken(TokenType.DecimalNumber, s.substring(start, pos));\n        pos--;\n    }\n\n    function parseIdentifier(s) {\n        var start = pos;\n\n        while (s.charAt(pos) === '/') pos++;\n\n        for (; pos < s.length; pos++) {\n            if (s.charAt(pos) === '\\\\') pos++;\n            else if (s.charAt(pos) in Punctuation) break;\n        }\n\n        var ident = s.substring(start, pos);\n\n        urlMode = urlMode || ident === 'url';\n\n        pushToken(TokenType.Identifier, ident);\n        pos--;\n    }\n\n    // ====================================\n    // second run\n    // ====================================\n\n    function mark() {\n        var ps = [], // Parenthesis\n            sbs = [], // SquareBracket\n            cbs = [], // CurlyBracket\n            t;\n\n        for (var i = 0; i < tokens.length; i++) {\n            t = tokens[i];\n            switch(t.type) {\n                case TokenType.LeftParenthesis:\n                    ps.push(i);\n                    break;\n                case TokenType.RightParenthesis:\n                    if (ps.length) {\n                        t.left = ps.pop();\n                        tokens[t.left].right = i;\n                    }\n                    break;\n                case TokenType.LeftSquareBracket:\n                    sbs.push(i);\n                    break;\n                case TokenType.RightSquareBracket:\n                    if (sbs.length) {\n                        t.left = sbs.pop();\n                        tokens[t.left].right = i;\n                    }\n                    break;\n                case TokenType.LeftCurlyBracket:\n                    cbs.push(i);\n                    break;\n                case TokenType.RightCurlyBracket:\n                    if (cbs.length) {\n                        t.left = cbs.pop();\n                        tokens[t.left].right = i;\n                    }\n                    break;\n            }\n        }\n    }\n\n    return function(s) {\n        return _getTokens(s);\n    };\n\n}());\n// version: 1.0.0\n\nvar getCSSPAST = (function() {\n\n    var tokens,\n        pos,\n        failLN = 0,\n        currentBlockLN = 0,\n        needInfo = false;\n\n    var CSSPNodeType,\n        CSSLevel,\n        CSSPRules;\n\n    CSSPNodeType = {\n        IdentType: 'ident',\n        AtkeywordType: 'atkeyword',\n        StringType: 'string',\n        ShashType: 'shash',\n        VhashType: 'vhash',\n        NumberType: 'number',\n        PercentageType: 'percentage',\n        DimensionType: 'dimension',\n        CdoType: 'cdo',\n        CdcType: 'cdc',\n        DecldelimType: 'decldelim',\n        SType: 's',\n        AttrselectorType: 'attrselector',\n        AttribType: 'attrib',\n        NthType: 'nth',\n        NthselectorType: 'nthselector',\n        NamespaceType: 'namespace',\n        ClazzType: 'clazz',\n        PseudoeType: 'pseudoe',\n        PseudocType: 'pseudoc',\n        DelimType: 'delim',\n        StylesheetType: 'stylesheet',\n        AtrulebType: 'atruleb',\n        AtrulesType: 'atrules',\n        AtrulerqType: 'atrulerq',\n        AtrulersType: 'atrulers',\n        AtrulerType: 'atruler',\n        BlockType: 'block',\n        RulesetType: 'ruleset',\n        CombinatorType: 'combinator',\n        SimpleselectorType: 'simpleselector',\n        SelectorType: 'selector',\n        DeclarationType: 'declaration',\n        PropertyType: 'property',\n        ImportantType: 'important',\n        UnaryType: 'unary',\n        OperatorType: 'operator',\n        BracesType: 'braces',\n        ValueType: 'value',\n        ProgidType: 'progid',\n        FiltervType: 'filterv',\n        FilterType: 'filter',\n        CommentType: 'comment',\n        UriType: 'uri',\n        RawType: 'raw',\n        FunctionBodyType: 'functionBody',\n        FunktionType: 'funktion',\n        FunctionExpressionType: 'functionExpression',\n        UnknownType: 'unknown'\n    };\n\n    CSSPRules = {\n        'ident': function() { if (checkIdent(pos)) return getIdent() },\n        'atkeyword': function() { if (checkAtkeyword(pos)) return getAtkeyword() },\n        'string': function() { if (checkString(pos)) return getString() },\n        'shash': function() { if (checkShash(pos)) return getShash() },\n        'vhash': function() { if (checkVhash(pos)) return getVhash() },\n        'number': function() { if (checkNumber(pos)) return getNumber() },\n        'percentage': function() { if (checkPercentage(pos)) return getPercentage() },\n        'dimension': function() { if (checkDimension(pos)) return getDimension() },\n//        'cdo': function() { if (checkCDO()) return getCDO() },\n//        'cdc': function() { if (checkCDC()) return getCDC() },\n        'decldelim': function() { if (checkDecldelim(pos)) return getDecldelim() },\n        's': function() { if (checkS(pos)) return getS() },\n        'attrselector': function() { if (checkAttrselector(pos)) return getAttrselector() },\n        'attrib': function() { if (checkAttrib(pos)) return getAttrib() },\n        'nth': function() { if (checkNth(pos)) return getNth() },\n        'nthselector': function() { if (checkNthselector(pos)) return getNthselector() },\n        'namespace': function() { if (checkNamespace(pos)) return getNamespace() },\n        'clazz': function() { if (checkClazz(pos)) return getClazz() },\n        'pseudoe': function() { if (checkPseudoe(pos)) return getPseudoe() },\n        'pseudoc': function() { if (checkPseudoc(pos)) return getPseudoc() },\n        'delim': function() { if (checkDelim(pos)) return getDelim() },\n        'stylesheet': function() { if (checkStylesheet(pos)) return getStylesheet() },\n        'atruleb': function() { if (checkAtruleb(pos)) return getAtruleb() },\n        'atrules': function() { if (checkAtrules(pos)) return getAtrules() },\n        'atrulerq': function() { if (checkAtrulerq(pos)) return getAtrulerq() },\n        'atrulers': function() { if (checkAtrulers(pos)) return getAtrulers() },\n        'atruler': function() { if (checkAtruler(pos)) return getAtruler() },\n        'block': function() { if (checkBlock(pos)) return getBlock() },\n        'ruleset': function() { if (checkRuleset(pos)) return getRuleset() },\n        'combinator': function() { if (checkCombinator(pos)) return getCombinator() },\n        'simpleselector': function() { if (checkSimpleselector(pos)) return getSimpleSelector() },\n        'selector': function() { if (checkSelector(pos)) return getSelector() },\n        'declaration': function() { if (checkDeclaration(pos)) return getDeclaration() },\n        'property': function() { if (checkProperty(pos)) return getProperty() },\n        'important': function() { if (checkImportant(pos)) return getImportant() },\n        'unary': function() { if (checkUnary(pos)) return getUnary() },\n        'operator': function() { if (checkOperator(pos)) return getOperator() },\n        'braces': function() { if (checkBraces(pos)) return getBraces() },\n        'value': function() { if (checkValue(pos)) return getValue() },\n        'progid': function() { if (checkProgid(pos)) return getProgid() },\n        'filterv': function() { if (checkFilterv(pos)) return getFilterv() },\n        'filter': function() { if (checkFilter(pos)) return getFilter() },\n        'comment': function() { if (checkComment(pos)) return getComment() },\n        'uri': function() { if (checkUri(pos)) return getUri() },\n        'raw': function() { if (checkRaw(pos)) return getRaw() },\n        'funktion': function() { if (checkFunktion(pos)) return getFunktion() },\n        'functionExpression': function() { if (checkFunctionExpression(pos)) return getFunctionExpression() },\n        'unknown': function() { if (checkUnknown(pos)) return getUnknown() }\n    };\n\n    function fail(token) {\n        if (token && token.ln > failLN) failLN = token.ln;\n    }\n\n    function throwError() {\n        throw new Error('Please check the validity of the CSS block starting from the line #' + currentBlockLN);\n    }\n\n    function _getAST(_tokens, rule, _needInfo) {\n        tokens = _tokens;\n        needInfo = _needInfo;\n        pos = 0;\n\n        markSC();\n\n        return rule ? CSSPRules[rule]() : CSSPRules['stylesheet']();\n    }\n\n//any = braces | string | percentage | dimension | number | uri | functionExpression | funktion | ident | unary\n    function checkAny(_i) {\n        return checkBraces(_i) ||\n               checkString(_i) ||\n               checkPercentage(_i) ||\n               checkDimension(_i) ||\n               checkNumber(_i) ||\n               checkUri(_i) ||\n               checkFunctionExpression(_i) ||\n               checkFunktion(_i) ||\n               checkIdent(_i) ||\n               checkUnary(_i);\n    }\n\n    function getAny() {\n        if (checkBraces(pos)) return getBraces();\n        else if (checkString(pos)) return getString();\n        else if (checkPercentage(pos)) return getPercentage();\n        else if (checkDimension(pos)) return getDimension();\n        else if (checkNumber(pos)) return getNumber();\n        else if (checkUri(pos)) return getUri();\n        else if (checkFunctionExpression(pos)) return getFunctionExpression();\n        else if (checkFunktion(pos)) return getFunktion();\n        else if (checkIdent(pos)) return getIdent();\n        else if (checkUnary(pos)) return getUnary();\n    }\n\n//atkeyword = '@' ident:x -> [#atkeyword, x]\n    function checkAtkeyword(_i) {\n        var l;\n\n        if (tokens[_i++].type !== TokenType.CommercialAt) return fail(tokens[_i - 1]);\n\n        if (l = checkIdent(_i)) return l + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getAtkeyword() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n            [{ ln: tokens[startPos].ln }, CSSPNodeType.AtkeywordType, getIdent()]:\n            [CSSPNodeType.AtkeywordType, getIdent()];\n    }\n\n//attrib = '[' sc*:s0 ident:x sc*:s1 attrselector:a sc*:s2 (ident | string):y sc*:s3 ']' -> this.concat([#attrib], s0, [x], s1, [a], s2, [y], s3)\n//       | '[' sc*:s0 ident:x sc*:s1 ']' -> this.concat([#attrib], s0, [x], s1),\n    function checkAttrib(_i) {\n        if (tokens[_i].type !== TokenType.LeftSquareBracket) return fail(tokens[_i]);\n\n        if (!tokens[_i].right) return fail(tokens[_i]);\n\n        return tokens[_i].right - _i + 1;\n    }\n\n    function checkAttrib1(_i) {\n        var start = _i;\n\n        _i++;\n\n        var l = checkSC(_i); // s0\n\n        if (l) _i += l;\n\n        if (l = checkIdent(_i)) _i += l; // x\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l; // s1\n\n        if (l = checkAttrselector(_i)) _i += l; // a\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l; // s2\n\n        if ((l = checkIdent(_i)) || (l = checkString(_i))) _i += l; // y\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l; // s3\n\n        if (tokens[_i].type === TokenType.RightSquareBracket) return _i - start;\n\n        return fail(tokens[_i]);\n    }\n\n    function getAttrib1() {\n        var startPos = pos;\n\n        pos++;\n\n        var a = (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.AttribType] : [CSSPNodeType.AttribType])\n                .concat(getSC())\n                .concat([getIdent()])\n                .concat(getSC())\n                .concat([getAttrselector()])\n                .concat(getSC())\n                .concat([checkString(pos)? getString() : getIdent()])\n                .concat(getSC());\n\n        pos++;\n\n        return a;\n    }\n\n    function checkAttrib2(_i) {\n        var start = _i;\n\n        _i++;\n\n        var l = checkSC(_i);\n\n        if (l) _i += l;\n\n        if (l = checkIdent(_i)) _i += l;\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (tokens[_i].type === TokenType.RightSquareBracket) return _i - start;\n\n        return fail(tokens[_i]);\n    }\n\n    function getAttrib2() {\n        var startPos = pos;\n\n        pos++;\n\n        var a = (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.AttribType] : [CSSPNodeType.AttribType])\n                .concat(getSC())\n                .concat([getIdent()])\n                .concat(getSC());\n\n        pos++;\n\n        return a;\n    }\n\n    function getAttrib() {\n        if (checkAttrib1(pos)) return getAttrib1(); \n        if (checkAttrib2(pos)) return getAttrib2(); \n    }\n\n//attrselector = (seq('=') | seq('~=') | seq('^=') | seq('$=') | seq('*=') | seq('|=')):x -> [#attrselector, x]\n    function checkAttrselector(_i) {\n        if (tokens[_i].type === TokenType.EqualsSign) return 1;\n        if (tokens[_i].type === TokenType.VerticalLine && (!tokens[_i + 1] || tokens[_i + 1].type !== TokenType.EqualsSign)) return 1;\n\n        if (!tokens[_i + 1] || tokens[_i + 1].type !== TokenType.EqualsSign) return fail(tokens[_i]);\n\n        switch(tokens[_i].type) {\n            case TokenType.Tilde:\n            case TokenType.CircumflexAccent:\n            case TokenType.DollarSign:\n            case TokenType.Asterisk:\n            case TokenType.VerticalLine:\n                return 2;\n        }\n\n        return fail(tokens[_i]);\n    }\n\n    function getAttrselector() {\n        var startPos = pos,\n            s = tokens[pos++].value;\n\n        if (tokens[pos] && tokens[pos].type === TokenType.EqualsSign) s += tokens[pos++].value;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.AttrselectorType, s] :\n                [CSSPNodeType.AttrselectorType, s];\n    }\n\n//atrule = atruler | atruleb | atrules\n    function checkAtrule(_i) {\n        var start = _i,\n            l;\n\n        if (tokens[start].atrule_l !== undefined) return tokens[start].atrule_l;\n\n        if (l = checkAtruler(_i)) tokens[_i].atrule_type = 1;\n        else if (l = checkAtruleb(_i)) tokens[_i].atrule_type = 2;\n        else if (l = checkAtrules(_i)) tokens[_i].atrule_type = 3;\n        else return fail(tokens[start]);\n\n        tokens[start].atrule_l = l;\n\n        return l;\n    }\n\n    function getAtrule() {\n        switch (tokens[pos].atrule_type) {\n            case 1: return getAtruler();\n            case 2: return getAtruleb();\n            case 3: return getAtrules();\n        }\n    }\n\n//atruleb = atkeyword:ak tset*:ap block:b -> this.concat([#atruleb, ak], ap, [b])\n    function checkAtruleb(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkAtkeyword(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkTsets(_i)) _i += l;\n\n        if (l = checkBlock(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        return _i - start;\n    }\n\n    function getAtruleb() {\n        return (needInfo?\n                    [{ ln: tokens[pos].ln }, CSSPNodeType.AtrulebType, getAtkeyword()] :\n                    [CSSPNodeType.AtrulebType, getAtkeyword()])\n                        .concat(getTsets())\n                        .concat([getBlock()]);\n    }\n\n//atruler = atkeyword:ak atrulerq:x '{' atrulers:y '}' -> [#atruler, ak, x, y]\n    function checkAtruler(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkAtkeyword(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkAtrulerq(_i)) _i += l;\n\n        if (_i < tokens.length && tokens[_i].type === TokenType.LeftCurlyBracket) _i++;\n        else return fail(tokens[_i]);\n\n        if (l = checkAtrulers(_i)) _i += l;\n\n        if (_i < tokens.length && tokens[_i].type === TokenType.RightCurlyBracket) _i++;\n        else return fail(tokens[_i]);\n\n        return _i - start;\n    }\n\n    function getAtruler() {\n        var atruler = needInfo?\n                        [{ ln: tokens[pos].ln }, CSSPNodeType.AtrulerType, getAtkeyword(), getAtrulerq()] :\n                        [CSSPNodeType.AtrulerType, getAtkeyword(), getAtrulerq()];\n\n        pos++;\n\n        atruler.push(getAtrulers());\n\n        pos++;\n\n        return atruler;\n    }\n\n//atrulerq = tset*:ap -> [#atrulerq].concat(ap)\n    function checkAtrulerq(_i) {\n        return checkTsets(_i);\n    }\n\n    function getAtrulerq() {\n        return (needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.AtrulerqType] : [CSSPNodeType.AtrulerqType]).concat(getTsets());\n    }\n\n//atrulers = sc*:s0 ruleset*:r sc*:s1 -> this.concat([#atrulers], s0, r, s1)\n    function checkAtrulers(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkSC(_i)) _i += l;\n\n        while ((l = checkRuleset(_i)) || (l = checkAtrule(_i)) || (l = checkSC(_i))) {\n            _i += l;\n        }\n\n        tokens[_i].atrulers_end = 1;\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    function getAtrulers() {\n        var atrulers = (needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.AtrulersType] : [CSSPNodeType.AtrulersType]).concat(getSC()),\n            x;\n\n        while (!tokens[pos].atrulers_end) {\n            if (checkSC(pos)) {\n                atrulers = atrulers.concat(getSC());\n            } else if (checkRuleset(pos)) {\n                atrulers.push(getRuleset());\n            } else {\n                atrulers.push(getAtrule());\n            }\n        }\n\n        return atrulers.concat(getSC());\n    }\n\n//atrules = atkeyword:ak tset*:ap ';' -> this.concat([#atrules, ak], ap)\n    function checkAtrules(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkAtkeyword(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkTsets(_i)) _i += l;\n\n        if (_i >= tokens.length) return _i - start;\n\n        if (tokens[_i].type === TokenType.Semicolon) _i++;\n        else return fail(tokens[_i]);\n\n        return _i - start;\n    }\n\n    function getAtrules() {\n        var atrules = (needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.AtrulesType, getAtkeyword()] : [CSSPNodeType.AtrulesType, getAtkeyword()]).concat(getTsets());\n\n        pos++;\n\n        return atrules;\n    }\n\n//block = '{' blockdecl*:x '}' -> this.concatContent([#block], x)\n    function checkBlock(_i) {\n        if (_i < tokens.length && tokens[_i].type === TokenType.LeftCurlyBracket) return tokens[_i].right - _i + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getBlock() {\n        var block = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.BlockType] : [CSSPNodeType.BlockType],\n            end = tokens[pos].right;\n\n        pos++;\n\n        while (pos < end) {\n            if (checkBlockdecl(pos)) block = block.concat(getBlockdecl());\n            else throwError();\n        }\n\n        pos = end + 1;\n\n        return block;\n    }\n\n//blockdecl = sc*:s0 (filter | declaration):x decldelim:y sc*:s1 -> this.concat(s0, [x], [y], s1)\n//          | sc*:s0 (filter | declaration):x sc*:s1 -> this.concat(s0, [x], s1)\n//          | sc*:s0 decldelim:x sc*:s1 -> this.concat(s0, [x], s1)\n//          | sc+:s0 -> s0\n\n    function checkBlockdecl(_i) {\n        var l;\n\n        if (l = _checkBlockdecl0(_i)) tokens[_i].bd_type = 1;\n        else if (l = _checkBlockdecl1(_i)) tokens[_i].bd_type = 2;\n        else if (l = _checkBlockdecl2(_i)) tokens[_i].bd_type = 3;\n        else if (l = _checkBlockdecl3(_i)) tokens[_i].bd_type = 4;\n        else return fail(tokens[_i]);\n\n        return l;\n    }\n\n    function getBlockdecl() {\n        switch (tokens[pos].bd_type) {\n            case 1: return _getBlockdecl0();\n            case 2: return _getBlockdecl1();\n            case 3: return _getBlockdecl2();\n            case 4: return _getBlockdecl3();\n        }\n    }\n\n    //sc*:s0 (filter | declaration):x decldelim:y sc*:s1 -> this.concat(s0, [x], [y], s1)\n    function _checkBlockdecl0(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (l = checkFilter(_i)) {\n            tokens[_i].bd_filter = 1;\n            _i += l;\n        } else if (l = checkDeclaration(_i)) {\n            tokens[_i].bd_decl = 1;\n            _i += l;\n        } else return fail(tokens[_i]);\n\n        if (_i < tokens.length && (l = checkDecldelim(_i))) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    function _getBlockdecl0() {\n        return getSC()\n                .concat([tokens[pos].bd_filter? getFilter() : getDeclaration()])\n                .concat([getDecldelim()])\n                .concat(getSC());\n    }\n\n    //sc*:s0 (filter | declaration):x sc*:s1 -> this.concat(s0, [x], s1)\n    function _checkBlockdecl1(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (l = checkFilter(_i)) {\n            tokens[_i].bd_filter = 1;\n            _i += l;\n        } else if (l = checkDeclaration(_i)) {\n            tokens[_i].bd_decl = 1;\n            _i += l;\n        } else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    function _getBlockdecl1() {\n        return getSC()\n                .concat([tokens[pos].bd_filter? getFilter() : getDeclaration()])\n                .concat(getSC());\n    }\n\n    //sc*:s0 decldelim:x sc*:s1 -> this.concat(s0, [x], s1)\n    function _checkBlockdecl2(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (l = checkDecldelim(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    function _getBlockdecl2() {\n        return getSC()\n                 .concat([getDecldelim()])\n                 .concat(getSC());\n    }\n\n    //sc+:s0 -> s0\n    function _checkBlockdecl3(_i) {\n        return checkSC(_i);\n    }\n\n    function _getBlockdecl3() {\n        return getSC();\n    }\n\n//braces = '(' tset*:x ')' -> this.concat([#braces, '(', ')'], x)\n//       | '[' tset*:x ']' -> this.concat([#braces, '[', ']'], x)\n    function checkBraces(_i) {\n        if (_i >= tokens.length ||\n            (tokens[_i].type !== TokenType.LeftParenthesis &&\n             tokens[_i].type !== TokenType.LeftSquareBracket)\n            ) return fail(tokens[_i]);\n\n        return tokens[_i].right - _i + 1;\n    }\n\n    function getBraces() {\n        var startPos = pos,\n            left = pos,\n            right = tokens[pos].right;\n\n        pos++;\n\n        var tsets = getTsets();\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.BracesType, tokens[left].value, tokens[right].value].concat(tsets) :\n                [CSSPNodeType.BracesType, tokens[left].value, tokens[right].value].concat(tsets);\n    }\n\n    function checkCDC(_i) {}\n\n    function checkCDO(_i) {}\n\n    // node: Clazz\n    function checkClazz(_i) {\n        var l;\n\n        if (tokens[_i].clazz_l) return tokens[_i].clazz_l;\n\n        if (tokens[_i].type === TokenType.FullStop) {\n            if (l = checkIdent(_i + 1)) {\n                tokens[_i].clazz_l = l + 1;\n                return l + 1;\n            }\n        }\n\n        return fail(tokens[_i]);\n    }\n\n    function getClazz() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.ClazzType, getIdent()] :\n                [CSSPNodeType.ClazzType, getIdent()];\n    }\n\n    // node: Combinator\n    function checkCombinator(_i) {\n        if (tokens[_i].type === TokenType.PlusSign ||\n            tokens[_i].type === TokenType.GreaterThanSign ||\n            tokens[_i].type === TokenType.Tilde) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getCombinator() {\n        return needInfo?\n                [{ ln: tokens[pos].ln }, CSSPNodeType.CombinatorType, tokens[pos++].value] :\n                [CSSPNodeType.CombinatorType, tokens[pos++].value];\n    }\n\n    // node: Comment\n    function checkComment(_i) {\n        if (tokens[_i].type === TokenType.CommentML) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getComment() {\n        var startPos = pos,\n            s = tokens[pos].value.substring(2),\n            l = s.length;\n\n        if (s.charAt(l - 2) === '*' && s.charAt(l - 1) === '/') s = s.substring(0, l - 2);\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.CommentType, s] :\n                [CSSPNodeType.CommentType, s];\n    }\n\n    // declaration = property:x ':' value:y -> [#declaration, x, y]\n    function checkDeclaration(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkProperty(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (_i < tokens.length && tokens[_i].type === TokenType.Colon) _i++;\n        else return fail(tokens[_i]);\n\n        if (l = checkValue(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        return _i - start;\n    }\n\n    function getDeclaration() {\n        var declaration = needInfo?\n                [{ ln: tokens[pos].ln }, CSSPNodeType.DeclarationType, getProperty()] :\n                [CSSPNodeType.DeclarationType, getProperty()];\n\n        pos++;\n\n        declaration.push(getValue());\n\n        return declaration;\n    }\n\n    // node: Decldelim\n    function checkDecldelim(_i) {\n        if (_i < tokens.length && tokens[_i].type === TokenType.Semicolon) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getDecldelim() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.DecldelimType] :\n                [CSSPNodeType.DecldelimType];\n    }\n\n    // node: Delim\n    function checkDelim(_i) {\n        if (_i < tokens.length && tokens[_i].type === TokenType.Comma) return 1;\n\n        if (_i >= tokens.length) return fail(tokens[tokens.length - 1]);\n\n        return fail(tokens[_i]);\n    }\n\n    function getDelim() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.DelimType] :\n                [CSSPNodeType.DelimType];\n    }\n\n    // node: Dimension\n    function checkDimension(_i) {\n        var ln = checkNumber(_i),\n            li;\n\n        if (!ln || (ln && _i + ln >= tokens.length)) return fail(tokens[_i]);\n\n        if (li = checkNmName2(_i + ln)) return ln + li;\n\n        return fail(tokens[_i]);\n    }\n\n    function getDimension() {\n        var startPos = pos,\n            n = getNumber(),\n            dimension = needInfo ?\n                [{ ln: tokens[pos].ln }, CSSPNodeType.IdentType, getNmName2()] :\n                [CSSPNodeType.IdentType, getNmName2()];\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.DimensionType, n, dimension] :\n                [CSSPNodeType.DimensionType, n, dimension];\n    }\n\n//filter = filterp:x ':' filterv:y -> [#filter, x, y]\n    function checkFilter(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkFilterp(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (tokens[_i].type === TokenType.Colon) _i++;\n        else return fail(tokens[_i]);\n\n        if (l = checkFilterv(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        return _i - start;\n    }\n\n    function getFilter() {\n        var filter = needInfo?\n                [{ ln: tokens[pos].ln }, CSSPNodeType.FilterType, getFilterp()] :\n                [CSSPNodeType.FilterType, getFilterp()];\n\n        pos++;\n\n        filter.push(getFilterv());\n\n        return filter;\n    }\n\n//filterp = (seq('-filter') | seq('_filter') | seq('*filter') | seq('-ms-filter') | seq('filter')):t sc*:s0 -> this.concat([#property, [#ident, t]], s0)\n    function checkFilterp(_i) {\n        var start = _i,\n            l,\n            x;\n\n        if (_i < tokens.length) {\n            if (tokens[_i].value === 'filter') l = 1;\n            else {\n                x = joinValues2(_i, 2);\n\n                if (x === '-filter' || x === '_filter' || x === '*filter') l = 2;\n                else {\n                    x = joinValues2(_i, 4);\n\n                    if (x === '-ms-filter') l = 4;\n                    else return fail(tokens[_i]);\n                }\n            }\n\n            tokens[start].filterp_l = l;\n\n            _i += l;\n\n            if (checkSC(_i)) _i += l;\n\n            return _i - start;\n        }\n\n        return fail(tokens[_i]);\n    }\n\n    function getFilterp() {\n        var startPos = pos,\n            x = joinValues2(pos, tokens[pos].filterp_l),\n            ident = needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.IdentType, x] : [CSSPNodeType.IdentType, x];\n\n        pos += tokens[pos].filterp_l;\n\n        return (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.PropertyType, ident] : [CSSPNodeType.PropertyType, ident])\n                    .concat(getSC());\n\n    }\n\n//filterv = progid+:x -> [#filterv].concat(x)\n    function checkFilterv(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkProgid(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        while (l = checkProgid(_i)) {\n            _i += l;\n        }\n\n        tokens[start].last_progid = _i;\n\n        if (_i < tokens.length && (l = checkSC(_i))) _i += l;\n\n        if (_i < tokens.length && (l = checkImportant(_i))) _i += l;\n\n        return _i - start;\n    }\n\n    function getFilterv() {\n        var filterv = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.FiltervType] : [CSSPNodeType.FiltervType],\n            last_progid = tokens[pos].last_progid;\n\n        while (pos < last_progid) {\n            filterv.push(getProgid());\n        }\n\n        filterv = filterv.concat(checkSC(pos) ? getSC() : []);\n\n        if (pos < tokens.length && checkImportant(pos)) filterv.push(getImportant());\n\n        return filterv;\n    }\n\n//functionExpression = ``expression('' functionExpressionBody*:x ')' -> [#functionExpression, x.join('')],\n    function checkFunctionExpression(_i) {\n        var start = _i;\n\n        if (!tokens[_i] || tokens[_i++].value !== 'expression') return fail(tokens[_i - 1]);\n\n        if (!tokens[_i] || tokens[_i].type !== TokenType.LeftParenthesis) return fail(tokens[_i]);\n\n        return tokens[_i].right - start + 1;\n    }\n\n    function getFunctionExpression() {\n        var startPos = pos;\n\n        pos++;\n\n        var e = joinValues(pos + 1, tokens[pos].right - 1);\n\n        pos = tokens[pos].right + 1;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.FunctionExpressionType, e] :\n                [CSSPNodeType.FunctionExpressionType, e];\n    }\n\n//funktion = ident:x '(' functionBody:y ')' -> [#funktion, x, y]\n    function checkFunktion(_i) {\n        var start = _i,\n            l = checkIdent(_i);\n\n        if (!l) return fail(tokens[_i]);\n\n        _i += l;\n\n        if (_i >= tokens.length || tokens[_i].type !== TokenType.LeftParenthesis) return fail(tokens[_i - 1]);\n\n        return tokens[_i].right - start + 1;\n    }\n\n    function getFunktion() {\n        var startPos = pos,\n            ident = getIdent();\n\n        pos++;\n\n        var body = ident[needInfo? 2 : 1] !== 'not'?\n            getFunctionBody() :\n            getNotFunctionBody(); // ok, here we have CSS3 initial draft: http://dev.w3.org/csswg/selectors3/#negation\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.FunktionType, ident, body] :\n                [CSSPNodeType.FunktionType, ident, body];\n    }\n\n    function getFunctionBody() {\n        var startPos = pos,\n            body = [],\n            x;\n\n        while (tokens[pos].type !== TokenType.RightParenthesis) {\n            if (checkTset(pos)) {\n                x = getTset();\n                if ((needInfo && typeof x[1] === 'string') || typeof x[0] === 'string') body.push(x);\n                else body = body.concat(x);\n            } else if (checkClazz(pos)) {\n                body.push(getClazz());\n            } else {\n                throwError();\n            }\n        }\n\n        pos++;\n\n        return (needInfo?\n                    [{ ln: tokens[startPos].ln }, CSSPNodeType.FunctionBodyType] :\n                    [CSSPNodeType.FunctionBodyType]\n                ).concat(body);\n    }\n\n    function getNotFunctionBody() {\n        var startPos = pos,\n            body = [],\n            x;\n\n        while (tokens[pos].type !== TokenType.RightParenthesis) {\n            if (checkSimpleselector(pos)) {\n                body.push(getSimpleSelector());\n            } else {\n                throwError();\n            }\n        }\n\n        pos++;\n\n        return (needInfo?\n                    [{ ln: tokens[startPos].ln }, CSSPNodeType.FunctionBodyType] :\n                    [CSSPNodeType.FunctionBodyType]\n                ).concat(body);\n    }\n\n    // node: Ident\n    function checkIdent(_i) {\n        if (_i >= tokens.length) return fail(tokens[_i]);\n\n        var start = _i,\n            wasIdent = false;\n\n        if (tokens[_i].type === TokenType.LowLine) return checkIdentLowLine(_i);\n\n        // start char / word\n        if (tokens[_i].type === TokenType.HyphenMinus ||\n            tokens[_i].type === TokenType.Identifier ||\n            tokens[_i].type === TokenType.DollarSign ||\n            tokens[_i].type === TokenType.Asterisk) _i++;\n        else return fail(tokens[_i]);\n\n        wasIdent = tokens[_i - 1].type === TokenType.Identifier;\n\n        for (; _i < tokens.length; _i++) {\n            if (tokens[_i].type !== TokenType.HyphenMinus &&\n                tokens[_i].type !== TokenType.LowLine) {\n                    if (tokens[_i].type !== TokenType.Identifier &&\n                        (tokens[_i].type !== TokenType.DecimalNumber || !wasIdent)\n                        ) break;\n                    else wasIdent = true;\n            }   \n        }\n\n        if (!wasIdent && tokens[start].type !== TokenType.Asterisk) return fail(tokens[_i]);\n\n        tokens[start].ident_last = _i - 1;\n\n        return _i - start;\n    }\n\n    function checkIdentLowLine(_i) {\n        var start = _i;\n\n        _i++;\n\n        for (; _i < tokens.length; _i++) {\n            if (tokens[_i].type !== TokenType.HyphenMinus &&\n                tokens[_i].type !== TokenType.DecimalNumber &&\n                tokens[_i].type !== TokenType.LowLine &&\n                tokens[_i].type !== TokenType.Identifier) break;\n        }\n\n        tokens[start].ident_last = _i - 1;\n\n        return _i - start;\n    }\n\n    function getIdent() {\n        var startPos = pos,\n            s = joinValues(pos, tokens[pos].ident_last);\n\n        pos = tokens[pos].ident_last + 1;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.IdentType, s] :\n                [CSSPNodeType.IdentType, s];\n    }\n\n//important = '!' sc*:s0 seq('important') -> [#important].concat(s0)\n    function checkImportant(_i) {\n        var start = _i,\n            l;\n\n        if (tokens[_i++].type !== TokenType.ExclamationMark) return fail(tokens[_i - 1]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (tokens[_i].value !== 'important') return fail(tokens[_i]);\n\n        return _i - start + 1;\n    }\n\n    function getImportant() {\n        var startPos = pos;\n\n        pos++;\n\n        var sc = getSC();\n\n        pos++;\n\n        return (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.ImportantType] : [CSSPNodeType.ImportantType]).concat(sc);\n    }\n\n    // node: Namespace\n    function checkNamespace(_i) {\n        if (tokens[_i].type === TokenType.VerticalLine) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getNamespace() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.NamespaceType] :\n                [CSSPNodeType.NamespaceType];\n    }\n\n//nth = (digit | 'n')+:x -> [#nth, x.join('')]\n//    | (seq('even') | seq('odd')):x -> [#nth, x]\n    function checkNth(_i) {\n        return checkNth1(_i) || checkNth2(_i);\n    }\n\n    function checkNth1(_i) {\n        var start = _i;\n\n        for (; _i < tokens.length; _i++) {\n            if (tokens[_i].type !== TokenType.DecimalNumber && tokens[_i].value !== 'n') break;\n        }\n\n        if (_i !== start) {\n            tokens[start].nth_last = _i - 1;\n            return _i - start;\n        }\n\n        return fail(tokens[_i]);\n    }\n\n    function getNth() {\n        var startPos = pos;\n\n        if (tokens[pos].nth_last) {\n            var n = needInfo?\n                        [{ ln: tokens[startPos].ln }, CSSPNodeType.NthType, joinValues(pos, tokens[pos].nth_last)] :\n                        [CSSPNodeType.NthType, joinValues(pos, tokens[pos].nth_last)];\n\n            pos = tokens[pos].nth_last + 1;\n\n            return n;\n        }\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.NthType, tokens[pos++].value] :\n                [CSSPNodeType.NthType, tokens[pos++].value];\n    }\n\n    function checkNth2(_i) {\n        if (tokens[_i].value === 'even' || tokens[_i].value === 'odd') return 1;\n\n        return fail(tokens[_i]);\n    }\n\n//nthf = ':' seq('nth-'):x (seq('child') | seq('last-child') | seq('of-type') | seq('last-of-type')):y -> (x + y)\n    function checkNthf(_i) {\n        var start = _i,\n            l = 0;\n\n        if (tokens[_i++].type !== TokenType.Colon) return fail(tokens[_i - 1]); l++;\n\n        if (tokens[_i++].value !== 'nth' || tokens[_i++].value !== '-') return fail(tokens[_i - 1]); l += 2;\n\n        if ('child' === tokens[_i].value) {\n            l += 1;\n        } else if ('last-child' === tokens[_i].value +\n                                    tokens[_i + 1].value +\n                                    tokens[_i + 2].value) {\n            l += 3;\n        } else if ('of-type' === tokens[_i].value +\n                                 tokens[_i + 1].value +\n                                 tokens[_i + 2].value) {\n            l += 3;\n        } else if ('last-of-type' === tokens[_i].value +\n                                      tokens[_i + 1].value +\n                                      tokens[_i + 2].value +\n                                      tokens[_i + 3].value +\n                                      tokens[_i + 4].value) {\n            l += 5;\n        } else return fail(tokens[_i]);\n\n        tokens[start + 1].nthf_last = start + l - 1;\n\n        return l;\n    }\n\n    function getNthf() {\n        pos++;\n\n        var s = joinValues(pos, tokens[pos].nthf_last);\n\n        pos = tokens[pos].nthf_last + 1;\n\n        return s;\n    }\n\n//nthselector = nthf:x '(' (sc | unary | nth)*:y ')' -> [#nthselector, [#ident, x]].concat(y)\n    function checkNthselector(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkNthf(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (tokens[_i].type !== TokenType.LeftParenthesis || !tokens[_i].right) return fail(tokens[_i]);\n\n        l++;\n\n        var rp = tokens[_i++].right;\n\n        while (_i < rp) {\n            if (l = checkSC(_i)) _i += l;\n            else if (l = checkUnary(_i)) _i += l;\n            else if (l = checkNth(_i)) _i += l;\n            else return fail(tokens[_i]);\n        }\n\n        return rp - start + 1;\n    }\n\n    function getNthselector() {\n        var startPos = pos,\n            nthf = needInfo?\n                    [{ ln: tokens[pos].ln }, CSSPNodeType.IdentType, getNthf()] :\n                    [CSSPNodeType.IdentType, getNthf()],\n            ns = needInfo?\n                    [{ ln: tokens[pos].ln }, CSSPNodeType.NthselectorType, nthf] :\n                    [CSSPNodeType.NthselectorType, nthf];\n\n        pos++;\n\n        while (tokens[pos].type !== TokenType.RightParenthesis) {\n            if (checkSC(pos)) ns = ns.concat(getSC());\n            else if (checkUnary(pos)) ns.push(getUnary());\n            else if (checkNth(pos)) ns.push(getNth());\n        }\n\n        pos++;\n\n        return ns;\n    }\n\n    // node: Number\n    function checkNumber(_i) {\n        if (_i < tokens.length && tokens[_i].number_l) return tokens[_i].number_l;\n\n        if (_i < tokens.length && tokens[_i].type === TokenType.DecimalNumber &&\n            (!tokens[_i + 1] ||\n             (tokens[_i + 1] && tokens[_i + 1].type !== TokenType.FullStop))\n        ) return (tokens[_i].number_l = 1, tokens[_i].number_l); // 10\n\n        if (_i < tokens.length &&\n             tokens[_i].type === TokenType.DecimalNumber &&\n             tokens[_i + 1] && tokens[_i + 1].type === TokenType.FullStop &&\n             (!tokens[_i + 2] || (tokens[_i + 2].type !== TokenType.DecimalNumber))\n        ) return (tokens[_i].number_l = 2, tokens[_i].number_l); // 10.\n\n        if (_i < tokens.length &&\n            tokens[_i].type === TokenType.FullStop &&\n            tokens[_i + 1].type === TokenType.DecimalNumber\n        ) return (tokens[_i].number_l = 2, tokens[_i].number_l); // .10\n\n        if (_i < tokens.length &&\n            tokens[_i].type === TokenType.DecimalNumber &&\n            tokens[_i + 1] && tokens[_i + 1].type === TokenType.FullStop &&\n            tokens[_i + 2] && tokens[_i + 2].type === TokenType.DecimalNumber\n        ) return (tokens[_i].number_l = 3, tokens[_i].number_l); // 10.10\n\n        return fail(tokens[_i]);\n    }\n\n    function getNumber() {\n        var s = '',\n            startPos = pos,\n            l = tokens[pos].number_l;\n\n        for (var i = 0; i < l; i++) {\n            s += tokens[pos + i].value;\n        }\n\n        pos += l;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.NumberType, s] :\n                [CSSPNodeType.NumberType, s];\n    }\n\n    // node: Operator\n    function checkOperator(_i) {\n        if (_i < tokens.length &&\n            (tokens[_i].type === TokenType.Solidus ||\n            tokens[_i].type === TokenType.Comma ||\n            tokens[_i].type === TokenType.Colon ||\n            tokens[_i].type === TokenType.EqualsSign)) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getOperator() {\n        return needInfo?\n                [{ ln: tokens[pos].ln }, CSSPNodeType.OperatorType, tokens[pos++].value] :\n                [CSSPNodeType.OperatorType, tokens[pos++].value];\n    }\n\n    // node: Percentage\n    function checkPercentage(_i) {\n        var x = checkNumber(_i);\n\n        if (!x || (x && _i + x >= tokens.length)) return fail(tokens[_i]);\n\n        if (tokens[_i + x].type === TokenType.PercentSign) return x + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getPercentage() {\n        var startPos = pos,\n            n = getNumber();\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.PercentageType, n] :\n                [CSSPNodeType.PercentageType, n];\n    }\n\n//progid = sc*:s0 seq('progid:DXImageTransform.Microsoft.'):x letter+:y '(' (m_string | m_comment | ~')' char)+:z ')' sc*:s1\n//                -> this.concat([#progid], s0, [[#raw, x + y.join('') + '(' + z.join('') + ')']], s1),\n    function checkProgid(_i) {\n        var start = _i,\n            l,\n            x;\n\n        if (l = checkSC(_i)) _i += l;\n\n        if ((x = joinValues2(_i, 6)) === 'progid:DXImageTransform.Microsoft.') {\n            _start = _i;\n            _i += 6;\n        } else return fail(tokens[_i - 1]);\n\n        if (l = checkIdent(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        if (tokens[_i].type === TokenType.LeftParenthesis) {\n            tokens[start].progid_end = tokens[_i].right;\n            _i = tokens[_i].right + 1;\n        } else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    function getProgid() {\n        var startPos = pos,\n            progid_end = tokens[pos].progid_end;\n\n        return (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.ProgidType] : [CSSPNodeType.ProgidType])\n                .concat(getSC())\n                .concat([_getProgid(progid_end)])\n                .concat(getSC());\n    }\n\n    function _getProgid(progid_end) {\n        var startPos = pos,\n            x = joinValues(pos, progid_end);\n\n        pos = progid_end + 1;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.RawType, x] :\n                [CSSPNodeType.RawType, x];\n    }\n\n//property = ident:x sc*:s0 -> this.concat([#property, x], s0)\n    function checkProperty(_i) {\n        var start = _i,\n            l;\n\n        if (l = checkIdent(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        if (l = checkSC(_i)) _i += l;\n        return _i - start;\n    }\n\n    function getProperty() {\n        var startPos = pos;\n\n        return (needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.PropertyType, getIdent()] :\n                [CSSPNodeType.PropertyType, getIdent()])\n            .concat(getSC());\n    }\n\n    function checkPseudo(_i) {\n        return checkPseudoe(_i) ||\n               checkPseudoc(_i);\n    }\n\n    function getPseudo() {\n        if (checkPseudoe(pos)) return getPseudoe();\n        if (checkPseudoc(pos)) return getPseudoc();\n    }\n\n    function checkPseudoe(_i) {\n        var l;\n\n        if (tokens[_i++].type !== TokenType.Colon) return fail(tokens[_i - 1]);\n\n        if (tokens[_i++].type !== TokenType.Colon) return fail(tokens[_i - 1]);\n\n        if (l = checkIdent(_i)) return l + 2;\n\n        return fail(tokens[_i]);\n    }\n\n    function getPseudoe() {\n        var startPos = pos;\n\n        pos += 2;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.PseudoeType, getIdent()] :\n                [CSSPNodeType.PseudoeType, getIdent()];\n    }\n\n//pseudoc = ':' (funktion | ident):x -> [#pseudoc, x]\n    function checkPseudoc(_i) {\n        var l;\n\n        if (tokens[_i++].type !== TokenType.Colon) return fail(tokens[_i - 1]);\n\n        if ((l = checkFunktion(_i)) || (l = checkIdent(_i))) return l + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getPseudoc() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.PseudocType, checkFunktion(pos)? getFunktion() : getIdent()] :\n                [CSSPNodeType.PseudocType, checkFunktion(pos)? getFunktion() : getIdent()];\n    }\n\n    //ruleset = selector*:x block:y -> this.concat([#ruleset], x, [y])\n    function checkRuleset(_i) {\n        var start = _i,\n            l;\n\n        if (tokens[start].ruleset_l !== undefined) return tokens[start].ruleset_l;\n\n        while (l = checkSelector(_i)) {\n            _i += l;\n        }\n\n        if (l = checkBlock(_i)) _i += l;\n        else return fail(tokens[_i]);\n\n        tokens[start].ruleset_l = _i - start;\n\n        return _i - start;\n    }\n\n    function getRuleset() {\n        var ruleset = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.RulesetType] : [CSSPNodeType.RulesetType];\n\n        while (!checkBlock(pos)) {\n            ruleset.push(getSelector());\n        }\n\n        ruleset.push(getBlock());\n\n        return ruleset;\n    }\n\n    // node: S\n    function checkS(_i) {\n        if (tokens[_i].ws) return tokens[_i].ws_last - _i + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getS() {\n        var startPos = pos,\n            s = joinValues(pos, tokens[pos].ws_last);\n\n        pos = tokens[pos].ws_last + 1;\n\n        return needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.SType, s] : [CSSPNodeType.SType, s];\n    }\n\n    function checkSC(_i) {\n        var l,\n            lsc = 0;\n\n        while (_i < tokens.length) {\n            if (!(l = checkS(_i)) && !(l = checkComment(_i))) break;\n            _i += l;\n            lsc += l;\n        }\n\n        if (lsc) return lsc;\n\n        if (_i >= tokens.length) return fail(tokens[tokens.length - 1]);\n\n        return fail(tokens[_i]);\n    }\n\n    function getSC() {\n        var sc = [];\n\n        while (pos < tokens.length) {\n            if (checkS(pos)) sc.push(getS());\n            else if (checkComment(pos)) sc.push(getComment());\n            else break;\n        }\n\n        return sc;\n    }\n\n    //selector = (simpleselector | delim)+:x -> this.concat([#selector], x)\n    function checkSelector(_i) {\n        var start = _i,\n            l;\n\n        if (_i < tokens.length) {\n            while (l = checkSimpleselector(_i) || checkDelim(_i)) {\n                _i += l;\n            }\n\n            tokens[start].selector_end = _i - 1;\n\n            return _i - start;\n        }\n    }\n\n    function getSelector() {\n        var selector = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.SelectorType] : [CSSPNodeType.SelectorType],\n            selector_end = tokens[pos].selector_end;\n\n        while (pos <= selector_end) {\n            selector.push(checkDelim(pos) ? getDelim() : getSimpleSelector());\n        }\n\n        return selector;\n    }\n\n    // node: Shash\n    function checkShash(_i) {\n        if (tokens[_i].type !== TokenType.NumberSign) return fail(tokens[_i]);\n\n        var l = checkNmName(_i + 1);\n\n        if (l) return l + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getShash() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.ShashType, getNmName()] :\n                [CSSPNodeType.ShashType, getNmName()];\n    }\n\n//simpleselector = (nthselector | combinator | attrib | pseudo | clazz | shash | any | sc | namespace)+:x -> this.concatContent([#simpleselector], [x])\n    function checkSimpleselector(_i) {\n        var start = _i,\n            l;\n\n        while (_i < tokens.length) {\n            if (l = _checkSimpleSelector(_i)) _i += l;\n            else break;\n        }\n\n        if (_i - start) return _i - start;\n\n        if (_i >= tokens.length) return fail(tokens[tokens.length - 1]);\n\n        return fail(tokens[_i]);\n    }\n\n    function _checkSimpleSelector(_i) {\n        return checkNthselector(_i) ||\n               checkCombinator(_i) ||\n               checkAttrib(_i) ||\n               checkPseudo(_i) ||\n               checkClazz(_i) ||\n               checkShash(_i) ||\n               checkAny(_i) ||\n               checkSC(_i) ||\n               checkNamespace(_i);\n    }\n\n    function getSimpleSelector() {\n        var ss = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.SimpleselectorType] : [CSSPNodeType.SimpleselectorType],\n            t;\n\n        while (pos < tokens.length && _checkSimpleSelector(pos)) {\n            t = _getSimpleSelector();\n\n            if ((needInfo && typeof t[1] === 'string') || typeof t[0] === 'string') ss.push(t);\n            else ss = ss.concat(t);\n        }\n\n        return ss;\n    }\n\n    function _getSimpleSelector() {\n        if (checkNthselector(pos)) return getNthselector();\n        else if (checkCombinator(pos)) return getCombinator();\n        else if (checkAttrib(pos)) return getAttrib();\n        else if (checkPseudo(pos)) return getPseudo();\n        else if (checkClazz(pos)) return getClazz();\n        else if (checkShash(pos)) return getShash();\n        else if (checkAny(pos)) return getAny();\n        else if (checkSC(pos)) return getSC();\n        else if (checkNamespace(pos)) return getNamespace();\n    }\n\n    // node: String\n    function checkString(_i) {\n        if (_i < tokens.length &&\n            (tokens[_i].type === TokenType.StringSQ || tokens[_i].type === TokenType.StringDQ)\n        ) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getString() {\n        var startPos = pos;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.StringType, tokens[pos++].value] :\n                [CSSPNodeType.StringType, tokens[pos++].value];\n    }\n\n    //stylesheet = (cdo | cdc | sc | statement)*:x -> this.concat([#stylesheet], x)\n    function checkStylesheet(_i) {\n        var start = _i,\n            l;\n\n        while (_i < tokens.length) {\n            if (l = checkSC(_i)) _i += l;\n            else {\n                currentBlockLN = tokens[_i].ln;\n                if (l = checkAtrule(_i)) _i += l;\n                else if (l = checkRuleset(_i)) _i += l;\n                else if (l = checkUnknown(_i)) _i += l;\n                else throwError();\n            }\n        }\n\n        return _i - start;\n    }\n\n    function getStylesheet(_i) {\n        var t,\n            stylesheet = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.StylesheetType] : [CSSPNodeType.StylesheetType];\n\n        while (pos < tokens.length) {\n            if (checkSC(pos)) stylesheet = stylesheet.concat(getSC());\n            else {\n                currentBlockLN = tokens[pos].ln;\n                if (checkRuleset(pos)) stylesheet.push(getRuleset());\n                else if (checkAtrule(pos)) stylesheet.push(getAtrule());\n                else if (checkUnknown(pos)) stylesheet.push(getUnknown());\n                else throwError();\n            }\n        }\n\n        return stylesheet;\n    }\n\n//tset = vhash | any | sc | operator\n    function checkTset(_i) {\n        return checkVhash(_i) ||\n               checkAny(_i) ||\n               checkSC(_i) ||\n               checkOperator(_i);\n    }\n\n    function getTset() {\n        if (checkVhash(pos)) return getVhash();\n        else if (checkAny(pos)) return getAny();\n        else if (checkSC(pos)) return getSC();\n        else if (checkOperator(pos)) return getOperator();\n    }\n\n    function checkTsets(_i) {\n        var start = _i,\n            l;\n\n        while (l = checkTset(_i)) {\n            _i += l;\n        }\n\n        return _i - start;\n    }\n\n    function getTsets() {\n        var tsets = [],\n            x;\n\n        while (x = getTset()) {\n            if ((needInfo && typeof x[1] === 'string') || typeof x[0] === 'string') tsets.push(x);\n            else tsets = tsets.concat(x);\n        }\n\n        return tsets;\n    }\n\n    // node: Unary\n    function checkUnary(_i) {\n        if (_i < tokens.length &&\n            (tokens[_i].type === TokenType.HyphenMinus ||\n            tokens[_i].type === TokenType.PlusSign)\n        ) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getUnary() {\n        var startPos = pos;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.UnaryType, tokens[pos++].value] :\n                [CSSPNodeType.UnaryType, tokens[pos++].value];\n    }\n\n    // node: Unknown\n    function checkUnknown(_i) {\n        if (_i < tokens.length && tokens[_i].type === TokenType.CommentSL) return 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getUnknown() {\n        var startPos = pos;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.UnknownType, tokens[pos++].value] :\n                [CSSPNodeType.UnknownType, tokens[pos++].value];\n    }\n\n//    uri = seq('url(') sc*:s0 string:x sc*:s1 ')' -> this.concat([#uri], s0, [x], s1)\n//        | seq('url(') sc*:s0 (~')' ~m_w char)*:x sc*:s1 ')' -> this.concat([#uri], s0, [[#raw, x.join('')]], s1),\n    function checkUri(_i) {\n        var start = _i,\n            l;\n\n        if (_i < tokens.length && tokens[_i++].value !== 'url') return fail(tokens[_i - 1]);\n\n        if (!tokens[_i] || tokens[_i].type !== TokenType.LeftParenthesis) return fail(tokens[_i]);\n\n        return tokens[_i].right - start + 1;\n    }\n\n    function getUri() {\n        var startPos = pos,\n            uriExcluding = {};\n\n        pos += 2;\n\n        uriExcluding[TokenType.Space] = 1;\n        uriExcluding[TokenType.Tab] = 1;\n        uriExcluding[TokenType.Newline] = 1;\n        uriExcluding[TokenType.LeftParenthesis] = 1;\n        uriExcluding[TokenType.RightParenthesis] = 1;\n\n        if (checkUri1(pos)) {\n            var uri = (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.UriType] : [CSSPNodeType.UriType])\n                        .concat(getSC())\n                        .concat([getString()])\n                        .concat(getSC());\n\n            pos++;\n\n            return uri;\n        } else {\n            var uri = (needInfo? [{ ln: tokens[startPos].ln }, CSSPNodeType.UriType] : [CSSPNodeType.UriType])\n                        .concat(getSC()),\n                l = checkExcluding(uriExcluding, pos),\n                raw = needInfo?\n                        [{ ln: tokens[pos].ln }, CSSPNodeType.RawType, joinValues(pos, pos + l)] :\n                        [CSSPNodeType.RawType, joinValues(pos, pos + l)];\n\n            uri.push(raw);\n\n            pos += l + 1;\n\n            uri = uri.concat(getSC());\n\n            pos++;\n\n            return uri;\n        }\n    }\n\n    function checkUri1(_i) {\n        var start = _i,\n            l = checkSC(_i);\n\n        if (l) _i += l;\n\n        if (tokens[_i].type !== TokenType.StringDQ && tokens[_i].type !== TokenType.StringSQ) return fail(tokens[_i]);\n\n        _i++;\n\n        if (l = checkSC(_i)) _i += l;\n\n        return _i - start;\n    }\n\n    // value = (sc | vhash | any | block | atkeyword | operator | important)+:x -> this.concat([#value], x)\n    function checkValue(_i) {\n        var start = _i,\n            l;\n\n        while (_i < tokens.length) {\n            if (l = _checkValue(_i)) _i += l;\n            else break;\n        }\n\n        if (_i - start) return _i - start;\n\n        return fail(tokens[_i]);\n    }\n\n    function _checkValue(_i) {\n        return checkSC(_i) ||\n               checkVhash(_i) ||\n               checkAny(_i) ||\n               checkBlock(_i) ||\n               checkAtkeyword(_i) ||\n               checkOperator(_i) ||\n               checkImportant(_i);\n    }\n\n    function getValue() {\n        var ss = needInfo? [{ ln: tokens[pos].ln }, CSSPNodeType.ValueType] : [CSSPNodeType.ValueType],\n            t;\n\n        while (pos < tokens.length && _checkValue(pos)) {\n            t = _getValue();\n\n            if ((needInfo && typeof t[1] === 'string') || typeof t[0] === 'string') ss.push(t);\n            else ss = ss.concat(t);\n        }\n\n        return ss;\n    }\n\n    function _getValue() {\n        if (checkSC(pos)) return getSC();\n        else if (checkVhash(pos)) return getVhash();\n        else if (checkAny(pos)) return getAny();\n        else if (checkBlock(pos)) return getBlock();\n        else if (checkAtkeyword(pos)) return getAtkeyword();\n        else if (checkOperator(pos)) return getOperator();\n        else if (checkImportant(pos)) return getImportant();\n    }\n\n    // node: Vhash\n    function checkVhash(_i) {\n        if (_i >= tokens.length || tokens[_i].type !== TokenType.NumberSign) return fail(tokens[_i]);\n\n        var l = checkNmName2(_i + 1);\n\n        if (l) return l + 1;\n\n        return fail(tokens[_i]);\n    }\n\n    function getVhash() {\n        var startPos = pos;\n\n        pos++;\n\n        return needInfo?\n                [{ ln: tokens[startPos].ln }, CSSPNodeType.VhashType, getNmName2()] :\n                [CSSPNodeType.VhashType, getNmName2()];\n    }\n\n    function checkNmName(_i) {\n        var start = _i;\n\n        // start char / word\n        if (tokens[_i].type === TokenType.HyphenMinus ||\n            tokens[_i].type === TokenType.LowLine ||\n            tokens[_i].type === TokenType.Identifier ||\n            tokens[_i].type === TokenType.DecimalNumber) _i++;\n        else return fail(tokens[_i]);\n\n        for (; _i < tokens.length; _i++) {\n            if (tokens[_i].type !== TokenType.HyphenMinus &&\n                tokens[_i].type !== TokenType.LowLine &&\n                tokens[_i].type !== TokenType.Identifier &&\n                tokens[_i].type !== TokenType.DecimalNumber) break;\n        }\n\n        tokens[start].nm_name_last = _i - 1;\n\n        return _i - start;\n    }\n\n    function getNmName() {\n        var s = joinValues(pos, tokens[pos].nm_name_last);\n\n        pos = tokens[pos].nm_name_last + 1;\n\n        return s;\n    }\n\n    function checkNmName2(_i) {\n        var start = _i;\n\n        if (tokens[_i].type === TokenType.Identifier) return 1;\n        else if (tokens[_i].type !== TokenType.DecimalNumber) return fail(tokens[_i]);\n\n        _i++;\n\n        if (!tokens[_i] || tokens[_i].type !== TokenType.Identifier) return 1;\n\n        return 2;\n    }\n\n    function getNmName2() {\n        var s = tokens[pos].value;\n\n        if (tokens[pos++].type === TokenType.DecimalNumber &&\n                pos < tokens.length &&\n                tokens[pos].type === TokenType.Identifier\n        ) s += tokens[pos++].value;\n\n        return s;\n    }\n\n    function checkExcluding(exclude, _i) {\n        var start = _i;\n\n        while(_i < tokens.length) {\n            if (exclude[tokens[_i++].type]) break;\n        }\n\n        return _i - start - 2;\n    }\n\n    function joinValues(start, finish) {\n        var s = '';\n\n        for (var i = start; i < finish + 1; i++) {\n            s += tokens[i].value;\n        }\n\n        return s;\n    }\n\n    function joinValues2(start, num) {\n        if (start + num - 1 >= tokens.length) return;\n\n        var s = '';\n\n        for (var i = 0; i < num; i++) {\n            s += tokens[start + i].value;\n        }\n\n        return s;\n    }\n\n    function markSC() {\n        var ws = -1, // whitespaces\n            sc = -1, // ws and comments\n            t;\n\n        for (var i = 0; i < tokens.length; i++) {\n            t = tokens[i];\n            switch (t.type) {\n                case TokenType.Space:\n                case TokenType.Tab:\n                case TokenType.Newline:\n                    t.ws = true;\n                    t.sc = true;\n\n                    if (ws === -1) ws = i;\n                    if (sc === -1) sc = i;\n\n                    break;\n                case TokenType.CommentML:\n                    if (ws !== -1) {\n                        tokens[ws].ws_last = i - 1;\n                        ws = -1;\n                    }\n\n                    t.sc = true;\n\n                    break;\n                default:\n                    if (ws !== -1) {\n                        tokens[ws].ws_last = i - 1;\n                        ws = -1;\n                    }\n\n                    if (sc !== -1) {\n                        tokens[sc].sc_last = i - 1;\n                        sc = -1;\n                    }\n            }\n        }\n\n        if (ws !== -1) tokens[ws].ws_last = i - 1;\n        if (sc !== -1) tokens[sc].sc_last = i - 1;\n    }\n\n    return function(_tokens, rule, _needInfo) {\n        return _getAST(_tokens, rule, _needInfo);\n    }\n\n}());\n    return function(s, rule, _needInfo) {\n        return getCSSPAST(getTokens(s), rule, _needInfo);\n    }\n}());\nexports.srcToCSSP = srcToCSSP;\n","// CSSP\n\nexports.srcToCSSP = require('./gonzales.cssp.node.js').srcToCSSP;\n\nexports.csspToSrc = require('./cssp.translator.node.js').csspToSrc;\n\nexports.csspToTree = function(tree, level) {\n    var spaces = dummySpaces(level),\n        level = level ? level : 0,\n        s = (level ? '\\n' + spaces : '') + '[';\n\n    tree.forEach(function(e) {\n        if (e.ln === undefined) {\n            s += (Array.isArray(e) ? exports.csspToTree(e, level + 1) : ('\\'' + e.toString() + '\\'')) + ', ';\n        }\n    });\n\n    return s.substr(0, s.length - 2) + ']';\n}\n\nfunction dummySpaces(num) {\n    return '                                                  '.substr(0, num * 2);\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","/**\n * # Universal\n *\n * Check and extend the environment for universal usage\n */\n\n/**\n * [adapt description]\n * @param  {[type]} element [description]\n * @param  {[type]} options [description]\n * @return {[type]}         [description]\n */\nexport default function adapt (element, options) {\n\n  // detect environment setup\n  if (global.document) {\n    return false\n  }\n\n  const { context } = options\n\n  global.document = context || (() => {\n    var root = element\n    while (root.parent) {\n      root = root.parent\n    }\n    return root\n  })()\n\n  // https://github.com/fb55/domhandler/blob/master/index.js#L75\n  const ElementPrototype = Object.getPrototypeOf(global.document)\n\n  // alternative descriptor to access elements with filtering invalid elements (e.g. textnodes)\n  if (!Object.getOwnPropertyDescriptor(ElementPrototype, 'childTags')) {\n    Object.defineProperty(ElementPrototype, 'childTags', {\n      enumerable: true,\n      get () {\n        return this.children.filter((node) => {\n          // https://github.com/fb55/domelementtype/blob/master/index.js#L12\n          return node.type === 'tag' || node.type === 'script' || node.type === 'style'\n        })\n      }\n    })\n  }\n\n  if (!Object.getOwnPropertyDescriptor(ElementPrototype, 'attributes')) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n    // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap\n    Object.defineProperty(ElementPrototype, 'attributes', {\n      enumerable: true,\n      get () {\n        const { attribs } = this\n        const attributesNames = Object.keys(attribs)\n        const NamedNodeMap = attributesNames.reduce((attributes, attributeName, index) => {\n          attributes[index] = {\n            name: attributeName,\n            value: attribs[attributeName]\n          }\n          return attributes\n        }, { })\n        Object.defineProperty(NamedNodeMap, 'length', {\n          enumerable: false,\n          configurable: false,\n          value: attributesNames.length\n        })\n        return NamedNodeMap\n      }\n    })\n  }\n\n  if (!ElementPrototype.getAttribute) {\n    // https://docs.webplatform.org/wiki/dom/Element/getAttribute\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n    ElementPrototype.getAttribute = function (name) {\n      return this.attribs[name] || null\n    }\n  }\n\n  if (!ElementPrototype.getElementsByTagName) {\n    // https://docs.webplatform.org/wiki/dom/Document/getElementsByTagName\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n    ElementPrototype.getElementsByTagName = function (tagName) {\n      const HTMLCollection = []\n      traverseDescendants(this.childTags, (descendant) => {\n        if (descendant.name === tagName || tagName === '*') {\n          HTMLCollection.push(descendant)\n        }\n      })\n      return HTMLCollection\n    }\n  }\n\n  if (!ElementPrototype.getElementsByClassName) {\n    // https://docs.webplatform.org/wiki/dom/Document/getElementsByClassName\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n    ElementPrototype.getElementsByClassName = function (className) {\n      const names = className.trim().replace(/\\s+/g, ' ').split(' ')\n      const HTMLCollection = []\n      traverseDescendants([this], (descendant) => {\n        const descendantClassName = descendant.attribs.class\n        if (descendantClassName && names.every((name) => descendantClassName.indexOf(name) > -1)) {\n          HTMLCollection.push(descendant)\n        }\n      })\n      return HTMLCollection\n    }\n  }\n\n  if (!ElementPrototype.querySelectorAll) {\n    // https://docs.webplatform.org/wiki/css/selectors_api/querySelectorAll\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n    ElementPrototype.querySelectorAll = function (selectors) {\n      selectors = selectors.replace(/(>)(\\S)/g, '$1 $2').trim() // add space for '>' selector\n\n      // using right to left execution => https://github.com/fb55/css-select#how-does-it-work\n      const [discover, ...ascendings] = getInstructions(selectors)\n      const total = ascendings.length\n      return discover(this).filter((node) => {\n        var step = 0\n        while (step < total) {\n          node = ascendings[step](node, this)\n          if (!node) { // hierarchy doesn't match\n            return false\n          }\n          step += 1\n        }\n        return true\n      })\n    }\n  }\n\n  if (!ElementPrototype.contains) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n    ElementPrototype.contains = function (element) {\n      var inclusive = false\n      traverseDescendants([this], (descendant, done) => {\n        if (descendant === element) {\n          inclusive = true\n          done()\n        }\n      })\n      return inclusive\n    }\n  }\n\n  return true\n}\n\n/**\n * [getInstructions description]\n * @param  {[type]} selectors [description]\n * @return {[type]}           [description]\n */\nfunction getInstructions (selectors) {\n  return selectors.split(' ').reverse().map((selector, step) => {\n    const discover = step === 0\n    const [type, pseudo] = selector.split(':')\n\n    var validate = null\n    var instruction = null\n\n    switch (true) {\n\n      // child: '>'\n      case />/.test(type):\n        instruction = function checkParent (node) {\n          return (validate) => validate(node.parent) && node.parent\n        }\n        break\n\n      // class: '.'\n      case /^\\./.test(type):\n        const names = type.substr(1).split('.')\n        validate = (node) => {\n          const nodeClassName = node.attribs.class\n          return nodeClassName && names.every((name) => nodeClassName.indexOf(name) > -1)\n        }\n        instruction = function checkClass (node, root) {\n          if (discover) {\n            return node.getElementsByClassName(names.join(' '))\n          }\n          return (typeof node === 'function') ? node(validate) : getAncestor(node, root, validate)\n        }\n        break\n\n      // attribute: '[key=\"value\"]'\n      case /^\\[/.test(type):\n        const [attributeKey, attributeValue] = type.replace(/\\[|\\]|\"/g, '').split('=')\n        validate = (node) => {\n          const hasAttribute = Object.keys(node.attribs).indexOf(attributeKey) > -1\n          if (hasAttribute) { // regard optional attributeValue\n            if (!attributeValue || (node.attribs[attributeKey] === attributeValue)) {\n              return true\n            }\n          }\n          return false\n        }\n        instruction = function checkAttribute (node, root) {\n          if (discover) {\n            const NodeList = []\n            traverseDescendants([node], (descendant) => {\n              if (validate(descendant)) {\n                NodeList.push(descendant)\n              }\n            })\n            return NodeList\n          }\n          return (typeof node === 'function') ? node(validate) : getAncestor(node, root, validate)\n        }\n        break\n\n      // id: '#'\n      case /^#/.test(type):\n        const id = type.substr(1)\n        validate = (node) => {\n          return node.attribs.id === id\n        }\n        instruction = function checkId (node, root) {\n          if (discover) {\n            const NodeList = []\n            traverseDescendants([node], (descendant, done) => {\n              if (validate(descendant)) {\n                NodeList.push(descendant)\n                done()\n              }\n            })\n            return NodeList\n          }\n          return (typeof node === 'function') ? node(validate) : getAncestor(node, root, validate)\n        }\n        break\n\n      // universal: '*'\n      case /\\*/.test(type):\n        validate = (node) => true\n        instruction = function checkUniversal (node, root) {\n          if (discover) {\n            const NodeList = []\n            traverseDescendants([node], (descendant) => NodeList.push(descendant))\n            return NodeList\n          }\n          return (typeof node === 'function') ? node(validate) : getAncestor(node, root, validate)\n        }\n        break\n\n      // tag: '...'\n      default:\n        validate = (node) => {\n          return node.name === type\n        }\n        instruction = function checkTag (node, root) {\n          if (discover) {\n            const NodeList = []\n            traverseDescendants([node], (descendant) => {\n              if (validate(descendant)) {\n                NodeList.push(descendant)\n              }\n            })\n            return NodeList\n          }\n          return (typeof node === 'function') ? node(validate) : getAncestor(node, root, validate)\n        }\n    }\n\n    if (!pseudo) {\n      return instruction\n    }\n\n    const rule = pseudo.match(/-(child|type)\\((\\d+)\\)$/)\n    const kind = rule[1]\n    const index = parseInt(rule[2], 10) - 1\n\n    const validatePseudo = (node) => {\n      if (node) {\n        var compareSet = node.parent.childTags\n        if (kind === 'type') {\n          compareSet = compareSet.filter(validate)\n        }\n        const nodeIndex = compareSet.findIndex((child) => child === node)\n        if (nodeIndex === index) {\n          return true\n        }\n      }\n      return false\n    }\n\n    return function enhanceInstruction (node) {\n      const match = instruction(node)\n      if (discover) {\n        return match.reduce((NodeList, matchedNode) => {\n          if (validatePseudo(matchedNode)) {\n            NodeList.push(matchedNode)\n          }\n          return NodeList\n        }, [])\n      }\n      return validatePseudo(match) && match\n    }\n  })\n}\n\n/**\n * Recursive walki\n * @param  {[type]} nodes   [description]\n * @param  {[type]} handler [description]\n * @return {[type]}         [description]\n */\nfunction traverseDescendants (nodes, handler) {\n  nodes.forEach((node) => {\n    var progress = true\n    handler(node, () => progress = false)\n    if (node.childTags && progress) {\n      traverseDescendants(node.childTags, handler)\n    }\n  })\n}\n\n/**\n * [getAncestor description]\n * @param  {[type]} node     [description]\n * @param  {[type]} root     [description]\n * @param  {[type]} validate [description]\n * @return {[type]}          [description]\n */\nfunction getAncestor (node, root, validate) {\n  while (node.parent) {\n    node = node.parent\n    if (validate(node)) {\n      return node\n    }\n    if (node === root) {\n      break\n    }\n  }\n  return null\n}\n","/**\n * # Match\n *\n * Retrieves selector\n */\n\nconst defaultIgnore = {\n  attribute (attributeName) {\n    return [\n      'style',\n      'data-reactid',\n      'data-react-checksum'\n    ].indexOf(attributeName) > -1\n  }\n}\n\n/**\n * Get the path of the element\n * @param  {HTMLElement} node    - [description]\n * @param  {Object}      options - [description]\n * @return {String}              - [description]\n */\nexport default function match (node, options) {\n  const path = []\n  var element = node\n  var length = path.length\n\n  const {\n    root = document,\n    skip = null,\n    ignore = {}\n  } = options\n\n  const skipCompare = skip && (Array.isArray(skip) ? skip : [skip]).map((entry) => {\n    if (typeof entry !== 'function') {\n      return (element) => element === entry\n    }\n    return entry\n  })\n\n  const skipChecks = (element) => {\n    return skip && skipCompare.some((compare) => compare(element))\n  }\n\n  var ignoreClass = false\n\n  Object.keys(ignore).forEach((type) => {\n    if (type === 'class') {\n      ignoreClass = true\n    }\n    var predicate = ignore[type]\n    if (typeof predicate === 'function') return\n    if (typeof predicate === 'number') {\n      predicate = predicate.toString()\n    }\n    if (typeof predicate === 'string') {\n      predicate = new RegExp(predicate)\n    }\n    // check class-/attributename for regex\n    ignore[type] = predicate.test.bind(predicate)\n  })\n\n  if (ignoreClass) {\n    const ignoreAttribute = ignore.attribute\n    ignore.attribute = (name, value, defaultPredicate) => {\n      return ignore.class(value) || ignoreAttribute && ignoreAttribute(name, value, defaultPredicate)\n    }\n  }\n\n  while (element !== root) {\n\n    if (skipChecks(element) !== true) {\n      // global\n      if (checkId(element, path, ignore)) break\n      if (checkClassGlobal(element, path, ignore, root)) break\n      if (checkAttributeGlobal(element, path, ignore, root)) break\n      if (checkTagGlobal(element, path, ignore, root)) break\n\n      // local\n      checkClassLocal(element, path, ignore)\n\n      // define only one selector each iteration\n      if (path.length === length) {\n        checkAttributeLocal(element, path, ignore)\n      }\n      if (path.length === length) {\n        checkTagLocal(element, path, ignore)\n      }\n\n      if (path.length === length) {\n        checkClassChild(element, path, ignore)\n      }\n      if (path.length === length) {\n        checkAttributeChild(element, path, ignore)\n      }\n      if (path.length === length) {\n        checkTagChild(element, path, ignore)\n      }\n    }\n\n    element = element.parentNode\n    length = path.length\n  }\n\n  if (element === root) {\n    path.unshift('*')\n  }\n\n  return path.join(' ')\n}\n\n\n/**\n * [checkClassGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassGlobal (element, path, ignore, root) {\n  return checkClass(element, path, ignore, root)\n}\n\n/**\n * [checkClassLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassLocal (element, path, ignore) {\n  return checkClass(element, path, ignore, element.parentNode)\n}\n\n/**\n * [checkClassChild description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClassChild (element, path, ignore) {\n  const className = element.getAttribute('class')\n  if (checkIgnore(ignore.class, className)) {\n    return false\n  }\n  return checkChild(element, path, `.${className.trim().replace(/\\s+/g, '.')}`)\n}\n\n/**\n * [checkAttributeGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeGlobal (element, path, ignore, root) {\n  return checkAttribute(element, path, ignore, root)\n}\n\n/**\n * [checkAttributeLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeLocal (element, path, ignore) {\n  return checkAttribute(element, path, ignore, element.parentNode)\n}\n\n/**\n * [checkAttributeChild description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttributeChild (element, path, ignore) {\n  const attributes = element.attributes\n  return Object.keys(attributes).some((key) => {\n    const attribute = attributes[key]\n    const attributeName = attribute.name\n    const attributeValue = attribute.value\n    if (checkIgnore(ignore.attribute, attributeName, attributeValue, defaultIgnore.attribute)) {\n      return false\n    }\n    const pattern = `[${attributeName}=\"${attributeValue}\"]`\n    return checkChild(element, path, pattern)\n  })\n}\n\n/**\n * [checkTagGlobal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagGlobal (element, path, ignore, root) {\n  return checkTag(element, path, ignore, root)\n}\n\n/**\n * [checkTagLocal description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagLocal (element, path, ignore) {\n  return checkTag(element, path, ignore, element.parentNode)\n}\n\n/**\n * [checkTabChildren description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTagChild (element, path, ignore) {\n  const tagName = element.tagName.toLowerCase()\n  if (checkIgnore(ignore.tag, tagName)) {\n    return false\n  }\n  return checkChild(element, path, tagName)\n}\n\n/**\n * [checkId description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkId (element, path, ignore) {\n  const id = element.getAttribute('id')\n  if (checkIgnore(ignore.id, id)) {\n    return false\n  }\n  path.unshift(`#${id}`)\n  return true\n}\n\n/**\n * [checkClass description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @param  {HTMLElement} parent  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkClass (element, path, ignore, parent) {\n  const className = element.getAttribute('class')\n  if (checkIgnore(ignore.class, className)) {\n    return false\n  }\n  const matches = parent.getElementsByClassName(className)\n  if (matches.length === 1) {\n    path.unshift(`.${className.trim().replace(/\\s+/g, '.')}`)\n    return true\n  }\n  return false\n}\n\n/**\n * [checkAttribute description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {Object}      ignore  - [description]\n * @param  {HTMLElement} parent  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkAttribute (element, path, ignore, parent) {\n  const attributes = element.attributes\n  return Object.keys(attributes).some((key) => {\n    const attribute = attributes[key]\n    const attributeName = attribute.name\n    const attributeValue = attribute.value\n    if (checkIgnore(ignore.attribute, attributeName, attributeValue, defaultIgnore.attribute)) {\n      return false\n    }\n    const pattern = `[${attributeName}=\"${attributeValue}\"]`\n    const matches = parent.querySelectorAll(pattern)\n    if (matches.length === 1) {\n      path.unshift(pattern)\n      return true\n    }\n  })\n}\n\n/**\n * [checkTag description]\n * @param  {HTMLElement} element - [description]\n * @param  {Array}       path    - [description]\n * @param  {HTMLElement} parent  - [description]\n * @param  {Object}      ignore  - [description]\n * @return {Boolean}             - [description]\n */\nfunction checkTag (element, path, ignore, parent) {\n  const tagName = element.tagName.toLowerCase()\n  if (checkIgnore(ignore.tag, tagName)) {\n    return false\n  }\n  const matches = parent.getElementsByTagName(tagName)\n  if (matches.length === 1) {\n    path.unshift(tagName)\n    return true\n  }\n  return false\n}\n\n/**\n * [checkChild description]\n * Note: childTags is a custom property to use a view filter for tags on for virutal elements\n * @param  {HTMLElement} element  - [description]\n * @param  {Array}       path     - [description]\n * @param  {String}      selector - [description]\n * @return {Boolean}              - [description]\n */\nfunction checkChild (element, path, selector) {\n  const parent = element.parentNode\n  const children = parent.childTags || parent.children\n  for (var i = 0, l = children.length; i < l; i++) {\n    if (children[i] === element) {\n      path.unshift(`> ${selector}:nth-child(${i+1})`)\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * [checkIgnore description]\n * @param  {Function} predicate        [description]\n * @param  {string}   name             [description]\n * @param  {string}   value            [description]\n * @param  {Function} defaultPredicate [description]\n * @return {boolean}                   [description]\n */\nfunction checkIgnore (predicate, name, value, defaultPredicate) {\n  if (!name) {\n    return true\n  }\n  const check = predicate || defaultPredicate\n  if (!check) {\n    return false\n  }\n  return check(name, value || name, defaultPredicate)\n}\n","/**\n * # Optimize\n *\n * 1.) Improve efficiency through shorter selectors by removing redundancy\n * 2.) Improve robustness through selector transformation\n */\n\nimport adapt from './adapt'\n\n/**\n * Apply different optimization techniques\n * @param  {string}      selector - [description]\n * @param  {HTMLElement} element  - [description]\n * @return {string}               - [description]\n */\nexport default function optimize (selector, element, options = {}) {\n\n  const globalModified = adapt(element, options)\n\n  // chunk parts outside of quotes (http://stackoverflow.com/a/25663729)\n  var path = selector.replace(/> /g, '>').split(/\\s+(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/)\n\n  if (path.length < 3) {\n    return selector\n  }\n\n  const shortened = [path.pop()]\n  while (path.length > 1)  {\n    const current = path.pop()\n    const prePart = path.join(' ')\n    const postPart = shortened.join(' ')\n\n    const pattern = `${prePart} ${postPart}`\n    const matches = document.querySelectorAll(pattern)\n    if (matches.length !== 1) {\n      shortened.unshift(optimizePart(prePart, current, postPart, element))\n    }\n  }\n  shortened.unshift(path[0])\n  path = shortened\n\n  // optimize start + end\n  path[0] = optimizePart('', path[0], path.slice(1).join(' '), element)\n  path[path.length-1] = optimizePart(path.slice(0, -1).join(' '), path[path.length-1], '', element)\n\n  if (globalModified) {\n    delete global.document\n  }\n\n  return path.join(' ').replace(/>/g, '> ').trim()\n}\n\n/**\n * Improve a chunk of the selector\n * @param  {string}      prePart  - [description]\n * @param  {string}      current  - [description]\n * @param  {string}      postPart - [description]\n * @param  {HTMLElement} element  - [description]\n * @return {string}               - [description]\n */\nfunction optimizePart (prePart, current, postPart, element) {\n  if (prePart.length) prePart = `${prePart} `\n  if (postPart.length) postPart = ` ${postPart}`\n\n  // robustness: attribute without value (generalization)\n  if (/\\[*\\]/.test(current)) {\n    const key = current.replace(/=.*$/, ']')\n    var pattern = `${prePart}${key}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = key\n    } else {\n      // robustness: replace specific key-value with tag (heuristic)\n      const references = document.querySelectorAll(`${prePart}${key}`)\n      for (var i = 0, l = references.length; i < l; i++) {\n        if (references[i].contains(element)) {\n          const description = references[i].tagName.toLowerCase()\n          var pattern = `${prePart}${description}${postPart}`\n          var matches = document.querySelectorAll(pattern)\n          if (matches.length === 1 && matches[0] === element) {\n            current = description\n          }\n          break\n        }\n      }\n    }\n  }\n\n  // robustness: descendant instead child (heuristic)\n  if (/>/.test(current)) {\n    const descendant = current.replace(/>/, '')\n    var pattern = `${prePart}${descendant}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = descendant\n    }\n  }\n\n  // robustness: 'nth-of-type' instead 'nth-child' (heuristic)\n  if (/:nth-child/.test(current)) {\n    // TODO: consider complete coverage of 'nth-of-type' replacement\n    const type = current.replace(/nth-child/g, 'nth-of-type')\n    var pattern = `${prePart}${type}${postPart}`\n    var matches = document.querySelectorAll(pattern)\n    if (matches.length === 1 && matches[0] === element) {\n      current = type\n    }\n  }\n\n  // efficiency: combinations of classname (partial permutations)\n  if (/\\.\\S+\\.\\S+/.test(current)) {\n    const names = current.trim().split('.').slice(1).map((name) => `.${name}`)\n                                .sort((curr, next) => curr.length - next.length)\n    while (names.length) {\n      var partial = current.replace(names.shift(), '')\n      var pattern = `${prePart}${partial}${postPart}`\n      var matches = document.querySelectorAll(pattern)\n      if (matches.length === 1 && matches[0] === element) {\n        current = partial\n      }\n    }\n    // robustness: degrade complex classname (heuristic)\n    if (current && current.match(/\\./g).length > 2) {\n      const references = document.querySelectorAll(`${prePart}${current}`)\n      for (var i = 0, l = references.length; i < l; i++) {\n        if (references[i].contains(element)) {\n          // TODO:\n          // - check using attributes + regard excludes\n          const description = references[i].tagName.toLowerCase()\n          var pattern = `${prePart}${description}${postPart}`\n          var matches = document.querySelectorAll(pattern)\n          if (matches.length === 1 && matches[0] === element) {\n            current = description\n          }\n          break\n        }\n      }\n    }\n  }\n\n  return current\n}\n","/**\n * # Select\n *\n * Construct a unique CSS queryselector to access the selected DOM element(s).\n * Applies different matching and optimization strategies for efficiency.\n */\n\nimport adapt from './adapt'\nimport match from './match'\nimport optimize from './optimize'\n\n/**\n * Choose action depending on the input (single/multi)\n * @param  {HTMLElement|Array} input   - [description]\n * @param  {Object}            options - [description]\n * @return {string}                    - [description]\n */\nexport default function getQuerySelector (input, options = {}) {\n  if (Array.isArray(input)) {\n    return getMultiSelector(input, options)\n  }\n  return getSingleSelector(input, options)\n}\n\n/**\n * Get a selector for the provided element\n * @param  {HTMLElement} element - [description]\n * @param  {Object}      options - [description]\n * @return {String}              - [description]\n */\nexport function getSingleSelector (element, options) {\n\n  if (element.nodeType === 3) {\n    return getSingleSelector(element.parentNode)\n  }\n  if (element.nodeType !== 1) {\n    throw new Error(`Invalid input - only HTMLElements or representations of them are supported! (not \"${typeof element}\")`)\n  }\n\n  const globalModified = adapt(element, options)\n\n  const selector = match(element, options)\n  const optimized = optimize(selector, element, options)\n\n  // debug\n  // console.log(`\n  //   selector: ${selector}\n  //   optimized:${optimized}\n  // `)\n\n  if (globalModified) {\n    delete global.document\n  }\n\n  return optimized\n}\n\n/**\n * Get a selector to match multiple children from a parent\n * @param  {Array}  elements - [description]\n * @param  {Object} options  - [description]\n * @return {string}          - [description]\n */\nexport function getMultiSelector (elements, options) {\n  var commonParentNode = null\n  var commonClassName = null\n  var commonAttribute = null\n  var commonTagName = null\n\n  for (var i = 0, l = elements.length; i < l; i++) {\n    var element = elements[i]\n    if (!commonParentNode) { // 1st entry\n      commonParentNode = element.parentNode\n      commonClassName = element.className\n      // commonAttribute = element.attributes\n      commonTagName = element.tagName\n    } else if (commonParentNode !== element.parentNode) {\n      return console.log('Can\\'t be efficiently mapped. It probably best to use multiple single selectors instead!')\n    }\n    if (element.className !== commonClassName) {\n      var classNames = []\n      var longer, shorter\n      if (element.className.length > commonClassName.length) {\n        longer = element.className\n        shorter = commonClassName\n      } else {\n        longer = commonClassName\n        shorter = element.className\n      }\n      shorter.split(' ').forEach((name) => {\n        if (longer.indexOf(name) > -1) {\n          classNames.push(name)\n        }\n      })\n      commonClassName = classNames.join(' ')\n    }\n    // TODO:\n    // - check attributes\n    // if (element.attributes !== commonAttribute) {\n    //\n    // }\n    if (element.tagName !== commonTagName) {\n      commonTagName = null\n    }\n  }\n\n  const selector = getSingleSelector(commonParentNode, options)\n  console.log(selector, commonClassName, commonAttribute, commonTagName)\n\n  if (commonClassName) {\n    return `${selector} > .${commonClassName.replace(/ /g, '.')}`\n  }\n  // if (commonAttribute) {\n  //\n  // }\n  if (commonTagName) {\n    return `${selector} > ${commonTagName.toLowerCase()}`\n  }\n  return `${selector} > *`\n}\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap)\n    : new BasicSourceMapConsumer(sourceMap);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      if (source != null && sourceRoot != null) {\n        source = util.join(sourceRoot, source);\n      }\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: Optional. the column number in the original source.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    if (this.sourceRoot != null) {\n      needle.source = util.relative(this.sourceRoot, needle.source);\n    }\n    if (!this._sources.has(needle.source)) {\n      return [];\n    }\n    needle.source = this._sources.indexOf(needle.source);\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The only parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._sources.toArray().map(function (s) {\n      return this.sourceRoot != null ? util.join(this.sourceRoot, s) : s;\n    }, this);\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          if (this.sourceRoot != null) {\n            source = util.join(this.sourceRoot, source);\n          }\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    if (this.sourceRoot != null) {\n      aSource = util.relative(this.sourceRoot, aSource);\n    }\n\n    if (this._sources.has(aSource)) {\n      return this.sourcesContent[this._sources.indexOf(aSource)];\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = aSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + aSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + aSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    if (this.sourceRoot != null) {\n      source = util.relative(this.sourceRoot, source);\n    }\n    if (!this._sources.has(source)) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n    source = this._sources.indexOf(source);\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The only parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = JSON.parse(aSourceMap.replace(/^\\)\\]\\}'/, ''));\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'))\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.\n *   - column: The column number in the generated source.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.\n *   - column: The column number in the original source, or null.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.\n *   - column: The column number in the original source.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.\n *   - column: The column number in the generated source, or null.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer.sources.indexOf(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        if (section.consumer.sourceRoot !== null) {\n          source = util.join(section.consumer.sourceRoot, source);\n        }\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = section.consumer._names.at(mapping.name);\n        this._names.add(name);\n        name = this._names.indexOf(name);\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex];\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex];\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.]*)(?::(\\d+))?(\\S*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || !!aPath.match(urlRegexp);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = mappingA.source - mappingB.source;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return mappingA.name - mappingB.name;\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n","/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n","/*!\n * type-detect\n * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>\n * MIT Licensed\n */\n\n/*!\n * Primary Exports\n */\n\nvar exports = module.exports = getType;\n\n/**\n * ### typeOf (obj)\n *\n * Use several different techniques to determine\n * the type of object being tested.\n *\n *\n * @param {Mixed} object\n * @return {String} object type\n * @api public\n */\nvar objectTypeRegexp = /^\\[object (.*)\\]$/;\n\nfunction getType(obj) {\n  var type = Object.prototype.toString.call(obj).match(objectTypeRegexp)[1].toLowerCase();\n  // Let \"new String('')\" return 'object'\n  if (typeof Promise === 'function' && obj instanceof Promise) return 'promise';\n  // PhantomJS has type \"DOMWindow\" for null\n  if (obj === null) return 'null';\n  // PhantomJS has type \"DOMWindow\" for undefined\n  if (obj === undefined) return 'undefined';\n  return type;\n}\n\nexports.Library = Library;\n\n/**\n * ### Library\n *\n * Create a repository for custom type detection.\n *\n * ```js\n * var lib = new type.Library;\n * ```\n *\n */\n\nfunction Library() {\n  if (!(this instanceof Library)) return new Library();\n  this.tests = {};\n}\n\n/**\n * #### .of (obj)\n *\n * Expose replacement `typeof` detection to the library.\n *\n * ```js\n * if ('string' === lib.of('hello world')) {\n *   // ...\n * }\n * ```\n *\n * @param {Mixed} object to test\n * @return {String} type\n */\n\nLibrary.prototype.of = getType;\n\n/**\n * #### .define (type, test)\n *\n * Add a test to for the `.test()` assertion.\n *\n * Can be defined as a regular expression:\n *\n * ```js\n * lib.define('int', /^[0-9]+$/);\n * ```\n *\n * ... or as a function:\n *\n * ```js\n * lib.define('bln', function (obj) {\n *   if ('boolean' === lib.of(obj)) return true;\n *   var blns = [ 'yes', 'no', 'true', 'false', 1, 0 ];\n *   if ('string' === lib.of(obj)) obj = obj.toLowerCase();\n *   return !! ~blns.indexOf(obj);\n * });\n * ```\n *\n * @param {String} type\n * @param {RegExp|Function} test\n * @api public\n */\n\nLibrary.prototype.define = function(type, test) {\n  if (arguments.length === 1) return this.tests[type];\n  this.tests[type] = test;\n  return this;\n};\n\n/**\n * #### .test (obj, test)\n *\n * Assert that an object is of type. Will first\n * check natives, and if that does not pass it will\n * use the user defined custom tests.\n *\n * ```js\n * assert(lib.test('1', 'int'));\n * assert(lib.test('yes', 'bln'));\n * ```\n *\n * @param {Mixed} object\n * @param {String} type\n * @return {Boolean} result\n * @api public\n */\n\nLibrary.prototype.test = function(obj, type) {\n  if (type === getType(obj)) return true;\n  var test = this.tests[type];\n\n  if (test && 'regexp' === getType(test)) {\n    return test.test(obj);\n  } else if (test && 'function' === getType(test)) {\n    return test(obj);\n  } else {\n    throw new ReferenceError('Type test \"' + type + '\" not defined or invalid.');\n  }\n};\n","/*!\n * URI.js - Mutating URLs\n * IPv6 Support\n *\n * Version: 1.19.2\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.IPv6 = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  /*\n  var _in = \"fe80:0000:0000:0000:0204:61ff:fe9d:f156\";\n  var _out = IPv6.best(_in);\n  var _expected = \"fe80::204:61ff:fe9d:f156\";\n\n  console.log(_in, _out, _expected, _out === _expected);\n  */\n\n  // save current IPv6 variable, if any\n  var _IPv6 = root && root.IPv6;\n\n  function bestPresentation(address) {\n    // based on:\n    // Javascript to test an IPv6 address for proper format, and to\n    // present the \"best text representation\" according to IETF Draft RFC at\n    // http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04\n    // 8 Feb 2010 Rich Brown, Dartware, LLC\n    // Please feel free to use this code as long as you provide a link to\n    // http://www.intermapper.com\n    // http://intermapper.com/support/tools/IPV6-Validator.aspx\n    // http://download.dartware.com/thirdparty/ipv6validator.js\n\n    var _address = address.toLowerCase();\n    var segments = _address.split(':');\n    var length = segments.length;\n    var total = 8;\n\n    // trim colons (:: or ::a:b:c… or …a:b:c::)\n    if (segments[0] === '' && segments[1] === '' && segments[2] === '') {\n      // must have been ::\n      // remove first two items\n      segments.shift();\n      segments.shift();\n    } else if (segments[0] === '' && segments[1] === '') {\n      // must have been ::xxxx\n      // remove the first item\n      segments.shift();\n    } else if (segments[length - 1] === '' && segments[length - 2] === '') {\n      // must have been xxxx::\n      segments.pop();\n    }\n\n    length = segments.length;\n\n    // adjust total segments for IPv4 trailer\n    if (segments[length - 1].indexOf('.') !== -1) {\n      // found a \".\" which means IPv4\n      total = 7;\n    }\n\n    // fill empty segments them with \"0000\"\n    var pos;\n    for (pos = 0; pos < length; pos++) {\n      if (segments[pos] === '') {\n        break;\n      }\n    }\n\n    if (pos < total) {\n      segments.splice(pos, 1, '0000');\n      while (segments.length < total) {\n        segments.splice(pos, 0, '0000');\n      }\n    }\n\n    // strip leading zeros\n    var _segments;\n    for (var i = 0; i < total; i++) {\n      _segments = segments[i].split('');\n      for (var j = 0; j < 3 ; j++) {\n        if (_segments[0] === '0' && _segments.length > 1) {\n          _segments.splice(0,1);\n        } else {\n          break;\n        }\n      }\n\n      segments[i] = _segments.join('');\n    }\n\n    // find longest sequence of zeroes and coalesce them into one segment\n    var best = -1;\n    var _best = 0;\n    var _current = 0;\n    var current = -1;\n    var inzeroes = false;\n    // i; already declared\n\n    for (i = 0; i < total; i++) {\n      if (inzeroes) {\n        if (segments[i] === '0') {\n          _current += 1;\n        } else {\n          inzeroes = false;\n          if (_current > _best) {\n            best = current;\n            _best = _current;\n          }\n        }\n      } else {\n        if (segments[i] === '0') {\n          inzeroes = true;\n          current = i;\n          _current = 1;\n        }\n      }\n    }\n\n    if (_current > _best) {\n      best = current;\n      _best = _current;\n    }\n\n    if (_best > 1) {\n      segments.splice(best, _best, '');\n    }\n\n    length = segments.length;\n\n    // assemble remaining segments\n    var result = '';\n    if (segments[0] === '')  {\n      result = ':';\n    }\n\n    for (i = 0; i < length; i++) {\n      result += segments[i];\n      if (i === length - 1) {\n        break;\n      }\n\n      result += ':';\n    }\n\n    if (segments[length - 1] === '') {\n      result += ':';\n    }\n\n    return result;\n  }\n\n  function noConflict() {\n    /*jshint validthis: true */\n    if (root.IPv6 === this) {\n      root.IPv6 = _IPv6;\n    }\n\n    return this;\n  }\n\n  return {\n    best: bestPresentation,\n    noConflict: noConflict\n  };\n}));\n","/*!\n * URI.js - Mutating URLs\n * Second Level Domain (SLD) Support\n *\n * Version: 1.19.2\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.SecondLevelDomains = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  // save current SecondLevelDomains variable, if any\n  var _SecondLevelDomains = root && root.SecondLevelDomains;\n\n  var SLD = {\n    // list of known Second Level Domains\n    // converted list of SLDs from https://github.com/gavingmiller/second-level-domains\n    // ----\n    // publicsuffix.org is more current and actually used by a couple of browsers internally.\n    // downside is it also contains domains like \"dyndns.org\" - which is fine for the security\n    // issues browser have to deal with (SOP for cookies, etc) - but is way overboard for URI.js\n    // ----\n    list: {\n      'ac':' com gov mil net org ',\n      'ae':' ac co gov mil name net org pro sch ',\n      'af':' com edu gov net org ',\n      'al':' com edu gov mil net org ',\n      'ao':' co ed gv it og pb ',\n      'ar':' com edu gob gov int mil net org tur ',\n      'at':' ac co gv or ',\n      'au':' asn com csiro edu gov id net org ',\n      'ba':' co com edu gov mil net org rs unbi unmo unsa untz unze ',\n      'bb':' biz co com edu gov info net org store tv ',\n      'bh':' biz cc com edu gov info net org ',\n      'bn':' com edu gov net org ',\n      'bo':' com edu gob gov int mil net org tv ',\n      'br':' adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ',\n      'bs':' com edu gov net org ',\n      'bz':' du et om ov rg ',\n      'ca':' ab bc mb nb nf nl ns nt nu on pe qc sk yk ',\n      'ck':' biz co edu gen gov info net org ',\n      'cn':' ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ',\n      'co':' com edu gov mil net nom org ',\n      'cr':' ac c co ed fi go or sa ',\n      'cy':' ac biz com ekloges gov ltd name net org parliament press pro tm ',\n      'do':' art com edu gob gov mil net org sld web ',\n      'dz':' art asso com edu gov net org pol ',\n      'ec':' com edu fin gov info med mil net org pro ',\n      'eg':' com edu eun gov mil name net org sci ',\n      'er':' com edu gov ind mil net org rochest w ',\n      'es':' com edu gob nom org ',\n      'et':' biz com edu gov info name net org ',\n      'fj':' ac biz com info mil name net org pro ',\n      'fk':' ac co gov net nom org ',\n      'fr':' asso com f gouv nom prd presse tm ',\n      'gg':' co net org ',\n      'gh':' com edu gov mil org ',\n      'gn':' ac com gov net org ',\n      'gr':' com edu gov mil net org ',\n      'gt':' com edu gob ind mil net org ',\n      'gu':' com edu gov net org ',\n      'hk':' com edu gov idv net org ',\n      'hu':' 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ',\n      'id':' ac co go mil net or sch web ',\n      'il':' ac co gov idf k12 muni net org ',\n      'in':' ac co edu ernet firm gen gov i ind mil net nic org res ',\n      'iq':' com edu gov i mil net org ',\n      'ir':' ac co dnssec gov i id net org sch ',\n      'it':' edu gov ',\n      'je':' co net org ',\n      'jo':' com edu gov mil name net org sch ',\n      'jp':' ac ad co ed go gr lg ne or ',\n      'ke':' ac co go info me mobi ne or sc ',\n      'kh':' com edu gov mil net org per ',\n      'ki':' biz com de edu gov info mob net org tel ',\n      'km':' asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ',\n      'kn':' edu gov net org ',\n      'kr':' ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ',\n      'kw':' com edu gov net org ',\n      'ky':' com edu gov net org ',\n      'kz':' com edu gov mil net org ',\n      'lb':' com edu gov net org ',\n      'lk':' assn com edu gov grp hotel int ltd net ngo org sch soc web ',\n      'lr':' com edu gov net org ',\n      'lv':' asn com conf edu gov id mil net org ',\n      'ly':' com edu gov id med net org plc sch ',\n      'ma':' ac co gov m net org press ',\n      'mc':' asso tm ',\n      'me':' ac co edu gov its net org priv ',\n      'mg':' com edu gov mil nom org prd tm ',\n      'mk':' com edu gov inf name net org pro ',\n      'ml':' com edu gov net org presse ',\n      'mn':' edu gov org ',\n      'mo':' com edu gov net org ',\n      'mt':' com edu gov net org ',\n      'mv':' aero biz com coop edu gov info int mil museum name net org pro ',\n      'mw':' ac co com coop edu gov int museum net org ',\n      'mx':' com edu gob net org ',\n      'my':' com edu gov mil name net org sch ',\n      'nf':' arts com firm info net other per rec store web ',\n      'ng':' biz com edu gov mil mobi name net org sch ',\n      'ni':' ac co com edu gob mil net nom org ',\n      'np':' com edu gov mil net org ',\n      'nr':' biz com edu gov info net org ',\n      'om':' ac biz co com edu gov med mil museum net org pro sch ',\n      'pe':' com edu gob mil net nom org sld ',\n      'ph':' com edu gov i mil net ngo org ',\n      'pk':' biz com edu fam gob gok gon gop gos gov net org web ',\n      'pl':' art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ',\n      'pr':' ac biz com edu est gov info isla name net org pro prof ',\n      'ps':' com edu gov net org plo sec ',\n      'pw':' belau co ed go ne or ',\n      'ro':' arts com firm info nom nt org rec store tm www ',\n      'rs':' ac co edu gov in org ',\n      'sb':' com edu gov net org ',\n      'sc':' com edu gov net org ',\n      'sh':' co com edu gov net nom org ',\n      'sl':' com edu gov net org ',\n      'st':' co com consulado edu embaixada gov mil net org principe saotome store ',\n      'sv':' com edu gob org red ',\n      'sz':' ac co org ',\n      'tr':' av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ',\n      'tt':' aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ',\n      'tw':' club com ebiz edu game gov idv mil net org ',\n      'mu':' ac co com gov net or org ',\n      'mz':' ac co edu gov org ',\n      'na':' co com ',\n      'nz':' ac co cri geek gen govt health iwi maori mil net org parliament school ',\n      'pa':' abo ac com edu gob ing med net nom org sld ',\n      'pt':' com edu gov int net nome org publ ',\n      'py':' com edu gov mil net org ',\n      'qa':' com edu gov mil net org ',\n      're':' asso com nom ',\n      'ru':' ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ',\n      'rw':' ac co com edu gouv gov int mil net ',\n      'sa':' com edu gov med net org pub sch ',\n      'sd':' com edu gov info med net org tv ',\n      'se':' a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ',\n      'sg':' com edu gov idn net org per ',\n      'sn':' art com edu gouv org perso univ ',\n      'sy':' com edu gov mil net news org ',\n      'th':' ac co go in mi net or ',\n      'tj':' ac biz co com edu go gov info int mil name net nic org test web ',\n      'tn':' agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ',\n      'tz':' ac co go ne or ',\n      'ua':' biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ',\n      'ug':' ac co go ne or org sc ',\n      'uk':' ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ',\n      'us':' dni fed isa kids nsn ',\n      'uy':' com edu gub mil net org ',\n      've':' co com edu gob info mil net org web ',\n      'vi':' co com k12 net org ',\n      'vn':' ac biz com edu gov health info int name net org pro ',\n      'ye':' co com gov ltd me net org plc ',\n      'yu':' ac co edu gov org ',\n      'za':' ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ',\n      'zm':' ac co com edu gov net org sch ',\n      // https://en.wikipedia.org/wiki/CentralNic#Second-level_domains\n      'com': 'ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ',\n      'net': 'gb jp se uk ',\n      'org': 'ae',\n      'de': 'com '\n    },\n    // gorhill 2013-10-25: Using indexOf() instead Regexp(). Significant boost\n    // in both performance and memory footprint. No initialization required.\n    // http://jsperf.com/uri-js-sld-regex-vs-binary-search/4\n    // Following methods use lastIndexOf() rather than array.split() in order\n    // to avoid any memory allocations.\n    has: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') >= 0;\n    },\n    is: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset >= 0) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(0, tldOffset) + ' ') >= 0;\n    },\n    get: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return null;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return null;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return null;\n      }\n      if (sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') < 0) {\n        return null;\n      }\n      return domain.slice(sldOffset+1);\n    },\n    noConflict: function(){\n      if (root.SecondLevelDomains === this) {\n        root.SecondLevelDomains = _SecondLevelDomains;\n      }\n      return this;\n    }\n  };\n\n  return SLD;\n}));\n","/*!\n * URI.js - Mutating URLs\n *\n * Version: 1.19.2\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory(require('./punycode'), require('./IPv6'), require('./SecondLevelDomains'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['./punycode', './IPv6', './SecondLevelDomains'], factory);\n  } else {\n    // Browser globals (root is window)\n    root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);\n  }\n}(this, function (punycode, IPv6, SLD, root) {\n  'use strict';\n  /*global location, escape, unescape */\n  // FIXME: v2.0.0 renamce non-camelCase properties to uppercase\n  /*jshint camelcase: false */\n\n  // save current URI variable, if any\n  var _URI = root && root.URI;\n\n  function URI(url, base) {\n    var _urlSupplied = arguments.length >= 1;\n    var _baseSupplied = arguments.length >= 2;\n\n    // Allow instantiation without the 'new' keyword\n    if (!(this instanceof URI)) {\n      if (_urlSupplied) {\n        if (_baseSupplied) {\n          return new URI(url, base);\n        }\n\n        return new URI(url);\n      }\n\n      return new URI();\n    }\n\n    if (url === undefined) {\n      if (_urlSupplied) {\n        throw new TypeError('undefined is not a valid argument for URI');\n      }\n\n      if (typeof location !== 'undefined') {\n        url = location.href + '';\n      } else {\n        url = '';\n      }\n    }\n\n    if (url === null) {\n      if (_urlSupplied) {\n        throw new TypeError('null is not a valid argument for URI');\n      }\n    }\n\n    this.href(url);\n\n    // resolve to base according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#constructor\n    if (base !== undefined) {\n      return this.absoluteTo(base);\n    }\n\n    return this;\n  }\n\n  function isInteger(value) {\n    return /^[0-9]+$/.test(value);\n  }\n\n  URI.version = '1.19.2';\n\n  var p = URI.prototype;\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  function escapeRegEx(string) {\n    // https://github.com/medialize/URI.js/commit/85ac21783c11f8ccab06106dba9735a31a86924d#commitcomment-821963\n    return string.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }\n\n  function getType(value) {\n    // IE8 doesn't return [Object Undefined] but [Object Object] for undefined value\n    if (value === undefined) {\n      return 'Undefined';\n    }\n\n    return String(Object.prototype.toString.call(value)).slice(8, -1);\n  }\n\n  function isArray(obj) {\n    return getType(obj) === 'Array';\n  }\n\n  function filterArrayValues(data, value) {\n    var lookup = {};\n    var i, length;\n\n    if (getType(value) === 'RegExp') {\n      lookup = null;\n    } else if (isArray(value)) {\n      for (i = 0, length = value.length; i < length; i++) {\n        lookup[value[i]] = true;\n      }\n    } else {\n      lookup[value] = true;\n    }\n\n    for (i = 0, length = data.length; i < length; i++) {\n      /*jshint laxbreak: true */\n      var _match = lookup && lookup[data[i]] !== undefined\n        || !lookup && value.test(data[i]);\n      /*jshint laxbreak: false */\n      if (_match) {\n        data.splice(i, 1);\n        length--;\n        i--;\n      }\n    }\n\n    return data;\n  }\n\n  function arrayContains(list, value) {\n    var i, length;\n\n    // value may be string, number, array, regexp\n    if (isArray(value)) {\n      // Note: this can be optimized to O(n) (instead of current O(m * n))\n      for (i = 0, length = value.length; i < length; i++) {\n        if (!arrayContains(list, value[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var _type = getType(value);\n    for (i = 0, length = list.length; i < length; i++) {\n      if (_type === 'RegExp') {\n        if (typeof list[i] === 'string' && list[i].match(value)) {\n          return true;\n        }\n      } else if (list[i] === value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function arraysEqual(one, two) {\n    if (!isArray(one) || !isArray(two)) {\n      return false;\n    }\n\n    // arrays can't be equal if they have different amount of content\n    if (one.length !== two.length) {\n      return false;\n    }\n\n    one.sort();\n    two.sort();\n\n    for (var i = 0, l = one.length; i < l; i++) {\n      if (one[i] !== two[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function trimSlashes(text) {\n    var trim_expression = /^\\/+|\\/+$/g;\n    return text.replace(trim_expression, '');\n  }\n\n  URI._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      // state\n      preventInvalidHostname: URI.preventInvalidHostname,\n      duplicateQueryParameters: URI.duplicateQueryParameters,\n      escapeQuerySpace: URI.escapeQuerySpace\n    };\n  };\n  // state: throw on invalid hostname\n  // see https://github.com/medialize/URI.js/pull/345\n  // and https://github.com/medialize/URI.js/issues/354\n  URI.preventInvalidHostname = false;\n  // state: allow duplicate query parameters (a=1&a=1)\n  URI.duplicateQueryParameters = false;\n  // state: replaces + with %20 (space in query strings)\n  URI.escapeQuerySpace = true;\n  // static properties\n  URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  URI.idn_expression = /[^a-z0-9\\._-]/i;\n  URI.punycode_expression = /(xn--)/i;\n  // well, 333.444.555.666 matches, but it sure ain't no IPv4 - do we care?\n  URI.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  // credits to Rich Brown\n  // source: http://forums.intermapper.com/viewtopic.php?p=1096#1096\n  // specification: http://www.ietf.org/rfc/rfc4291.txt\n  URI.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  // expression used is \"gruber revised\" (@gruber v2) determined to be the\n  // best solution in a regex-golf we did a couple of ages ago at\n  // * http://mathiasbynens.be/demo/url-regex\n  // * http://rodneyrehm.de/t/url-regex.html\n  URI.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/ig;\n  URI.findUri = {\n    // valid \"scheme://\" or \"www.\"\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    // everything up to the next whitespace\n    end: /[\\s\\r\\n]|$/,\n    // trim trailing punctuation captured by end RegExp\n    trim: /[`!()\\[\\]{};:'\".,<>?«»“”„‘’]+$/,\n    // balanced parens inclusion (), [], {}, <>\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g,\n  };\n  // http://www.iana.org/assignments/uri-schemes.html\n  // http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Well-known_ports\n  URI.defaultPorts = {\n    http: '80',\n    https: '443',\n    ftp: '21',\n    gopher: '70',\n    ws: '80',\n    wss: '443'\n  };\n  // list of protocols which always require a hostname\n  URI.hostProtocols = [\n    'http',\n    'https'\n  ];\n\n  // allowed hostname characters according to RFC 3986\n  // ALPHA DIGIT \"-\" \".\" \"_\" \"~\" \"!\" \"$\" \"&\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \";\" \"=\" %encoded\n  // I've never seen a (non-IDN) hostname other than: ALPHA DIGIT . - _\n  URI.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  // map DOM Elements to their URI attribute\n  URI.domAttributes = {\n    'a': 'href',\n    'blockquote': 'cite',\n    'link': 'href',\n    'base': 'href',\n    'script': 'src',\n    'form': 'action',\n    'img': 'src',\n    'area': 'href',\n    'iframe': 'src',\n    'embed': 'src',\n    'source': 'src',\n    'track': 'src',\n    'input': 'src', // but only if type=\"image\"\n    'audio': 'src',\n    'video': 'src'\n  };\n  URI.getDomAttribute = function(node) {\n    if (!node || !node.nodeName) {\n      return undefined;\n    }\n\n    var nodeName = node.nodeName.toLowerCase();\n    // <input> should only expose src for type=\"image\"\n    if (nodeName === 'input' && node.type !== 'image') {\n      return undefined;\n    }\n\n    return URI.domAttributes[nodeName];\n  };\n\n  function escapeForDumbFirefox36(value) {\n    // https://github.com/medialize/URI.js/issues/91\n    return escape(value);\n  }\n\n  // encoding / decoding according to RFC3986\n  function strictEncodeURIComponent(string) {\n    // see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent\n    return encodeURIComponent(string)\n      .replace(/[!'()*]/g, escapeForDumbFirefox36)\n      .replace(/\\*/g, '%2A');\n  }\n  URI.encode = strictEncodeURIComponent;\n  URI.decode = decodeURIComponent;\n  URI.iso8859 = function() {\n    URI.encode = escape;\n    URI.decode = unescape;\n  };\n  URI.unicode = function() {\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = decodeURIComponent;\n  };\n  URI.characters = {\n    pathname: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          // -._~!'()*\n          '%24': '$',\n          '%26': '&',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%3A': ':',\n          '%40': '@'\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23'\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          // gen-delims\n          '%3A': ':',\n          '%2F': '/',\n          '%3F': '?',\n          '%23': '#',\n          '%5B': '[',\n          '%5D': ']',\n          '%40': '@',\n          // sub-delims\n          '%21': '!',\n          '%24': '$',\n          '%26': '&',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '='\n        }\n      }\n    },\n    urnpath: {\n      // The characters under `encode` are the characters called out by RFC 2141 as being acceptable\n      // for usage in a URN. RFC2141 also calls out \"-\", \".\", and \"_\" as acceptable characters, but\n      // these aren't encoded by encodeURIComponent, so we don't have to call them out here. Also\n      // note that the colon character is not featured in the encoding map; this is because URI.js\n      // gives the colons in URNs semantic meaning as the delimiters of path segements, and so it\n      // should not appear unencoded in a segment itself.\n      // See also the note above about RFC3986 and capitalalized hex digits.\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          '%21': '!',\n          '%24': '$',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%40': '@'\n        }\n      },\n      // These characters are the characters called out by RFC2141 as \"reserved\" characters that\n      // should never appear in a URN, plus the colon character (see note above).\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23',\n          ':': '%3A'\n        }\n      }\n    }\n  };\n  URI.encodeQuery = function(string, escapeQuerySpace) {\n    var escaped = URI.encode(string + '');\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;\n  };\n  URI.decodeQuery = function(string, escapeQuerySpace) {\n    string += '';\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    try {\n      return URI.decode(escapeQuerySpace ? string.replace(/\\+/g, '%20') : string);\n    } catch(e) {\n      // we're not going to mess with weird encodings,\n      // give up and return the undecoded original string\n      // see https://github.com/medialize/URI.js/issues/87\n      // see https://github.com/medialize/URI.js/issues/92\n      return string;\n    }\n  };\n  // generate encode/decode path functions\n  var _parts = {'encode':'encode', 'decode':'decode'};\n  var _part;\n  var generateAccessor = function(_group, _part) {\n    return function(string) {\n      try {\n        return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function(c) {\n          return URI.characters[_group][_part].map[c];\n        });\n      } catch (e) {\n        // we're not going to mess with weird encodings,\n        // give up and return the undecoded original string\n        // see https://github.com/medialize/URI.js/issues/87\n        // see https://github.com/medialize/URI.js/issues/92\n        return string;\n      }\n    };\n  };\n\n  for (_part in _parts) {\n    URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);\n    URI[_part + 'UrnPathSegment'] = generateAccessor('urnpath', _parts[_part]);\n  }\n\n  var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {\n    return function(string) {\n      // Why pass in names of functions, rather than the function objects themselves? The\n      // definitions of some functions (but in particular, URI.decode) will occasionally change due\n      // to URI.js having ISO8859 and Unicode modes. Passing in the name and getting it will ensure\n      // that the functions we use here are \"fresh\".\n      var actualCodingFunc;\n      if (!_innerCodingFuncName) {\n        actualCodingFunc = URI[_codingFuncName];\n      } else {\n        actualCodingFunc = function(string) {\n          return URI[_codingFuncName](URI[_innerCodingFuncName](string));\n        };\n      }\n\n      var segments = (string + '').split(_sep);\n\n      for (var i = 0, length = segments.length; i < length; i++) {\n        segments[i] = actualCodingFunc(segments[i]);\n      }\n\n      return segments.join(_sep);\n    };\n  };\n\n  // This takes place outside the above loop because we don't want, e.g., encodeUrnPath functions.\n  URI.decodePath = generateSegmentedPathFunction('/', 'decodePathSegment');\n  URI.decodeUrnPath = generateSegmentedPathFunction(':', 'decodeUrnPathSegment');\n  URI.recodePath = generateSegmentedPathFunction('/', 'encodePathSegment', 'decode');\n  URI.recodeUrnPath = generateSegmentedPathFunction(':', 'encodeUrnPathSegment', 'decode');\n\n  URI.encodeReserved = generateAccessor('reserved', 'encode');\n\n  URI.parse = function(string, parts) {\n    var pos;\n    if (!parts) {\n      parts = {\n        preventInvalidHostname: URI.preventInvalidHostname\n      };\n    }\n    // [protocol\"://\"[username[\":\"password]\"@\"]hostname[\":\"port]\"/\"?][path][\"?\"querystring][\"#\"fragment]\n\n    // extract fragment\n    pos = string.indexOf('#');\n    if (pos > -1) {\n      // escaping?\n      parts.fragment = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract query\n    pos = string.indexOf('?');\n    if (pos > -1) {\n      // escaping?\n      parts.query = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract protocol\n    if (string.substring(0, 2) === '//') {\n      // relative-scheme\n      parts.protocol = null;\n      string = string.substring(2);\n      // extract \"user:pass@host:port\"\n      string = URI.parseAuthority(string, parts);\n    } else {\n      pos = string.indexOf(':');\n      if (pos > -1) {\n        parts.protocol = string.substring(0, pos) || null;\n        if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {\n          // : may be within the path\n          parts.protocol = undefined;\n        } else if (string.substring(pos + 1, pos + 3) === '//') {\n          string = string.substring(pos + 3);\n\n          // extract \"user:pass@host:port\"\n          string = URI.parseAuthority(string, parts);\n        } else {\n          string = string.substring(pos + 1);\n          parts.urn = true;\n        }\n      }\n    }\n\n    // what's left must be the path\n    parts.path = string;\n\n    // and we're done\n    return parts;\n  };\n  URI.parseHost = function(string, parts) {\n    if (!string) {\n      string = '';\n    }\n\n    // Copy chrome, IE, opera backslash-handling behavior.\n    // Back slashes before the query string get converted to forward slashes\n    // See: https://github.com/joyent/node/blob/386fd24f49b0e9d1a8a076592a404168faeecc34/lib/url.js#L115-L124\n    // See: https://code.google.com/p/chromium/issues/detail?id=25916\n    // https://github.com/medialize/URI.js/pull/233\n    string = string.replace(/\\\\/g, '/');\n\n    // extract host:port\n    var pos = string.indexOf('/');\n    var bracketPos;\n    var t;\n\n    if (pos === -1) {\n      pos = string.length;\n    }\n\n    if (string.charAt(0) === '[') {\n      // IPv6 host - http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04#section-6\n      // I claim most client software breaks on IPv6 anyways. To simplify things, URI only accepts\n      // IPv6+port in the format [2001:db8::1]:80 (for the time being)\n      bracketPos = string.indexOf(']');\n      parts.hostname = string.substring(1, bracketPos) || null;\n      parts.port = string.substring(bracketPos + 2, pos) || null;\n      if (parts.port === '/') {\n        parts.port = null;\n      }\n    } else {\n      var firstColon = string.indexOf(':');\n      var firstSlash = string.indexOf('/');\n      var nextColon = string.indexOf(':', firstColon + 1);\n      if (nextColon !== -1 && (firstSlash === -1 || nextColon < firstSlash)) {\n        // IPv6 host contains multiple colons - but no port\n        // this notation is actually not allowed by RFC 3986, but we're a liberal parser\n        parts.hostname = string.substring(0, pos) || null;\n        parts.port = null;\n      } else {\n        t = string.substring(0, pos).split(':');\n        parts.hostname = t[0] || null;\n        parts.port = t[1] || null;\n      }\n    }\n\n    if (parts.hostname && string.substring(pos).charAt(0) !== '/') {\n      pos++;\n      string = '/' + string;\n    }\n\n    if (parts.preventInvalidHostname) {\n      URI.ensureValidHostname(parts.hostname, parts.protocol);\n    }\n\n    if (parts.port) {\n      URI.ensureValidPort(parts.port);\n    }\n\n    return string.substring(pos) || '/';\n  };\n  URI.parseAuthority = function(string, parts) {\n    string = URI.parseUserinfo(string, parts);\n    return URI.parseHost(string, parts);\n  };\n  URI.parseUserinfo = function(string, parts) {\n    // extract username:password\n    var firstSlash = string.indexOf('/');\n    var pos = string.lastIndexOf('@', firstSlash > -1 ? firstSlash : string.length - 1);\n    var t;\n\n    // authority@ must come before /path\n    if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {\n      t = string.substring(0, pos).split(':');\n      parts.username = t[0] ? URI.decode(t[0]) : null;\n      t.shift();\n      parts.password = t[0] ? URI.decode(t.join(':')) : null;\n      string = string.substring(pos + 1);\n    } else {\n      parts.username = null;\n      parts.password = null;\n    }\n\n    return string;\n  };\n  URI.parseQuery = function(string, escapeQuerySpace) {\n    if (!string) {\n      return {};\n    }\n\n    // throw out the funky business - \"?\"[name\"=\"value\"&\"]+\n    string = string.replace(/&+/g, '&').replace(/^\\?*&*|&+$/g, '');\n\n    if (!string) {\n      return {};\n    }\n\n    var items = {};\n    var splits = string.split('&');\n    var length = splits.length;\n    var v, name, value;\n\n    for (var i = 0; i < length; i++) {\n      v = splits[i].split('=');\n      name = URI.decodeQuery(v.shift(), escapeQuerySpace);\n      // no \"=\" is null according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#collect-url-parameters\n      value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;\n\n      if (hasOwn.call(items, name)) {\n        if (typeof items[name] === 'string' || items[name] === null) {\n          items[name] = [items[name]];\n        }\n\n        items[name].push(value);\n      } else {\n        items[name] = value;\n      }\n    }\n\n    return items;\n  };\n\n  URI.build = function(parts) {\n    var t = '';\n    var requireAbsolutePath = false\n\n    if (parts.protocol) {\n      t += parts.protocol + ':';\n    }\n\n    if (!parts.urn && (t || parts.hostname)) {\n      t += '//';\n      requireAbsolutePath = true\n    }\n\n    t += (URI.buildAuthority(parts) || '');\n\n    if (typeof parts.path === 'string') {\n      if (parts.path.charAt(0) !== '/' && requireAbsolutePath) {\n        t += '/';\n      }\n\n      t += parts.path;\n    }\n\n    if (typeof parts.query === 'string' && parts.query) {\n      t += '?' + parts.query;\n    }\n\n    if (typeof parts.fragment === 'string' && parts.fragment) {\n      t += '#' + parts.fragment;\n    }\n    return t;\n  };\n  URI.buildHost = function(parts) {\n    var t = '';\n\n    if (!parts.hostname) {\n      return '';\n    } else if (URI.ip6_expression.test(parts.hostname)) {\n      t += '[' + parts.hostname + ']';\n    } else {\n      t += parts.hostname;\n    }\n\n    if (parts.port) {\n      t += ':' + parts.port;\n    }\n\n    return t;\n  };\n  URI.buildAuthority = function(parts) {\n    return URI.buildUserinfo(parts) + URI.buildHost(parts);\n  };\n  URI.buildUserinfo = function(parts) {\n    var t = '';\n\n    if (parts.username) {\n      t += URI.encode(parts.username);\n    }\n\n    if (parts.password) {\n      t += ':' + URI.encode(parts.password);\n    }\n\n    if (t) {\n      t += '@';\n    }\n\n    return t;\n  };\n  URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {\n    // according to http://tools.ietf.org/html/rfc3986 or http://labs.apache.org/webarch/uri/rfc/rfc3986.html\n    // being »-._~!$&'()*+,;=:@/?« %HEX and alnum are allowed\n    // the RFC explicitly states ?/foo being a valid use case, no mention of parameter syntax!\n    // URI.js treats the query string as being application/x-www-form-urlencoded\n    // see http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type\n\n    var t = '';\n    var unique, key, i, length;\n    for (key in data) {\n      if (hasOwn.call(data, key)) {\n        if (isArray(data[key])) {\n          unique = {};\n          for (i = 0, length = data[key].length; i < length; i++) {\n            if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {\n              t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);\n              if (duplicateQueryParameters !== true) {\n                unique[data[key][i] + ''] = true;\n              }\n            }\n          }\n        } else if (data[key] !== undefined) {\n          t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);\n        }\n      }\n    }\n\n    return t.substring(1);\n  };\n  URI.buildQueryParameter = function(name, value, escapeQuerySpace) {\n    // http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type -- application/x-www-form-urlencoded\n    // don't append \"=\" for null values, according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#url-parameter-serialization\n    return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');\n  };\n\n  URI.addQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.addQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (data[name] === undefined) {\n        data[name] = value;\n        return;\n      } else if (typeof data[name] === 'string') {\n        data[name] = [data[name]];\n      }\n\n      if (!isArray(value)) {\n        value = [value];\n      }\n\n      data[name] = (data[name] || []).concat(value);\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.setQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.setQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      data[name] = value === undefined ? null : value;\n    } else {\n      throw new TypeError('URI.setQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.removeQuery = function(data, name, value) {\n    var i, length, key;\n\n    if (isArray(name)) {\n      for (i = 0, length = name.length; i < length; i++) {\n        data[name[i]] = undefined;\n      }\n    } else if (getType(name) === 'RegExp') {\n      for (key in data) {\n        if (name.test(key)) {\n          data[key] = undefined;\n        }\n      }\n    } else if (typeof name === 'object') {\n      for (key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.removeQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (value !== undefined) {\n        if (getType(value) === 'RegExp') {\n          if (!isArray(data[name]) && value.test(data[name])) {\n            data[name] = undefined;\n          } else {\n            data[name] = filterArrayValues(data[name], value);\n          }\n        } else if (data[name] === String(value) && (!isArray(value) || value.length === 1)) {\n          data[name] = undefined;\n        } else if (isArray(data[name])) {\n          data[name] = filterArrayValues(data[name], value);\n        }\n      } else {\n        data[name] = undefined;\n      }\n    } else {\n      throw new TypeError('URI.removeQuery() accepts an object, string, RegExp as the first parameter');\n    }\n  };\n  URI.hasQuery = function(data, name, value, withinArray) {\n    switch (getType(name)) {\n      case 'String':\n        // Nothing to do here\n        break;\n\n      case 'RegExp':\n        for (var key in data) {\n          if (hasOwn.call(data, key)) {\n            if (name.test(key) && (value === undefined || URI.hasQuery(data, key, value))) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n\n      case 'Object':\n        for (var _key in name) {\n          if (hasOwn.call(name, _key)) {\n            if (!URI.hasQuery(data, _key, name[_key])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts a string, regular expression or object as the name parameter');\n    }\n\n    switch (getType(value)) {\n      case 'Undefined':\n        // true if exists (but may be empty)\n        return name in data; // data[name] !== undefined;\n\n      case 'Boolean':\n        // true if exists and non-empty\n        var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);\n        return value === _booly;\n\n      case 'Function':\n        // allow complex comparison\n        return !!value(data[name], name, data);\n\n      case 'Array':\n        if (!isArray(data[name])) {\n          return false;\n        }\n\n        var op = withinArray ? arrayContains : arraysEqual;\n        return op(data[name], value);\n\n      case 'RegExp':\n        if (!isArray(data[name])) {\n          return Boolean(data[name] && data[name].match(value));\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      case 'Number':\n        value = String(value);\n        /* falls through */\n      case 'String':\n        if (!isArray(data[name])) {\n          return data[name] === value;\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');\n    }\n  };\n\n\n  URI.joinPaths = function() {\n    var input = [];\n    var segments = [];\n    var nonEmptySegments = 0;\n\n    for (var i = 0; i < arguments.length; i++) {\n      var url = new URI(arguments[i]);\n      input.push(url);\n      var _segments = url.segment();\n      for (var s = 0; s < _segments.length; s++) {\n        if (typeof _segments[s] === 'string') {\n          segments.push(_segments[s]);\n        }\n\n        if (_segments[s]) {\n          nonEmptySegments++;\n        }\n      }\n    }\n\n    if (!segments.length || !nonEmptySegments) {\n      return new URI('');\n    }\n\n    var uri = new URI('').segment(segments);\n\n    if (input[0].path() === '' || input[0].path().slice(0, 1) === '/') {\n      uri.path('/' + uri.path());\n    }\n\n    return uri.normalize();\n  };\n\n  URI.commonPath = function(one, two) {\n    var length = Math.min(one.length, two.length);\n    var pos;\n\n    // find first non-matching character\n    for (pos = 0; pos < length; pos++) {\n      if (one.charAt(pos) !== two.charAt(pos)) {\n        pos--;\n        break;\n      }\n    }\n\n    if (pos < 1) {\n      return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';\n    }\n\n    // revert to last /\n    if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {\n      pos = one.substring(0, pos).lastIndexOf('/');\n    }\n\n    return one.substring(0, pos + 1);\n  };\n\n  URI.withinString = function(string, callback, options) {\n    options || (options = {});\n    var _start = options.start || URI.findUri.start;\n    var _end = options.end || URI.findUri.end;\n    var _trim = options.trim || URI.findUri.trim;\n    var _parens = options.parens || URI.findUri.parens;\n    var _attributeOpen = /[a-z0-9-]=[\"']?$/i;\n\n    _start.lastIndex = 0;\n    while (true) {\n      var match = _start.exec(string);\n      if (!match) {\n        break;\n      }\n\n      var start = match.index;\n      if (options.ignoreHtml) {\n        // attribut(e=[\"']?$)\n        var attributeOpen = string.slice(Math.max(start - 3, 0), start);\n        if (attributeOpen && _attributeOpen.test(attributeOpen)) {\n          continue;\n        }\n      }\n\n      var end = start + string.slice(start).search(_end);\n      var slice = string.slice(start, end);\n      // make sure we include well balanced parens\n      var parensEnd = -1;\n      while (true) {\n        var parensMatch = _parens.exec(slice);\n        if (!parensMatch) {\n          break;\n        }\n\n        var parensMatchEnd = parensMatch.index + parensMatch[0].length;\n        parensEnd = Math.max(parensEnd, parensMatchEnd);\n      }\n\n      if (parensEnd > -1) {\n        slice = slice.slice(0, parensEnd) + slice.slice(parensEnd).replace(_trim, '');\n      } else {\n        slice = slice.replace(_trim, '');\n      }\n\n      if (slice.length <= match[0].length) {\n        // the extract only contains the starting marker of a URI,\n        // e.g. \"www\" or \"http://\"\n        continue;\n      }\n\n      if (options.ignore && options.ignore.test(slice)) {\n        continue;\n      }\n\n      end = start + slice.length;\n      var result = callback(slice, start, end, string);\n      if (result === undefined) {\n        _start.lastIndex = end;\n        continue;\n      }\n\n      result = String(result);\n      string = string.slice(0, start) + result + string.slice(end);\n      _start.lastIndex = start + result.length;\n    }\n\n    _start.lastIndex = 0;\n    return string;\n  };\n\n  URI.ensureValidHostname = function(v, protocol) {\n    // Theoretically URIs allow percent-encoding in Hostnames (according to RFC 3986)\n    // they are not part of DNS and therefore ignored by URI.js\n\n    var hasHostname = !!v; // not null and not an empty string\n    var hasProtocol = !!protocol;\n    var rejectEmptyHostname = false;\n\n    if (hasProtocol) {\n      rejectEmptyHostname = arrayContains(URI.hostProtocols, protocol);\n    }\n\n    if (rejectEmptyHostname && !hasHostname) {\n      throw new TypeError('Hostname cannot be empty, if protocol is ' + protocol);\n    } else if (v && v.match(URI.invalid_hostname_characters)) {\n      // test punycode\n      if (!punycode) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      }\n      if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_]');\n      }\n    }\n  };\n\n  URI.ensureValidPort = function (v) {\n    if (!v) {\n      return;\n    }\n\n    var port = Number(v);\n    if (isInteger(port) && (port > 0) && (port < 65536)) {\n      return;\n    }\n\n    throw new TypeError('Port \"' + v + '\" is not a valid port');\n  };\n\n  // noConflict\n  URI.noConflict = function(removeAll) {\n    if (removeAll) {\n      var unconflicted = {\n        URI: this.noConflict()\n      };\n\n      if (root.URITemplate && typeof root.URITemplate.noConflict === 'function') {\n        unconflicted.URITemplate = root.URITemplate.noConflict();\n      }\n\n      if (root.IPv6 && typeof root.IPv6.noConflict === 'function') {\n        unconflicted.IPv6 = root.IPv6.noConflict();\n      }\n\n      if (root.SecondLevelDomains && typeof root.SecondLevelDomains.noConflict === 'function') {\n        unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict();\n      }\n\n      return unconflicted;\n    } else if (root.URI === this) {\n      root.URI = _URI;\n    }\n\n    return this;\n  };\n\n  p.build = function(deferBuild) {\n    if (deferBuild === true) {\n      this._deferred_build = true;\n    } else if (deferBuild === undefined || this._deferred_build) {\n      this._string = URI.build(this._parts);\n      this._deferred_build = false;\n    }\n\n    return this;\n  };\n\n  p.clone = function() {\n    return new URI(this);\n  };\n\n  p.valueOf = p.toString = function() {\n    return this.build(false)._string;\n  };\n\n\n  function generateSimpleAccessor(_part){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        this._parts[_part] = v || null;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  function generatePrefixAccessor(_part, _key){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        if (v !== null) {\n          v = v + '';\n          if (v.charAt(0) === _key) {\n            v = v.substring(1);\n          }\n        }\n\n        this._parts[_part] = v;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  p.protocol = generateSimpleAccessor('protocol');\n  p.username = generateSimpleAccessor('username');\n  p.password = generateSimpleAccessor('password');\n  p.hostname = generateSimpleAccessor('hostname');\n  p.port = generateSimpleAccessor('port');\n  p.query = generatePrefixAccessor('query', '?');\n  p.fragment = generatePrefixAccessor('fragment', '#');\n\n  p.search = function(v, build) {\n    var t = this.query(v, build);\n    return typeof t === 'string' && t.length ? ('?' + t) : t;\n  };\n  p.hash = function(v, build) {\n    var t = this.fragment(v, build);\n    return typeof t === 'string' && t.length ? ('#' + t) : t;\n  };\n\n  p.pathname = function(v, build) {\n    if (v === undefined || v === true) {\n      var res = this._parts.path || (this._parts.hostname ? '/' : '');\n      return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;\n    } else {\n      if (this._parts.urn) {\n        this._parts.path = v ? URI.recodeUrnPath(v) : '';\n      } else {\n        this._parts.path = v ? URI.recodePath(v) : '/';\n      }\n      this.build(!build);\n      return this;\n    }\n  };\n  p.path = p.pathname;\n  p.href = function(href, build) {\n    var key;\n\n    if (href === undefined) {\n      return this.toString();\n    }\n\n    this._string = '';\n    this._parts = URI._parts();\n\n    var _URI = href instanceof URI;\n    var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);\n    if (href.nodeName) {\n      var attribute = URI.getDomAttribute(href);\n      href = href[attribute] || '';\n      _object = false;\n    }\n\n    // window.location is reported to be an object, but it's not the sort\n    // of object we're looking for:\n    // * location.protocol ends with a colon\n    // * location.query != object.search\n    // * location.hash != object.fragment\n    // simply serializing the unknown object should do the trick\n    // (for location, not for everything...)\n    if (!_URI && _object && href.pathname !== undefined) {\n      href = href.toString();\n    }\n\n    if (typeof href === 'string' || href instanceof String) {\n      this._parts = URI.parse(String(href), this._parts);\n    } else if (_URI || _object) {\n      var src = _URI ? href._parts : href;\n      for (key in src) {\n        if (key === 'query') { continue; }\n        if (hasOwn.call(this._parts, key)) {\n          this._parts[key] = src[key];\n        }\n      }\n      if (src.query) {\n        this.query(src.query, false);\n      }\n    } else {\n      throw new TypeError('invalid input');\n    }\n\n    this.build(!build);\n    return this;\n  };\n\n  // identification accessors\n  p.is = function(what) {\n    var ip = false;\n    var ip4 = false;\n    var ip6 = false;\n    var name = false;\n    var sld = false;\n    var idn = false;\n    var punycode = false;\n    var relative = !this._parts.urn;\n\n    if (this._parts.hostname) {\n      relative = false;\n      ip4 = URI.ip4_expression.test(this._parts.hostname);\n      ip6 = URI.ip6_expression.test(this._parts.hostname);\n      ip = ip4 || ip6;\n      name = !ip;\n      sld = name && SLD && SLD.has(this._parts.hostname);\n      idn = name && URI.idn_expression.test(this._parts.hostname);\n      punycode = name && URI.punycode_expression.test(this._parts.hostname);\n    }\n\n    switch (what.toLowerCase()) {\n      case 'relative':\n        return relative;\n\n      case 'absolute':\n        return !relative;\n\n      // hostname identification\n      case 'domain':\n      case 'name':\n        return name;\n\n      case 'sld':\n        return sld;\n\n      case 'ip':\n        return ip;\n\n      case 'ip4':\n      case 'ipv4':\n      case 'inet4':\n        return ip4;\n\n      case 'ip6':\n      case 'ipv6':\n      case 'inet6':\n        return ip6;\n\n      case 'idn':\n        return idn;\n\n      case 'url':\n        return !this._parts.urn;\n\n      case 'urn':\n        return !!this._parts.urn;\n\n      case 'punycode':\n        return punycode;\n    }\n\n    return null;\n  };\n\n  // component specific input validation\n  var _protocol = p.protocol;\n  var _port = p.port;\n  var _hostname = p.hostname;\n\n  p.protocol = function(v, build) {\n    if (v) {\n      // accept trailing ://\n      v = v.replace(/:(\\/\\/)?$/, '');\n\n      if (!v.match(URI.protocol_expression)) {\n        throw new TypeError('Protocol \"' + v + '\" contains characters other than [A-Z0-9.+-] or doesn\\'t start with [A-Z]');\n      }\n    }\n\n    return _protocol.call(this, v, build);\n  };\n  p.scheme = p.protocol;\n  p.port = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      if (v === 0) {\n        v = null;\n      }\n\n      if (v) {\n        v += '';\n        if (v.charAt(0) === ':') {\n          v = v.substring(1);\n        }\n\n        URI.ensureValidPort(v);\n      }\n    }\n    return _port.call(this, v, build);\n  };\n  p.hostname = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      var x = { preventInvalidHostname: this._parts.preventInvalidHostname };\n      var res = URI.parseHost(v, x);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      v = x.hostname;\n      if (this._parts.preventInvalidHostname) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n    }\n\n    return _hostname.call(this, v, build);\n  };\n\n  // compound accessors\n  p.origin = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var protocol = this.protocol();\n      var authority = this.authority();\n      if (!authority) {\n        return '';\n      }\n\n      return (protocol ? protocol + '://' : '') + this.authority();\n    } else {\n      var origin = URI(v);\n      this\n        .protocol(origin.protocol())\n        .authority(origin.authority())\n        .build(!build);\n      return this;\n    }\n  };\n  p.host = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildHost(this._parts) : '';\n    } else {\n      var res = URI.parseHost(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.authority = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildAuthority(this._parts) : '';\n    } else {\n      var res = URI.parseAuthority(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.userinfo = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var t = URI.buildUserinfo(this._parts);\n      return t ? t.substring(0, t.length -1) : t;\n    } else {\n      if (v[v.length-1] !== '@') {\n        v += '@';\n      }\n\n      URI.parseUserinfo(v, this._parts);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.resource = function(v, build) {\n    var parts;\n\n    if (v === undefined) {\n      return this.path() + this.search() + this.hash();\n    }\n\n    parts = URI.parse(v);\n    this._parts.path = parts.path;\n    this._parts.query = parts.query;\n    this._parts.fragment = parts.fragment;\n    this.build(!build);\n    return this;\n  };\n\n  // fraction accessors\n  p.subdomain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    // convenience, return \"www\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // grab domain and add another segment\n      var end = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0, end) || '';\n    } else {\n      var e = this._parts.hostname.length - this.domain().length;\n      var sub = this._parts.hostname.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(sub));\n\n      if (v && v.charAt(v.length - 1) !== '.') {\n        v += '.';\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      if (v) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n\n      this._parts.hostname = this._parts.hostname.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.domain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // convenience, return \"example.org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // if hostname consists of 1 or 2 segments, it must be the domain\n      var t = this._parts.hostname.match(/\\./g);\n      if (t && t.length < 2) {\n        return this._parts.hostname;\n      }\n\n      // grab tld and add another segment\n      var end = this._parts.hostname.length - this.tld(build).length - 1;\n      end = this._parts.hostname.lastIndexOf('.', end -1) + 1;\n      return this._parts.hostname.substring(end) || '';\n    } else {\n      if (!v) {\n        throw new TypeError('cannot set domain empty');\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      URI.ensureValidHostname(v, this._parts.protocol);\n\n      if (!this._parts.hostname || this.is('IP')) {\n        this._parts.hostname = v;\n      } else {\n        var replace = new RegExp(escapeRegEx(this.domain()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.tld = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // return \"org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      var pos = this._parts.hostname.lastIndexOf('.');\n      var tld = this._parts.hostname.substring(pos + 1);\n\n      if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {\n        return SLD.get(this._parts.hostname) || tld;\n      }\n\n      return tld;\n    } else {\n      var replace;\n\n      if (!v) {\n        throw new TypeError('cannot set TLD empty');\n      } else if (v.match(/[^a-zA-Z0-9-]/)) {\n        if (SLD && SLD.is(v)) {\n          replace = new RegExp(escapeRegEx(this.tld()) + '$');\n          this._parts.hostname = this._parts.hostname.replace(replace, v);\n        } else {\n          throw new TypeError('TLD \"' + v + '\" contains characters other than [A-Z0-9]');\n        }\n      } else if (!this._parts.hostname || this.is('IP')) {\n        throw new ReferenceError('cannot set TLD on non-domain host');\n      } else {\n        replace = new RegExp(escapeRegEx(this.tld()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.directory = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path && !this._parts.hostname) {\n        return '';\n      }\n\n      if (this._parts.path === '/') {\n        return '/';\n      }\n\n      var end = this._parts.path.length - this.filename().length - 1;\n      var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');\n\n      return v ? URI.decodePath(res) : res;\n\n    } else {\n      var e = this._parts.path.length - this.filename().length;\n      var directory = this._parts.path.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(directory));\n\n      // fully qualifier directories begin with a slash\n      if (!this.is('relative')) {\n        if (!v) {\n          v = '/';\n        }\n\n        if (v.charAt(0) !== '/') {\n          v = '/' + v;\n        }\n      }\n\n      // directories always end with a slash\n      if (v && v.charAt(v.length - 1) !== '/') {\n        v += '/';\n      }\n\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.filename = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v !== 'string') {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var pos = this._parts.path.lastIndexOf('/');\n      var res = this._parts.path.substring(pos+1);\n\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      var mutatedDirectory = false;\n\n      if (v.charAt(0) === '/') {\n        v = v.substring(1);\n      }\n\n      if (v.match(/\\.?\\//)) {\n        mutatedDirectory = true;\n      }\n\n      var replace = new RegExp(escapeRegEx(this.filename()) + '$');\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n\n      if (mutatedDirectory) {\n        this.normalizePath(build);\n      } else {\n        this.build(!build);\n      }\n\n      return this;\n    }\n  };\n  p.suffix = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var filename = this.filename();\n      var pos = filename.lastIndexOf('.');\n      var s, res;\n\n      if (pos === -1) {\n        return '';\n      }\n\n      // suffix may only contain alnum characters (yup, I made this up.)\n      s = filename.substring(pos+1);\n      res = (/^[a-z0-9%]+$/i).test(s) ? s : '';\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      if (v.charAt(0) === '.') {\n        v = v.substring(1);\n      }\n\n      var suffix = this.suffix();\n      var replace;\n\n      if (!suffix) {\n        if (!v) {\n          return this;\n        }\n\n        this._parts.path += '.' + URI.recodePath(v);\n      } else if (!v) {\n        replace = new RegExp(escapeRegEx('.' + suffix) + '$');\n      } else {\n        replace = new RegExp(escapeRegEx(suffix) + '$');\n      }\n\n      if (replace) {\n        v = URI.recodePath(v);\n        this._parts.path = this._parts.path.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.segment = function(segment, v, build) {\n    var separator = this._parts.urn ? ':' : '/';\n    var path = this.path();\n    var absolute = path.substring(0, 1) === '/';\n    var segments = path.split(separator);\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      throw new Error('Bad segment \"' + segment + '\", must be 0-based integer');\n    }\n\n    if (absolute) {\n      segments.shift();\n    }\n\n    if (segment < 0) {\n      // allow negative indexes to address from the end\n      segment = Math.max(segments.length + segment, 0);\n    }\n\n    if (v === undefined) {\n      /*jshint laxbreak: true */\n      return segment === undefined\n        ? segments\n        : segments[segment];\n      /*jshint laxbreak: false */\n    } else if (segment === null || segments[segment] === undefined) {\n      if (isArray(v)) {\n        segments = [];\n        // collapse empty elements within array\n        for (var i=0, l=v.length; i < l; i++) {\n          if (!v[i].length && (!segments.length || !segments[segments.length -1].length)) {\n            continue;\n          }\n\n          if (segments.length && !segments[segments.length -1].length) {\n            segments.pop();\n          }\n\n          segments.push(trimSlashes(v[i]));\n        }\n      } else if (v || typeof v === 'string') {\n        v = trimSlashes(v);\n        if (segments[segments.length -1] === '') {\n          // empty trailing elements have to be overwritten\n          // to prevent results such as /foo//bar\n          segments[segments.length -1] = v;\n        } else {\n          segments.push(v);\n        }\n      }\n    } else {\n      if (v) {\n        segments[segment] = trimSlashes(v);\n      } else {\n        segments.splice(segment, 1);\n      }\n    }\n\n    if (absolute) {\n      segments.unshift('');\n    }\n\n    return this.path(segments.join(separator), build);\n  };\n  p.segmentCoded = function(segment, v, build) {\n    var segments, i, l;\n\n    if (typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (v === undefined) {\n      segments = this.segment(segment, v, build);\n      if (!isArray(segments)) {\n        segments = segments !== undefined ? URI.decode(segments) : undefined;\n      } else {\n        for (i = 0, l = segments.length; i < l; i++) {\n          segments[i] = URI.decode(segments[i]);\n        }\n      }\n\n      return segments;\n    }\n\n    if (!isArray(v)) {\n      v = (typeof v === 'string' || v instanceof String) ? URI.encode(v) : v;\n    } else {\n      for (i = 0, l = v.length; i < l; i++) {\n        v[i] = URI.encode(v[i]);\n      }\n    }\n\n    return this.segment(segment, v, build);\n  };\n\n  // mutating query string\n  var q = p.query;\n  p.query = function(v, build) {\n    if (v === true) {\n      return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    } else if (typeof v === 'function') {\n      var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n      var result = v.call(this, data);\n      this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else if (v !== undefined && typeof v !== 'string') {\n      this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else {\n      return q.call(this, v, build);\n    }\n  };\n  p.setQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n\n    if (typeof name === 'string' || name instanceof String) {\n      data[name] = value !== undefined ? value : null;\n    } else if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          data[key] = name[key];\n        }\n      }\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.addQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.addQuery(data, name, value === undefined ? null : value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.removeQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.removeQuery(data, name, value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.hasQuery = function(name, value, withinArray) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return URI.hasQuery(data, name, value, withinArray);\n  };\n  p.setSearch = p.setQuery;\n  p.addSearch = p.addQuery;\n  p.removeSearch = p.removeQuery;\n  p.hasSearch = p.hasQuery;\n\n  // sanitizing URLs\n  p.normalize = function() {\n    if (this._parts.urn) {\n      return this\n        .normalizeProtocol(false)\n        .normalizePath(false)\n        .normalizeQuery(false)\n        .normalizeFragment(false)\n        .build();\n    }\n\n    return this\n      .normalizeProtocol(false)\n      .normalizeHostname(false)\n      .normalizePort(false)\n      .normalizePath(false)\n      .normalizeQuery(false)\n      .normalizeFragment(false)\n      .build();\n  };\n  p.normalizeProtocol = function(build) {\n    if (typeof this._parts.protocol === 'string') {\n      this._parts.protocol = this._parts.protocol.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeHostname = function(build) {\n    if (this._parts.hostname) {\n      if (this.is('IDN') && punycode) {\n        this._parts.hostname = punycode.toASCII(this._parts.hostname);\n      } else if (this.is('IPv6') && IPv6) {\n        this._parts.hostname = IPv6.best(this._parts.hostname);\n      }\n\n      this._parts.hostname = this._parts.hostname.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePort = function(build) {\n    // remove port of it's the protocol's default\n    if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {\n      this._parts.port = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePath = function(build) {\n    var _path = this._parts.path;\n    if (!_path) {\n      return this;\n    }\n\n    if (this._parts.urn) {\n      this._parts.path = URI.recodeUrnPath(this._parts.path);\n      this.build(!build);\n      return this;\n    }\n\n    if (this._parts.path === '/') {\n      return this;\n    }\n\n    _path = URI.recodePath(_path);\n\n    var _was_relative;\n    var _leadingParents = '';\n    var _parent, _pos;\n\n    // handle relative paths\n    if (_path.charAt(0) !== '/') {\n      _was_relative = true;\n      _path = '/' + _path;\n    }\n\n    // handle relative files (as opposed to directories)\n    if (_path.slice(-3) === '/..' || _path.slice(-2) === '/.') {\n      _path += '/';\n    }\n\n    // resolve simples\n    _path = _path\n      .replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, '/')\n      .replace(/\\/{2,}/g, '/');\n\n    // remember leading parents\n    if (_was_relative) {\n      _leadingParents = _path.substring(1).match(/^(\\.\\.\\/)+/) || '';\n      if (_leadingParents) {\n        _leadingParents = _leadingParents[0];\n      }\n    }\n\n    // resolve parents\n    while (true) {\n      _parent = _path.search(/\\/\\.\\.(\\/|$)/);\n      if (_parent === -1) {\n        // no more ../ to resolve\n        break;\n      } else if (_parent === 0) {\n        // top level cannot be relative, skip it\n        _path = _path.substring(3);\n        continue;\n      }\n\n      _pos = _path.substring(0, _parent).lastIndexOf('/');\n      if (_pos === -1) {\n        _pos = _parent;\n      }\n      _path = _path.substring(0, _pos) + _path.substring(_parent + 3);\n    }\n\n    // revert to relative\n    if (_was_relative && this.is('relative')) {\n      _path = _leadingParents + _path.substring(1);\n    }\n\n    this._parts.path = _path;\n    this.build(!build);\n    return this;\n  };\n  p.normalizePathname = p.normalizePath;\n  p.normalizeQuery = function(build) {\n    if (typeof this._parts.query === 'string') {\n      if (!this._parts.query.length) {\n        this._parts.query = null;\n      } else {\n        this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));\n      }\n\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeFragment = function(build) {\n    if (!this._parts.fragment) {\n      this._parts.fragment = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeSearch = p.normalizeQuery;\n  p.normalizeHash = p.normalizeFragment;\n\n  p.iso8859 = function() {\n    // expect unicode input, iso8859 output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = escape;\n    URI.decode = decodeURIComponent;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.unicode = function() {\n    // expect iso8859 input, unicode output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = unescape;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.readable = function() {\n    var uri = this.clone();\n    // removing username, password, because they shouldn't be displayed according to RFC 3986\n    uri.username('').password('').normalize();\n    var t = '';\n    if (uri._parts.protocol) {\n      t += uri._parts.protocol + '://';\n    }\n\n    if (uri._parts.hostname) {\n      if (uri.is('punycode') && punycode) {\n        t += punycode.toUnicode(uri._parts.hostname);\n        if (uri._parts.port) {\n          t += ':' + uri._parts.port;\n        }\n      } else {\n        t += uri.host();\n      }\n    }\n\n    if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {\n      t += '/';\n    }\n\n    t += uri.path(true);\n    if (uri._parts.query) {\n      var q = '';\n      for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {\n        var kv = (qp[i] || '').split('=');\n        q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace)\n          .replace(/&/g, '%26');\n\n        if (kv[1] !== undefined) {\n          q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace)\n            .replace(/&/g, '%26');\n        }\n      }\n      t += '?' + q.substring(1);\n    }\n\n    t += URI.decodeQuery(uri.hash(), true);\n    return t;\n  };\n\n  // resolving relative and absolute URLs\n  p.absoluteTo = function(base) {\n    var resolved = this.clone();\n    var properties = ['protocol', 'username', 'password', 'hostname', 'port'];\n    var basedir, i, p;\n\n    if (this._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    if (!(base instanceof URI)) {\n      base = new URI(base);\n    }\n\n    if (resolved._parts.protocol) {\n      // Directly returns even if this._parts.hostname is empty.\n      return resolved;\n    } else {\n      resolved._parts.protocol = base._parts.protocol;\n    }\n\n    if (this._parts.hostname) {\n      return resolved;\n    }\n\n    for (i = 0; (p = properties[i]); i++) {\n      resolved._parts[p] = base._parts[p];\n    }\n\n    if (!resolved._parts.path) {\n      resolved._parts.path = base._parts.path;\n      if (!resolved._parts.query) {\n        resolved._parts.query = base._parts.query;\n      }\n    } else {\n      if (resolved._parts.path.substring(-2) === '..') {\n        resolved._parts.path += '/';\n      }\n\n      if (resolved.path().charAt(0) !== '/') {\n        basedir = base.directory();\n        basedir = basedir ? basedir : base.path().indexOf('/') === 0 ? '/' : '';\n        resolved._parts.path = (basedir ? (basedir + '/') : '') + resolved._parts.path;\n        resolved.normalizePath();\n      }\n    }\n\n    resolved.build();\n    return resolved;\n  };\n  p.relativeTo = function(base) {\n    var relative = this.clone().normalize();\n    var relativeParts, baseParts, common, relativePath, basePath;\n\n    if (relative._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    base = new URI(base).normalize();\n    relativeParts = relative._parts;\n    baseParts = base._parts;\n    relativePath = relative.path();\n    basePath = base.path();\n\n    if (relativePath.charAt(0) !== '/') {\n      throw new Error('URI is already relative');\n    }\n\n    if (basePath.charAt(0) !== '/') {\n      throw new Error('Cannot calculate a URI relative to another relative URI');\n    }\n\n    if (relativeParts.protocol === baseParts.protocol) {\n      relativeParts.protocol = null;\n    }\n\n    if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {\n      return relative.build();\n    }\n\n    if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {\n      return relative.build();\n    }\n\n    if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {\n      relativeParts.hostname = null;\n      relativeParts.port = null;\n    } else {\n      return relative.build();\n    }\n\n    if (relativePath === basePath) {\n      relativeParts.path = '';\n      return relative.build();\n    }\n\n    // determine common sub path\n    common = URI.commonPath(relativePath, basePath);\n\n    // If the paths have nothing in common, return a relative URL with the absolute path.\n    if (!common) {\n      return relative.build();\n    }\n\n    var parents = baseParts.path\n      .substring(common.length)\n      .replace(/[^\\/]*$/, '')\n      .replace(/.*?\\//g, '../');\n\n    relativeParts.path = (parents + relativeParts.path.substring(common.length)) || './';\n\n    return relative.build();\n  };\n\n  // comparing URIs\n  p.equals = function(uri) {\n    var one = this.clone();\n    var two = new URI(uri);\n    var one_map = {};\n    var two_map = {};\n    var checked = {};\n    var one_query, two_query, key;\n\n    one.normalize();\n    two.normalize();\n\n    // exact match\n    if (one.toString() === two.toString()) {\n      return true;\n    }\n\n    // extract query string\n    one_query = one.query();\n    two_query = two.query();\n    one.query('');\n    two.query('');\n\n    // definitely not equal if not even non-query parts match\n    if (one.toString() !== two.toString()) {\n      return false;\n    }\n\n    // query parameters have the same length, even if they're permuted\n    if (one_query.length !== two_query.length) {\n      return false;\n    }\n\n    one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);\n    two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);\n\n    for (key in one_map) {\n      if (hasOwn.call(one_map, key)) {\n        if (!isArray(one_map[key])) {\n          if (one_map[key] !== two_map[key]) {\n            return false;\n          }\n        } else if (!arraysEqual(one_map[key], two_map[key])) {\n          return false;\n        }\n\n        checked[key] = true;\n      }\n    }\n\n    for (key in two_map) {\n      if (hasOwn.call(two_map, key)) {\n        if (!checked[key]) {\n          // two contains a parameter not present in one\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  // state\n  p.preventInvalidHostname = function(v) {\n    this._parts.preventInvalidHostname = !!v;\n    return this;\n  };\n\n  p.duplicateQueryParameters = function(v) {\n    this._parts.duplicateQueryParameters = !!v;\n    return this;\n  };\n\n  p.escapeQuerySpace = function(v) {\n    this._parts.escapeQuerySpace = !!v;\n    return this;\n  };\n\n  return URI;\n}));\n","/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","var validator = new RegExp(\"^[a-z0-9]{32}$\", \"i\");\n\nfunction gen(count) {\n  var out = \"\";\n  for (var i=0; i<count; i++) {\n    out += (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n  }\n  return out;\n}\n\nfunction Uuid(uuid) {\n  if (!uuid) throw new TypeError(\"Invalid argument; `value` has no value.\");\n    \n  var value = Uuid.EMPTY;\n  \n  if (uuid && uuid instanceof Uuid) {\n    value = Uuid.toString();\n\n  } else if (uuid && Object.prototype.toString.call(uuid) === \"[object String]\" && Uuid.isUuid(uuid)) {\n    value = uuid;\n  }\n  \n  this.equals = function(other) {\n    // Comparing string `value` against provided `uuid` will auto-call\n    // toString on `uuid` for comparison\n    return Uuid.isUuid(other) && value == other;\n  };\n\n  this.isEmpty = function() {\n    return value === Uuid.EMPTY;\n  };\n  \n  this.toString = function() {\n    return value;\n  };\n  \n  this.toJSON = function() {\n    return value;\n  };\n  \n  Object.defineProperty(this, \"value\", {\n    get: function() { return value; },\n    enumerable: true\n  });\n};\n\nObject.defineProperty(Uuid, \"EMPTY\", {\n  value: \"00000000000000000000000000000000\"\n});\n\nUuid.isUuid = function(value) {\n  return value && (value instanceof Uuid || validator.test(value.toString()));\n};\n\nUuid.create = function() {\n  return new Uuid(gen(8));\n};\n\nUuid.raw = function() {\n  return gen(8);\n};\n\nmodule.exports = Uuid;\n","###\n * content.coffee\n *\n *   Content script for injecting in site pages\n *\n *   For Chrome extension\n *\n *   Copyright (c) 2016 auxoft.com. All rights reserved.\n###\n\n#MODULE-TAGS: [front]\n\nglobal.axt_context = context =\n  axt_sid: null\n  axt_fid: null\n  axt_tid: null\n  axt_url: ''\n  axt_src: ''\n  axt_dst: 'page'\n\nutils = require(\"../../common/utils.coffee\")\ndomainExtractor = require('../common/domain-extractor.coffee')\nOptimalSelect = require(\"optimal-select\")\nlogout_urls = require(\"../back/logoutdb.json\")\n\nif process.env.DEBUG\n  ga = require('../common/ga.coffee')()\n\n#FIX: Fixing an issue when there is a DOM Element with id=\"global\"\nwindow.global = window\nwindow.axt_frameVisibility = true\n\nl = null\n\nerrorHandler = null\napplierManager = null\nobserver = null\n\nenableExecuting = false\n\n\nisPassword = (element) ->\n  return utils.isPasswordInput(element) or\n  element.id == 'password' or\n  element.name == 'password'\n\n\ninit = (evt) ->\n  l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"INIT KEYREEL: \" +\n    (if evt? then \"FIRE EVENT #{evt.type}\" else \"START\")))\n\n  origUrl = document.head?.querySelector(\n    \"meta[name='original-url']\"\n  )?.getAttribute('content') or location.href\n\n  l.d.apply(l, l.r(context, 0, \"debug-val\", \"front\", \"\"\"origUrl =\"\"\", origUrl))\n\n#  console.log(\n#    \"Init(): evt=\", evt,\n#    \"body=\", document.body,\n#    \"axt-keyreel-extension-installed=\",\n#    document.body?.getAttribute('axt-keyreel-extension-installed'),\n#    \"DEBUG=\", process.env.DEBUG,\n#   \"location.protocol=\", document.location.protocol,\n#    \"visibilityState=\", document.visibilityState\n#  )\n  try\n    if (\n      document.body? and\n      not document.body.hasAttribute('axt-keyreel-extension-installed') and (\n        document.visibilityState == 'visible' or (\n          process.env.DEBUG and process.env.DEBUG != 'false'\n        )\n      )\n    )\n      #console.log \"Init() L2:\"\n\n      document.body.setAttribute(\n        'axt-keyreel-extension-installed',\n        '20.5.12.0'\n      )\n\n      if process.env.DEBUG\n        errorHandler = (evt) ->\n          msg = \"AXT: ERROR EVENT: Uncaught #{evt.message} from \" + \\\n            \"#{evt.filename}:#{evt.lineno}\\n#{evt.error?.stack}\"\n          l.e.apply(l, l.r(context, 0, \"error\", \"\", msg, evt))\n\n          ga('send', 'exception',\n            exDescription: msg\n            exFatal: true\n          )\n        window.addEventListener 'error', errorHandler\n\n      try\n        scriptWasExecuted = false\n\n        runContentScript = () ->\n          l.gs(\"\"\"#{context.axt_fid}: >> runContentScript [#{document.location.href}]\"\"\")\n          if not scriptWasExecuted\n            scriptWasExecuted = true\n            utils.delayCall 200, () ->\n              applierManager.start()\n            , \"init->start error\"\n          else\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front\", \"\"\"MutationObserver: Some inputs were found but\"\"\"))\n            #  ApplierManager had already been started\n            null\n          l.ge(\"\"\"#{context.axt_fid}: << runContentScript [#{document.location.href}]\"\"\")\n          return\n\n        # observe DOM for inputs. When any password inputs appear - disable\n        # observer and start main script\n        observer = null\n        input_observer = (mutations) ->\n          #debug-begin [observer]: input_observer\n          #debug [observer]: DOM-mutations have been detected!\n          for mutation in mutations\n            #verbose-val [observer] mutation.addedNodes\n            if mutation.type == 'childList'\n              for node in mutation.addedNodes when node.nodeType == 1\n                if (\n                  node.nodeName == 'INPUT' and\n                  node.type not in ['hidden', 'button']\n                ) or node.querySelector?(\n                  'input:not([type=\"hidden\"]):not([type=\"button\"])'\n                )\n                  #debug [observer]: INPUT elements have been detected!!!\n                  #debug [observer]: Stop Input mutation observer\n                  observer?.disconnect()\n                  observer = null\n                  #info [observer]: Run content script...\n                  runContentScript()\n                  break\n          #debug-end [observer]: input_observer\n          return\n\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front\", \"\"\"No INPUT elements have been detected. Start Input mutation observer\"\"\"))\n        observer = new MutationObserver(input_observer)\n        observer?.observe( document, {childList: true, subtree: true } )\n\n        setTimeout () ->\n          if document.querySelector(\n            'input:not([type=\"hidden\"]):not([type=\"button\"])'\n          )\n            # stop observer\n            observer?.disconnect()\n            observer = null\n\n            l.l.apply(l, l.r(context, 0, \"info\", \"front\", \"\"\"INPUT element(s) has been detected - run content script\"\"\"))\n            runContentScript()\n        , 0\n      catch e\n        l.e.apply(l, l.r(context, 0, \"error\", \"\", '2:INIT ERROR', e.stack))\n    else\n      if not document.body?\n        l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"Document.body is empty: stop executing\"))\n        null\n      else if document.body.hasAttribute('axt-keyreel-extension-installed')\n        l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"KeyReel general script already started\"))\n        null\n      else if document.visibilityState != 'visible' and not (\n        process.env.DEBUG and process.env.DEBUG != 'false'\n      )\n        l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"Tab is not visible: stop executing\"))\n        null\n\n    if (\n      document.body? and\n        document.body.hasAttribute('axt-keyreel-extension-installed')\n    )\n      removeInitListeners()\n\n  catch e\n    console.error '1:INIT ERROR', e.stack\n  return\n\n\nremoveInitListeners = () ->\n  l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"Remove content listeners\"\"\"))\n  document.removeEventListener \"load\", init\n  document.removeEventListener \"readystatechange\", init\n  document.removeEventListener 'visibilitychange', init\n  return\n\n\nstartStop = (enable_executing) ->\n  if enable_executing\n    l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"START GENERAL KEYREEL SCRIPT\"\"\"))\n    document.addEventListener 'visibilitychange', init\n    document.addEventListener \"load\", init\n    document.addEventListener \"readystatechange\", init\n\n    applierManager.startIframeObserver()\n\n    init()\n    setTimeout(init, 0)\n  else\n    l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"STOP GENERAL KEYREEL SCRIPT\"\"\"))\n    removeInitListeners()\n    if observer?\n      observer.disconnect()\n      observer = null\n\n    applierManager?.stop()\n\n    if document.body?\n      document.body.removeAttribute('axt-keyreel-extension-installed')\n      document.body.removeAttribute('axt-parser-timing')\n\n    l.l.apply(l, l.r(context, 0, \"info\", \"front\", \"\"\"##### KEYREEL CONTENT SCRIPT STOPPED #####\"\"\"))\n  return\n\n\nselect = (selector) ->\n  try\n    if selector\n      OptimalSelect.select selector,\n        ignore:\n          attribute: (name) ->\n            /^(axt-|gigya-|data-|action|name|title)/.test(name)\n    else\n      ''\n  catch e\n    console.error \"optimal_Select error on selector = #{selector}: \",\n      e.stack ? e\n    return \"#ERROR#\"\n\n\nprevActiveElement = null\ndocument.addEventListener 'focusin', (evt) ->\n  #console.info \"focusin\", evt.target\n  if utils.isFocusable(evt.target)\n    prevActiveElement = evt.target\n\n\ndocument.addEventListener 'focusout', (evt) ->\n  #console.info \"focusout\", evt.target\n  prevActiveElement = evt.target\n\n\ntopFrameMessageHandler = (event) ->\n  #console.log \"topFrameMessageHandler: event=\", event\n  cmd = event.data?['cmd']\n  #console.log \"TOP: window.onMessage: event.data=\", event.data, \\\n  #  \"cmd =\", cmd, \"context =\", context\n\n  if event.source? and cmd == \"axt-request-top-window-for-running-permission\"\n    l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"Receive message \\\"axt-request-top-window-for-running-permission\\\" from iframe\"\"\"))\n\n    event.source.postMessage\n      cmd: \"axt-iframe-script-running-permission\"\n      context: context\n      enableExecuting: enableExecuting\n    , '*'\n\n\n# listen to low level (bootstrap) messages from background page:\nmessageEventHandler = (request, sender, sendResponse) ->\n  `var context = {axt_fid: null};` # declare local context\n\n  if not sender.tab\n    return if not request.name? or not request.name.startsWith 'axt-'\n    #console.log \"runtime onMessage: request=\", request, \"sender=\", sender\n\n    l = require('../common/log.coffee')\n\n    msg = request.message ? {}\n    ctx = request.context ? {}\n    switch request.name\n      when 'axt-tab-script-running-permission'\n        if window == window.top\n          context = global.axt_context\n          if not context.axt_sid? and ctx.axt_sid?\n            context.axt_tid = ctx.axt_tid\n            context.axt_sid = ctx.axt_sid\n            context.axt_url = ctx.axt_url\n\n          l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"## START NEW SESSION: #{context.axt_sid} ##\"\"\"))\n          l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"##  FOR \\\"#{document.location.href}\\\" ##\"\"\"))\n\n          l.l.apply(l, l.r(context, 0, \"info\", \"\", \"##### INITIALIZE CONTENT SCRIPT #####\"))\n          applierManager.init()\n\n          if 'enableExecuting' of msg\n            enableExecuting = msg.enableExecuting\n\n          l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"Get SID (#{context.axt_sid}) and running permission (#{enableExecuting}) for ROOT frame\"\"\"))\n\n          #NOTE: first time context is without fid\n          window.addEventListener 'message', topFrameMessageHandler\n\n          if enableExecuting\n            startStop(enableExecuting)\n\n            # to be sure that all iframes will start later then the main frame\n            setTimeout () ->\n              chrome.runtime.sendMessage\n                name: \"axt-send-running-permission-to-all-iframes\"\n                message:\n                  enableExecuting: enableExecuting\n                context: context\n            , 100\n\n      when 'axt-frame-id'\n        context = global.axt_context\n        context.axt_fid = ctx.axt_fid\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|extra\", 'axt-frame-id: context=', context))\n        if (\n          context.axt_fid? and\n          context.axt_sid? and\n          context.axt_tid?\n        )\n          startStop(enableExecuting)\n\n      when 'axt-change-running-permission'\n        context = global.axt_context\n        if not context.axt_sid? and ctx.axt_sid?\n          context.axt_tid = ctx.axt_tid\n          context.axt_sid = ctx.axt_sid\n          context.axt_url = ctx.axt_url\n\n        enableExecuting = msg.enableExecuting\n\n        #NOTE: here we don't have frameid, so for frames we need to obtain it\n        #      from the background script  (Chrome specific)\n        if not context.axt_fid?\n          l.i(context.axt_fid + \":\", \"REQUEST FRAME ID\")\n          chrome.runtime.sendMessage\n            name: \"axt-get-frame-id\"\n            context: context\n        else\n          startStop(enableExecuting)\n\n      when 'axt-get-active-element'\n        if ctx.axt_sid == global.axt_context.axt_sid\n          context = ctx\n          context.axt_fid = global.axt_context.axt_fid\n          context.axt_src = context.axt_dst\n          context.axt_dst = global.axt_context.axt_dst\n\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front\", \"GET ACTIVE ELEMENT\"))\n          activeElement = document.activeElement\n          l.i(context.axt_fid + \":\", \"A0\", activeElement,\n            \"focusable:\", utils.isFocusable(activeElement))\n          active_element_info = null\n\n          if not activeElement? or not utils.isFocusable(activeElement)\n            activeElement = prevActiveElement\n            l.i(context.axt_fid + \":\", \"A1\", activeElement)\n\n          if activeElement and activeElement.tagName.toLowerCase() != 'iframe'\n            l.i(context.axt_fid + \":\", \"A2\", activeElement)\n\n            if not activeElement? or not utils.isFocusable(activeElement)\n              l.i(context.axt_fid + \":\", \"A3\", activeElement)\n              return\n\n            l.i(context.axt_fid + \":\", \"A4\", activeElement)\n            if utils.isTextInput(activeElement)\n              if isPassword(activeElement)\n                type = 'password'\n              else\n                type = 'text'\n\n              nextElement = null\n              nextType = null\n              if type == 'password'\n                prevElement = utils.getNextTabStopElement(activeElement, true)\n                if prevElement?\n                  if not (\n                    utils.isTextInput(prevElement) or\n                    utils.isSelectInput(nextElement) or\n                    utils.isTextArea(prevElement)\n                  )\n                    prevElement = utils.getNextTabStopElement(prevElement, true)\n\n                  if (\n                    prevElement? and\n                    utils.isTextInput(prevElement) and\n                    not isPassword(prevElement) and\n                    not prevElement.value  # empty field\n                  )\n                    nextElement  = activeElement\n                    activeElement = prevElement\n                    type = 'text'\n                    nextType = 'password'\n              else # type = 'text'\n                nextElement = utils.getNextTabStopElement(activeElement)\n                l.i(\"\"\"#{context.axt_fid}: R-1\"\"\")\n                if nextElement?\n                  if isPassword(nextElement)\n                    l.i(\"\"\"#{context.axt_fid}: R-2\"\"\")\n                    nextType = 'password'\n                  else if not (\n                    utils.isTextInput(nextElement) or\n                    utils.isSelectInput(nextElement) or\n                    utils.isTextArea(nextElement)\n                  )\n                    l.i(\"\"\"#{context.axt_fid}: R-3\"\"\")\n                    nextElement = utils.getNextTabStopElement(nextElement)\n                    if nextElement? and isPassword(nextElement)\n                      l.i(\"\"\"#{context.axt_fid}: R-4\"\"\")\n                      nextType = 'password'\n                    else\n                      l.i(\"\"\"#{context.axt_fid}: R-5\"\"\")\n                      nextElement = null\n                  else\n                    l.i(\"\"\"#{context.axt_fid}: R-6\"\"\")\n                    nextElement =  null\n\n              window.axt_activeElement = activeElement\n              window.axt_nextElement = nextElement\n\n              l.i(context.axt_fid + \":\", \"A5\", activeElement)\n              active_element_info = {\n                activeInputType: type\n                nextInputType:   nextType\n              }\n\n          l.i(context.axt_fid + \":\", \"A6\", active_element_info)\n          l.i(context.axt_fid + \"\"\": window.axt_activeElement =\"\"\", window.axt_activeElement)\n          l.i(context.axt_fid + \"\"\": window.axt_nextElement =\"\"\", window.axt_nextElement)\n          chrome.runtime.sendMessage\n            name: 'axt-active-element'\n            message: {activeElementInfo: active_element_info}\n            context: context\n\n      when 'axt-insert-value'\n        typeValue = (input, value) ->\n          input.focus()\n          input.dispatchEvent new UIEvent('focus', {bubbles: true})\n          #NOTE: do we still need it?\n          input.dispatchEvent new MouseEvent('mousedown', {bubbles: true})\n\n          # update input:\n          input.value = value\n\n          input.dispatchEvent new KeyboardEvent(\n            'keydown',\n            {bubbles: true}\n          )\n          input.dispatchEvent new KeyboardEvent('keyup', {bubbles: true})\n\n          input.dispatchEvent new UIEvent('input', {bubbles: true})\n          input.dispatchEvent new UIEvent('change', {bubbles: true})\n\n        if ctx.axt_sid == global.axt_context.axt_sid\n          context = ctx\n          context.axt_src = context.axt_dst\n          context.axt_dst = global.axt_context.axt_dst\n\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front\", \"INSERT ACTIVE ELEMENT\"))\n          message = request.message\n          l.i(context.axt_fid + \"\"\": message =\"\"\", message)\n          l.i(context.axt_fid + \"\"\": window.axt_activeElement =\"\"\", window.axt_activeElement)\n          l.i(context.axt_fid + \"\"\": window.axt_nextElement =\"\"\", window.axt_nextElement)\n          if message?\n            if message.activeInputValue? and window.axt_activeElement?\n              typeValue(window.axt_activeElement, message.activeInputValue)\n            if message.nextInputValue? and window.axt_nextElement?\n              typeValue(window.axt_nextElement, message.nextInputValue)\n\n\n      #HACK: TEMPORARY =========================================================\n      when 'axt-logout'\n        l.w.apply(l, l.r(context, 0, \"warn\", \"front\", \"SIGNAL axt-logout IS RECEIVED\"))\n        context = global.axt_context\n\n        if not context.axt_sid? and ctx.axt_sid?\n          context.axt_tid = ctx.axt_tid\n          context.axt_sid = ctx.axt_sid\n          context.axt_url = ctx.axt_url\n\n        searchButtons = (text) ->\n          l.i(\"\"\"#{context.axt_fid}: AL-SB-1 #{text}\"\"\")\n          star = \"*\"\n          if text.substr(0,1) == '='\n            text = text.substr(1, text.length)\n            star = \"\"\n\n          buttons = document.querySelectorAll(\n            \"button[aria-label#{star}='#{text}' i]\")\n          return buttons if buttons?.length > 0\n\n          buttons = document.querySelectorAll(\n            \"a[aria-label#{star}='#{text}' i]\")\n          return buttons if buttons?.length > 0\n\n          buttons = document.querySelectorAll(\n            \"span[aria-label#{star}='#{text}' i]\")\n          return buttons if buttons?.length > 0\n\n          buttons = document.querySelectorAll(\"div[title#{star}='#{text}' i]\")\n          return buttons if buttons?.length > 0\n\n          buttons = document.querySelectorAll(\n            \"button[data-control-name='nav.${text}' i]\")\n          return buttons if buttons?.length > 0\n\n          buttons = []\n\n          a = document.evaluate(\n            \"//a[contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', \" +\n              \"'abcdefghijklmnopqrstuvwxyz'), '#{text}')]\",\n            document,\n            null,\n            XPathResult.ANY_TYPE,\n            null\n          )\n          button = a.iterateNext()\n          while button?\n            buttons.push button\n            button = a.iterateNext()\n\n          l.i(context.axt_fid + \":\", \"AL-SB-2 button = \", button)\n          return buttons if buttons.length > 0\n\n          a = document.evaluate(\n            \"//button[contains(translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', \" +\n              \"'abcdefghijklmnopqrstuvwxyz'), '#{text}')]\",\n            document,\n            null,\n            XPathResult.ANY_TYPE,\n            null\n          )\n          button = a.iterateNext()\n          while button?\n            buttons.push button\n            button = a.iterateNext()\n\n          l.i(context.axt_fid + \":\", \"AL-SB-3 button = \", button)\n          return buttons\n\n        searchButton = (text) ->\n          buttons = searchButtons(text)\n          if buttons.length > 0\n            return buttons[0]\n          return null\n\n\n        clickButton = (button) ->\n          l.i(context.axt_fid + \":\", \"AL-cb-1: button =\", button)\n          if button?\n            l.i(\"\"\"#{context.axt_fid}: AL-cb-2\"\"\")\n            chrome.runtime.sendMessage\n              name: 'axt-logout-button-clicked'\n              message: {activeElementInfo: active_element_info}\n              context: context\n\n            l.i(context.axt_fid + \":\", \"AL-cb-3: Click button\", button)\n            button.click()\n\n        l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"## AUTO-LOGOUT\"\"\"))\n        url = new utils.Url(document.location.href)\n        domain = domainExtractor(url)\n        if domain of logout_urls\n          l.i(\"\"\"#{context.axt_fid}: AL-1\"\"\")\n          button = searchButton('sign out')\n\n          if not button?\n            button = searchButton('log out')\n\n          if not button?\n            button = searchButton('logout')\n\n          if button?\n            l.i(\"\"\"#{context.axt_fid}: AL-2\"\"\")\n            clickButton(button)\n            return\n\n          buttons = searchButtons('account')\n\n          if buttons.length == 0\n            l.i(\"\"\"#{context.axt_fid}: AL-3\"\"\")\n            buttons = searchButtons('=options')\n\n          if buttons.length == 0\n            l.i(\"\"\"#{context.axt_fid}: AL-3\"\"\")\n            buttons = searchButtons('profile')\n\n          if buttons.length == 0\n            l.i(\"\"\"#{context.axt_fid}: AL-4\"\"\")\n            buttons = searchButtons('member menu')\n\n          if buttons.length == 0\n            l.i(\"\"\"#{context.axt_fid}: AL-5\"\"\")\n            buttons = searchButtons('settings')\n\n          if buttons.length == 0\n            l.i(\"\"\"#{context.axt_fid}: AL-5\"\"\")\n            buttons = searchButtons('more options')\n\n          buttons.forEach (button) ->\n            l.i(context.axt_fid + \":\", \"AL-6: Click button\", button)\n\n            button.click()\n\n            utils.delayCall 600, () ->\n              l.i(\"\"\"#{context.axt_fid}: AL-7\"\"\")\n              button = searchButton('sign out')\n\n              if not button\n                l.i(\"\"\"#{context.axt_fid}: AL-8\"\"\")\n                button = searchButton('log out')\n\n              if not button\n                l.i(\"\"\"#{context.axt_fid}: AL-9\"\"\")\n                button = searchButton('logout')\n\n              if button\n                clickButton(button)\n              else\n                l.i(\"\"\"#{context.axt_fid}: AL-10\"\"\")\n                button = searchButton('options')\n                if button\n                  l.i(\"\"\"#{context.axt_fid}: AL-11\"\"\")\n                  clickButton(button)\n                  utils.delayCall 400, () ->\n                    l.i(\"\"\"#{context.axt_fid}: AL-12\"\"\")\n                    button = searchButton('log out')\n                    clickButton(button)\n\n      #HACK: TEMPORARY =========================================================\n  return\n\n\n# listen to root iframe (frameid=0) for session id and running permission:\nstartContentScriptInIframeHandler = (event) ->\n  cmd = event.data.cmd\n  ctx = event.data.context ? {}\n  {axt_tid, axt_sid, axt_url} = ctx\n\n  if cmd == \"axt-iframe-script-running-permission\" and axt_sid?\n    l = require('../common/log.coffee')\n\n    window.removeEventListener 'message', startContentScriptInIframeHandler\n\n    context.axt_tid = axt_tid\n    context.axt_sid = axt_sid\n    context.axt_url = axt_url\n\n    l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"Receive message \\\"axt-iframe-script-running-permission\\\"\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"Get SID (#{context.axt_sid}) and running permission (#{enableExecuting})\"\"\"))\n\n    enableExecuting = !!event.data['enableExecuting']\n\n    l.i(context.axt_fid + \":\", \"REQEUST FRAME ID\")\n    chrome.runtime.sendMessage\n      name: \"axt-get-frame-id\"\n      context: context\n\n  return\n\n\n#console.warn \"**************** CONTENT.coffee (chrome) ***********************\"\nif (\n  (process.env.DEBUG? and process.env.DEBUG != 'false') or\n    document.location.protocol in ['http:', 'https:']\n)\n  #console.warn \"START KEYREEL CONTENT SCRIPT HERE:\"\n\n  fileContentsCache = {}\n\n  if process.env.DEBUG\n    require('../thirdparty/source-map-support').install\n      retrieveFile: (path) ->\n        fname = (path || '').match /\\/[^\\/]+$/\n\n        return null if not fname?\n\n        path = chrome.extension.getURL('js' + fname)\n\n        if path of fileContentsCache\n          return fileContentsCache[path]\n\n        try\n          xhr = new XMLHttpRequest()\n          xhr.open('GET', path, false)\n          xhr.send(null)\n          contents = null\n          if (xhr.readyState == 4 and xhr.status == 200)\n            contents = xhr.responseText\n        catch e\n          contents = null\n        return fileContentsCache[path] = contents\n\n\n  started = false\n  contentLoadedHandler =  (evt) ->\n    #console.warn \"DOMContentLoaded: root window=\", window == window.top, \\\n    #  \"evt=\", evt, \"attribute=\", \\\n    #  document.body.hasAttribute('axt-keyreel-extension-installed'),\n    #  toString.call(applierManager)\n    #console.warn \"DOCContentLoaded: url =\", window.location.href\n\n    # continue only if body exists\n    return if not document.body? or started\n    started = true\n\n    # disable this handler\n    document.removeEventListener 'DOMContentLoaded', contentLoadedHandler\n    document.removeEventListener \"load\", contentLoadedHandler\n    document.removeEventListener \"readystatechange\", contentLoadedHandler\n\n    #NOTE: only for Chrome: do not process page with body.class = 'axt-element'\n    #      KeyReel Form Checker extension (KFC) puts it in its menu iframe.\n    #      We don't have to process this iframe\n    if document.body.classList.contains 'axt-element'\n      #console.warn \"body contains 'axt-element'\"\n      return\n\n    Transport = require('./front-transport.coffee')\n    ApplierManager = require('../front/applier-manager.coffee')\n\n    # mark inputs changed by user\n    changeValueEventHandler = (evt) ->\n      target = evt.target\n      if utils.isTextInput(target) and (\n        evt.clipboardData or evt.key or evt.code or not target.value\n      )\n        #NOTE: `key` and `code` properties are not empty only for user input\n        target.axt_valueChanged = !!(target.value)\n    document.addEventListener 'keyup', changeValueEventHandler, true\n    document.addEventListener 'paste', changeValueEventHandler, true\n    document.addEventListener 'cut', changeValueEventHandler, true\n\n    if window == window.top\n      surl = document.location.href\n      context.axt_fid = 0\n      context.axt_url = utils.getUrlWithoutParams(surl)\n\n    applierManager = new ApplierManager(Transport)\n    #console.log \"run applierManager.transport.init()\"\n    applierManager.transport.init()\n\n    # listen to low level (bootstrap) messages from background page:\n    chrome.runtime.onMessage.addListener(messageEventHandler)\n\n#    beg_time = performance.now()\n#    beg_tm = Date.now()\n#    evth = (evt) ->\n#      end_time = performance.now()\n#      end_tm = Date.now()\n#      console.error (context ? {}).axt_fid + \": ++++++++>\", \\\n#        evt.type, end_time - beg_time, end_time, \\\n#        beg_time, beg_tm, end_tm, end_tm - beg_tm, window.location.href, evt\n#\n#    window.addEventListener 'pagehide', evth\n#    window.addEventListener 'beforeunload', evth\n#    window.addEventListener 'unload', evth\n#    window.addEventListener 'hashchange', evth\n#    window.addEventListener 'popstate', evth\n\n    if window == window.top\n      #console.log \"send message axt-request-script-running-permission\"\n      chrome.runtime.sendMessage\n        name: \"axt-request-script-running-permission\",\n        context: context\n    else\n      # listen to root iframe (frameid=0) for session id and running permission:\n      window.addEventListener 'message', startContentScriptInIframeHandler\n\n      # request session id and running permission from root iframe (frameid=0)\n      #console.log \"post message axt-request-top-window-for-running-permission\"\n      window.top.postMessage\n        cmd: \"axt-request-top-window-for-running-permission\"\n      , '*'\n\n    return\n  #-----------------------------------------------------------------------------\n\n  document.addEventListener 'DOMContentLoaded', contentLoadedHandler\n  document.addEventListener \"load\", contentLoadedHandler\n  document.addEventListener \"readystatechange\", contentLoadedHandler\n","###\n * front-transport.coffee\n *\n * send and receive messages to background script\n *\n * Chrome extension version\n###\n\n#NOTE: we can't use logging (especially, remote) in this module, because\n#      remote log uses this module to send logs to the service\n#      To debug this module we should use console.log only\n\ndo ({expect, assert} = chai = require \"chai\").should\n\n\nclass ChromeFrontTransport\n  # callback is invoked when message from the background script is received\n  constructor: (@callbackObject) ->\n    try expect((@callbackObject), \"\"\"@callbackObject\"\"\") .to.exist catch e then throw e\n    @_port = chrome.runtime.connect {name: \"AuxoftKeyReel\"}\n    return\n\n\n  init: () ->\n    #console.warn \"ChromeFrontTransport.init: run Message event listener!!!\"\n    @_port.onMessage.addListener @messageEventListener\n    return\n\n\n  messageEventListener: (message) =>\n    ctx = message.context\n    sid = ctx['axt_sid']\n    if not sid? or sid == global.axt_context.axt_sid\n      @callbackObject?.call message.name, message.message\n    return\n\n\n  close: () ->\n    if @_port?\n      @_port.onMessage.removeListener @messageEventListener\n      @_port.disconnect()\n      @_port = null\n    return\n\n\n  ###!\n  # send message to the background script\n  #\n  # parameters:\n  #  @param {string}      name    - message name\n  #  @param {json-object} message - message content\n  ###\n  sendToExt: (context, name, message) ->\n    #console.log \"! name=\", name\n    #console.log \"! message=\", message\n    try\n      @_port.postMessage\n        name:    name\n        message: message\n        context: context ? global.axt_context\n    catch e\n      if process.env.DEBUG\n        console.error \"SendToExt('\", name, \"'): error\", e # \",\", message, \"):\",e\n    return\n\n\n  # return extension dependent url to root directory of extension\n  # it uses for getting resources from extension folders\n  getExtUrl: () -> chrome.extension.getURL('')\n\n  #HACK: TEMPORARY =============================================================\n  # callback(context, name, message)\n  addMessageListener: (callback) ->\n    chrome.runtime.onMessage.addListener (request) ->\n      if typeof(request) == 'object'\n        ctx = request.context ? {}\n        ctx.axt_src = ctx.axt_dst\n        ctx.axt_dst = global.axt_context.axt_dst\n        callback(ctx, request.name, request.message)\n    return\n  #HACK: TEMPORARY =============================================================\n\nmodule.exports = ChromeFrontTransport\n","###\n * domain-extractor.coffee\n *\n *   Copyright (c) 2015-2016 auxoft.com. All rights reserved.\n###\n\nl = require('../common/log.coffee'); context = global.axt_context\ndo ({expect, assert} = chai = require \"chai\").should\nUrl = require('domurl/url')\nURI = require('urijs')\n\nUSA_STATES = [\n  \"us\", \"al\", \"ak\", \"az\", \"ar\", \"ca\", \"co\", \"ct\", \"de\", \"dc\", \"fl\",\n  \"ga\", \"hi\", \"id\", \"il\", \"in\", \"ia\", \"ks\", \"ky\", \"la\", \"me\", \"md\",\n  \"ma\", \"mi\", \"mn\", \"ms\", \"mo\", \"mt\", \"ne\", \"nv\", \"nh\", \"nj\", \"nm\",\n  \"ny\", \"nc\", \"nd\", \"oh\", \"ok\", \"or\", \"pa\", \"ri\", \"sc\", \"sd\", \"tn\",\n  \"tx\", \"ut\", \"vt\", \"va\", \"wa\", \"wv\", \"wi\", \"wy\", \"as\", \"gu\", \"mp\",\n  \"pr\", \"vi\", \"um\", \"fm\", \"mh\", \"pw\", \"aa\", \"ae\", \"ap\"\n]\n\n# <[]> means OR, <\"key\":> means SUBLEVEL:\n#  \"com\":\n#    \"americanexpress\":\n#      \"subdomain1\"\n#      \"subdomain2\"\nDOMAIN_EXCEPTIONS = {\n  \"gov\": ['wa', USA_STATES, 'doc']\n  \"mil\": USA_STATES\n  \"org\": USA_STATES\n  \"com\": [\n    #'amazon',\n    'americanexpress', 'okta', 'zendesk', 'fogbugz', 'myshopify',\n    'slack', 'asus']\n  \"edu\": \"mit\"\n  #\"net\": USA_STATES\n}\n\n\ndomainExtractor = (url, exceptions) ->\n  try assert(typeof url == 'string' or url instanceof Url,\n    \"domainExtractor: url should be a string or a Url() object but not #{url}\") catch e then throw e\n  try assert(not exceptions? or typeof exceptions == 'object',\n    \"domainExtractor: exceptions should be null or an object \" +\n    \"but not #{exceptions}\") catch e then throw e\n  if exceptions?\n    exceptions = [exceptions, DOMAIN_EXCEPTIONS]\n  else\n    exceptions = DOMAIN_EXCEPTIONS\n\n  if process.env.DEBUG and process.env.DEBUG != 'false'\n    url = new Url(String(url)) if url not instanceof Url\n    if url.protocol is 'file'\n      utils = require('../common/utils.coffee')\n      domain_parts = utils.extractUrlInfoFromTestFilePath(url.path)[0]\n      if domain_parts?\n        #NOTE: '_' will be replaced with '/':   domain_path_2 -> domain/path/2\n        url = 'http://' + domain_parts.replace(/_/g, '/')\n\n  url = new Url(String(url)) if url not instanceof Url\n  parts = url.host.split('.').reverse()\n\n  checkDomains = (templates, level) ->\n    part = parts[level]\n    if templates?\n      if typeof templates == 'string'\n        if templates == part\n          parts[0..level + 1]\n        else if templates == '*'\n          parts[0..level]\n        else\n          null\n      else if Array.isArray(templates)\n        for name in templates\n          break if result = checkDomains(name, level)\n        result\n      else if typeof templates == 'object'\n        checkDomains(templates[part], level + 1 )\n      else\n        null\n    else\n      null\n\n  parts = checkDomains(exceptions, 0)\n  if parts?\n    domain = parts.reverse().join('.')\n  else\n    domain = URI(url.toString()).domain()\n  return domain\n\nmodule.exports = domainExtractor\n","###\n * utils.coffee\n *\n * Copyright (c) 2015 auxoft.com. All rights reserved.\n###\n\nTRUNCATED_FIELDS = [\n  'account', 'userName', 'uname', 'accname', 'user', 'login', 'value',\n  'email', 'phone', 'user_name', 'username', 'user-name', 'firstname',\n  'lastname', 'firstName', 'lastName', 'first_name', 'first-name', 'last_name'\n  'last-name', 'fullName', 'fullname', 'full_name', 'full-name'\n]\nOBFUSCATED_FIELDS = ['password', 'pass', 'passwd', 'psw', 'pwd', 'secret']\n\n\nHTML_ELEMENT_BASE_PROPERTIES = [\n  'tagName', 'type', 'className', 'id', 'name', 'title', 'placeholder', 'step',\n  'hidden', 'value', 'align', 'alt', 'href', 'src', 'checked', 'width', 'size',\n  'defaultChecked', 'defaultValue', 'disabled', 'readOnly', 'maxLength',\n  'length', 'required', 'pattern', 'min', 'list', 'formMethod'\n]\n\nsafeApply = (fn, args) ->\n  try\n    result = fn.apply(null, args)\n  catch error\n    result = \"[Dumper error:\\n#{error.stack ? error}]\"\n  return result\n\ntoArray = (arr) -> Array::slice.call(arr)\n\nisFunction = (obj) -> obj? and typeof(obj) is 'function'\n\nisString = (obj) -> obj? and (typeof(obj) is 'string' || obj instanceof String)\n\nisNumber = (obj) -> obj? and (typeof(obj) is 'number' || obj instanceof Number)\n\nisBoolean = (obj) -> obj? and (\n  typeof(obj) is 'boolean' || obj instanceof Boolean\n)\n\nisObject = (obj) ->\n  obj? and not (\n    isFunction(obj) || isString(obj) || isNumber(obj) || isBoolean(obj)\n  )\n\n#TODO: prettyPrint mode\n#TODO: print properties (see Object.getOwnPropertyNames())\n###\n# Return simply string representation of an object or an array\n#\n# @param {any Object} obj - object to dump\n# @param {Integer} [deep_level = 10] - level of sub-objects to dump\n# @param {Boolean} [all_props = false] - dump all properties, e.g. Functions\n# @param {Boolean} [log_mode = false] - dump obj as arguments of console.log\n# @param {Array[strings]} [obfuscated_fields = OBFUSCATED_FIELDS] - array of\n#   field names, values of which should be replaced with '****'\n# @param {Array[strings]} [truncated_fields = TRUNCATED_FIELDS] - array of\n#   field names, values of which should be truncated. Only first and last\n#   characters of the values will be shown. Other characters will be replaced\n#   with the '**' string\n#\n# #example\n#   dump([10, \"show\", {password: [\"value\"]}]) returns:\n#   - '[10, \"show\", {password: [\"****\"]}]   for log_mode = false, and\n#   - '10 show {password: [\"****\"]}'        for log_mode = true\n#   - '[10, \"show\", {password: [\"value\"]}]' for obfuscated_fields = null\n###\ndumper = (\n  obj,\n  deep_level = 10,   # default - 10\n  all_props,         # default - false\n  log_mode,          # default - false\n  obfuscated_fields, # default - OBFUSCATED_FIELDS\n  truncated_fields   # default - TRUNCATED_FIELDS\n) ->\n  #console.group '>> dumper'\n  #console.log '   ( obj =', obj\n  #console.log '     deep_level =', deep_level\n  #console.log '     all_props =', all_props\n  #console.log '     log_mode=', log_mode\n  #console.log '     obfuscated_fields=', obfuscated_fields\n  #console.log '     truncated_fields=', truncated_fields\n  #console.log '   )'\n\n  # deep_level: any non number value means Infinity\n  deep_level = Infinity if not isNumber deep_level\n\n  # any non boolean value converted to boolean (default value is 'false'):\n  all_props = Boolean all_props # true: print all properties of object\n  # false: don't print hidden properties (started\n  # with '_' (underscore))\n  log_mode = Boolean log_mode  # in log_mode obj is an argument list\n  # string must be printed without ''\n  # and list item's separator is ' ' instead of ','\n\n  # initialize array of circular references\n  circular = []\n  obj = toArray(obj) if toString.call(obj) == '[object Arguments]'\n  if log_mode\n    obj = [obj] if not Array.isArray(obj)\n    str_delim = ''\n    list_delim = ''\n    list_sep = ''\n  else\n    str_delim = \"'\"\n    list_delim = '[]'\n    list_sep = ','\n\n  _key = (key) ->\n    if key.match /(^\\d|['\",:;+\\-.*\\/\\[\\](){}\\s\\\\])/\n      key = \"'#{key.replace /(['\\\\])/g, \"\\\\$1\"}'\"\n    return key\n\n\n  if (\n    obfuscated_fields == undefined or (\n      obfuscated_fields? and\n      not Array.isArray(obfuscated_fields)\n    )\n  )\n    # default values:\n    obfuscated_fields = OBFUSCATED_FIELDS\n\n  if obfuscated_fields? and obfuscated_fields.length > 0\n    obfuscated_fields_re = new RegExp(\n      \"(?:#{obfuscated_fields.map( (i) -> '' + i ).join('|')})\", 'i'\n    )\n  else\n    obfuscated_fields_re = null\n\n  #console.log 'obfuscated_fields_re =\", obfuscated_fields_re\n\n  if (\n    truncated_fields == undefined or (\n      truncated_fields? and\n      not Array.isArray(truncated_fields)\n    )\n  )\n    # default values:\n    truncated_fields = TRUNCATED_FIELDS\n\n  if truncated_fields? and truncated_fields.length > 0\n    truncated_fields_re = \\\n      new RegExp(\"(?:#{truncated_fields.map( (i) -> '' + i ).join('|')})\", 'i')\n  else\n    truncated_fields_re = null\n  #console.log 'truncated_fields_re =', truncated_fields_re\n\n  # replace string with '****' if key is in ogfuscated_fields list\n  # replace string with '0..n' (e.g. 'abcd' -> 'a..d')\n  # if key is in truncated_fields list\n  _obfuscate_field_value = (key, value) ->\n    #console.group '>> dumper._obfuscate_field_value'\n\n    _trunc = (value) ->\n      value[..0] + '**' + (\n        if value.length > 3 then value[-1..] else ''\n      )\n\n    if obfuscated_fields_re? and key?\n      if key.match obfuscated_fields_re\n        #console.log \"Obfuscate value of field '#{key}'\"\n        if Array.isArray(value)\n          return value.map () -> '****'\n        else\n          return '****'\n      else if truncated_fields? and key.match truncated_fields_re\n        #console.log \"Truncate value of field '#{key}'\"\n        if Array.isArray(value)\n          value = value.map (i) -> _trunc i\n        else\n          value = _trunc value\n    #console.groupEnd '<< dumper._obfuscate_field_value'\n    return value\n\n  _dumper = (\n    obj, prev, cur_deep_level, str_delim, list_delim, list_sep, parent_keyname\n  ) ->\n    #console.group \">> dumper._dumper\"\n    #console.log   \"   ( obj =\", obj\n    #console.log   \"     prev =\", prev\n    #console.log   \"     cur_deep_level =\", cur_deep_level\n    #console.log   \"     str_delim =', str_delim\n    #console.log   \"     list_delim =\", list_delim\n    #console.log   \"     list_sep =\", list_sep\n    #console.log   \"   )\"\n    if cur_deep_level < deep_level and isObject obj\n      if obj in circular\n        obj = \"[Circular]\"\n      else\n        circular.push obj\n        ss = ''\n        for i, o of obj\n          continue if !all_props and i[0] == '_' # it isn't a private property\n          # (property with name started with '_')\n          continue if !all_props and HTMLElement? \\\n          and obj instanceof HTMLElement \\\n          and ( i not in HTML_ELEMENT_BASE_PROPERTIES or not o? )\n\n          if isObject(o)\n            p_keyname = \\\n              if Array.isArray(o) and not Array.isArray(obj) then i else null\n            s = safeApply _dumper,\n              [o, obj, cur_deep_level + 1, \"'\", '[]', ',', p_keyname]\n          else\n            if isString(o)\n              s = str_delim +\n                  _obfuscate_field_value(parent_keyname || i, o) +\n                  str_delim\n            else\n              continue if isFunction(o)\n              s =  String(o)\n\n          s = \"#{_key i}: #{s}\" if not Array.isArray(obj)\n\n          ss += \"#{list_sep} \" if ss\n          ss += String(s)\n\n        if Array.isArray obj\n          ss = \"#{list_delim[..0]}#{ss}#{list_delim[-1..]}\"\n        else\n          if ss or toString.call(obj) == '[object Object]'\n            # all user-defined classes represented as {..}\n            ss = \"{#{ss}}\"\n          else\n            ss = String obj\n        obj = ss\n\n    else if isString obj\n      obj = str_delim +\n          _obfuscate_field_value(parent_keyname, obj) +\n          str_delim\n    else if Array.isArray obj\n      obj = \"[Array]\"\n    else if not all_props and isFunction obj\n      if obj.displayName\n        obj = \"[Function #{obj.displayName}]\"\n      else if obj.name\n        obj = \"[Function #{obj.name}]\"\n      else\n        obj = \"[Function Anonymous]\"\n    else\n      obj = String obj\n\n    #console.log \"obj =\", obj\n    #console.groupEnd \"<< dumper._dumper\"\n    return obj\n\n  obj = safeApply _dumper, [obj, null, 0, str_delim, list_delim, list_sep]\n  #console.log \"obj =\", obj\n  #console.groupEnd '<< dumper'\n  return  obj\n\nmodule.exports = dumper\n","###\n * frame-utils.coffee\n *\n * Copyright (c) 2016 auxoft.com. All rights reserved.\n###\n\n###!\n# return current window frame path of template n:n:n,\n# where n is an index of frame for current level. For example,\n#  '1:2:3' means frame rootWindow.frames[1].frames[2].frames[3]\n# @return {String} - frame-path of current window ('' for root window)\n###\ngetFramePath = (child_frame_window) ->\n  if child_frame_window?\n    f_idx = ':' + Array.from(window.frames).indexOf(child_frame_window)\n  else\n    f_idx = ''\n\n  frame_path = []\n  _get_frame_id = (win) ->\n    parent = win.parent\n    return if win == parent\n    frame_idx = '?'\n    for frame, idx in parent.frames\n      if frame == win\n        frame_idx = idx\n        break\n    frame_path.unshift frame_idx\n    _get_frame_id parent\n  _get_frame_id window\n\n  return frame_path.join(':') + f_idx\n\n\n###!\n# Return current window frame's unique id. This value is calculated only\n# once and stored in window.axt_fid property.\n# `document.location` in the result id is used as a salt. The function\n# returns string with numbers extracted from getFramePath() and a xor\n# of the frame path and document.location. Root window always has\n# frameId == '0'\n#\n# @return {String} - frame id of current content\n###\ngetFrameId = () ->\n  if window.axt_fid?\n    window.axt_fid\n  else\n    frame_path = getFramePath().split(':').join('')\n    if frame_path\n      frameId = frame_path + new Buffer(frame_path + document.location).reduce(\n        ((r, b) -> r ^ b)\n      , 0\n      )\n    else\n      frameId = '0'\n    window.axt_fid = frameId\n\n###!\n# return \"unique\" short sessionId\n###\n#getSessionId = (sid) -> \"#{sid}-#{getFrameId()}\"\n\nmodule.exports =\n  getFramePath:       getFramePath\n  getFrameId:         getFrameId\n  #getSessionId:       getSessionId\n","\ndumper = require(\"./dumper.coffee\")\nUuid = require('uuid-lib')\ncontext = global.axt_context\n\nmodule.exports = (windowObject) ->\n  l = require(\"./log.coffee\")\n\n  #console.warn 'GA: context=', context\n\n  ga = () ->\n    #debug(1) [ga.dump]: GA(#{dumper(arguments)[1...-1]})\n\n  # show error and send it to google analytics\n  # print and send to ga information about the error\n  # @parameters:\n  #  @param error  [Object]      - Error object\n  #  @param msg    [string]      - title message\n  #  @param fatal  [boolean]     - true - error is fatal\n  #  @param level2 [boolean]     - true - print lineNo and filename for 2nd\n  #                                upper caller instead of parent caller\n  sendException = (error, msg, fatal, level2) ->\n    #console.error \"!!! error=\", error, \"msg=\", msg, \"fatal=\", fatal,\n    #  \"level2=\", level2\n    err_str = msg ? ''\n    if level2\n      if err_str\n        l.e.apply(l, l.r(context, 2, \"error\", \"\", err_str))\n        null\n      l.e.apply(l, l.r(context, 2, \"error\", \"\", error.stack ? error))\n    else\n      if err_str\n        l.e.apply(l, l.r(context, 1, \"error\", \"\", err_str))\n        null\n      l.e.apply(l, l.r(context, 1, \"error\", \"\", error.stack ? error))\n\n    ga 'send', 'exception',\n      exDescription: err_str + (if err_str then '\\n' else '') + \\\n                       error.stack ? error\n      exFatal: !!fatal\n\n  ga.initGoogleAnalytics = () ->\n    l.l.apply(l, l.r(context, 1, \"info\", \"\", \"GA is DISABLED: initGoogleAnalytics: ### empty ###\"))\n    #debug!(1) [ga.dump]: GA.initGoogleAnalytics(#{dumper(arguments)[1...-1]})\n\n  # enable and disable google analytics\n  # parameter:\n  #   new_state Boolean  true - enable gathering of analytics; false - disable\n  setEnabled = (ga_id, new_state) ->\n    if global.window?\n      old_state = not global.window[\"ga-disable-#{ga_id}\"]\n      if new_state != old_state\n        if new_state\n          l.l.apply(l, l.r(context, 1, \"info\", \"ga-banner\", \"\"\"---=== ENABLE ANALYTICS ===---\"\"\"))\n          null\n        else\n          l.l.apply(l, l.r(context, 1, \"info\", \"ga-banner\", \"\"\"===### DISABLE ANALYTICS ###===\"\"\"))\n          null\n        global.window[\"ga-disable-#{ga_id}\"] = not Boolean(new_state)\n    else\n      l.e.apply(l, l.r(context, 0, \"error\", \"\", \"\"\"global.window is not defined! DISABLE ANALYTICS\"\"\"))\n\n  ga.sendException = sendException\n  ga.setEnabled = setEnabled\n\n  try\n    if process.env.DEBUG\n      null\n      #console.log(\"ENABLE_DEBUG_HERE\")\n    else\n      if process.env.DISABLE_GA\n        null\n        #console.log(\"DISABLE_GA_HERE\")\n      else\n        #console.log(\"ENABLE_GA_HERE\")\n        ga_name = undefined\n        _window = windowObject || global.window\n\n        if _window\n          if typeof _window.GoogleAnalyticsObject == 'string'\n            ga_name = _window.GoogleAnalyticsObject.trim()\n\n          if not ga_name\n            ga_name = _window.GoogleAnalyticsObject = '$$axt_ga_obj'\n\n          if not _window[ga_name]\n            # analytics.js code here:\n            # BEGIN\n            require \"../thirdparty/analytics.js\"\n            #require \"../thirdparty/analytics_debug.js\"\n            # END\n\n          _ga = _window[ga_name]\n          if _ga?\n            ga = () ->\n              #debug(1) [ga.dump]: GA(#{dumper(arguments)[1...-1]})\n              _ga.apply null, arguments\n\n          if !ga.sendException\n            ga.sendException = sendException\n\n          if !ga.setEnabled\n            ga.setEnabled = setEnabled\n\n          if !ga.initGoogleAnalytics\n            ga.initGoogleAnalytics = (config) ->\n              l.l.apply(l, l.r(context, 1, \"info\", \"\", \"********* initGoogleAnalytics *********\"))\n              #debug(1) [ga.dump]: \\\n              #  GA.initGoogleAnalytics(#{dumper(arguments)[1...-1]})\n\n              ga.setEnabled(config.axt_ga_id, config.axt_enable_ga)\n\n              # NOTE! call this function after config is read from storage\n              if config.axt_ga_debug\n                l.l.apply(l, l.r(context, 0, \"info\", \"\", \"** GoogleAnalytics tracking is ENABLED **\"))\n                _window.ga_debug = {trace: true}\n\n              if not config.axt_client_id?\n                l.e.apply(l, l.r(context, 0, \"error\", \"\", \"ERROR: config is wrong!\", config))\n                null\n\n              ga 'create', config.axt_ga_id,\n                clientId:     config.axt_client_id || Uuid.EMPTY\n                storage:      'none'\n                cookieDomain: 'none'\n\n              ga 'set',\n                dataSource: 'app'\n                transport:  'beacon'\n                appName:    config.axt_app_name\n                appId:      config.axt_app_id\n                appVersion: config.axt_app_version\n                checkProtocolTask: null # Overrides the function that\n                                        # checks for protocol name\n              #TODO: add registered user (UUID of different phone owners\n              #      connected to this extension: ga('set', \"userID', ... ))\n  catch e\n    console.error(\"GA INITIALIZATION ERROR:\\n\", e.stack ? e)\n  finally\n    return ga\n\n","###\n # log.coffee\n #   simple logger for KeyReel extension\n #\n # used:\n #\n #   #<log-command> [tags] value or string expression\n #   or\n #   #<log-command> [tags]: string expression without quates\n #\n #   Log commands and their log equivalents:\n #   #info-begin 'method_name'         >>> l.gb('method_name')\n #   #info-begin: method name          >>> l.gb(\"\"\"method name\"\"\")\n #   #debug-begin a                    >>> l.gb(a)\n #   #verbose-begin a                  >>> l.gb(a)\n #   #info-end a                       >>> l.ge(a)\n #   #debug-end a                      >>> l.ge(a)\n #   #verbose-end a                    >>> l.ge(a)\n #\n #   #info 'hello', a, b               >>> l.l('hello', a, b)\n #   #debug 'hello', a, b              >>> l.i('hello', a, b)\n #   #verbose 'hello', a, b            >>> l.d('hello', a, b)\n #\n #   #info-val a                       >>> l.l(\"\"\"a\"\"\", a)\n #   #debug-val a                      >>> l.i(\"\"\"a\"\"\", a)\n #   #verbose-val a                    >>> l.d(\"\"\"a\"\"\", a)\n #   #warn 'hello', a, b               >>> l.w('hello', a, b)\n #   #error 'hello', a, b              >>> l.e('hello', a, b)\n #\n #   #info-time-begin    'method_name' >>> l.ts('method_name')\n #   #info-time-end      'method_name' >>> l.te('method_name')\n #   #debug-time-begin   'method_name' >>> l.ts('method_name')\n #   #debug-time-end     'method_name' >>> l.te('method_name')\n #   #verbose-time-begin 'method_name' >>> l.ts('method_name')\n #   #verbose-time-end   'method_name' >>> l.te('method_name')\n #\n #   tags:\n #     <log> [<tag>|<tag>|...] <value>\n #     example: #info [core|thrift] \"hello\"\n #\n #\n #   #assert obj.should.to.exsit  >>> try obj.should.to.exsit\n #                                    catch e then throw e\n #   #alert obj.should.to.exsit   >>> try obj.should.to.exsit catch e then\n #                                      (if exports? then throw e else\n #                                        l.alert(l.methodName(this,\n #                                                             arguments.callee,\n #                                                             null),\n #                                                e))\n #\n #   #assert expect obj .to.exsit >>> try expect(obj, 'obj').to.exsit\n #                                    catch e then throw e\n #   #alert expect obj .to.exsit  >>> try expect(obj, 'obj').to.exsit\n #                                    catch e then\n #                                      (if exports? then throw e else\n #                                        l.alert(l.methodName(this,\n #                                                             arguments.callee,\n #                                                             null)\n #                                                e))\n #\n # configure:\n #   debug.json is needed to be created in /etc directory\n #   --------------------------------------------------\n #   {\n #     \"logging\": {\n #       \"level\": [ # log level:\n #                  # \"error\"/\"warn\"/\"info\"/\"debug\"/\"verbose\"\n #\n #         <level1>,  # minus or sharp before level's name disable level,\n #         <level2>,  # otherwise module's enabled. E.g.: '-warn', 'info'\n #         <-level3>, # disabled module\n #         <#level4>, # disabled module (as level3 is)\n #         ...\n #       ],\n #       \"trace\": [ # kind of information to show:\n #                  # \"assert\"/\"code\"/\"msg\"/\"val\"/\"scope\"/\"time\"\n #         <trace1>,   # code  uncomments #DEBUG sections\n #         <-trace2>,  # msg   uncomments #info/debug/verbose sections\n #         <#trace3>,  # val   uncomments #info_val/debug_val/verbose_val sects\n #         <trace4>,   # scope  uncomments #*_begin/*_end sections\n #                     # time   uncomments #*_time_begin/*_time_end sections\n #                     # assert uncomments #assert and #alert sections\n #       ],\n #       \"tags\": [              # filter tags. If list empty then filter is\n #         \"tag1\", # OR tag2    # disabled. You can have as many tags as you\n #         \"tag2\", # OR (tag3   # want. Levels 'error','warn','info' will be\n #                 #  AND tag4) # showed whether they have tags from \"tags\"\n #         [\"tag3\",\"tag4\"] # .. # section or not. But they can be disabled\n #         ...                  # using \"-tag\" expression.\n #                              # levels 'debug' and 'verbose' are only showed\n #                              # when at least one of their tags is in \"tags\"\n #                              # section tags can be joined in a lists to\n #                              # create complicated expressions. See tests\n #                              # of utils/isInList() for examples\n #       ],\n #       \"files\": [   # filter files using simple re expressions:\n #         <file>,    # * - any characters (0 or more) except of '/'\n #         ...        # ? - any one character except of '/'\n #                    # ** - many path levels.\n #                    # minus as a first character disable file\n #     }              # sharp as a first character comment file out\n #   }\n  example:\n{\n  \"logging\": {\n    \"level\": [ \"error\", \"warn\", \"info\", \"debug\", \"verbose\" ],\n    \"trace\": [ \"assert\", \"code\", \"msg\", \"val\", \"scope\", \"-time\" ],\n    \"tags\": [\n      \"-dumper*\",\n      \"-isInList*\",\n      \"-util\",\n      \"-evalCode*\",\n      \"core\",\n      \"#prepParserFun\",\n      \"#ApplierManager*\",\n      \"chrome\",\n      \"safari\",\n      \"#callback\"\n    ],\n    \"files\": [ ]\n  }\n}\n #\n #\n###\n\nclone = require('../thirdparty/clone')\ndumper = require('./dumper.coffee')\n\nrlog = () ->\n  rlog = require('./rlog.coffee')\n  rlog.apply(null, arguments)\n\ndeeplevel = 5\n\np = console\n\np.l = p.log\np.w = p.warn\np.i = p.info\np.a = p.assert\np.e = p.error\np.ts = p.time_begin = p.time\np.te = p.time_end = p.timeEnd\np.r = rlog\np.context = '?' # undefined - context suffix of remoteLog\n\n#HACK for node.js:\nif p.debug?\n  p.d = p.debug\nelse\n  p.d = p.debug = p.info\n\nif p.group?\n  p.gs = p.begin = p.group\nelse\n  #p.gs = p.begin = p.group = p.info\n  p.gs = p.begin = p.group = () ->\n    p.info.apply console, ['>>>'].concat(Array.prototype.slice.call(arguments))\n\nif p.groupEnd?\n  p.ge = p.end = p.groupEnd\nelse\n  #p.ge = p.end = p.groupEnd = p.info\n  p.ge = p.end = p.groupEnd = () ->\n    p.info.apply console, ['<<<'].concat(Array.prototype.slice.call(arguments))\n\n# coffeelint: disable=missing_fat_arrows\np.dump = (params...) ->\n  for param in params\n    if typeof param in ['object', 'function']\n      return clone(param, true, deeplevel)\n    else\n      return param\n# coffeelint: enable=missing_fat_arrows\n\np.c = (params...) -> dumper(params, 3, false, true)\n\np.alert = (m, e) ->\n  alert(\"#{if m? then m + ':\\n\\n' else ''}#{e.message}\\n\\n\\n#{e.stack ? e}\")\n\nmodule.exports = p\n\n","#-MD5()-------------------------------------------------------------------------\n# License is unknown (should we ask the author ?)\n# http://www.myersdaily.org/joseph/javascript/md5-text.html\n\nmd5cycle = (x, k) ->\n  a = x[0]\n  b = x[1]\n  c = x[2]\n  d = x[3]\n\n  a = ff(a, b, c, d, k[0], 7, -680876936)\n  d = ff(d, a, b, c, k[1], 12, -389564586)\n  c = ff(c, d, a, b, k[2], 17,  606105819)\n  b = ff(b, c, d, a, k[3], 22, -1044525330)\n  a = ff(a, b, c, d, k[4], 7, -176418897)\n  d = ff(d, a, b, c, k[5], 12,  1200080426)\n  c = ff(c, d, a, b, k[6], 17, -1473231341)\n  b = ff(b, c, d, a, k[7], 22, -45705983)\n  a = ff(a, b, c, d, k[8], 7,  1770035416)\n  d = ff(d, a, b, c, k[9], 12, -1958414417)\n  c = ff(c, d, a, b, k[10], 17, -42063)\n  b = ff(b, c, d, a, k[11], 22, -1990404162)\n  a = ff(a, b, c, d, k[12], 7,  1804603682)\n  d = ff(d, a, b, c, k[13], 12, -40341101)\n  c = ff(c, d, a, b, k[14], 17, -1502002290)\n  b = ff(b, c, d, a, k[15], 22,  1236535329)\n\n  a = gg(a, b, c, d, k[1], 5, -165796510)\n  d = gg(d, a, b, c, k[6], 9, -1069501632)\n  c = gg(c, d, a, b, k[11], 14,  643717713)\n  b = gg(b, c, d, a, k[0], 20, -373897302)\n  a = gg(a, b, c, d, k[5], 5, -701558691)\n  d = gg(d, a, b, c, k[10], 9,  38016083)\n  c = gg(c, d, a, b, k[15], 14, -660478335)\n  b = gg(b, c, d, a, k[4], 20, -405537848)\n  a = gg(a, b, c, d, k[9], 5,  568446438)\n  d = gg(d, a, b, c, k[14], 9, -1019803690)\n  c = gg(c, d, a, b, k[3], 14, -187363961)\n  b = gg(b, c, d, a, k[8], 20,  1163531501)\n  a = gg(a, b, c, d, k[13], 5, -1444681467)\n  d = gg(d, a, b, c, k[2], 9, -51403784)\n  c = gg(c, d, a, b, k[7], 14,  1735328473)\n  b = gg(b, c, d, a, k[12], 20, -1926607734)\n\n  a = hh(a, b, c, d, k[5], 4, -378558)\n  d = hh(d, a, b, c, k[8], 11, -2022574463)\n  c = hh(c, d, a, b, k[11], 16,  1839030562)\n  b = hh(b, c, d, a, k[14], 23, -35309556)\n  a = hh(a, b, c, d, k[1], 4, -1530992060)\n  d = hh(d, a, b, c, k[4], 11,  1272893353)\n  c = hh(c, d, a, b, k[7], 16, -155497632)\n  b = hh(b, c, d, a, k[10], 23, -1094730640)\n  a = hh(a, b, c, d, k[13], 4,  681279174)\n  d = hh(d, a, b, c, k[0], 11, -358537222)\n  c = hh(c, d, a, b, k[3], 16, -722521979)\n  b = hh(b, c, d, a, k[6], 23,  76029189)\n  a = hh(a, b, c, d, k[9], 4, -640364487)\n  d = hh(d, a, b, c, k[12], 11, -421815835)\n  c = hh(c, d, a, b, k[15], 16,  530742520)\n  b = hh(b, c, d, a, k[2], 23, -995338651)\n\n  a = ii(a, b, c, d, k[0], 6, -198630844)\n  d = ii(d, a, b, c, k[7], 10,  1126891415)\n  c = ii(c, d, a, b, k[14], 15, -1416354905)\n  b = ii(b, c, d, a, k[5], 21, -57434055)\n  a = ii(a, b, c, d, k[12], 6,  1700485571)\n  d = ii(d, a, b, c, k[3], 10, -1894986606)\n  c = ii(c, d, a, b, k[10], 15, -1051523)\n  b = ii(b, c, d, a, k[1], 21, -2054922799)\n  a = ii(a, b, c, d, k[8], 6,  1873313359)\n  d = ii(d, a, b, c, k[15], 10, -30611744)\n  c = ii(c, d, a, b, k[6], 15, -1560198380)\n  b = ii(b, c, d, a, k[13], 21,  1309151649)\n  a = ii(a, b, c, d, k[4], 6, -145523070)\n  d = ii(d, a, b, c, k[11], 10, -1120210379)\n  c = ii(c, d, a, b, k[2], 15,  718787259)\n  b = ii(b, c, d, a, k[9], 21, -343485551)\n\n  x[0] = add32(a, x[0])\n  x[1] = add32(b, x[1])\n  x[2] = add32(c, x[2])\n  x[3] = add32(d, x[3])\n\nadd32 = (a, b) -> (a + b) & 0xFFFFFFFF\n\ncmn = (q, a, b, x, s, t) ->\n  a = add32(add32(a, q), add32(x, t))\n  add32((a << s) | (a >>> (32 - s)), b)\n\nff = (a, b, c, d, x, s, t) -> cmn((b & c) | ((~b) & d), a, b, x, s, t)\ngg = (a, b, c, d, x, s, t) -> cmn((b & d) | (c & (~d)), a, b, x, s, t)\nhh = (a, b, c, d, x, s, t) -> cmn(b ^ c ^ d, a, b, x, s, t)\nii = (a, b, c, d, x, s, t) -> cmn(c ^ (b | (~d)), a, b, x, s, t)\n\nmd51 = (s) ->\n  n = s.length\n  state = [1732584193, -271733879, -1732584194, 271733878]\n  for i in [64..s.length] by 64\n    md5cycle(state, md5blk(s.substring(i - 64, i)))\n\n  s = s.substring(i - 64)\n  tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0]\n  for i in [0...s.length]\n    tail[i>>2] |= s.charCodeAt(i) << ((i % 4) << 3)\n\n  tail[i>>2] |= 0x80 << ((i % 4) << 3)\n\n  if i > 55\n    md5cycle(state, tail)\n    for i in [0...16]\n      tail[i] = 0\n\n  tail[14] = n * 8\n  md5cycle(state, tail)\n  return state\n\n###\n/* there needs to be support for Unicode here,\n * unless we pretend that we can redefine the MD-5\n * algorithm for multi-byte characters (perhaps\n * by adding every four 16-bit characters and\n * shortening the sum to 32 bits). Otherwise\n * I suggest performing MD-5 as if every character\n * was two bytes--e.g., 0040 0025 = @%--but then\n * how will an ordinary MD-5 sum be matched?\n * There is no way to standardize text to something\n * like UTF-8 before transformation; speed cost is\n * utterly prohibitive. The JavaScript standard\n * itself needs to look at this: it should start\n * providing access to strings as preformed UTF-8\n * 8-bit unsigned value arrays.\n###\nmd5blk = (s) ->\n  md5blks = []\n  for i in [0...64] by 4\n    md5blks[i>>2] = s.charCodeAt(i) +\n      (s.charCodeAt(i + 1) << 8) +\n      (s.charCodeAt(i + 2) << 16) +\n      (s.charCodeAt(i + 3) << 24)\n  return md5blks\n\nhex_chr = '0123456789abcdef'.split('')\n\nrhex = (n) ->\n  s = ''\n  j = 0\n  for j in [0...4]\n    s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F]\n  return s\n\nhex = (x) ->\n  for i in [0...x.length]\n    x[i] = rhex(x[i])\n  return x.join('')\n\nmd5 = (s) -> hex(md51(s))\n\n###\n this function is much faster,\n so if possible we use it. Some IEs\n are the only ones I know of that\n need the idiotic second function,\n generated by an if clause.\n###\n\n#if (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {\n#function add32(x, y) {\n#var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n#msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n#return (msw << 16) | (lsw & 0xFFFF);\n#}\n#}\n#\nmodule.exports =  md5\n\n","# remote log\n#MODULE-TAGS: [rlog]\n\nl = require('../common/log.coffee'); context = global.axt_context\n\nDEEP_LEVEL = 4\nMAX_MESSAGE_LENGTH = 247\n\nsendLog = require('./send-log.coffee')\ndumper = require('./dumper.coffee')\nsource_re = /([\\w\\d\\$_.]*?)[@\\(\\s:-]*\\b([\\w-]*:\\/\\/.*):(\\d*):(\\d*)[\\)]?$/\nfilename_re = /\\/([^\\/]+)$/\n\nOBFUSCATED_FIELDS = [ 'password', 'pass', 'passwd', 'psw', 'pwd', 'secret' ]\nTRUNCATED_FIELDS  = [ 'account', 'username', 'uname', 'accname', 'user',\n                      'login', 'value', 'primary' ]\n\n# get {source,line,column} for callee (level==1) or for one of its parents\n# (level>1)\ngetSource = (level) ->\n  stack = new Error().stack\n  #verbose [getSource] 'stack=', stack\n  level = (level || 1) + 1\n  #verbose [getSource] 'level=', level\n\n  match = source_re.exec(stack.split('\\n')[level])\n  #verbose [getSource] 'match=', match\n  if (match)\n    funcname =  match[1]\n    source   =  match[2]\n    line     = +match[3] # + for type casting to Number type\n    column   = +match[4] # -//-\n    #verbose [getSource] 'funcname=', funcname, 'source=', source\n    #verbose [getSource] 'line=', line, 'column=', column\n    return {funcname: funcname, source: source, line: line, column: column}\n\n  return {funcname: '', source: '', line: -1, column: -1}\n\n# send args to remote server and return string with all args split by ' '\n# -----------\n# parameters:\n# -----------\n#  @param slevel {positive integer|null} - stack level (default value is 0) -\n#                                           offset in stack where to obtain\n#                                           function name and line to show\n#                                           together with log message\n#  @param type {string} - type of log command (see log-preprocessor.js for\n#                         full list)\n#  @param tags {string} - tags in the format \"tag1|tag2|...\" or an empty string\n#  @param args [any...} - all these parameters will be concatenated together\n#                         (separated by space) and saved as a log message\n#                         objects and arrays will be expanded (e.g. json)\nlog = (context, slevel, type, tags, args...) ->\n  #verbose 'rlog', arguments\n  try\n    type ?= ''\n    if type.endsWith(\"-val\") or type.endsWith(\"-param\")\n      # val|param-logs send argument's names as a first args parameter\n      # use it to show all other parameters as a JSON without [] around it\n      # Example:\n      #   a='string'; b=1234\n      #   #info-val a, b\n      # log message will be:\n      #   a, b = 'string', 1234\n      # that is a string value is in quatations and a comma between values\n      message = args[0] + ' ' + dumper(\n        args[1..],\n        DEEP_LEVEL,\n        false,\n        false,\n        OBFUSCATED_FIELDS,\n        TRUNCATED_FIELDS\n      )[1...-1]\n    else\n      message = dumper(\n        args,\n        DEEP_LEVEL,\n        false,\n        true,\n        OBFUSCATED_FIELDS,\n        TRUNCATED_FIELDS\n      )\n\n    if message.length > MAX_MESSAGE_LENGTH\n      message = message[...MAX_MESSAGE_LENGTH] + '...'\n\n    if process.env.DEBUG\n      pos = getSource(3 + (+slevel || 0))\n      line = pos.line\n      filename = filename_re.exec(pos.source)?[1] || ''\n      #verbose \"!!!> type=\", type, \"tags=\", tags, \"filename=\", filename\n      #verbose \"line=\", line, \"message=\", message\n      message = message + \" (#{filename}:#{line})\"\n    else\n      line = 0\n      filename = ''\n\n    sendLog context, type, tags, filename, line, '', message\n  catch e\n    #error \"Error in log: ##{type} [#{tags}]: #{args} \" + \\\n    #  \"(#{filename}:#{line})\\n#{e.stack ? e}\"\n  finally\n    args.unshift context.axt_fid + ':'\n    if type.endsWith('begin') or type.endsWith('end')\n      args = [dumper(args,3,false,true)]\n    return args\n\nmodule.exports = log\n","###\n * utils.coffee\n *\n * Copyright (c) 2015 auxoft.com. All rights reserved.\n###\n\n##--#MODULE-TAGS: [utils]\n\nUrl = require('domurl/url')\nl = require('./log.coffee'); context = global.axt_context\nURI = require('urijs')\n\ndo ({expect, assert} = chai = require \"chai\").should\n\nPASSWORD_RANGE_TABLE = require('./pass-trans-table.json')\nRTL = (global.document?.dir == 'rtl')\nTEXT_TYPES = ['text', 'email', 'password', 'tel', 'url', 'search', 'number']\nPARSED_TYPES = TEXT_TYPES.concat('radio', 'checkbox')\nORIG_URL = null\n\n\n# escape RE characters (.*?, etc.) in a string we want to insert\n# into RE statement\n#\n# @param {string} str - origin string\n# @return {string} escaped string\nreEscape = (str) ->\n  str.replace /([.*+(){}?\\[\\]:])/g, \"\\\\$1\"\n\n\nsafeApply = (fn, ctx, args, error_message = '') ->\n  #assert expect fn .to.be.a 'function'\n  try\n    result = fn.apply(ctx, args)\n  catch error\n    ga = require('./ga.coffee')()\n    ga?.sendException(error, error_message)\n    result = error\n    #debug! \"safeApply ERROR: #{error_message}:\", error.stack ? error\n  return result\n\n\n###\n  * replace to window.setTimeout\n *\n * @param  {number}     time       delay\n * @param  {Function}   callback   run method\n *\n * @return null\n###\ndelayCall = (time, callback, error_message) ->\n  #assert expect time .to.exist.to.be.a('number').and.to.be.at.least(0)\n  #assert expect callback .to.exist.and.to.be.a 'function'\n\n  #verbose-begin [delayCall] \"utils.delayCall\"\n  #verbose-param [delayCall] time\n  #verbose-param [delayCall] callback\n\n  timer_id = setTimeout ( () ->\n    safeApply(callback, undefined, undefined, error_message)\n  ), time\n\n  #verbose-val [delayCall] timer_id\n  #verbose-end [delayCall] \"utils.delayCall\"\n  return timer_id\n\n\nPATH_PARSING_RE = RegExp(\n  \"\\\\/([^ %\\\\/]+)(?:(?:\\s|%2520)\\\\(([^\\\\)]+)\\\\)([^\\\\/]*))?\" + \\\n  \"(?:\\\\.html|\\\\/index\\.html|\\\\/step-[12]\\\\.html|\\\\/step-[12]\\\\/index\\.html)$\"\n)\n\n# PATH_PARSING_RE parse these path templates:\n# \"file:///..../{domain}{_path_path} ({tags}){extrainfo}.html\n# \"file:///..../{domain}{_path_path} ({tags}){extrainfo}/index.html\n# \"file:///..../{domain}{_path_path} ({tags}){extrainfo}/step-{1|2}.html\n# \"file:///..../{domain}{_path_path} ({tags}){extrainfo}/step-{1|2}/index.html\n\n\nextractUrlInfoFromTestFilePath = (path) ->\n  parts = path.match(PATH_PARSING_RE)\n  #console.error \"URL PARTS =\", parts\n  if parts?\n    return [parts[1], parts[2], parts[3]]\n  else\n    return [undefined, undefined, undefined]\n\n\n# get actual (original) url for current page\n# for testing it's get from filename or <meta name=\"original-url\">\n# For testing environment filename should be:\n#   \"/path/domain.ext_path1_path2_path3 (additional info).stepN.html\"\n#   path from here is: path1/path2/path3\ngetActualURL = () ->\n  try\n    url = new Url(window.location.href)\n    if (\n      process.env.DEBUG and\n      process.env.DEBUG != 'false' and\n      url.protocol in ['file', 'about']\n    )\n      if not ORIG_URL?\n        ORIG_URL = global.document?.querySelector(\n          \"meta[name='original-url']\"\n        )?.getAttribute?( 'content' ) ? ''\n\n      if ORIG_URL\n        url = ORIG_URL\n      else\n        url = extractUrlInfoFromTestFilePath(url.path)[0]\n        if url?\n          url = 'http://' + url.replace(/_/g, '/')\n      url = new Url(url)\n  catch e\n    #error! \"getCurrentHost error:\", e.stack ? e\n  return url\n\n\ngetUrlWithoutParams = (surl) ->\n  try\n    return new URI(surl.toString()).query(\"\").hash(\"\").toString()\n  catch e\n    #error! \"getUrlWithoutParams error on #{surl}: #{e.stack ? e}\"\n    return ''\n\n\n# Returns a random integer between:\n# - min (included) and max (excluded) if max_inclusive is empty or false\n# - min (included) and max (included) if max_inclusive is true\n# Using Math.round() will give you a non-uniform distribution!\ngetRandomInt = (min, max, max_inclusive) ->\n  Math.floor(Math.random() * (max - min + !!max_inclusive)) + min\n\n\n###!\n# Return the common html block containing both elements.\n# NOTE: if one of the elements contains the other the function\n# returns this element. If there is no common blocks containing\n# both elements null is returned\n#\n# @param {HTMLElement} element1\n# @param {HTMLElement} element2\n# @return {HTMLElement} - common HTML element which contains\n#                         both `element1` and `element2`\n#                         or null if it's not found\n###\ngetCommonBlock = (element1, element2) ->\n  #assert (!element1 or element1 instanceof HTMLElement), \\\n  #  \"element1 (#{element1}) should be null or an HTMLElement\"\n  #assert (!element2 or element2 instanceof HTMLElement), \\\n  #  \"element2 (#{element2}) should be null or an HTMLElement\"\n\n  #verbose-begin [getCommonBlock] \"getCommonBlock\"\n  #verbose-param [getCommonBlock] element1\n  #verbose-param [getCommonBlock] element2\n  try\n    if element1? and element2?\n      if element1.contains element2\n        return element1\n      else if element2.contains(element1) or element1 == element2\n        return element2\n      else\n        parent = element1.parentElement\n        while parent? and not parent.contains(element2)\n          parent = parent.parentElement\n        return parent\n    return null\n  catch e\n    console.error e.stack ? e\n    #verbose-alt-end [getCommonBlock] \"getCommonBlock\"\n    return null\n  #verbose-end [getCommonBlock] \"getCommonBlock\"\n\n\n###\n * return `true` when `value` is an empty array or object w/o keys\n *\n *  @param  {object|array}  value - value to check\n *\n *  @return {Boolean}             - true - value is an empty array|object\n *                                - false - value is not empty\n###\nisEmptyObject = (value) ->\n  #verbose-begin [isEmptyObject] \"utils.isEmptyObject\"\n  #verbose-param [isEmptyObject] value\n\n  ret = not(\n    if value? and typeof value == 'object'\n      Object.keys(value).length > 0\n    else\n      Boolean(value)\n  )\n\n  #verbose-val [isEmptyObject] ret\n  #verbose-end [isEmptyObject] \"utils.isEmptyObject\"\n  return ret\n\n\nclass EvalCodeError extends Error\n  constructor: (message) ->\n    @name = @constructor.name\n    @message = message\n\n\n###\n * instantiate a function from `body` with a parameter named `param_name`\n *  and execute it with a\n *\n * @param  {string}              param_name - name of parameter\n * @param  {any object or null}  param      - parameter's data\n * @param  {string}              body       - js code of function\n *                                            (parameter with <param_name> will\n *                                             be defined in this function)\n * @return {any type}            returned value.\n###\nevalCode = (param_name, param_value, body) ->\n  #assert expect body .to.exist.and.to.be.a 'string'\n  #assert expect param_name .to.exist.and.to.be.a 'string'\n\n  #debug-begin [evalCode] \"evalCode\"\n  #debug-param [evalCode] param_name\n  #debug-param [evalCode] param_value\n\n  result = (new Function(param_name, body))(param_value)\n\n  #debug-val [evalCode] result\n  #debug-end [evalCode] \"evalCode\"\n  return result\n\n\n# get cached or calculated bounding rect for an element\ngetClientRect = (htmlElement, cached = true) ->\n  try\n    #assert expect htmlElement .to.be.an.instanceOf HTMLElement\n    if (\n      cached and\n      htmlElement.axt_rectStamp == document.body.axt_stamp and\n      htmlElement.axt_rect?\n    )\n      rect = htmlElement.axt_rect\n    else\n      rect = htmlElement.axt_rect = htmlElement.getBoundingClientRect()\n      htmlElement.axt_rectStamp = document.body.axt_stamp\n  catch e\n    #error!: \"getClientRect error\\n\", e.stack ? e\n    return {left: -1, right: -1, top: -1, bottom: -1, width: 0, height: 0}\n  return rect\n\n\ngetAttributesNames = (element) ->\n  #assert expect element .to.be.an.instanceOf HTMLElement\n  Array.from(element.attributes).map (a) -> a.name\n\n\n# get cached or calculated CSS style for a given html element\ngetStyle = (htmlElement, cached = true) ->\n  #assert expect htmlElement .to.be.an.instanceOf HTMLElement\n  if (\n    cached and\n    document.body.axt_stamp <= htmlElement.axt_styleStamp and\n    htmlElement.axt_style?\n  )\n    style = htmlElement.axt_style\n  else\n    style = htmlElement.axt_style = window.getComputedStyle(htmlElement)\n    htmlElement.axt_styleStamp = document.body.axt_stamp\n\n  # add support function px(name) to get number value of a css attribute\n  # coffeelint: disable=missing_fat_arrows\n  style.px = (name) -> +@[name]?.split(' ')[0]?.split('px')[0] ? 0\n  # coffeelint: enable=missing_fat_arrows\n\n  return style\n\n\n# get cached or calculated max z-index for an element or it's ancestors\n# NOTE: it depends on body.axt_stamp !\ngetZIndex = (htmlElement, cached = true) ->\n  return 0 if not htmlElement?\n  if (\n    cached and\n    document.body.axt_stamp <= htmlElement.axt_zIndexStamp and\n    htmlElement.axt_zIndex?\n  )\n    zIndex = htmlElement.axt_zIndex\n  else\n    style = getStyle(htmlElement)\n    zIndex = +style.zIndex\n    zIndex = 0 if isNaN(zIndex)\n    #verbose [getZIndex] \"zIndex: elem=\", htmlElement, \"zindex=\", zIndex\n    zIndex = htmlElement.axt_zIndex = Math.max(\n      zIndex,\n      getZIndex(htmlElement.parentElement)\n    )\n    htmlElement.axt_zIndexStamp = document.body.axt_stamp\n  return zIndex\n\n\n#\n# Author: Jason Farrell\n# Author URI: http://useallfive.com/\n#\n# Description: Checks if a DOM element is truly visible.\n# Package URL: https://github.com/UseAllFive/true-visibility\n#\nisVisibleNewTest = (element, cached = true) ->\n  ###\n  # Checks if a DOM element is visible. Takes into\n  # consideration its parents and overflow.\n  #\n  # @param (el)      the DOM element to check if is visible\n  # @param (offsp)   OffsetParent (we use it to calculate correct offset)\n  #                  this parameter should be equal el for the first call\n  # @param (absolute) true if element or one of its successors has position\n  #                   fixed or absolute\n  #\n  # These params are optional that are sent in recursively,\n  # you typically won't use these:\n  #\n  # @param (t)       Top corner position number\n  # @param (r)       Right corner position number\n  # @param (b)       Bottom corner position number\n  # @param (lft)     Left corner position number\n  # @param (w)       Element width number\n  # @param (h)       Element height number\n  ###\n  if element?.className != \"_50f6\"\n    return isVisibleNew(element, cached)\n\n  #verbose-begin! [isVisibleTest] \"isVisibleNewTest\"\n  #verbose-param! [isVisibleTest] element\n\n  _isVisibleTest = (el, offsp, absolute, t, r, b, lft, w, h) ->\n    #verbose-param! [isVisibleTest._isVisible] el\n    #verbose-param! [isVisibleTest._isVisible] t\n    #verbose-param! [isVisibleTest._isVisible] r\n    #verbose-param! [isVisibleTest._isVisible] b\n    #verbose-param! [isVisibleTest._isVisible] lft\n    #verbose-param! [isVisibleTest._isVisible] w\n    #verbose-param! [isVisibleTest._isVisible] h\n    parent = el.parentNode\n    tagname = el.tagName.toLowerCase()\n    style = getStyle(el)\n\n    if offsp == el\n      offsp = el.offsetParent\n      absolute = style['position'] in ['fixed', 'absolute']\n    isOffsetParent = (offsp == parent)\n\n    if 1 == (1 & element.compareDocumentPosition(document))\n      #verbose! [isVisibleTest._isVisible|label]: IV1: false\n      return false\n\n    ##DOESN'T WORK AS EXPECTED (because padding for absolute/relative blocks\n    # works as a block shifting and not as a padding inside a block):\n    # -- Return false if inner rectangle of our element has zero height or width\n    #if (\n    #  ( el.clientWidth - style.px('padding-left') - style.px('padding-right')\n    #  ) <= 0 or (\n    #    el.clientHeight - style.px('padding-top') - style.px('padding-bottom')\n    #  ) <= 0\n    #)\n    #  return false\n\n    element_type = (el.type ? '').toLowerCase()\n\n    #-- Return false if our element is invisible\n    if (\n      ('input' == tagname and 'hidden' == element_type) or\n      'none' == style['display']\n    )\n      #verbose! [isVisibleTest._isVisible|label]: IV2-1: false\n      return false\n\n    # buttons with opacity=0 still active if their box is not zero sized\n    if (\n      '0' == style['opacity'] and not (\n        'button' == tagname or (\n          'input' == tagname and\n            element_type in ['submit', 'image', 'button', 'radio', 'checkbox']\n        )\n      )\n    )\n      #verbose! [isVisibleTest._isVisible|label]: IV2-2: false\n      return false\n\n    if (\n      'undefined' == typeof(t) or\n      'undefined' == typeof(r) or\n      'undefined' == typeof(b) or\n      'undefined' == typeof(lft) or\n      'undefined' == typeof(w) or\n      'undefined' == typeof(h)\n    )\n      # HACK: if insert <div> into <span>, span's offset size will be 0x0\n      #       use boundingClientRect() here to better recognize the situation\n      width = el.offsetWidth\n      height = el.offsetHeight\n      if !width and !height and tagname == 'span'\n        box = el.getBoundingClientRect()\n        width = box.width\n        height = box.height\n\n      # check only inner rectangle as an element (without borders and padding)\n      t = el.offsetTop + style.px('border-top-width') + style.px('padding-top')\n      lft = el.offsetLeft + style.px('border-left-width') + \\\n        style.px('padding-left')\n      r = el.offsetLeft + width - style.px('border-right-width') + \\\n        style.px('padding-right')\n      b = el.offsetTop + height - style.px('border-bottom-width') + \\\n        style.px('padding-bottom')\n      w = r - lft\n      h = b - t\n\n      if 'hidden' == style['visibility']\n        #verbose! [isVisibleTest._isVisible|label]: IV3: visibility = 'hidden': false\n        return false\n    #verbose! [isVisibleTest._isVisible|label] \"IV4: t,lft,r,b,w,h\", t,lft,r,b,w,h\n\n    #-- Return true for document node\n    if 9 == parent.nodeType\n      #verbose! [isVisibleTest._isVisible|label]: IV5: true\n      return not (r < 0 or b < 0)\n\n    if w <= 2 or h <= 2\n      #verbose! [isVisibleTest._isVisible|label] \"IV6\"\n      return false\n\n    #-- If we have a parent, let's continue:\n    if parent\n      #-- Check if the parent can hide its children.\n      parent_style = getStyle(parent)\n      pOffsetLeft = parent.offsetLeft\n      pOffsetTop = parent.offsetTop\n      pPosition = parent_style['position']\n\n      if parent_style['clip'] == \"rect(0px 0px 0px 0px)\"\n        #-- if CSS clip's rect is 0,0,0,0 then our element is invisible\n        #verbose! [isVisibleTest._isVisible|label] \"IV7\"\n        return false\n\n      #TODO: calc visibility for non zero clip rect.\n      #NOTE: 'clip' is deprecated\n      #TODO: add support of 'clip-path' CSS element\n\n      #verbose! [isVisibleTest._isVisible|label] \"IV8: \", \\\n      #  'position =', pPosition, 'absolute =', absolute, \\\n      #  '(parent != body):', (parent != document.body)\n\n      if (\n        not absolute or (\n          absolute and pPosition in ['absolute', 'fixed', 'relative']\n        )\n      )\n        SAFARI = false  #NOTE: Safari in rtl mode\n        #      has scroll-bar on the right\n        #      but all other browsers have\n        #      it on the left\n        if el == document.body and typeof window.innerWidth == 'number'\n          pOverflowYScrolled = (\n            window.innerWidth > document.documentElement.clientWidth\n          )\n          pOverflowXScrolled = (\n            window.innerHeight > document.documentElement.clientHeight\n          )\n        else\n          pOverflowY = parent_style['overflow-y']\n          pOverflowX = parent_style['overflow-x']\n          pOverflowXScrolled = pOverflowX in ['scroll', 'auto']\n          pOverflowYScrolled = pOverflowY in ['scroll', 'auto']\n\n        #verbose! [isVisibleTest._isVisible|label] \"IV9: \", \\\n        # \"overflowYScrolled =\", pOverflowYScrolled, \\\n        # \"overflowXScrolled =\", pOverflowXScrolled, \\\n        # \"overflowY =\", pOverflowY, \\\n        # \"overflowX =\", pOverflowX\n        if pOverflowX != 'visible'\n          pBorderLeftWidth = parent_style.px('border-left-width')\n          pBorderRightWidth = parent_style.px('border-right-width')\n          if RTL\n            # NOTE: for Chrome, Safari, Opera:\n            horScroll = -(\n              parent.scrollWidth - parent.scrollLeft - parent.clientWidth\n            )\n            # NOTE: use it for Firefox:\n            # horScroll = p.scrollLeft\n          else\n            horScroll = parent.scrollLeft\n\n          if isOffsetParent\n            if RTL and not SAFARI\n              pr = parent.offsetWidth - pBorderRightWidth\n              pl = pr - parent.clientWidth\n            else\n              pl = pBorderLeftWidth\n              pr = pl + parent.clientWidth\n          else\n            if RTL and not SAFARI\n              pr = pOffsetLeft + parent.offsetWidth - pBorderRightWidth\n              pl = pr - parent.clientWidth\n            else\n              pl = pOffsetLeft + pBorderLeftWidth\n              pr = pl + parent.clientWidth\n\n          if pOverflowXScrolled\n            r = Math.max(r - horScroll, pl)\n          else\n            r = Math.min(r - horScroll, pr)\n\n          lft = Math.max(lft - horScroll, pl)\n          w = r - lft\n\n        if pOverflowY != 'visible'\n          pBorderTopWidth = parent_style.px('border-top-width')\n          vertScroll = parent.scrollTop\n\n          if isOffsetParent\n            pt = pBorderTopWidth\n            pb = pt + parent.clientHeight\n          else\n            pt = pOffsetTop + pBorderTopWidth\n            pb = pt + parent.clientHeight\n\n          if (pOverflowYScrolled)\n            b = Math.max(b - vertScroll, pt)\n          else\n            b = Math.min(b - vertScroll, pb)\n\n          t = Math.max(t - vertScroll, pt)\n          h = b - t\n\n        if (h <= 1 or w <= 1)\n          #-- Our target element is out of bounds:\n          #verbose! [isVisibleTest._isVisible|label] \"IV10\"\n          return false\n\n        if pOverflowXScrolled or pOverflowYScrolled\n          # restart _isVisible with the parent element as the element we are\n          # looking for, when our element is placed in the parent element which\n          # has scroll bars. It means that we can achieve our element even if\n          # it is not visible now, so we consider that our element is visible.\n          # Now our care is to check the parent element visibility\n\n          #verbose! [isVisibleTest._isVisible|label] \"IV11:\", \\\n          #  \"restart with parent element\", parent\n          result =  _isVisibleTest(parent, parent)\n          #verbose! [isVisibleTest._isVisible|label] \"IV12\", result\n          return result\n\n      #-- Add the offset parent's left/top coords to our element's offset:\n      if isOffsetParent\n        lft += pOffsetLeft\n        r += pOffsetLeft\n        t += pOffsetTop\n        b += pOffsetTop\n\n      #-- Let's recursively check upwards:\n      result = _isVisibleTest(parent, offsp, absolute, t, r, b, lft, w, h)\n      #verbose! [isVisibleTest._isVisible|label]: IV13: #{result}\n      return result\n\n    #verbose! [isVisibleTest._isVisible|label]: IV14: #{not (r < 0 or b < 0)}\n    return not (r < 0 or b < 0)\n\n  #verbose! \"VI-15\"\n  visible = false\n  if element?\n    if (\n      cached and\n      document.body.axt_stamp <= element.axt_vStamp and\n      element.axt_vCache?\n    )\n      visible = element.axt_vCache\n      #verbose! \"VI-16 visible=\", visible\n    else\n      visible = _isVisibleTest(element, element)\n      element.axt_vCache = visible\n      element.axt_vStamp = document.body.axt_stamp\n      #verbose! \"VI-17 visible=\", visible\n\n  #verbose! \"VI-18\"\n  #verbose-end! [isVisibleTest] \"isVisibleNewTest\"\n  return visible\n\n\n#\n# Author: Jason Farrell\n# Author URI: http://useallfive.com/\n#\n# Description: Checks if a DOM element is truly visible.\n# Package URL: https://github.com/UseAllFive/true-visibility\n#\nisVisibleNew = (element, cached = true) ->\n  ###\n  # Checks if a DOM element is visible. Takes into\n  # consideration its parents and overflow.\n  #\n  # @param (el)      the DOM element to check if is visible\n  # @param (offsp)   OffsetParent (we use it to calculate correct offset)\n  #                  this parameter should be equal el for the first call\n  # @param (absolute) true if element or one of its successors has position\n  #                   fixed or absolute\n  #\n  # These params are optional that are sent in recursively,\n  # you typically won't use these:\n  #\n  # @param (t)       Top corner position number\n  # @param (r)       Right corner position number\n  # @param (b)       Bottom corner position number\n  # @param (lft)     Left corner position number\n  # @param (w)       Element width number\n  # @param (h)       Element height number\n  ###\n  #verbose-begin [isVisible] \"isVisible\"\n  #verbose-param [isVisible] element\n  #verbose-val [isVisible] element.id\n\n  #console.error \"window.axt_frameVisibility =\", window.axt_frameVisibility\n  if window.axt_frameVisibility == false\n    return false\n\n  _isVisible = (el, offsp, absolute, t, r, b, lft, w, h) ->\n    #verbose-param [isVisible._isVisible] el\n    #verbose-param [isVisible._isVisible] offsp\n    #verbose-param [isVisible._isVisible] absolute\n    #verbose-param [isVisible._isVisible] t\n    #verbose-param [isVisible._isVisible] r\n    #verbose-param [isVisible._isVisible] b\n    #verbose-param [isVisible._isVisible] lft\n    #verbose-param [isVisible._isVisible] w\n    #verbose-param [isVisible._isVisible] h\n\n    element_type = el.type\n    if typeof(element_type) == 'string'\n      element_type = element_type.toLowerCase()\n    else\n      element_type = ''\n\n    parent = el.parentNode\n    tag_name = el.tagName.toLowerCase()\n\n    if 'input' == tag_name and 'hidden' == element_type\n      #verbose [isVisible._isVisible|label]: IV0: false\n      return false\n\n    style = getStyle(el)\n\n    if offsp == el\n      offsp = el.offsetParent\n      absolute = style['position'] in ['fixed', 'absolute']\n    isOffsetParent = (offsp == parent)\n\n    if 1 == (1 & element.compareDocumentPosition(document))\n      #verbose [isVisible._isVisible|label]: IV1: false\n      return false\n\n    ##DOESN'T WORK AS EXPECTED (because padding for absolute/relative blocks\n    # works as a block shifting and not as a padding inside a block):\n    # -- Return false if inner rectangle of our element has zero height or width\n    #if (\n    #  ( el.clientWidth - style.px('padding-left') - style.px('padding-right')\n    #  ) <= 0 or (\n    #    el.clientHeight - style.px('padding-top') - style.px('padding-bottom')\n    #  ) <= 0\n    #)\n    #  return false\n\n    #-- Return false if our element is invisible\n    if 'none' == style['display']\n      #verbose [isVisible._isVisible|label]: IV2-1: false\n      return false\n\n    # buttons with opacity=0 still active if their box is not zero sized\n    if (\n      '0' == style['opacity'] and not (\n        'button' == tag_name or (\n          'input' == tag_name and\n          element_type in [ 'submit', 'image', 'button', 'radio', 'checkbox' ]\n        )\n      )\n    )\n      #verbose [isVisible._isVisible|label]: IV2-2: false\n      return false\n\n    if (\n      'undefined' == typeof(t) or\n      'undefined' == typeof(r) or\n      'undefined' == typeof(b) or\n      'undefined' == typeof(lft) or\n      'undefined' == typeof(w) or\n      'undefined' == typeof(h)\n    )\n\n      # HACK: if insert <div> into inline block (like a <span>), its offset size\n      #       will be 0x0 use boundingClientRect() here to better recognize\n      #       the situation\n      width = el.offsetWidth\n      height = el.offsetHeight\n      if !width and !height and 'inline' == style['display']\n        box = el.getBoundingClientRect()\n        width = box.width\n        height = box.height\n\n      # check only inner rectangle as an element (without borders and padding)\n      t = el.offsetTop + style.px('border-top-width') + style.px('padding-top')\n      lft = el.offsetLeft + style.px('border-left-width') + \\\n          style.px('padding-left')\n      r = el.offsetLeft + width - style.px('border-right-width') + \\\n          style.px('padding-right')\n      b = el.offsetTop + height - style.px('border-bottom-width') + \\\n          style.px('padding-bottom')\n      w = r - lft\n      h = b - t\n\n      if 'hidden' == style['visibility']\n        #verbose [isVisible._isVisible|label]: IV3: visibility = 'hidden': false\n        return false\n    #verbose [isVisible._isVisible|label] \"IV4: t,lft,r,b,w,h\", t,lft,r,b,w,h\n\n    #-- If we have a parent, let's continue:\n    if parent and not ('HTML' == parent.nodeName or 9 == parent.nodeType)\n      #verbose [isVisible._isVisible|label] \"IV5: p.nodeType=\", parent.nodeType\n\n      if w <= 2 or h <= 2\n        #verbose [isVisible._isVisible|label] \"IV6\"\n        return false\n\n      #-- Check if the parent can hide its children.\n      parent_style = getStyle(parent)\n      pOffsetLeft = parent.offsetLeft\n      pOffsetTop = parent.offsetTop\n      pPosition = parent_style['position']\n\n      if parent_style['clip'] == \"rect(0px 0px 0px 0px)\"\n        #-- if CSS clip's rect is 0,0,0,0 then our element is invisible\n        #verbose [isVisible._isVisible|label] \"IV7\"\n        return false\n        #TODO: calc visibility for non zero clip rect.\n        #NOTE: 'clip' is deprecated\n        #TODO: add support of 'clip-path' CSS element\n\n      #verbose [isVisible._isVisible|label] \"IV8: \", \\\n      #  'position =', pPosition, 'absolute =', absolute, \\\n      #  '(parent != body):', (parent != document.body)\n\n      transformOffsetX = 0\n      transformOffsetY = 0\n      if (\n        not absolute or (\n          absolute and pPosition in ['absolute', 'fixed', 'relative']\n        )\n      )\n        SAFARI = false  #NOTE: Safari in rtl mode\n                        #      has scroll-bar on the right\n                        #      but all other browsers have\n                        #      it on the left\n\n        # if uses transform's translate method, use its correction offsets\n        sTransform = style.transform\n        if sTransform.startsWith('matrix')\n          m = sTransform.match ///matrix\\(\\s*(-?[.\\d]+)\\s*,\\s*(-?[.\\d]+)\\s*,\n            \\s*(-?[.\\d]+)\\s*,\\s*(-?[.\\d]+)\\s*,\n            \\s*(-?[.\\d]+)\\s*,\\s*(-?[.\\d]+)\\s*\\)///\n\n          if m?[1] == \"1\" and m[2] == \"0\" and m[3] == \"0\" and m[4] == \"1\"\n            transformOffsetX = +m[5]\n            transformOffsetY = +m[6]\n\n        if el == document.body and typeof window.innerWidth == 'number'\n          pOverflowYScrolled = (\n            window.innerWidth > document.documentElement.clientWidth\n          )\n          pOverflowXScrolled = (\n            window.innerHeight > document.documentElement.clientHeight\n          )\n        else\n          pOverflowY = parent_style['overflow-y']\n          pOverflowX = parent_style['overflow-x']\n          pOverflowXScrolled = pOverflowX in ['scroll', 'auto']\n          pOverflowYScrolled = pOverflowY in ['scroll', 'auto']\n\n        #verbose [isVisible._isVisible|label] \"IV9: \", \\\n        # \"overflowYScrolled =\", pOverflowYScrolled, \\\n        # \"overflowXScrolled =\", pOverflowXScrolled, \\\n        # \"overflowY =\", pOverflowY, \\\n        # \"overflowX =\", pOverflowX\n        if pOverflowX != 'visible'\n          pBorderLeftWidth = parent_style.px('border-left-width')\n          pBorderRightWidth = parent_style.px('border-right-width')\n          if RTL\n            # NOTE: for Chrome, Safari, Opera:\n            horScroll = -(\n              parent.scrollWidth - parent.scrollLeft - parent.clientWidth\n            )\n            # NOTE: use it for Firefox:\n            # horScroll = p.scrollLeft\n          else\n            horScroll = parent.scrollLeft\n\n          if isOffsetParent\n            if RTL and not SAFARI\n              pr = parent.offsetWidth - pBorderRightWidth\n              pl = pr - parent.clientWidth\n            else\n              pl = pBorderLeftWidth\n              pr = pl + parent.clientWidth\n          else\n            if RTL and not SAFARI\n              pr = pOffsetLeft + parent.offsetWidth - pBorderRightWidth\n              pl = pr - parent.clientWidth\n            else\n              pl = pOffsetLeft + pBorderLeftWidth\n              pr = pl + parent.clientWidth\n\n          if pOverflowXScrolled\n            r = Math.max(r - horScroll + transformOffsetX, pl)\n          else\n            r = Math.min(r - horScroll + transformOffsetX, pr)\n          lft = Math.max(lft - horScroll + transformOffsetX, pl)\n          w = r - lft\n\n        if pOverflowY != 'visible'\n          pBorderTopWidth = parent_style.px('border-top-width')\n          vertScroll = parent.scrollTop\n          #verbose-val [isVisible._isVisible] pBorderTopWidth\n          #verbose-val [isVisible._isVisible] parent.scrollTop\n\n          if isOffsetParent\n            pt = pBorderTopWidth\n            pb = pt + parent.clientHeight\n          else\n            pt = pOffsetTop + pBorderTopWidth\n            pb = pt + parent.clientHeight\n          #verbose [isVisible._isVisible] \"pt=\", pt, \"pb=\", pb\n\n          if (pOverflowYScrolled)\n            b = Math.max(b - vertScroll + transformOffsetY, pt)\n          else\n            b = Math.min(b - vertScroll + transformOffsetY, pb)\n          t = Math.max(t - vertScroll + transformOffsetY, pt)\n          h = b - t\n\n        if (h <= 1 or w <= 1)\n          #-- Our target element is out of bounds:\n          #verbose [isVisible._isVisible|label] \"IV10: h=\", h, \"w=\", w\n          return false\n\n        if pOverflowXScrolled or pOverflowYScrolled\n          # restart _isVisible with the parent element as the element we are\n          # looking for, when our element is placed in the parent element which\n          # has scroll bars. It means that we can achieve our element even if\n          # it is not visible now, so we consider that our element is visible.\n          # Now our care is to check the parent element visibility\n\n          #verbose [isVisible._isVisible|label] \"IV11:\", \\\n          #  \"restart with parent element\", parent\n          result =  _isVisible(parent, parent)\n          #verbose [isVisible._isVisible|label] \"IV12\", result\n          return result\n\n      #-- Add the offset parent's left/top coords to our element's offset:\n      if isOffsetParent\n        lft += pOffsetLeft + transformOffsetX\n        r += pOffsetLeft + transformOffsetX\n        t += pOffsetTop + transformOffsetY\n        b += pOffsetTop + transformOffsetY\n\n      #-- Let's recursively check upwards:\n      result = _isVisible(parent, offsp, absolute, t, r, b, lft, w, h)\n      #verbose [isVisible._isVisible|label]: IV13: #{result}\n      return result\n\n    #verbose [isVisible._isVisible|label]: IV14: #{not (r < 0 or b < 0)}\n    return not (r < 0 or b < 0)\n\n  visible = false\n  if element?\n    if (\n      cached and\n      document.body.axt_stamp <= element.axt_vStamp and\n      element.axt_vCache?\n    )\n      visible = element.axt_vCache\n      #verbose [isVisible] \"IV15: visible=\", visible, document.body.axt_stamp, \\\n      #  element.axt_vStamp\n    else\n      visible = _isVisible(element, element)\n      element.axt_vCache = visible\n      element.axt_vStamp = document.body.axt_stamp\n      #verbose [isVisible] \"IV16: visible=\", visible\n  #verbose-end [isVisible] \"isVisible\"\n  return visible\n\n\n# true, if element is visible on the page + check its CSS property\n# for visibility\n# NOTE: three 'if' levels are used to just speed up the visibility checking\nisVisibleHitBased = (element, cached = true, use_hit = true) ->\n  #verbose \"############ isVisibleHitBased ##################\"\n  if (\n    cached and\n      document.body.axt_stamp <= element.axt_vStamp and\n      element.axt_vCache?\n  )\n    return element.axt_vCache\n\n  efp = (x, y) -> document.elementFromPoint(x, y)\n\n  #verbose [isVisible|label] \"VHB1\", element\n  visible = element? and element.type != 'hidden'\n  if visible\n    rect = getClientRect(element, cached)\n\n    #verbose [isVisible|label] \"VHB2\", rect.height, rect.width\n    visible = rect.height > 0 and rect.width > 0\n\n    if visible\n      #NOTE: scrollX and scrollY may not be compatible with M$ IE\n      sX = window.scrollX\n      sY = window.scrollY\n\n      rect_left   = rect.left\n      rect_right  = rect.right\n      rect_top    = rect.top\n      rect_bottom = rect.bottom\n\n      left   = sX + rect_left\n      right  = sX + rect_right\n      top    = sY + rect_top\n      bottom = sY + rect_bottom\n\n      visible = right >= 0 and bottom >= 0\n\n      #verbose [isVisible|label] \"VHB3\", right, bottom\n      if visible\n        client_height = window.document.documentElement.clientHeight\n        body_height = Math.max(\n          client_height, window.document.documentElement.scrollHeight\n        )\n\n        client_width = window.document.documentElement.clientWidth\n        body_width = Math.max(\n          client_width, window.document.documentElement.scrollWidth\n        )\n        visible = left <= body_width and top <= body_height\n\n        #verbose [isVisible|label] \"VHB4\", left, body_width, top, body_height\n        if visible\n          style = getStyle(element, cached)\n          visible = style.display != 'none' and\n              style.visibility == 'visible' #and\n          #style.opacity > 0\n          # use opacity=0 for data controls:\n          #   https://services2.capitalone.com/ui/#/cardEnrollment/access\n\n          #verbose [isVisible|label] \"VHB5\", style.display, style.visibility, \\\n          #  style.opacity\n          if visible\n            # if element is visible in viewPort check if it is hidden by\n            # other element\n            #rect_right -= 2\n            #rect_bottom -= 2\n            #rect_left += 2\n            #rect_top += 2\n\n            mid_x = (rect_right + rect_left) / 2\n            mid_y = (rect_top + rect_bottom) / 2\n\n            #verbose [isVisible|label] \"VHB6\", rect_right, rect_left, \\\n            # rect_top,rect_bottom, \"client: \", client_width, client_height\n            #if (\n            #  rect_right > 0 and\n            #  rect_bottom > 0 and\n            #  rect_left < client_width and\n            #  rect_top < client_height\n            #)\n            if 0 <= mid_x <= client_width and 0 <= mid_y <= client_height\n              prevStylePointerEvents = null\n\n              if style.pointerEvents == 'none'\n                prevStylePointerEvents = element.style.pointerEvents\n                element.style.pointerEvents = 'auto'\n\n              #verbose [isVisible|label] \"VHB7\", rect_right, rect_left, \\\n              #  rect_top, rect_bottom, (rect_right + rect_left) / 2, \\\n              #  (rect_top + rect_bottom) / 2, 'client:', client_width, \\\n              #  client_height, efp( \\\n              #    (rect_right + rect_left) / 2, \\\n              #    (rect_top + rect_bottom) / 2 \\\n              #  )\n              visible = !use_hit or use_hit and (\n                element.contains(\n                  efp(\n                    mid_x, #(rect_right + rect_left) / 2,\n                    mid_y  #(rect_top + rect_bottom) / 2\n                  )\n                )\n                #or element.contains(\n                #    efp(rect_left, (rect_top + rect_bottom) / 2)\n                #  ) or element.contains(\n                #    efp(rect_left, rect_top)\n                #  ) or element.contains(\n                #    efp(rect_right, (rect_top + rect_bottom) / 2)\n                #  ) or element.contains(\n                #    efp(rect_right, rect_bottom)\n                #  ) or element.contains(\n                #    efp((rect_right + rect_left) / 2, rect_top)\n                #  ) or element.contains(\n                #    efp(rect_left, rect_bottom)\n                #  ) or element.contains(\n                #    efp((rect_right + rect_left) / 2, rect_bottom)\n                #  ) or element.contains(\n                #    efp(rect_right, rect_top)\n                #  )\n              )\n\n              if prevStylePointerEvents?\n                element.style.pointerEvents = prevStylePointerEvents\n\n            else # element is visible but it's not visible in viewport\n              # check its form visibility in viewport\n              # presupposition: if form is visible, then element is visible\n              #                 as well\n              #verbose [isVisible|label] \"VHB8\"\n              form = element.form\n              if form?\n                form_rect = getClientRect(form, cached)\n                #verbose [isVisible|label] \"VHB9\", form_rect.width, \\\n                #  form_rect.height\n                if form_rect.width > 5 and form_rect.height > 5\n                  #form_top    = form_rect.top + 2\n                  #form_left   = form_rect.left + 2\n                  #form_right  = form_rect.right - 2\n                  #form_bottom = form_rect.bottom - 2\n\n                  form_mid_x = (form_rect.right + form_rect.left) / 2\n                  form_mid_y = (form_rect.top + form_rect.bottom) / 2\n\n                  #verbose [isVisible|label] \"VHB10\", form_right, form_left, \\\n                  #  form_top, form_bottom, \"client:\", client_width, \\\n                  #  client_height\n                  #if (\n                  #  form_right > 0 and\n                  #  form_bottom > 0 and\n                  #  form_left < client_width and\n                  #  form_top < client_height\n                  #)\n                  if (\n                    0 <= form_mid_x <= client_width and\n                      0 <= form_mid_y <= client_height\n                  )\n                    #verbose [isVisible|label] \"VHB11\"\n                    #TODO: ??add form reparsing when page is resized or scrolled\n                    visible =  !use_hit or use_hit and (\n                      element.contains(\n                        efp(\n                          form_mid_x, #(form_right + form_left) / 2,\n                          form_mid_y  #(form_top + form_bottom) / 2\n                        )\n                      )\n                      #or element.contains(\n                      #    efp(form_left,  (form_top + rect_bottom) / 2)\n                      #  ) or element.contains(\n                      #    efp(form_left, form_top)\n                      #  ) or form.contains(\n                      #    efp(form_right, (form_top + form_bottom) / 2)\n                      #  ) or element.contains(\n                      #    efp(form_right, form_bottom)\n                      #  ) or form.contains(\n                      #    efp((form_right + form_left) / 2, form_top)\n                      #  ) or element.contains(\n                      #    efp(form_right, form_top)\n                      #  ) or form.contains(\n                      #    efp((form_right + form_left) / 2,  form_bottom)\n                      #  ) or element.contains(\n                      #    efp(form_left, form_bottom)\n                      #  )\n                    )\n  element.axt_vCache = visible\n  element.axt_vStamp = document.body.axt_stamp\n\n  #verbose [isVisible|label] \"VHB12\", visible\n  return visible\n\n\nisVisible =\n  fn: isVisibleNewTest\n\n\n# get visibility of the element\n# -----------------------------\n# return element visibility and put in into the 'axt-visible' attribute of the\n# element\n#\n# NOTE: it depends on body.axt_stamp (!)\n#\n# @parameters:\n# ------------\n# @param  element [HTMLElement] - null or the element to check visibility for\n# @result         [boolean]     - true if the element is visible\nisElementVisible = (element, cache = true) ->\n  visible = false\n  if element?\n    visible  = isVisible.fn(element, cache)\n    #console.log \"IEV1\", visible\n    if (\n      not visible and\n      element.tagName.toLowerCase() == 'input' and\n      element.type.toLowerCase() in ['checkbox', 'radio'] and\n      element.labels?[0]?\n    )\n      #console.log \"IEV2\", visible\n      visible = isVisible.fn(element.labels[0], cache)\n\n    element.setAttribute('axt-visible', visible)\n    #console.log \"IEV3\", visible\n\n  return visible\n\n\nelementVisibilityChanged = (element, cache = true) ->\n  changed = false\n  if element?\n    #console.warn \"1: element=\", element\n    prev_visible_attr = element.getAttribute('axt-visible')\n    #console.warn \"2: prev_visible_attr=\", prev_visible_attr\n    visible = isElementVisible(element, cache)\n    #console.warn \"3: visible=\", visible\n    if prev_visible_attr?\n      prev_visible = (prev_visible_attr == 'true')\n      #console.warn \"3: prev_visible=\", prev_visible\n      changed = (prev_visible != visible)\n    else\n      #console.warn \"4: element.tagName=\", element.tagName\n      #console.warn \"5: element.type=\", element.type\n      if (\n        visible and (\n          element.tagName.toLowerCase() != 'input' or\n          element.type.toLowerCase() != 'hidden'\n        )\n      )\n        #console.warn \"6: HERE!\"\n        changed = true\n  #console.warn \"7: changed=\", changed\n  return changed\n\n\n# return true when the element is of type 'block'\nisBlockElement = (element) ->\n  is_block = false\n  if element\n    style = getStyle(element)\n    is_block = style.display in ['block', 'table', 'inline-block']\n  return is_block\n\n\nisArray = Array.isArray || (obj) -> obj instanceof Array\n\ntoArray = (arr) -> Array.prototype.slice.call(arr)\n\nisFunction = (obj) -> obj? and typeof(obj) is 'function'\n\nisString = (obj) -> obj? and (typeof(obj) is 'string' || obj instanceof String)\n\nisNumber = (obj) -> obj? and (typeof(obj) is 'number' || obj instanceof Number)\n\nisBoolean = (obj) -> obj? and (\n  typeof(obj) is 'boolean' || obj instanceof Boolean\n)\n\n\nisObject = (obj) ->\n  obj? and not (\n    isFunction(obj) || isString(obj) || isNumber(obj) || isBoolean(obj)\n  )\n\n\nisFocusable = (element) ->\n  #assert (not element? or element instanceof(HTMLElement)), \\\n  #  \"isFocusable: element should be null or HTMLElement, but not #{element}\"\n\n  tag_name = element?.tagName.toLowerCase()\n\n  return tag_name? and not element.hasAttribute('disabled') and (\n    (\n      tag_name in [\n        'a', 'button', 'details', 'input', 'iframe', 'select', 'textarea'\n      ]\n    ) or (\n      tag_name == 'area' and element.hasAttribute('href')\n    ) or (\n      tag_name == 'div' and element.getAttribute('data-role') == 'textarea'\n    ) or (\n      element.hasAttribute('contentEditable') and (\n        element.getAttribute('contentEditable') ? ''\n      ).toLowerCase() in ['', 'true', 'plaintext-only']\n    ) or (\n      element.hasAttribute('tabindex') and\n      '-' not in element.getAttribute('tabindex')\n    )\n  )\n\n\nisInput = (input) ->\n  input instanceof HTMLInputElement\n\n# filter callback to get only text inputs\nisTextInput = (input) ->\n  isInput(input) and input.type?.toLowerCase() in TEXT_TYPES\n\nisPasswordInput = (input) ->\n  isInput(input) and input.type?.toLowerCase() == 'password'\n\nisSelectInput = (input) ->\n  input instanceof HTMLSelectElement and not input.multiple\n\nisCheckBoxInput = (input) ->\n  isInput(input) and input.type?.toLowerCase() == 'checkbox'\n\nisHiddenInput = (input) ->\n  isInput(input) and input.type?.toLowerCase() == 'hidden'\n\nisRadioInput = (input) ->\n  isInput(input) and input.type?.toLowerCase() == 'radio'\n\nisParsedInput = (input) ->\n  (isInput(input) and input.type?.toLowerCase() in PARSED_TYPES) or\n    isSelectInput(input)\n\nisTextArea = (input) ->\n  (\n    input.type?.toLowerCase() == 'textarea' or\n    input.getAttribute('data-role') == 'textarea'\n  )\n\n\n# return true if element has an ancestor with the given tagName\nisAncestor = (element, tagName) ->\n  parent = element.parentNode\n  while parent\n    return true if parent.tagName == tagName\n    parent = parent.parentNode\n  return false\n\n\nxor = (a, b) -> Boolean((a and not b) or (not a and b))\n\n\n# return list of innerTexts of the element and its descendants\ninnerTextList = (\n  element,\n  exclude_element,\n  only_visible = false,\n  cached = true,\n  exclude_tagNames = ['SCRIPT', 'STYLE', 'SELECT', 'INPUT', 'BUTTON']\n) ->\n  #assert expect element .to.be.an.instanceOf HTMLElement\n  _inner_text = (_element) ->\n    #verbose [innerTextList|label] \"ITL0\", _element\n    lst = []\n    if _element?\n      if not only_visible or (only_visible and isVisible.fn(_element, cached))\n        nodes = _element.childNodes\n        #verbose [innerTextList] \"==) nodes=\", nodes, \"(==\"\n        for node in nodes\n          #verbose [innerTextList] \"node=\", node\n          #verbose [innerTextList]  \"node.nodeName=\", node.nodeName\n          nodeName = node.nodeName\n          if '#text' == nodeName\n            ss = node.nodeValue.trim()\n            #verbose [innerTextList|label] \"ITL2: ss=\", ss\n            lst.push(ss) if ss\n          else if 'IMG' == nodeName\n            ss = node.alt\n            #verbose [innerTextList|label] \"ITL3: ss=\", ss\n            lst.push(ss) if ss\n          else if (\n            node instanceof HTMLElement and\n            nodeName not in exclude_tagNames and\n            node != exclude_element\n          )\n            #verbose [innerTextList|label] \"ITL4\"\n            lst = lst.concat(_inner_text(node))\n    #verbose [innerTextList|label] \"ITL5: lst=\", lst\n    return lst\n  return _inner_text(element)\n\n\n#function above can be (mostly) replaced with this code (if visibility is\n# not important):\n#innerHTML.replace(/<!--.*-->/g, ' ')\\\n# .replace(/<script>.*<\\/script>/gi, ' ')\\\n# .replace(/<select>.*<\\/select>/gi, ' ')\\\n# .replace(/\\<[^>]*\\>/g, ' ')\n\n\nextendArray = (a, b, before) ->\n  if before\n    for i in b by -1\n      a.unshift(i)\n  else\n    for i in b\n      a.push(i)\n  return a\n\n\n# return rate (number > 0) if complex cond is in list.\n# AND, OR and NOT logical operations are supported\n#-------------------------------------------------\n# cond is a list of strings, RegExp's  and sub-lists.\n# First level list is an AND-list, second level - OR-list, third - AND...\n# e.g. isInList([ 'a', [ 'b', [ 'c', ['d','e'] ] ] ], list) ==>\n#        a and (b or (c and (d or e))) in list\n# not - ! as a first character of element:  ['a', '!b'] =>  a and not b\n# not for all level - ! as a first element: ['!', 'a', 'b'] => not (a and b)\n# ['!', 'a', 'b'] === [['!a', '!b']] : not (a and b) === (not a) or (not b)\n# to use ! as a first character use '\\!' == '!'\n#\n# @param  {Array}  cond       - array with conditions\n# @param  {Array}  list       - string array to compare conditions with\n# @param  {Boolean} [exactly] - if true - exactly all strings in the\n#                               `list` array must be present in cond.\n#                               Default value is false\n# @param  {function} [comp_fun] - function (str1, str2) -> rater - compare two\n#                                strings and return rate>0 when they are equal\n# @param  {Boolean} [use_opt] - if true in AND array element like [tag] uses\n#                               as optional word.\n#                               e.g. [ 'one', ['two']] return 'true' for lists:\n#                                ['one'] and ['one', 'two'], but not ['two']\n#\n# @return {Number} match_rate or 0 - rate\n#\n# Rate is increasing each time a rule from cond list is becoming true.\n#\n# Example:  rule: [a,b,[c,d]] on list [a,b,d,f] returns rate = 3\n#           because we have three matches: (_a_ AND _b_ AND (c OR _d_))\n#\n# NOTE: rate of one comparison is equal 1 by default\n# NOTE: comp_run() can return different rates for different circumstances\n#       E.g. for above example, if comp_run() returns 0.5 then final rate = 1.5\n#             will be return\n#\n# TODO: more unit tests\n\nisInList = (cond, list, exactly = false, comp_fun, use_opt = false) ->\n  #assert expect isArray cond .to.be.true\n  #assert expect isArray list .to.be.true\n  #assert expect exactly .to.be.a 'boolean'\n  #assert expect (not comp_fun? or isFunction comp_fun) .to.be.true\n\n  #verbose-begin [isInList] 'isInList'\n  #verbose-param [isInList] cond\n  #verbose-param [isInList] list\n  #verbose-param [isInList] exactly\n\n  # convert all elements of list to String\n  list = list.map (i) -> String i\n  if list.length == 0 or cond.length == 0\n    #verbose-end [isInList] 'isInList'\n    return 0\n\n  if isFunction comp_fun\n    _idxRateOf = (list, etalon_word, start_idx, end_idx) ->\n      #verbose-begin [isInList._idxRateOf] 'isInList._idxRateOf'\n      #verbose-param [isInList._idxRateOf] list\n      #verbose-param [isInList._idxRateOf] etalon_word\n      #verbose-param [isInList._idxRateOf] start_idx\n      #verbose-param [isInList._idxRateOf] end_idx\n      idx = -1\n      rate = 0\n      #verbose [isInList._idxRateOf|label] \"GL1>\"\n      if end_idx >= start_idx #HACK: splice [] in `for` allow end border to be\n                              #      lower then start border. But it's not what\n                              #      we want\n        for cur_idx in [start_idx..end_idx]\n          #verbose [isInList._idxRateOf|label] \"GL2> idx=#{cur_idx}, \" + \\\n          #  \"list[#{cur_idx}] = #{list[cur_idx]}\"\n          rate = Number comp_fun(list[cur_idx], etalon_word)\n          rate = 0 if isNaN rate\n          if rate\n            idx = cur_idx\n            break\n          #verbose [isInList._idxRateOf|label] \"GL3> rate = #{rate}\"\n      #verbose     [isInList._idxRateOf] \"[idx, rate] = [#{idx}, #{rate}]\"\n      #verbose-end [isInList._idxRateOf] 'isInList._idxRateOf'\n      return [idx, rate]\n  else\n    comp_fun = (word, etalon_word) -> Number(word == etalon_word)\n    _idxRateOf = (list, etalon_word, start_idx) ->\n      #verbose-begin [isInList._idxRateOf] 'isInList._idxRateOf'\n      idx = list.indexOf(etalon_word, start_idx)\n      rate = Number(idx >= 0)\n      #verbose [isInList._idxRateOf] \"[idx, rate] = [#{idx}, \" + \\\n      #  \"#{Number(idx >= 0)}]\"\n      #verbose-end [isInList._idxRateOf] 'isInList._idxRateOf'\n      return [idx, rate]\n\n  _rateWordInList = (word) ->\n    #assert expect word .to.be.a 'string'\n    #verbose-begin [isInList._rateWordInList] \"isInList._rateWordInList\"\n    #verbose-param [isInList._rateWordInList|param] word\n\n    #verbose [isInList._rateWordInList] \"l1: list='#{list}', word='#{word}'\"\n    _idx_list = []\n    rate = 0\n    if not word\n      #verbose-alt-end [isInList._rateWordInList] 'isInList._rateWordInList'\n      return [rate, _idx_list]\n\n    #verbose [isInList._rateWordInList] 'l2>'\n    word = word.trim()\n    _exectly = false\n      # if word sentence starts with '=' (e.g. \"=word1 word2\"), then only\n      # the same input string will be rated:\n      #    '=word1 word2' only rates 'word1 word2' but not 'word0 word1 word2'\n      #    or 'word1 word2 word3'\n    if word[0] == '='\n      _exectly = true\n      word = word[1..]\n\n    sentence = word.split(' ').filter (i) -> i\n    sentence_len = sentence.length\n    #verbose [isInList._rateWordInList] 'l3: sentence=', sentence, \\\n    # 'len=', sentence_len\n    idx = 0\n    end_idx = list.length - sentence_len\n\n    #verbose [isInList._rateWordInList] 'l4: end_idx=', end_idx\n    if (end_idx >= 0 and not _exectly) or (end_idx == 0 and _exectly)\n      while ([idx, rate] = _idxRateOf(list, sentence[0], idx, end_idx))[0] >= 0\n        _idx_list.push idx\n        #verbose [isInList._rateWordInList] 'l5: idx =', idx, 'rate=', rate\n        if sentence_len #HACK: splice [] in `for` allow end border to be lower\n                        #      then start border. But it's not what we want\n          break if idx and _exectly\n          for offset in [1...sentence_len] when rate\n            #verbose [isInList._rateWordInList] 'l6: offset=', offset\n            prev_rate = rate\n            rate = comp_fun(list[idx + offset], sentence[offset])\n            if rate\n              _idx_list.push idx + offset\n              rate = ((rate + prev_rate) / 2)\n            #verbose [isInList._rateWordInList] 'l7: rate=', rate\n          break if rate or _exectly\n          idx += 1\n          _idx_list = []\n        #verbose [isInList._rateWordInList] 'l8: idx=', idx, 'rate=', rate\n      #verbose [isInList._rateWordInList] 'l9: rate=', rate\n\n    #verbose [isInList._rateWordInList] \"l4: '#{word}' rate=#{rate}\"\n\n    _idx_list = [] if not rate\n    #verbose-val [isInList._rateWordInList] rate\n    #verbose-end [isInList._rateWordInList] \"isInList._rateWordInList\"\n    return [rate, _idx_list]\n\n  _isInList = (_cond, _and_op = true) ->\n    #assert expect isArray _cond .to.be.true\n    #assert expect _and_op .to.be.a 'boolean'\n\n    #verbose-begin [isInList._isInList] \"_isInList\"\n    #verbose-param [isInList._isInList] _cond\n    #verbose-param [isInList._isInList] _and_op\n\n    exist_mark = false # for 'or'-list only one (first) true condition is marked\n                       # e.g. in list=[a,b] and cond=a|b (_and_op=false)\n                       # only first element (a) will be marked as existed.\n                       # because we expect only (a) OR (b) to exist BUT NOT\n                       # a AND b\n    _idx_list = [] # list of indexes of successfully compared words in the\n                   # 'list' Array. E.g. we have list=[a, b, c], and (a,c) is\n                   # found, then idx_list will be equal [0,2]. We use\n                   #  this array for exact comparison mode only\n\n    list_not_op = false\n    if _cond[0] == '!'\n      list_not_op = true\n      _cond = _cond[1..]\n\n    _total_match_rate = 0\n    match_rate = 0\n\n    for element, idx in _cond\n      continue unless element?\n      cur_match_rate = 0\n\n      if isArray element\n        array = element\n        continue unless array.length > 0\n        [cur_match_rate, t_idx_list] = _isInList(array, not _and_op)\n      else\n        word = String(element).trim()\n        continue unless word.length > 0\n\n        not_op = false\n        switch word[0]\n          when '!'   # \"!word\" -> NOT \"word\"\n            not_op = true\n            word = word.slice(1)\n          when '\\\\'   # \\! => !\n            word = word.slice(1) if word[1] == '!'\n\n        [cur_match_rate, t_idx_list] = _rateWordInList word\n\n      # if cond is OR and has only one element then\n      # this element is for 'DEFAULT' template:\n      #  aa AND [b]  means aa AND NOTHING  or  aa AND b\n      cur_match_rate = 1 if not (not use_opt or\n                                 _cond.length > 1 or\n                                 cur_match_rate or\n                                 _and_op or\n                                 not_op)\n      # NOTE: when use_opt==true, OR works ONLY when there are two elements\n      #       in an OR array!\n      #       DEFAULT works WITH ONLY ONE element in an OR array as well:\n      # with use_opt:\n      #  [ aaa, [bbb]] --> aaa AND [bbb OR '']\n      #  [ aaa, [bbb, ccc]] -> aaa AND (bbb OR ccc)\n      # DEFAULT (without use_opt): [aaa, [bbb]] -> means aaa AND bbb\n      if xor(cur_match_rate, not_op)\n        if not_op\n          cur_match_rate = 1\n          #assert expect t_idx_list .to.be.an.instanceOf(Array).and.be.empty\n          #t_idx_list = []\n        else\n          null\n      else\n        cur_match_rate = 0\n        t_idx_list = []\n\n      if match_rate\n        if _and_op\n          match_rate = Math.min(cur_match_rate, match_rate)\n        else\n          match_rate = Math.max(cur_match_rate, match_rate)\n      else\n        match_rate = cur_match_rate\n\n      break if _and_op and not cur_match_rate\n      if t_idx_list.length > 0 and (_and_op or not (_and_op or exist_mark))\n        exist_mark = true\n        _idx_list = _idx_list.concat t_idx_list\n\n    #verbose     [isInList] 'XOR>', xor(list_not_op, match_rate)\n    #verbose-val [isInList] list_not_op, match_rate\n    if xor(match_rate, list_not_op)\n      if list_not_op\n        _total_match_rate = 1\n        _idx_list = []\n      else\n        _total_match_rate = match_rate\n\n    #verbose-val [isInList] _total_match_rate\n    #verbose-end [isInList] \"_isInList\"\n    return [_total_match_rate, _idx_list]\n\n  [total_match_rate, idx_list] = _isInList cond\n\n  if total_match_rate and exactly\n    t_list = Array.apply(null, Array(list.length)).map () -> false\n    t_list[i] = true for i in idx_list\n    total_match_rate = 0 if t_list.some (i) -> i == false\n\n  #verbose-val [isInList] total_match_rate\n  #verbose-end [isInList] 'isInList'\n  return total_match_rate\n\n\n# join two arrays together using zip_func. Default zip_func is used to\n# add sub-arrays with values from these two arrays into one big array:\n# [[a1, b1], [a2, b2],...]\n# if zip_func returns undefined, this pair will not be added to the result list\nzip = (array1, array2, zip_func) ->\n  #assert expect array1 .to.be.an.instanceOf Array\n  #assert expect array2 .to.be.an.instanceOf Array\n  _zip_func = zip_func ? (v1, v2) -> [v1, v2]\n  len1 = array1.length\n  len2 = array2.length\n  result = []\n\n  if len1 >= len2\n    len = len1\n    arr1 = array1\n    arr2 = array2\n    swap = false\n  else\n    len = len2\n    arr1 = array2\n    arr2 = array1\n    swap = true\n\n  for v1, idx in arr1\n    v2 = arr2[idx]\n    if swap\n      pair = _zip_func(v2, v1)\n    else\n      pair = _zip_func(v1, v2)\n    result.push pair if pair != undefined\n\n  return result\n\n\n# Array::sort callback function for sorting\n# by column number n:\n#  #    n = 0       n = 1         n = m\n#  [ [element_0, element_1, ... element_m]\n#    [element_0, element_1, ... element_m]\n#    ...\n#  ]\n#  or by key's value):\n#  [ { key_0: value_0, key_1: value_1, ... key_m: value_m}]\n#    { key_0: value_0, key_1: value_1, ... key_m: value_m}]\n#    ...\n#  ]\n#\n#  example: arr = [['A', 10], ['B', 0], ['C', 4]]\n#  arr.sort(orderBy(1)) -> ['B', '0'], ['C', 4], ['A', 10]]\n#  arr.sort(orderBy(1,'desc')) -->\n#    [['A', 10], ['C', 4], ['B', 0]]\n#\n#  example2: obj = [ {name: 'John', age: 30}, {name: 'Sara', age: 22} ]\n#  obj.sort(orderBy('age', 'asc')) -->\n#    [ {name: 'Sara', name: 22}, {name: 'John', age: 30}]\n#\n#  returns: [[]] or [{}]\norderBy = (index, order = 'asc') ->\n  ###assert expect(\n    (isNumber(index) and index >= 0) or (isString(index) and index.length > 0)\n  ).to.be.true###\n\n  #assert expect (isString(order) and order in ['asc', 'desc']) .to.be.true\n\n  #verbose-begin [orderBy] \"orderBy\"\n  #verbose-param [orderBy] index\n  #verbose-param [orderBy] order\n\n  if order == 'asc'\n    retval = (a, b) ->\n      _a = a[index]\n      _b = b[index]\n      if _a == _b then 0 else if _a < _b then -1 else 1\n  else\n    retval = (a, b) ->\n      _a = a[index]\n      _b = b[index]\n      if _a == _b then 0 else if _a < _b then 1 else -1\n\n  #verbose-val [orderBy] retval\n  #verbose-end [orderBy] \"orderBy\"\n  return retval\n\n\n###\n * add one element or many elements from an array into given array\n * @param {Array}          array           - array\n * @param {Array|any type} array_or_object - Array or object to add into source\n *                                           array\n * @param {string|constructor} type        - type of object to add\n * @param {number}         [before_pos]    - position in the array where to add\n *                                           new element(s) or -1 (it's a\n *                                           default value) to add at the end\n *                                           of the array\n * example:\n *   arr = [1,2,3]\n *   expandArrayWithArrayOrObject(arr, [5,6,7], 'number', -1)\n *   expandArrayWithArrayOrObject(arr, 0, 'number', 0)\n *  result: arr == [0,1,2,3,5,6,7]\n###\nexpandArrayWithArrayOrObject =\n  (array, array_or_object, type, before_pos = -1) ->\n    #assert expect (isArray array) .to.be.true\n    #assert expect (type ? '') .to.be.a 'string'\n    #assert expect before_pos .to.be.a 'number'\n\n    #verbose-begin [expandArrayWithArrayOrObject] 'expandArrayWithArrayOrObject'\n    #verbose-param [expandArrayWithArrayOrObject] array\n    #verbose-param [expandArrayWithArrayOrObject] array_or_object\n    #verbose-param [expandArrayWithArrayOrObject] type\n    #verbose-param [expandArrayWithArrayOrObject] before_pos\n\n    if before_pos < 0\n      if isArray array_or_object\n        for elem, idx in array_or_object\n          #assert expect(elem, elem).to.be.a type if type\n          array.push elem\n      else\n        #assert expect(array_or_object, array_or_object).to.be.a type if type\n        array.push array_or_object\n    else\n      if isArray array_or_object\n        for elem, idx in array_or_object\n          #assert expect(elem, elem).to.be.a type if type\n          array.splice before_pos + idx, 0, elem\n      else\n        #assert expect(array_or_object, array_or_object).to.be.a type if type\n        array.splice before_pos, 0, array_or_object\n\n    #verbose-val [expandArrayWithArrayOrObject] array\n    #verbose-end [expandArrayWithArrayOrObject] 'expandArrayWithArrayOrObject'\n    return array\n\n\n# default number to number ascending order comparator\ndefCompFunc = (a, b) -> if a > b then 1 else if a < b then -1 else 0\n\n\n# insert element `item` into sorted array `arr` using `comp` comparator function\ninsertSorted = (arr, item, comp = defCompFunc) ->\n  # get the index we need to insert the item at\n  min = 0\n  max = arr.length\n  index = Math.floor((min + max) / 2)\n\n  while (max > min)\n    if comp(item, arr[index]) < 0\n      max = index\n    else\n      min = index + 1\n\n    index = Math.floor((min + max) / 2)\n\n  # insert the item\n  arr.splice(index, 0, item)\n\n\n###\n * Returns owner fieldset for given legend regardless of whether the\n * legend is wrapped in an element(s) different from FIELDSET (e.g.,\n * DIV) or not.\n###\ngetFieldset = (legend)  -> return legend?.closest('FIELDSET')\n\n\n###\n * Returns legend for given fieldset regardless of whether the legend\n * is wrapped in an element(s) different from FIELDSET (e.g., DIV) or\n * not.\n###\ngetLegend = (fieldset) ->\n  # All descendant legends.\n  legends = fieldset.getElementsByTagName('legend')\n\n  # If there is no descendant legends, return null.\n  return null if 0 == legends.length\n\n  # If there is no descendant fieldsets, immediately return first\n  # descendant legend.\n  if 0 == fieldset.getElementsByTagName('fieldset').length\n    return legends[0]\n\n  # Iterating through descendant legends.\n  for legend in legends\n    curSet = getFieldset(legend)\n    # If owner-fieldset of current legend-item is original fieldset,\n    # return this legend\n    return if curSet == fieldset\n\n\ngetNextTabStopElement = (activeElem, reverse = false, cached = true) ->\n  #check if an element is defined or use activeElement\n  activeElem = if activeElem instanceof HTMLElement \\\n               then activeElem \\\n               else document.activeElement\n\n  queryString = [\n      'a:not([disabled]):not([tabindex=\"-1\"])',\n      'button:not([disabled]):not([tabindex=\"-1\"])',\n      'input:not([disabled]):not([tabindex=\"-1\"])',\n      'select:not([disabled]):not([tabindex=\"-1\"])',\n      '[tabindex]:not([disabled]):not([tabindex=\"-1\"])'\n      # add custom queries here\n  ].join(',')\n\n  queryResult = Array::filter.call(\n    document.querySelectorAll(queryString),\n    (elem) -> isVisible.fn(elem, cached)\n  )\n\n  indexedList = queryResult.slice().filter( (elem) ->\n    # filter out all indexes not greater than 0\n    elem.tabIndex > 0\n  ).sort( (a, b) ->\n    # sort the array by index from smallest to largest\n    if a.tabIndex != 0 and b.tabIndex != 0\n      if a.tabIndex < b.tabIndex\n        -1\n      else\n        if b.tabIndex < a.tabIndex then 1 else 0\n    else\n      if a.tabIndex != 0\n        -1\n      else\n        if b.tabIndex != 0 then 1 else 0\n  )\n\n  focusable = [].concat(indexedList, queryResult.filter (elem) ->\n    # filter out all indexes above 0\n    elem.tabIndex <= 0\n  )\n\n  # if reverse is true return the previous focusable element\n  # if reverse is false return the next focusable element\n  if reverse\n    nextTabstop = (\n      focusable[focusable.indexOf(activeElem) - 1] or\n      focusable[focusable.length - 1]\n    )\n  else\n    nextTabstop = (focusable[focusable.indexOf(activeElem) + 1] or focusable[0])\n\n  return nextTabstop\n\n\nparentIsInList = (element, parentList) ->\n  #verbose-begin [parentIsInList] parentIsInList\n  #verbose-param [parentIsInList] element\n  #verbose-param [parentIsInList] parentList\n\n  if parentList?\n    parent = element?.parentElement\n    while parent? and parent not in parentList\n      parent = parent.parentElement\n\n  #verbose-val [parentIsInList] parent\n  #verbose-end [parentIsInList] parentIsInList\n  return parent\n\n\nbelongToAncestor = (element, ancestor) ->\n  #verbose-begin [belongToAncestor] belongToAncestor\n  #verbose-param [belongToAncestor] element\n  #verbose-param [belongToAncestor] ancestor\n  if ancestor?\n    parent = element?.parentElement\n    while parent? and parent != ancestor\n      parent = parent.parentElement\n\n  #verbose-val [belongToAncestor] parent\n  #verbose-end [belongToAncestor] belongToAncestor\n  return parent?\n\n\narrangePasswords = (passwords) ->\n  #verbose-begin [arrangePasswords]: arrangePasswords\n  #verbose-param [arrangePasswords]: passwords\n\n  passlist = passwords.map (input, idx) ->\n    tags = input.rates.tags\n    i = {\n      tag: '',\n      confirm: ( 'confirm' in tags or 'confirm-password' in tags ),\n      old: ( 'old' in tags or 'old-password' in tags ),\n      new: ( 'new' in tags or 'new-password' in tags ),\n      input: input\n    }\n\n    #verbose-val [arrangePasswords] i.input.getAttribute('maxLength')\n    max_length = Number.parseInt(i.input.getAttribute('maxlength'))\n    if isNaN(max_length)\n      max_length = 5\n\n    kind = if max_length > 4 then 'password' else 'passcode'\n    #verbose-val [arrangePasswords] kind\n\n    prefix = if i.confirm then \"confirm-\" else \"\"\n\n    if i.old\n      if i.new\n        if idx == 0\n          i.tag = prefix + 'old-' + kind\n        else\n          i.tag = prefix + 'new-' + kind\n      else\n        i.tag = prefix + 'old-' + kind\n    else\n      if i.new\n        i.tag = prefix + 'new-' + kind\n      else\n        i.tag = prefix + kind\n\n    return i\n\n  idx = 0\n  while idx < passlist.length\n    p1 = passlist[idx]\n    idx += 1\n\n    continue if p1? and (not p1.tag or p1.tag == 'passcode')\n\n    p2 = passlist[idx]\n    if p2? and (not p2.tag or p2.tag == 'passcode')\n      p2 = null\n      p3 = null\n    else\n      idx += 1\n      p3 = passlist[idx]\n      if p3? and (not p3.tag or p3.tag == 'passcode')\n        p3 = null\n      else\n        idx += 1\n\n    #verbose [arrangePasswords] \"1: p1=\", p1, \"p2=\", p2, \"p3=\", p3\n    key = p1.tag + (\n      if p2?.tag then \"|\" + p2.tag + (\n        if p3?.tag then \"|\" + p3.tag else \"\"\n      ) else \"\"\n    )\n\n    #verbose-val [arrangePasswords] key\n    new_tags = PASSWORD_RANGE_TABLE[key]\n    #verbose-val [arrangePasswords] new_tags\n    if p1.tag  and new_tags[0] then p1.tag = new_tags[0]\n    if p2?.tag and new_tags[1] then p2.tag = new_tags[1]\n    if p3?.tag and new_tags[2] then p3.tag = new_tags[2]\n    #verbose [arrangePasswords] \"2: p1=\", p1, \"p2=\", p2, \"p3=\", p3\n\n  #verbose-end [arrangePasswords]: arrangePasswords\n  return passlist\n\n\n#-------------------------------------------------------------------------------\nmodule.exports =\n  RTL:                RTL\n  EvalCodeError:      EvalCodeError\n  reEscape:           reEscape\n  safeApply:          safeApply\n  getCommonBlock:     getCommonBlock\n  orderBy:            orderBy\n  insertSorted:       insertSorted\n  isInList:           isInList\n  evalCode:           evalCode\n  isEmptyObject:      isEmptyObject\n  isVisible:          isVisible\n  isVisibleNew:       isVisibleNew\n  isVisibleHitBased:  isVisibleHitBased\n  isElementVisible:   isElementVisible\n  isBlockElement:     isBlockElement\n  isTextArea:         isTextArea\n  isNumber:           isNumber\n  isString:           isString\n  isArray:            isArray\n  toArray:            toArray\n  extendArray:        extendArray\n  isFunction:         isFunction\n  isObject:           isObject\n  isInput:            isInput\n  isTextInput:        isTextInput\n  isPasswordInput:    isPasswordInput\n  isSelectInput:      isSelectInput\n  isRadioInput:       isRadioInput\n  isCheckBoxInput:    isCheckBoxInput\n  isParsedInput:      isParsedInput\n  isHiddenInput:      isHiddenInput\n  isAncestor:         isAncestor\n  isFocusable:        isFocusable\n  getZIndex:          getZIndex\n  xor:                xor\n  delayCall:          delayCall\n  getRandomInt:       getRandomInt\n  getStyle:           getStyle\n  getClientRect:      getClientRect\n  innerTextList:      innerTextList\n  getActualURL:       getActualURL\n  getAttributesNames: getAttributesNames\n  getFieldset:        getFieldset\n  getLegend:          getLegend\n  Url:                Url\n  URI:                URI\n  zip:                zip\n  parentIsInList:     parentIsInList\n  belongToAncestor:   belongToAncestor\n  arrangePasswords:   arrangePasswords\n  getUrlWithoutParams:            getUrlWithoutParams\n  elementVisibilityChanged:       elementVisibilityChanged\n  expandArrayWithArrayOrObject:   expandArrayWithArrayOrObject\n  extractUrlInfoFromTestFilePath: extractUrlInfoFromTestFilePath\n  getNextTabStopElement:          getNextTabStopElement\n","###\n * applier_manager.coffee\n *\n *  This is the main module of content script. It communicates with\n *  background page, starts parser and insert values into recognised\n *  inputs\n *\n *  Copyright (c) 2015 auxoft.com. All rights reserved.\n###\n\n#MODULE-TAGS: [front]\n\nl = require('../common/log.coffee'); context = global.axt_context\n\nUrl    = require('domurl/url')\nutils  = require('../common/utils.coffee')\nfutils = require('../common/frame-utils.coffee')\ndumper = require('../common/dumper.coffee')\nmd5    = require('../common/md5.coffee')\ndomainExtractor = require('../common/domain-extractor.coffee')\nputils = require('./parser-helpers.coffee')\nlogout_urls = require(\"../back/logoutdb.json\")\n\nIframeObserver = require('./iframe-observer')\n\n\ndo ({expect, assert} = chai = require \"chai\").should\n\n\nTRANSITION_PROPERTIES = [\n  'all', 'visibility', 'transform', 'opacity',\n  'width', 'max-width', 'height', 'max-height', 'right',\n  'left', 'top', 'bottom', 'padding-left', 'padding-right', 'padding-top',\n  'padding-bottom'\n]\n\n\nfillInputValue = (dst, src) ->\n  dst['login']           = src.login\n  dst['userName']        = src.userName\n  dst['email']           = src.email\n  dst['phone']           = src.phone\n  dst['phone_prefix']    = src.phone_prefix\n  dst['firstName']       = src.firstName\n  dst['lastName']        = src.lastName\n  dst['fullName']        = src.fullName\n  dst['company']         = src.company\n  dst['account']         = src.account\n  dst['applicantId']     = src.applicantId\n  dst['zipcode']         = src.zipcode\n  dst['currentLogin']    = src.currentLogin    if 'currentLogin'    of src\n  dst['currentPassword'] = src.currentPassword if 'currentPassword' of src\n\n\nremoveAxtAttributes = () ->\n  l.i(context.axt_fid + \":\", \"REMOVE 'axt-*-type' attributes\")\n  document.body.removeAttribute('axt-parser-timing')\n  document.querySelectorAll(\n    '[axt-form-type],[axt-input-type],[axt-button-type]'\n  ).forEach (element) ->\n    if element.hasAttribute('axt-form-type')\n      element.removeAttribute('axt-form-type')\n\n    if element.hasAttribute('axt-input-type')\n      element.removeAttribute('axt-input-type')\n\n    if element.hasAttribute('axt-button-type')\n      element.removeAttribute('axt-button-type')\n\ntextIsInPage = (string) -> document.evaluate(\n  \"//*[contains(text(), '#{string}')]\",\n  document,\n  null,\n  XPathResult.FIRST_ORDERED_NODE_TYPE,\n  null\n).singleNodeValue?\n\n\n###\n * Applier manager uses to find forms on the page and save/insert data from them\n###\nclass ApplierManager\n  constructor: (transportClass) ->\n    try expect((transportClass), \"\"\"transportClass\"\"\") .to.exist catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|constructor\", \"\"\"ApplierManager.constructor\"\"\"))\n    l.i(context.axt_fid + \"\"\": * PARAM transportClass:\"\"\", transportClass)\n\n    @extended_mode = false\n    @auto_submit = false\n    @auto_logout = false\n    @registration_autosubmit = false\n    @parser_init = false\n    @inprogress = true\n    @observer   = undefined\n    @reposition_timeout = null\n    @DOMchanged = true\n    @transport  = new transportClass(this)\n    @parser = new putils.FormParser()\n\n    @parserScanTimerId = null\n    @chooseUserAccountTimerId = null\n\n    @iframeObserver = null\n\n    @forms_info = null  # discovered forms marked with tags in format:\n                        #  { current_step: <num>,\n                        #    steps: <num>,\n                        #    forms: {\n                        #      '<tag, e.g \"login\">': {\n                        #        form:    <form>,\n                        #        inputs: {\n                        #          <input-name, e.g.\"login\">: <input>,\n                        #          <input-name,, e.g.\"password\">: <input>,\n                        #          ...\n                        #        }\n                        #        buttons: {\n                        #          login: <button>, ...\n                        #      }\n                        #    }\n                        #  }\n\n    @account = null     # selected account: userName for login,\n                        # or registration profile's name for registration\n\n    @accounts_info = {}\n\n    @tag = null         # selected tag ('login', 'registration', etc.)\n\n    @parser_run = 0\n\n    @login_val = ''     # constant login value for second step of two\n                        # authorisation forms\n\n    @transport.addMessageListener(@messageEventHandler)\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|constructor\", \"\"\"ApplierManager.constructor\"\"\"))\n    return\n\n\n  ###!\n   * Initialize communication between the page and the extension\n  ###\n  init: () ->\n    @_initReq()\n\n\n  # get last_event from previous page and apply it\n  $$restoreLastEventFromExt: (last_event) ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front\", \"restoreLastEventFromExt\"))\n    l.d.apply(l, l.r(context, 0, \"debug-param\", \"front|param\", \"\"\"* PARAM last_event:\"\"\", last_event))\n    if last_event?\n      last_event.timestamp = Date.now() #refresh timestamp\n      last_event.is_active_event = true\n\n      @parser.last_event = last_event\n      @parser.last_event_urls = last_event?.urls.slice(0) # clone urls\n\n      vals = last_event.values # create an alias of last_event.values\n      if vals?\n        input_vals = @parser.input_values  # create an alias of input_values\n        # fill input_values from previous page's last_event\n        # emulate filling such inputs with values from previous page even if\n        # we don't have registration and login forms on this page\n        input_vals.login ?= {}\n        fillInputValue(input_vals.login, vals)\n        input_vals.registration ?= {}\n        fillInputValue(input_vals.registration, vals)\n      l.i(context.axt_fid + \"\"\": dumper @parser.input_values =\"\"\", dumper @parser.input_values)\n\n    l.d.apply(l, l.r(context, 0, \"debug\", \"front|comm\", \"register 'beforeunload' event handlers\"))\n    window.addEventListener 'beforeunload', @onBeforeUnloadHandler\n\n    l.d.apply(l, l.r(context, 0, \"debug\", \"front|comm\", \"register 'pagehide' event handlers\"))\n    window.addEventListener 'pagehide', @letSaveLoginInfo\n\n    if (\n      context.axt_fid == 0 and\n      last_event? and\n      last_event.has_password and\n      last_event.password_changed and\n      last_event.values.password\n    )\n      _started = false\n      _saveForm = () =>\n        if not _started and (\n          document.visibilityState == 'visible' or (\n            process.env.DEBUG and process.env.DEBUG != 'false'\n          )\n        )\n          l.l.apply(l, l.r(context, 0, \"info\", \"front|$$init|label\", \"\"\"START SAVING CREDENTIALS FROM PREVIOUS PAGE!\"\"\"))\n          # start saving credentials info here if there is no inputs on the\n          # page or if the current page is disabled for parsing.\n          # In this case $$start event will never be fired and parser will\n          # never be started and after 5 seconds saving dialog appears\n          # automatically after the tab becomes visible\n          _started = true\n          document.removeEventListener \"readystatechange\", _saveForm\n          @_saveLoginFormReq 5000, last_event\n      document.addEventListener('visibilitychange', _saveForm, false)\n      _saveForm()\n      setTimeout(_saveForm, 0)\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front\", \"restoreLastEventFromExt\"))\n    return\n\n\n  startIframeObserver: () ->\n    window.axt_frameVisibility = false\n    @iframeObserver = new IframeObserver()\n    @iframeObserver.observe()\n\n\n  ###\n   * Start point of communication between the page and the extension.\n   * Form parsing is started when there is one or more <input> controls\n   *  on the page\n   *\n   * @return null\n  ###\n  start: () ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front\", \"\"\"ApplierManager.start\"\"\"))\n\n    l.l.apply(l, l.r(context, 0, \"info\", \"\", \"\"\"== START CONTENT SCRIPT ==\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug\", \"extra\", \"\"\"== page: #{document.location.href} ==\"\"\"))\n    do @_startReq # send init request to back|ExtManager\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front\", \"\"\"ApplierManager.start\"\"\"))\n    return\n\n\n  removeEventListeners: () ->\n    #window.removeEventListener 'pagehide', @letSaveLoginInfo\n    document.body.removeEventListener 'transitionend', @onTransitionEventHandler\n    document.body.removeEventListener 'animationend', @onTransitionEventHandler\n    window.removeEventListener \"resize\", @reposition_input_icons\n    Array.from(document.getElementsByTagName('select')).forEach (i) =>\n      i.removeEventListener 'change', @onSelectChangedHandler\n\n\n  ###\n   * Stop keyreel service on this page completely\n   * To start it again send message 'axt-start-content-script' to the content\n   * script\n  ###\n  stop: () ->\n    @observer?.disconnect()\n    @iframeObserver?.disconnect()\n\n    clearInterval(@iconsRepositionInterval)\n    clearTimeout(@parserScanTimerId)\n    clearTimeout(@chooseUserAccountTimerId)\n    @parser?.close()\n\n\n  ###\n   * This method is called when message is coming.\n   * It invokes method this.method_name(param) if it exists.\n   * Nothing happened otherwise (if assertions are disabled).\n   *\n   * NOTE: only methods with $$ prefix in its name are invoked\n   *\n   * @param {string}      method_name - Name of method to call\n   * @param {json|null} param         - Parameter passed to `method_name`\n   *\n   * @return {null}\n  ###\n  call: (method_name, param) ->\n    try expect((method_name), \"\"\"method_name\"\"\") .to.be.a('string').and.not.to.be.empty catch e then throw e\n    try expect( this,\n      \"ApplierManager: method '$$#{method_name}' is nof found\"\n    ).to.have.a.property(\"$$#{method_name}\").which.is.a 'function' catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.call\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug-param\", \"front|param|comm\", \"\"\"* PARAM method_name:\"\"\", method_name))\n\n    if method_name != 'parserInit'\n      l.i(context.axt_fid + \"\"\": * PARAM dumper param:\"\"\", dumper param)\n\n    l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"<<= Receive message '#{method_name}' <<= from the background\"\"\"))\n    utils.safeApply(\n      @['$$' + method_name],\n      this,\n      [param],\n      \"ERROR calling '$$#{method_name}'\"\n    )\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"ApplierManager.call\"\"\"))\n    return\n\n\n  ###\n   * invoke this method when we are finished to parse forms\n   * this method starts dom modification observing\n   *\n   * @param {string} who - name of caller\n  ###\n  $$done: (who) ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"$$done\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug\", \"front|comm\", \"\"\"<<<<<<<<<< DONE >>>>FROM #{who}>>>>>>>>>>>>>\"\"\"))\n    try\n      if @forms_info? and who != 'Init'\n        # Save parser result as a body attribute\n        # Used for testing of parser behaviour\n\n        l.i(context.axt_fid + \":\", \"DONE: @parse_start_time = \", @parse_start_time)\n        parse_duration = -1\n        if @parse_start_time?\n          parse_duration = (performance.now() - @parse_start_time)\n          #@ga.send 'timing', 'parser',\n          #  \"#{who}: exec time (ms/100)\", (parse_duration * 100).toFixed(0)\n          @parse_start_time = null\n\n        @forms_info.timing = parse_duration.toFixed(2)\n\n        l.i(context.axt_fid + \":\", \"DONE: @forms_info.timing = \", @forms_info.timing)\n        document.body.setAttribute('axt-parser-timing', @forms_info.timing)\n        l.i(context.axt_fid + \":\", \"save-attribs-0: FORMS_INFO=\",\n          @forms_info)\n\n        for form_type, form of @forms_info.forms\n          inputs = form.inputs\n          buttons = form.buttons\n          form = form.form\n          l.i(context.axt_fid + \":\", \"save-attribs-1: form=\", form)\n\n          for input_type, input of inputs\n            l.i(context.axt_fid + \":\", \"save-attribs-2: input_type=\",\n              input_type, \"input=\", input)\n            form = utils.getCommonBlock(form, input)\n            l.i(context.axt_fid + \":\", \"save-attribs-3: form=\", form)\n            input.setAttribute('axt-input-type', input_type)\n            l.i(context.axt_fid + \":\", \"SET ATTRIBUTE axt-input-type\", input_type)\n\n          for button_type, button of buttons\n            l.i(context.axt_fid + \":\", \"save-attribs-4: button_type=\",\n              button_type, \"button=\", button)\n            form = utils.getCommonBlock(form, button)\n            l.i(context.axt_fid + \":\", \"save-attribs-5: form=\", form)\n            button.setAttribute('axt-button-type', button_type)\n            l.i(context.axt_fid + \":\", \"SET ATTRIBUTE axt-button-type\",\n              button_type)\n\n          if form?\n            l.i(context.axt_fid + \":\", \"save-attribs-6: form=\", form)\n            l.i(context.axt_fid + \":\", \"SET ATTRIBUTE axt-form-type\", form_type)\n            form.setAttribute('axt-form-type', form_type)\n\n        l.i(\"\"\"#{context.axt_fid}: >> 'axt-*-type' attributes saved in the DOM <<\"\"\")\n    finally\n      l.i(\"\"\"#{context.axt_fid}: reset @inprogress to false\"\"\")\n      @inprogress = false\n      @_onDOMChanged() if @DOMchanged or @observer.hasInputMutationsInDOM()\n\n      l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"$$done\"\"\"))\n      return\n\n\n  $$prepare: (init_info) ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front\", \"\"\"ApplierManager.$$prepare\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug-param\", \"front|param|extra\", \"\"\"* PARAM init_info:\"\"\", init_info))\n\n    if init_info.config.axt_enable_ga\n      l.l.apply(l, l.r(context, 0, \"info\", \"\", \"\"\"---=== START ANALYTICS ===---\"\"\"))\n      @ga = new putils.GoogleAnalytics(init_info)\n    else\n      l.l.apply(l, l.r(context, 0, \"info\", \"\", \"\"\"######## DISABLE ANALYTICS #######\"\"\"))\n      @ga = new putils.Analytics(init_info)\n\n    @extended_mode = init_info.config.axt_extended_mode\n    l.i(context.axt_fid + \"\"\": @extended_mode =\"\"\", @extended_mode)\n    @auto_submit = init_info.config.axt_auto_submit\n    @auto_logout = init_info.config.axt_auto_logout\n\n    do @_getParserInfoReq # -> parserInit\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front\", \"\"\"ApplierManager.$$prepare\"\"\"))\n    return\n\n\n  _onDOMChanged: () =>\n    #debug-begin [callback|observer]: >>>>>> observer callback <<<<<<\n    #debug-val   [callback|observer]: @inprogress\n\n    #verbose [callback|observer] \"before @DOMchanged =\", @DOMchanged\n\n    document.body.axt_stamp = performance.now() # clear visibility cache\n    if @parser.checkInputs()\n      @DOMchanged = true\n\n    #verbose-val [callback|observer]: @DOMchanged\n    if @DOMchanged\n      @stopChooseUserAccountTimer()\n\n      if @inprogress\n        l.w.apply(l, l.r(context, 0, \"warn\", \"\", \"!!! PARSER IS BUSY (@inprogress = true) - SKIPPING...\"))\n        null\n      else\n        if @parserScanTimerId?\n          l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"!!!! CLEAR TIMEOUT AND RESTART FORM PARSING !!!!\"))\n          clearTimeout(@parserScanTimerId)\n          @parserScanTimerId = undefined\n\n        @parserScanTimerId = utils.delayCall 500, () =>\n          #--- CALLBACK BEGIN-------------------------------------------------\n          l.d.apply(l, l.r(context, 0, \"debug\", \"\", \">>>> (RE)PARSE FORM <<<<\"))\n          @parseForm()\n          @parserScanTimerId = undefined\n          #--- CALLBACK END --------------------------------------------------\n        , \"_onDOMChanged:delayCall error\"\n    #debug-end [callback|observer]: >>>>>> observer callback <<<<<<\n    return\n\n\n  onBeforeUnloadHandler: () =>\n    @inprogress = true # to avoid starting parser when beforeunload event fires\n    @parser.last_event_unload = true\n    @_beforeUnloadReq()\n    # NOTE: `true` means: Clear previous saved last_event on the\n    #                     background. It will be replaced with a new\n    #                     one when correspondent 'pagehide' event is\n    #                     fired\n    l.i(context.axt_fid + \":\", \"++++++ BEFOREUNLOAD EVENT ++++++\",\n      \"last_event_unload=\", @parser.last_event_unload,\n      \"last_event=\", dumper(@parser.last_event))\n    return\n\n\n  # check inputs after transition finishing\n  onTransitionEventHandler: (evt) =>\n    target = evt.target\n    #verbose [event.transition] \"EVENT #{evt.type}: \", evt, \\\n    #  \"propertyName=\", evt.propertyName, \"target=\", target\n    if (\n      evt.type == 'animationend' or\n        evt.propertyName in TRANSITION_PROPERTIES\n    ) and (\n      target.tagName == 'INPUT' or\n        target.getElementsByTagName('INPUT').length > 0\n    )\n      #debug [event.transition]: TRANSITION EVENT '#{evt.type}' on \\\n      #  #{evt.propertyName}: #{target.tagName}\\\n      #  #{if target.type then '[' + target.type + ']' else ''}\n      #  #{if target.id then '.' + target.id else ''}\\\n      #  #{if target.className then '#'+target.className else ''}\n      @_onDOMChanged()\n      @reposition_input_icons()\n\n\n  onSelectChangedHandler: (evt) =>\n    l.i(context.axt_fid + \":\", \"CA CHANGE: <SELECT> VALUE CHANGED!\", evt)\n    @$$chooseAccount @accounts_info\n\n\n  ###\n   * create and initialize @parser object with parsers and raters from extension\n   *\n   *  @param  {Object} info - object with two properties:\n   *                     parser_info: parsers and raters for different sites\n   *                     last_event: last event from previous page or null\n   *\n   * NOTE: if any error is occurs @parser will be equal to null\n   *\n   * @return null\n  ###\n  $$parserInit: (info) ->\n    try expect((info), \"\"\"info\"\"\") .to.be.an 'object' catch e then throw e\n    try expect((info), \"\"\"info\"\"\") .to.have.property 'parser_info' catch e then throw e\n    ##assert expect info .to.have.property 'last_event'\n\n    #HACK: TEMPORARY ===========================================================\n    document.body.addEventListener('dblclick',  @doubleClickEventHandler, true)\n    #HACK: TEMPORARY ===========================================================\n\n    @parser_init = true\n    @appliers = null\n    @default_appliers = null\n    @parser_fun = null\n    @iconsRepositionInterval = null\n\n    parser_info = info.parser_info\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$parserInit\"\"\"))\n    l.d.apply(l, l.r(context, 0, \"debug-param\", \"front|param|comm\", \"\"\"* PARAM info.parser_info:\"\"\", info.parser_info))\n    ##debug-param [comm]: info.last_event\n\n    if true #try\n      #@forms_info = null\n      if parser_info?\n        l.i(context.axt_fid + \"\"\": Object.keys(info.parser_info) =\"\"\", Object.keys(info.parser_info))\n\n        try expect((parser_info), \"\"\"parser_info\"\"\") .to.be.an 'object' catch e then throw e\n        try expect((parser_info.parser), \"\"\"parser_info.parser\"\"\") .to.be.a 'string' catch e then throw e\n        try expect(((parser_info.form_raters ? [])\\\n         ), \"\"\"(parser_info.form_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n        try expect(((parser_info.input_raters ? [])\\\n         ), \"\"\"(parser_info.input_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n        try expect(((parser_info.button_raters ? [])\\\n         ), \"\"\"(parser_info.button_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n        try expect(((parser_info.pre_raters ? [])), \"\"\"(parser_info.pre_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n        try expect(((parser_info.pre_page_raters ? [])\\\n         ), \"\"\"(parser_info.pre_page_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n        try expect(((parser_info.post_page_raters ? [])\\\n         ), \"\"\"(parser_info.post_page_raters ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n\n        prepRaters       = putils.prepRaters\n        check_inputs     = prepRaters parser_info.check_inputs\n        fill_forms       = prepRaters parser_info.fill_forms\n        pre_raters       = prepRaters parser_info.pre_raters\n        form_raters      = prepRaters parser_info.form_raters\n        input_raters     = prepRaters parser_info.input_raters\n        button_raters    = prepRaters parser_info.button_raters\n        post_raters      = prepRaters parser_info.post_raters\n        pre_page_raters  = prepRaters parser_info.pre_page_raters\n        post_page_raters = prepRaters parser_info.post_page_raters\n        parser_fun       = putils.prepParserFun parser_info.parser\n\n        @parser.init(\n          check_inputs\n          fill_forms\n          parser_fun,\n          form_raters,\n          input_raters,\n          button_raters,\n          pre_raters,\n          post_raters,\n          pre_page_raters,\n          post_page_raters,\n          #null, #restartParsing\n          @ga\n        )\n\n        @parserScanTimerId = undefined\n\n        @observer = new putils.FormsObserver(@_onDOMChanged)\n        l.i(\"\"\"#{context.axt_fid}: Set setVisibilityChangeCallback for #{futils.getFramePath()}\"\"\")\n        @iframeObserver.setVisibilityChangedCallback () =>\n          l.i(\"\"\"#{context.axt_fid}: Call setVisibilityChangeCallback for {futils.getFramePath()}\"\"\")\n          #console.error \"Ooh! axt_frameVisibility:\", window.axt_frameVisibility\n          if window.axt_frameVisibility\n            #console.error \"IFRAME IS VISIBLE\"\n            @_onDOMChanged()\n          else\n            #console.error \"IFRAME IS UN-VISIBLE\"\n            @onBeforeUnloadHandler()\n            @letSaveLoginInfo({}) # {} - is a pseudo-event (an empty object)\n          return\n\n        #NOTE: I think we do not want it here (restore last event in iframes)\n        #@$$restoreLastEventFromExt(info.last_event)\n\n        l.i(context.axt_fid + \"\"\": context.axt_fid =\"\"\", context.axt_fid)\n        if context.axt_fid != 0 #NOTE: for root iframe we have done it already\n          l.i(\"\"\"#{context.axt_fid}: register 'pagehide' and 'beforeunload' event handlers\"\"\")\n          window.addEventListener 'pagehide',     @letSaveLoginInfo\n          window.addEventListener 'beforeunload', @onBeforeUnloadHandler\n\n        document.body.addEventListener 'transitionend', \\\n          @onTransitionEventHandler\n\n        document.body.addEventListener 'animationend', \\\n          @onTransitionEventHandler\n\n        #restartParsing = () =>\n        #  #debug-begin: restartParsing\n        #  dom_changed = @observer.hasInputMutationsInDOM()\n        #  if dom_changed\n        #    #info!: !!!!=== DOM IS CHANGED! RESTART PARSER! ===!!!!!!\n        #    null\n        #  #debug-end: restartParsing\n        #  return dom_changed\n\n        @appliers = putils.prepAppliers(parser_info.appliers)\n        @default_appliers = putils.prepAppliers(parser_info.default_appliers)\n        try expect((@default_appliers), \"\"\"@default_appliers\"\"\") .to.be.an.instanceOf Array catch e then throw e\n\n        @observer.observe()\n        #@parser.checkInputs()\n        #@parseForm()\n        @_onDOMChanged()\n\n        # repaint input icons when elements are moved or resized\n        #putils.onResizeEvent(@reposition_input_icons)\n        window.addEventListener \"resize\", @reposition_input_icons\n        #TODO: add icon reposition on animationend\n        @iconsRepositionInterval = setInterval(@reposition_input_icons, 1000)\n\n    #catch err\n    #  url = new Url(document.location.href)\n    #  url = \"#{url.protocol}://#{url.host}\"\n\n    #  #error!: Parser initialization was interrupted with an error:\\\n    #  #        \\n#{err.stack ? err}\n    #finally\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"ApplierManager.$$parserInit\"\"\"))\n    @$$done \"Init\"\n\n\n  add_input_icons: () ->\n    l.gs(\"\"\"#{context.axt_fid}: >> add_inputs_icons\"\"\")\n    dbg = process.env.DEBUG\n    for tag, form_info of @forms_info?.forms\n      if dbg or tag in ['login', 'registration', 'change-password']\n        for tag, input of form_info.inputs\n          if dbg or tag in [\n            'login', 'password', 'email', 'phone', 'mobile', 'phone_prefix',\n            'country', 'firstName', 'lastName', 'old-password', 'new-password',\n            'confirm-password', 'confirm-new-password'\n          ]\n            putils.add_input_icon(input, tag, '?', dbg)\n    l.ge(\"\"\"#{context.axt_fid}: << add_inputs_icons\"\"\")\n    return\n\n\n  reposition_input_icons: () =>\n    if not @inprogress\n      if not @reposition_timeout?\n        # execute reposition as not often as ones per timeout msecs\n        @reposition_timeout = utils.delayCall 80, () =>\n          @reposition_timeout = null\n          for form_tag, form_info of @forms_info?.forms\n            for input_tag, input of form_info.inputs\n              putils.reposition_input_icon(input)\n        , \"reposition_input_icons error\"\n    return\n\n\n  # Check last event and if it is time then save login and password\n  #\n  # Decisions to save password are:\n  # 1. the last_event is \"submit\"|\"changed\" or \"login\"/\"registration\" button\n  #    was clicked or keydown[tab/enter] was pressed on \"login\"/\"registration\"\n  #    form's input\n  # 2. a form was changed (the form has a password and the password was\n  #    changed when submit event occurs or button was pressed; or the form has\n  #    any changes and keydown event activates submitting\n  # 3. keep input_values if last form and current form are the same\n  # 4. now we don't have the same form in the forms_info list\n  letSaveLoginInfo: (evt) =>\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|event.input\", \"\"\"letSaveLoginInfo\"\"\"))\n    _now = Date.now()\n\n    l.i(context.axt_fid + \":\", \"+++++++++++ letSaveLoginInfo: evt =\", evt)\n    l.i(context.axt_fid + \":\", \"@parser.last_event =\",\n     dumper @parser.last_event, null, null, null, null, null)\n    l.i(context.axt_fid + \":\", \"@parser.input_values =\",\n     dumper @parser.input_values, null, null, null, null, null)\n    l.i(context.axt_fid + \":\", \"++++++++++++++++\")\n\n    last_event = @parser.last_event\n    if last_event?\n      # non-active event becomes active when the page is changes less then\n      # 2 sec after creating and its target is input or select\n      is_active_event = last_event.is_active_event or (\n        evt? and\n        2000 > _now - last_event.timestamp and\n        last_event.target in ['input','select']\n      )\n\n      l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"SP1: is_active_event =\",\n        is_active_event))\n\n      if not is_active_event and @parser.prev_last_event?\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP2: use prev last_event\"\"\"))\n        last_event = @parser.prev_last_event\n\n      if 120000 < _now - last_event.timestamp\n        # event older then 2 min remove it\n\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP3: last_event expired - remove it\"\"\"))\n        @parser.last_event = @parser.prev_last_event = last_event = null\n        @parser.last_form = null\n\n    #input_vals = @parser.input_values\n    last_form_tag = last_event?.form_tag\n\n    l.i(context.axt_fid + \":\", \"SP4: forms_info =\", @forms_info,\n      \"last_event =\", last_event,\n      \"last_event.changed =\", last_event?.changed,\n      \"(_now - last_event?.timestamp) =\", _now - last_event?.timestamp)\n    if last_event? and last_event.changed\n      values = last_event.values\n      l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"SP5: last_form_tag =\",\n        last_form_tag))\n      if last_form_tag in ['login', 'registration', 'change-password']\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"SP6: last_event.has_password =\",\n          last_event.has_password, \"last_event.type =\", last_event.type))\n        l.i(context.axt_fid + \"\"\": last_event.target =\"\"\", last_event.target)\n        last_event_type = last_event.type.toLowerCase()\n        if (\n          last_event_type == 'submit' or (\n            last_event_type in ['click', 'keydown'] and\n            last_event.target == 'button' and\n            last_event.tag in [last_form_tag, 'submit'] # button must have the\n                                      # same tag as a form (e.g. \"login-login\")\n          ) or (\n            last_event_type in ['keydown', 'keyup', 'change'] and\n            last_event.target in ['input', 'hidden_input']\n          )\n        )\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"SP7\"))\n          l.i(context.axt_fid + \":\", \"evt =\", evt,\n            \"\\nevt.type = '#{evt?.type}'\",\n            \"\\n@forms_info.forms =\",\n            dumper(Object.keys(@forms_info?.forms ? {})),\n            \"\\nlast_event_unload =\", @parser.last_event_unload,\n            \"_now - last_event.timestamp =\", _now - last_event.timestamp,\n            \"frameId =\", futils.getFrameId())\n\n          l.i(context.axt_fid + \":\", \"SP8: @login_val =\", @login_val)\n          if values.login\n            login_value = values.login\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP9\"\"\"))\n            l.i(\"\"\"#{context.axt_fid}: login_value = '#{login_value}'\"\"\")\n            # we need it for extend google account: acc -> acc@gmail.com\n            if @login_val and @login_val.startsWith login_value\n              l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP10\"\"\"))\n              login_value = @login_val\n          else\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP11\"\"\"))\n            login_value = @login_val ? ''\n\n          l.i(\"\"\"#{context.axt_fid}: SP12: login_value = '#{login_value}'\"\"\")\n\n          if evt? and @parser.last_event_unload\n            l.i(\"\"\"#{context.axt_fid}: SP10: values = #{dumper values}\"\"\")\n\n            #p.3: now we don't have the same form in the forms_info list\n            #NOTE: login can be undefined or empty (for registration forms)\n\n            if (\n              login_value or\n              values.password or\n              values.userName or\n              values.email or\n              values.phone\n            )\n              values.login = login_value\n              l.d.apply(l, l.r(context, 0, \"debug\", \"letSaveLoginInfo|extra|label\", \"\"\"SP11: SEND LAST_EVENT TO THE BACKGROUND TO COOKIE IT\\\"\"\"\"))\n              l.i(context.axt_fid + \"\"\": values =\"\"\", values)\n              @_storeLastEventReq last_event\n\n              if last_event.saving_in_progress\n                @_cancelLoginFormSavingReq(last_event)\n\n              l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP12: CLEAR last_event & last_form\"\"\"))\n              @parser.last_event = null\n              @parser.last_form = null\n\n          else if not last_event.saving_in_progress and (\n            (\n              not evt? and (\n                not (\n                  'login' of @forms_info.forms or\n                   'registration' of @forms_info.forms\n                ) or not (\n                  last_event.form_tag == 'login' and (\n                    @forms_info.forms['login']?.inputs['password']? or\n                    @forms_info.forms['login']?.inputs['confirm-password']?\n                  ) or\n                  @forms_info.forms['registration']?.inputs['password']? or\n                  @forms_info.forms['registration']?.inputs['confirm-password']?\n                )\n              )\n            ) or (\n              evt? and not @parser.last_event_unload\n            )\n          )\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP13\"\"\"))\n            password_value = values.password ? ''\n            if (\n              last_event.has_password and\n              last_event.password_changed and\n              password_value\n            )\n              l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"SP14: values= \",\n                dumper values))\n\n              #p.3: now we don't have the same form in the forms_info list\n              #NOTE: login can be undefined or empty (for registration forms)\n\n              l.i(\"\"\"#{context.axt_fid}: SP15: login_value ='#{login_value}', login_val = '#{@login_val}', password_value = '#{password_value}'\"\"\")\n\n              if (\n                # Login CAN be empty for some reasons BUT\n                # password cannot be (situation with microsoftonline.com is\n                # an exception)\n                (\n                  last_form_tag == 'login' and password_value\n                ) or (\n                  last_form_tag == 'registration' and\n                  password_value and (\n                    login_value or\n                    values.userName or\n                    values.email or\n                    values.phone\n                  )\n                ) or (\n                  last_form_tag == 'change-password' and password_value\n                )\n              )\n                l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP16: SAVE FORM !!!!!!! SAVE FORM: #{dumper(values)}\"\"\"))\n                values.login = login_value\n                values.password = password_value\n\n                #@_storeLastEventReq last_event\n                @_saveLoginFormReq 5000, last_event\n\n                #vk: new approach: we do not need to clear last event when start\n                #    saving\n                ##verbose [letSaveLoginInfo|label]: SP17: \\\n                ##  CLEAR last_event & last_form\"\n                #@parser.last_event = null\n                #@parser.last_form = null\n          #else\n          #  null\n          #  #verbose [letSaveLoginInfo|label]: SP18: KEEP LAST FORM\n          #  #  p.4: keep input_values if last form and current form are the\n          #  #  same\n        else # ??????\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP17: CLEAR last_event & last_form\"\"\"))\n          @parser.last_event = null\n          @parser.last_form = null\n\n      else if last_event.has_password\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|letSaveLoginInfo|extra|label\", \"\"\"SP19: Unknown form with password\"\"\"))\n        l.e.apply(l, l.r(context, 0, \"error\", \"\", \"UNKNOWN FORM WITH PASSWORD IS TRYING TO BE SUBMITTED!\",\n           dumper(last_event)))\n        #TODO: send ga event here\n        null\n\n        #NOTE: it does't work correctly for some sites, where DOM tree changes\n        #      several times before changing the page. In this case it would be\n        #      better to keep lastEvent for future processing. But for the\n        #      other hand is would be the best place to stop propagating\n        #      last_event there. (???)\n        # #verbose [letSaveLoginInfo|label] \"SP20: CLEAR last_event & last_form\"\n        # @_storeLastEventReq null\n        # @parser.last_event = null\n        # @parser.last_form = null\n\n    #if evt?\n    #if @parser.last_event?.urls?\n    #  #verbose [letSaveLoginInfo|label]: SP21: CLEAR Initial last_event and \\\n    #  #  last_form\n    #  @_storeLastEventReq null\n    #  @parser.last_event = null\n    #  @parser.last_form = null\n\n    ##VERBOSE! [event.input]: if evt?\n    #  #warn! [event.input]: SP22: EXIT letSaveLoginInfo WITHOUT SAVING\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|event.input\", \"\"\"letSaveLoginInfo\"\"\"))\n    return\n\n\n  parseForm: () ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$parseForm\"\"\"))\n    try\n      # Save parser result as a body attribute\n      # Used for testing of parser behaviour\n\n      do removeAxtAttributes\n\n      @inprogress = true\n      @DOMchanged = false\n      document.body.axt_stamp = @parse_start_time = performance.now()\n      l.i(context.axt_fid + \":\", \"parseForm: @parse_start_time =\", @parse_start_time)\n\n      @parser_run += 1\n      #@ga.set\n      #  parser_run:    @parser_run\n      #  page_state:    'unknown'\n      #  form_selector: ''\n      #  form_ptype:    ''\n\n      # parser scans the whole page and return an array of forms tagged\n      # with keywords: 'login', 'registration', 'logged-in', etc.\n      # See /parsers/* directory for details\n      #try\n\n      l.l.apply(l, l.r(context, 0, \"info\", \"front|parser\", 'parseForm: START!'))\n      #do @parser.scanForms # reread forms and set 'changed' property\n\n      l.l.apply(l, l.r(context, 0, \"info\", \"front|comm\", \"Init parser\"))\n      @parser.getFormsInfo  (forms_info) =>\n        l.i(context.axt_fid + \"\"\": * PARAM forms_info:\"\"\", forms_info)\n\n        if 'credentials' of forms_info\n          @_importCredentialsReq forms_info\n          @$$done \"cancel applier_manager.parseForm (save imported credentials)\"\n          return\n\n        @forms_info = forms_info\n\n        if not @forms_info?\n          @$$done \"cancel applier_manager.parseForm (forms_info == null)\"\n          return\n\n        if @DOMchanged\n          @$$done \"cancel applier_manager.parseForm (DOM changed!)\"\n          return\n\n        #@forms_info = null\n        last_event = @parser.last_event\n        _now = Date.now()\n\n        if last_event?\n          if not last_event.is_active_event and @parser.prev_last_event?\n            last_event = @parser.prev_last_event?\n\n          if last_event? and 120000 < _now - last_event.timestamp # 2min\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front|parserForm|extra|label\", \"\"\"PF2: clear expired last event\"\"\"))\n            last_event = @parser.last_event = null\n            @parser.last_form = null\n\n        l.d.apply(l, l.r(context, 0, \"debug-val\", \"front|last_event|extra\", \"\"\"last_event =\"\"\", last_event))\n        if last_event?\n          l.i(context.axt_fid + \":\", \"PF3: last_event =\", dumper(last_event),\n           \"\\nforms.tags =\", Object.keys(@forms_info.forms),\n           \"\\n@forms_info.forms =\", Object.keys(@forms_info.forms))\n\n          # if one of login or registration forms is present on the page\n          # and they have recognised visible password field inside them, decide\n          # that we haven't logged in yet\n          if ( # is non-logged-in\n            'login' of @forms_info.forms or\n            'registration' of @forms_info.forms or\n            'reset-password' of @forms_info.forms\n          )\n            l.i(\"\"\"#{context.axt_fid}: PF4\"\"\")\n            if 'login' == last_event.form_tag and 'login' of @forms_info.forms\n              l.i(\"\"\"#{context.axt_fid}: PF5\"\"\")\n              @parser.last_event_urls ?= []\n              if context.axt_url not in @parser.last_event_urls\n                l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|extra|label\", \"\"\"PF6: add current url to the urls chain\"\"\"))\n                @parser.last_event_urls.push context.axt_url\n                last_event.urls = @parser.last_event_urls.slice(0)\n                l.i(context.axt_fid + \"\"\": last_event.urls =\"\"\", last_event.urls)\n\n            if last_event.has_password\n              # stop saving auth-info when previous form was login/registration\n              # with visible password field and current form is login/registration\n              if last_event.saving_in_progress\n                l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|label|extra\", \"\"\"PF7\"\"\"))\n                @_cancelLoginFormSavingReq(last_event)\n\n                #NOTE: we may need last_event when choice an account later.\n                #      If last event is from login form and current form is\n                #      login one too, than may be only password must be inserted\n                #      as so login field can be already be filled\n                ##verbose [parseForm|label]: PF8: CLEAR last_event and last_form\n                #@parser.last_event = null\n                #@parser.prev_last_event = null\n                #@parser.last_form = null\n          else\n            l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|extra|label\", \"\"\"PF10: let save login info\"\"\"))\n            @letSaveLoginInfo()\n        else if (\n          'login' of @forms_info.forms or\n          'registration' of @forms_info.forms or\n          'reset-password' of @forms_info.forms\n        )\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|label|label\", \"\"\"PF11: stop saving if registration/login forms appear\"\"\"))\n          @_cancelLoginFormSavingReq(last_event)\n\n        try expect(((@forms_info)), \"\"\"(@forms_info)\"\"\") .to.be.an 'object' catch e then throw e\n        try expect(((@forms_info)), \"\"\"(@forms_info)\"\"\") .to.have.property('logged_in')\\\n          .which.is.a 'boolean' catch e then throw e\n        try expect((@forms_info), \"\"\"@forms_info\"\"\") .to.have.property('current_step')\\\n          .which.is.a('number').and.is.at.least(0) catch e then throw e\n        try expect((@forms_info), \"\"\"@forms_info\"\"\") .to.have.property('steps')\\\n          .which.is.a('number').and.is.at.least(0) catch e then throw e\n        try expect(((@forms_info.current_step <= @forms_info.steps)\\\n         ), \"\"\"(@forms_info.current_step <= @forms_info.steps)\"\"\") .to.be.true catch e then throw e\n        try expect((@forms_info), \"\"\"@forms_info\"\"\") .to.have.property('forms')\\\n          .which.is.an 'object' catch e then throw e\n\n        l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|extra\", \"\"\"PF12: DONE\"\"\"))\n\n        @add_input_icons()\n\n        tags = (tag for tag of @forms_info.forms)\n        l.l.apply(l, l.r(context, 0, \"info\", \"front|comm\", \"\"\"forms tags: #{dumper tags}\"\"\"))\n\n#        log_form = @forms_info?.forms?.login\n#        if log_form?\n#          login_input = log_form.inputs?.login\n#          password_input = log_form.inputs?.password\n#          if password_input? or login_input?\n#            @ga.send 'event', 'parser', 'found login form', dumper(tags)\n#        else\n#          #info! \"** No Login forms are found ***\"\n#          @ga.send 'event', 'parser', 'no login forms are found', \\\n#            dumper(tags)\n\n#        reg_form = @forms_info?.forms?.registration\n#        if reg_form?\n#          if reg_form.inputs?.password?\n#            @ga.send 'event', 'parser', 'found registration form', dumper(tags)\n#        else\n#          #info! \"** No Reg forms are found ***\"\n#          @ga.send 'event', 'parser', 'no registration forms are found', \\\n#            dumper(tags)\n\n        l.d.apply(l, l.r(context, 0, \"debug-val\", \"front|comm\", \"\"\"@forms_info =\"\"\", @forms_info))\n        if @forms_info.steps # and not @forms_info?.logged_in\n          # Parser returns array with one or more founded forms. Each form is\n          # tagged by tags (e.g. 'login', 'registration', etc.)\n          # Then it sends the tag list to extManager. It must select one of\n          # them and return username(s) (if they were registered on this site)\n          # or a name(s) of registration profile(s) (if they exist).\n          # Registration profile is a set of fields (name, address, email,\n          # phone, etc.), which are usually used for filling registration forms\n\n          #HACK: if we have verify form with mfa-code, use 'login' tag:\n          if (\n            ('login' not in tags) and (\n              (\n                ('verify' in tags) and\n                @forms_info.forms?['verify']?.inputs['mfa-code']?\n              ) or (\n                ('mfa-setup' in tags) and\n                  @forms_info.forms?['mfa-setup']?.inputs['mfa-code']?\n              )\n            )\n          )\n            tags.splice(tags.indexOf('verify'), 1, 'login')\n            tags.splice(tags.indexOf('mfa-setup'), 1, 'login')\n\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front|parseForm|extra\", \"\"\"PF13: get credentials for given form (#{tags})\"\"\"))\n          @_getFormsInfoReq tags\n        else\n          l.l.apply(l, l.r(context, 0, \"info-val\", \"front|comm\", \"\"\"document.forms =\"\"\", document.forms))\n          l.w.apply(l, l.r(context, 0, \"warn\", \"front|comm\", \"!!! NO FORMS ARE FOUND OR ALREADY LOGGED IN!!!\"))\n          #@ga.send 'event', 'parser', 'no any forms are found', dumper(tags)\n\n          # It's not a login or registration page.\n          # It prevent us of doing autoApply when login page is reached.\n          null #FIX: fix it: uncomment cookie setting\n          # Cookies.set AUXOFT_COOKIE_NAME, '1'\n          @$$done \"applier_manager.parseForm\"\n\n    catch err\n      @inprogress = false\n      url = new Url(document.location.href)\n      url = \"#{url.protocol}://#{url.host}\"\n      msg = \"Parser initialization for #{url} was interrupted with \" + \\\n            \"an error:\\n#{err.stack ? err}\"\n\n      l.e.apply(l, l.r(context, 0, \"error\", \"\", msg))\n      @ga.send  'exception',\n        exDescription: msg\n        exFatal: true\n\n    finally\n      l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"ApplierManager.$$parseForm\"))\n    return\n\n\n  ###\n   * select account and request information about it\n   *\n   * @param  {Object} accounts_info - login and/or registration accounts\n   *                                  login accounts - the list of all userNames\n   *                                  registered in the site with given url\n   *                                  registration accounts - the list of\n   *                                  names of blocks of personal information\n   *                                  used for form filling\n   * @return null\n   *\n   * accounts_info looks like this:\n   * {login: [\n   *           {login, password, passwordProvided, email, phone_prefix, phone, \\\n   *            userName,...},\n   *            ...\n   *         ],\n   *  registration: [{Object}, {Object}, ....]\n   * }\n   * NOTE: accounts are retrieved and returned only for existed forms ('login',\n   * 'registration')\n  ###\n  $$chooseAccount: (accounts_info) ->\n    try expect((accounts_info), \"\"\"accounts_info\"\"\") .to.exist.and.to.be.an 'object' catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n    l.i(context.axt_fid + \":\", \"accounts_info =\",\n      dumper accounts_info, 10, false, false, [], [])\n    l.i(context.axt_fid + \"\"\": * PARAM @forms_info:\"\"\", @forms_info)\n\n    l.i(\"\"\"#{context.axt_fid}: CA1: last_event = #{dumper @parser.last_event}\"\"\")\n\n    #SPECIAL CASE: If tag is 'login' and 'login' input is readonly, use\n    #value of this input as a 'login' account, even if we have multiple accounts\n    #for this url\n    l.i(context.axt_fid + \":\", \"CA2: @parser.input_values =\",\n      dumper(@parser.input_values))\n    if @DOMchanged\n      @$$done \"cancel applierManager.chooseAccount (DOM was changed!)\"\n    else\n      @accounts_info = accounts_info\n\n      tag = ''\n      account = null\n      login_val = null\n      login_val_re = null\n      change_password_mode = false\n      if @forms_info.forms?['login']?\n        login_form_info = @forms_info.forms?['login']\n      else\n        login_form_info = @forms_info.forms?['change-password']\n        change_password_mode = true\n\n      login_input = null\n      strong_login = false\n\n      #HACK: to start process verify or mfa-setup forms (to support 2FA forms)\n      if not login_form_info\n        verify_form_info = @forms_info.forms?['verify'] ?\n          @forms_info.forms?['mfa-setup']\n\n        if verify_form_info?\n          if verify_form_info.inputs['mfa-code']?\n            login_form_info = verify_form_info\n\n      acc_lists = {}\n      l.i(context.axt_fid + \":\", \"CA3: login_form_info =\", login_form_info)\n      if login_form_info?\n        login_acc_info = accounts_info['login'] ? []\n        # create an object with separated lists grouped by properties.\n        # e.g. we have two accounts:\n        # [{login: \"aaa\", \"email\": \"aaa@m.com\"},\n        # {login: \"bbb\", \"email: \"bbb@m.com\"}],\n        # we convert this structure to this one:\n        #   {\"login\": [\"aaa\", \"bbb\"],\n        #    \"email\": ['aaa@m.com\", \"bbb.m.com\"]}\n        field_names = {}\n        # create superset of all names of fields in all accounts\n        login_acc_info.forEach (acc) ->\n          for k of acc\n            field_names[k] = true\n        field_names = Object.keys(field_names)\n\n        acc_lists = login_acc_info.reduce (dict, acc) ->\n          for field_name in field_names\n            dict[field_name] ?= []\n            val = acc[field_name]\n            val = val.toLowerCase() if typeof(val) == 'string'\n            dict[field_name].push val\n          dict\n        , {}\n        l.i(context.axt_fid + \":\", \"CA4: acc_lists=\", acc_lists)\n\n        login_input = login_form_info.inputs['login']\n        old_password_input = login_form_info.inputs['old-password']\n        password_input = login_form_info.inputs['password'] ? old_password_input\n        mfa_input = login_form_info.inputs['mfa-code']\n\n        is_login_visible = login_input? and utils.isElementVisible(login_input)\n        l.i(context.axt_fid + \":\", \"CA5: login_input.visibility =\", is_login_visible)\n\n        login_input_readonly = (\n          (if login_input? then !!login_input.hasAttribute('readonly') \\\n           else true\n          ) or\n          not is_login_visible  # invisible login input is considered to be\n                                # readonly\n        )\n        l.i(context.axt_fid + \":\", \"login_input_readonly =\",  login_input_readonly)\n\n        # when login is a phone number normalize it (remove spaces and ())\n        # login value from previous page:\n        login_predict = @parser.input_values.login?['login'] ? ''\n        l.i(context.axt_fid + \":\", \"CA6: login_predict = '#{login_predict}',\",\n          \"login_input =\", login_input)\n\n        last_event = @parser.last_event\n        last_event_type = last_event?.type.toLowerCase()\n        # if login field is readonly, or last_event is from previous\n        # login form without password field then auto-fill the password\n        # field here:\n        l.i(context.axt_fid + \":\", \"CA7: last_event =\", last_event)\n        if (\n          login_input_readonly or (\n            last_event? and\n            last_event.form_tag == 'login' and\n            # not last_event.has_password and\n            not last_event.values?.password and (\n              last_event_type == 'submit' or (\n                last_event_type in ['click', 'keydown'] and\n                last_event.target == 'button' and\n                last_event.tag in ['login', 'submit'] # button must have the\n                # same tag as a form (e.g. \"login-login\")\n              ) or (\n                last_event_type in ['keydown', 'keyup', 'change'] and\n                last_event.target in ['input', 'hidden_input']\n              )\n            )\n          )\n        )\n          l.i(context.axt_fid + \":\", \"CA8\")\n          login_input_readonly = true\n          if login_predict\n            l.i(context.axt_fid + \":\", \"CA9\")\n            login_val = login_val_re = login_predict\n          else\n            l.i(context.axt_fid + \":\", \"CA10\")\n            login_val = login_val_re = login_input?.value\n\n        if is_login_visible\n          strong_login = true\n          tag = 'login'\n          l.i(context.axt_fid + \":\", \"CA11: login_input.tagName =\",\n            login_input.tagName)\n\n          if utils.isSelectInput(login_input)\n            # login input is a pull down list. Use the value user has chosen\n            login_input.addEventListener 'change',  @onSelectChangedHandler\n\n            login_val = login_input.selectedOptions[0]?.text\n            login_val_re = login_val.replace(/\\*+/g, '.*')\n            l.i(context.axt_fid + \":\", \"CA12: login is <select> element\",\n              \"login_val =\", login_val)\n\n          l.i(context.axt_fid + \":\", \"CA13: login_val =\", login_val)\n\n        else #if not login_input? or not utils.isElementVisible(login_input)\n          l.i(context.axt_fid + \":\", \"CA14: password_input =\", password_input,\n           \"mfa_input =\", mfa_input)\n          if password_input? or mfa_input?\n            login_predict_list = []\n\n            # may be there is the second step of two steps login form, where\n            # they have an invisible login input with correct login value.\n            # But sometimes we found wrong hidden input as a login input.\n            # To fix it we have to compare found value with already saved\n            # accounts. If they match (or saved account has '' (empty) name)\n            # then we'll use this hidden login input (set strong_login to true)\n\n            last_event = @parser.last_event\n            last_event_type = last_event?.type.toLowerCase()\n            # if login field is readonly, or last_event is from previous\n            # login form without password field then auto-fill the password\n            # field here:\n            l.i(context.axt_fid + \":\", \"CA15: last_event =\", last_event)\n            if (\n              last_event? and\n              (last_event.values.login or login_predict) and\n              last_event.form_tag == 'login' and\n              # not last_event.has_password and\n              (not last_event.values?.password or mfa_input?) and (\n                last_event_type == 'submit' or (\n                  last_event_type in ['click', 'keydown', 'keyup'] and\n                    last_event.target == 'button' and\n                    last_event.tag in ['login', 'submit'] # button must have the\n                  # same tag as a form (e.g. \"login-login\" or has the 'submit'\n                  # tag)\n                ) or (\n                  last_event_type in ['keydown', 'keyup', 'change'] and\n                  last_event.target in ['input', 'hidden_input']\n                )\n              )\n            )\n              l.i(\"\"\"#{context.axt_fid}: CA16: get login from last_event\"\"\")\n              tag = 'login'\n              login_val = last_event.values.login || login_predict\n              login_predict_list.push login_val\n              l.i(context.axt_fid + \"\"\": login_val =\"\"\", login_val)\n\n            form = login_form_info.form\n            l.i(context.axt_fid + \":\", \"CA17: form=\", form)\n\n            # check labels above password field for login or other account's\n            # dependent information (e.g. userName, firstName, lastName, etc.)\n            if form == document.body\n              login_button = login_form_info.buttons['login']\n              if login_button?\n                form = utils.getCommonBlock(\n                  password_input,\n                  login_button\n                ) ? form\n                l.i(context.axt_fid + \":\", \"CA18: form=\", form)\n\n            if form?\n              parent = form?.parentElement\n              if putils.parentHasOnlyOneChild(parent, form, window.axt_forms)\n                form = parent\n                l.i(context.axt_fid + \":\", \"CA19: form=\", form)\n\n            if form?\n              parent = form?.parentElement\n              if putils.parentHasOnlyOneChild(parent, form, window.axt_forms)\n                form = parent\n                l.i(context.axt_fid + \":\", \"CA20: form=\", form)\n\n            labels = putils.getFormTitle(form).concat(\n              putils.getAltInputLabels(\n                password_input ? mfa_input, form, true, true, true, true, false\n              )\n            )\n            l.i(context.axt_fid + \":\", \"CA21: labels=\", labels)\n\n            l.i(context.axt_fid + \":\", \"login is unvisible element. Value =\",\n              login_input?.value)\n            login_input_vals = if login_val? then [login_val] else []\n\n            l.i(context.axt_fid + \":\", \"login_form_info.form =\",\n              login_form_info.form)\n            l.i(context.axt_fid + \":\", \"login_form_info.form?.hidden_inputs =\",\n              login_form_info.form?.hidden_inputs)\n            login_input_vals.push(login_input.value) if login_input?.value\n            login_input_vals = login_input_vals.concat(\n              (login_form_info.form.hidden_inputs.winners['login'] ? []).concat(\n                login_form_info.form.hidden_inputs.winners['email'] ? []\n              ).map(\n                (input) -> input.value\n              )\n            )\n            l.i(context.axt_fid + \":\", \"CA22: login_input_vals =\", login_input_vals)\n\n            # if hidden inputs recognised as 'login' has real login value\n            # from account_list, then decide we have a strong login there\n            login_list = acc_lists['login'] ? []\n            l.i(context.axt_fid + \":\", \"CA23: login_list =\", login_list)\n\n            # get all login candidates (among hidden inputs) and compare\n            # them with email and phone templates. Return only those,\n            # which fit these conditions\n            login_predict_list = login_input_vals.reduce (dict, val) ->\n              if val\n                normalized_val = putils.normalizePhone(val)\n\n                for login in login_list\n                  if (\n                    login.startsWith(val) or\n                    putils.normalizePhone(login) == normalized_val\n                  )\n                    dict.push login\n                    strong_login = true\n                    login_val = login\n                    tag = 'login'\n                    l.i(\"\"\"#{context.axt_fid}: CA24: login_val: #{login}\"\"\")\n                    return dict\n\n                for label in labels\n                  label = (label ? '').toLowerCase()\n                  putils.EMAILS_RE.lastIndex = 0\n                  matched = putils.EMAILS_RE.exec(label)\n                  l.i(context.axt_fid + \":\", \"CA25: label =\", label,\n                    \"matched =\", matched)\n                  if matched?\n                    l.i(\"\"\"#{context.axt_fid}: CA26: EMAILS are found\"\"\")\n                    while matched?\n                      m = matched[1]\n                      if m.startsWith(val)\n                        dict.push m\n                        strong_login = true\n                        login_val = m\n                        tag = 'login'\n                        l.i(\"\"\"#{context.axt_fid}: CA27: login_val: #{m}\"\"\")\n                        return dict\n                      matched = putils.EMAILS_RE.exec(label)\n                  else\n                    l.i(\"\"\"#{context.axt_fid}: CA28: try PHONE NUMBERS\"\"\")\n                    putils.PHONES_RE.lastIndex = 0\n                    matched = putils.PHONES_RE.exec(label)\n                    while matched?\n                      normalized_label = putils.normalizePhone(matched[1])\n                      if normalized_label.endsWith(normalized_val)\n                        l.i(\"\"\"#{context.axt_fid}: CA29: login_val: #{val}\"\"\")\n                        dict.push val\n                        login_val = val\n                        strong_login = true\n                        tag = 'login'\n                        return dict\n                      matched = putils.PHONES_RE.exec(label)\n\n                if putils.EMAIL_RE.test(val) or putils.PHONE_RE.test(val)\n                  dict.push val.toLowerCase()\n\n              dict\n            , login_predict_list\n            l.i(context.axt_fid + \":\", \"CA30: login_predict_list = \",\n              login_predict_list)\n\n            l.i(context.axt_fid + \":\", \"strong_login\", strong_login,\n              \"login_val =\", login_val)\n            if not (login_val and strong_login)\n              _getFitLoginVal = (\n                name_list,\n                label_words,\n                normalize_phone = false\n              ) ->\n                l.gs(\"\"\"#{context.axt_fid}: >> _getFitLoginVal\"\"\")\n                l.i(context.axt_fid + \"\"\": * PARAM name_list:\"\"\", name_list)\n                l.i(context.axt_fid + \"\"\": * PARAM label_words:\"\"\", label_words)\n                l.i(context.axt_fid + \"\"\": * PARAM normalize_phone:\"\"\", normalize_phone)\n                data_list = null\n                name_list.forEach (name) ->\n                  if not data_list?\n                    #console.warn \"1:\", name, acc_lists[name] ? []\n                    data_list = (\n                      acc_lists[name]?.map (m) ->\n                        if normalize_phone\n                          [putils.normalizePhone(m)]\n                        else\n                          [m]\n                    ) ? []\n                  else\n                    #console.warn \"2:\", data_list, name, acc_lists[name] ? []\n                    if normalize_phone\n                      data_list = utils.zip(data_list, (\n                        acc_lists[name]?.map (m) -> putils.normalizePhone(m)\n                      ) ? [],\n                        (a, b) ->\n                          if a?\n                            if b?\n                              [a[0] + b]\n                            else\n                              a\n                          else\n                            if b? then [b] else undefined\n                      )\n                    else\n                      data_list = utils.zip(data_list, acc_lists[name] ? [],\n                        (a, b) ->\n                          if a?\n                            a.push(b) if b?\n                            a\n                          else\n                            if b? then [b] else undefined\n                      )\n\n                if normalize_phone\n                  l.i(context.axt_fid + \":\", \"3: data_list =\", data_list)\n                  for info, idx in data_list\n                    l.i(context.axt_fid + \"\"\": info, idx =\"\"\", info, idx)\n                    if label_words.some( (label) -> label.endsWith(info[0]) )\n                      l.i(context.axt_fid + \":\", \"4: return\", login_list[idx])\n                      l.ge(\"\"\"#{context.axt_fid}: << _getFitLoginVal\"\"\")\n                      return login_list[idx]\n                else\n                  l.i(context.axt_fid + \":\", \"5: data_list =\", data_list)\n                  for info, idx in data_list\n                    l.i(context.axt_fid + \"\"\": info, idx =\"\"\", info, idx)\n                    if utils.isInList(info, label_words)\n                      l.i(context.axt_fid + \":\", \"6: return\", login_list[idx])\n                      l.ge(\"\"\"#{context.axt_fid}: << _getFitLoginVal\"\"\")\n                      return login_list[idx]\n\n                l.i(context.axt_fid + \":\", \"7: return null\")\n                l.ge(\"\"\"#{context.axt_fid}: << _getFitLoginVal\"\"\")\n                return null\n\n              l.i(context.axt_fid + \"\"\": labels =\"\"\", labels)\n              for label in labels\n                label = label.toLowerCase()\n                l.i(context.axt_fid + \"\"\": label =\"\"\", label)\n\n                putils.EMAILS_RE.lastIndex = 0\n                matched = putils.EMAILS_RE.exec(label)\n                if matched?\n                  email_labels = []\n                  while matched?\n                    email_labels.push matched[1]\n                    matched = putils.EMAILS_RE.exec(label)\n\n                  l.i(\"\"\"#{context.axt_fid}: CA31: email_labels = #{dumper email_labels}\"\"\")\n                  if (login_val = _getFitLoginVal(['login'], email_labels))\n                    l.i(\"\"\"#{context.axt_fid}: CA32\"\"\")\n                    strong_login = true\n                  else if (login_val = _getFitLoginVal(['email'], email_labels))\n                    l.i(\"\"\"#{context.axt_fid}: CA33\"\"\")\n                    strong_login = true\n\n                  login_predict_list = login_predict_list.concat email_labels\n                  break\n                else\n                  putils.PHONES_RE.lastIndex = 0\n                  matched = putils.PHONES_RE.exec(label)\n                  if matched?\n                    phone_labels = []\n                    while matched?\n                      phone_labels.push matched[1]\n                      matched = putils.PHONES_RE.exec(label)\n\n                    l.i(\"\"\"#{context.axt_fid}: CA34: phone_labels = #{dumper phone_labels}\"\"\")\n\n                    norm_phone_labels = phone_labels.map (m) ->\n                      putils.normalizePhone(m)\n\n                    l.i(\"\"\"#{context.axt_fid}: CA35: norm_phone_labels = #{dumper norm_phone_labels}\"\"\")\n                    if login_val = _getFitLoginVal(\n                      ['login'], norm_phone_labels, true\n                    )\n                      l.i(\"\"\"#{context.axt_fid}: CA36\"\"\")\n                      strong_login = true\n                    else if login_val = _getFitLoginVal(\n                      ['phone_prefix', 'phone'], norm_phone_labels, true\n                    )\n                      l.i(\"\"\"#{context.axt_fid}: CA37\"\"\")\n                      strong_login = true\n\n                    login_predict_list = login_predict_list.concat phone_labels\n                    break\n\n                label_words = putils.splitString(label)\n                l.i(context.axt_fid + \":\", \"CA38: label_words =\", label_words)\n\n                if (login_val = _getFitLoginVal(['login'], label_words))\n                  l.i(\"\"\"#{context.axt_fid}: CA39: login (not email) was found in labels\"\"\")\n                  strong_login = true\n                else if (login_val = _getFitLoginVal(['userName'], label_words))\n                  l.i(\"\"\"#{context.axt_fid}: CA40: userName was found in labels\"\"\")\n                  strong_login = true\n                else if (\n                  login_val = _getFitLoginVal(['fullName'], label_words)\n                )\n                  l.i(\"\"\"#{context.axt_fid}: CA41: fullName was found in labels\"\"\")\n                  strong_login = true\n                else if (\n                  login_val = _getFitLoginVal(\n                    ['firstName', 'lastName'],\n                    label_words\n                  )\n                )\n                  l.i(\"\"\"#{context.axt_fid}: CA42: fullName (compound from first and last names) was found in labels\"\"\")\n                  strong_login = true\n                else if (\n                  login_val = _getFitLoginVal(['firstName'], label_words)\n                )\n                  l.i(\"\"\"#{context.axt_fid}: CA43: only firstName was found in labels\"\"\")\n                  strong_login = true\n                else if (\n                  login_val = _getFitLoginVal(['lastName'], label_words)\n                )\n                  l.i(\"\"\"#{context.axt_fid}: CA44:  only lastName was found in \\\\\"\"\")\n                  strong_login = true\n\n                break if strong_login\n\n            if not login_val and login_predict_list.length > 0\n              # get the prediction's value which is mentioned most of all\n              l.i(\"\"\"#{context.axt_fid}: CA45\"\"\")\n              cnt_dict = login_predict_list.reduce (a, i) ->\n                a[i] ?= 0\n                a[i] += 1\n                a\n              , {}\n              l.i(context.axt_fid + \":\", \"CA46: cnt_dict=\", cnt_dict)\n              val = ([k, v] for k, v of cnt_dict)\n              l.i(context.axt_fid + \":\", \"CA47: val=\", val)\n              val.sort (a, b) -> b[1] - a[1]\n              l.i(context.axt_fid + \":\", \"CA48: val=\", val)\n              login_val = val[0][0]\n              strong_login = true\n\n            if not (login_val and strong_login) and change_password_mode\n              l.i(context.axt_fid + \":\", \"CA48-1, login_list =\", login_list)\n\n              # for change password form if we have only one account in the\n              # acc_list, we use it on default (suppose that we can enter only\n              # using this account to change a password). If we have more then\n              # one account in the account list we try to search a login string\n              # everywhere in the page\n              if login_list.length == 1\n                login_val = login_list[0]\n                strong_login = true\n                l.i(context.axt_fid + \":\", \"CA48-2: login_val =\", login_val)\n              else\n                for login_name in login_list\n                  if textIsInPage(login_name)\n                    login_val = login_name\n                    strong_login = true\n                    l.i(context.axt_fid + \":\", \"CA48-3: login_val =\", login_val)\n                    break\n\n          l.i(context.axt_fid + \":\", \"CA49: strong_login=\", strong_login,\n            \"login_val=\", login_val,)\n          login_val_re = login_val\n\n        l.i(context.axt_fid + \":\", \"CA50: login_val=\", login_val,\n          \"login_val_re=\", login_val_re)\n        if login_acc_info?\n          acc_count = login_acc_info.length\n          l.i(context.axt_fid + \":\", \"CA51: login_acc_info =\", login_acc_info)\n          if acc_count == 1 and not login_acc_info[0].login\n            # if we have only one saved account with empty login, always use it\n            account = login_acc_info[0]\n            tag = 'login'\n            l.i(context.axt_fid + \":\", \"CA52: account =\", account)\n          else if login_val\n            l.i(context.axt_fid + \":\", \"CA53\")\n            # We have login candidate. Use it if it's among the saved accounts\n            login_val_re = RegExp(\"^#{utils.reEscape login_val_re}$\", \"i\")\n            accs = login_acc_info.reduce (_list, acc) ->\n              found_acc = null\n              l.i(context.axt_fid + \":\", \"CA54: acc.login =\", acc.login)\n              acc_login = acc[\"login\"]\n              if acc_login and login_val_re.test(acc_login)\n                l.i(context.axt_fid + \":\", \"CA55: acc=\", acc)\n                found_acc = acc\n              else if acc.isLoginFinal == false\n                # Here we must check other login candidate's fields (e.g.email,\n                # phone,userName) as well\n                if acc.email and login_val_re.test acc.email\n                  l.i(context.axt_fid + \":\", \"CA56\")\n                  found_acc = acc\n                  acc.currentLogin = acc.login\n                  acc.login = acc.email\n                  acc.isLoginFinal = true\n                else if acc.userName and login_val_re.test acc.userName\n                  l.i(context.axt_fid + \":\", \"CA57\")\n                  found_acc = acc\n                  acc.currentLogin = acc.login\n                  acc.login = acc.userName\n                  acc.isLoginFinal = true\n                else if acc.phone and login_val_re.test acc.phone\n                  l.i(context.axt_fid + \":\", \"CA58\")\n                  found_acc = acc\n                  acc.currentLogin = acc.login\n                  acc.login = acc.phone\n                  acc.isLoginFinal = true\n\n              if found_acc?\n                l.i(context.axt_fid + \":\", \"CA59: found_acc=\", found_acc)\n                _list.push found_acc\n\n              _list\n            , []\n            l.i(context.axt_fid + \":\", \"CA60: accs =\", accs)\n\n            if accs.length > 0\n              tag = 'login'\n              if accs.length == 1\n                account = accs[0]\n              #else:\n                #TODO: let user select right account\n            else if '' in (acc_lists['login'] ? []) and strong_login\n              account = login_acc_info[acc_lists['login'].indexOf('')]\n            l.i(context.axt_fid + \":\", \"CA61: account =\", account)\n\n          if (\n            not account? and\n            is_login_visible and\n            not login_input_readonly\n          )\n            l.i(\"\"\"#{context.axt_fid}: CA62\"\"\")\n\n            # it's an ordinal input form (not readonly), if we have only one\n            # login account - select it, otherwise ask user to make choice\n            tag = 'login'\n            if acc_count == 1\n              account = login_acc_info[0]\n              l.i(context.axt_fid + \":\", \"CA63: '#{tag}': account=\", account)\n\n          # if there is no login input but we have password input and\n          # there is one account in the account_list. Use this account\n          if not is_login_visible? and password_input?\n            tag = 'login'\n            if (\n              not login_val? and\n              not account? and\n              acc_count == 1\n            )\n              account = login_acc_info[0]\n\n          putils.change_icon_value login_input, 'login', acc_count\n          putils.change_icon_value password_input, 'password', acc_count\n          putils.change_icon_value(\n            old_password_input,\n            'old-password',\n            acc_count\n          )\n          putils.change_icon_value(\n            login_form_info.inputs['new-password'],\n            'new-password',\n            acc_count\n          )\n          putils.change_icon_value(\n            login_form_info.inputs['confirm-new-password'],\n            'confirm-new-password',\n            acc_count\n          )\n\n          l.i(context.axt_fid + \":\", \"CA64: acc_count =\", acc_count, 'account =',\n            account)\n        else\n          putils.change_icon_value login_input,    'login',    0\n          putils.change_icon_value password_input, 'password', 0\n          l.i(\"\"\"#{context.axt_fid}: CA65: acc_count = 0\"\"\")\n\n      @login_val = account?.login ? login_val\n      l.i(context.axt_fid + \":\", \"CA66: @login_val =\", @login_val,\n        \"@parser.input_values =\", dumper @parser.input_values)\n\n      if @login_val?\n        @parser.input_values.login ?= {}\n        l.i(context.axt_fid + \":\", \"CA67: save new login_predict: \", @login_val)\n        @parser.input_values.login['login'] = @login_val\n\n\n      # support 2mfa forms (verify and mfa-setup)\n      if mfa_input? and not password_input? #and account\n        l.i(\"\"\"#{context.axt_fid}: call get2FACodeReq #{login_val}\"\"\")\n        l.i(context.axt_fid + \"\"\": @parser.last_event =\"\"\", @parser.last_event)\n        @parser.input_values.password =\n          @parser.last_event?.values?.password ? \"\"\n\n        l.i(context.axt_fid + \"\"\": @forms_info.forms =\"\"\", @forms_info.forms)\n\n        # if tag 'login' but in forms_info is only 'verify' forms, change it\n        if 'login' of @forms_info.forms\n          tag = 'login'\n        else if 'verify' of @forms_info.forms\n          tag = 'verify'\n        else if 'mfa-setup' of @forms_info.forms\n          tag = 'mfa-setup'\n\n        if tag\n          @tag = tag\n          @account = account?.login\n          l.i(context.axt_fid + \"\"\": @parser.input_values, tag, @account =\"\"\", @parser.input_values, tag, @account)\n\n          @_get2FACodeReq @account\n          l.ge.apply(l, l.r(context, 0, \"info-alt-end\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n          return\n\n      if tag == 'login' and change_password_mode\n        tag = 'change-password'\n\n      if (\n        not tag and\n        'registration' of accounts_info and\n        @forms_info.forms?['registration']\n      )\n        l.i(\"\"\"#{context.axt_fid}: CA68: we haven't got any login accounts but have a registration form\"\"\")\n        tag = 'registration'\n\n      #account = null #FOR TESTING: temporary!!!!\n      #login_val = null #FOR TESTING: temporary!!!!\n\n      if tag and not account? # account is not selected yet\n        l.i(context.axt_fid + \":\", \"CA69: accounts_info[#{tag}]?.length =\",\n          accounts_info[if tag == 'change-password' then 'login' else tag]?.\n          length, \"tag =\", tag)\n        if tag == 'login'\n          if not (login_val and strong_login)\n            accounts_names = acc_lists['login']\n\n            l.i(context.axt_fid + \":\", \"CA70: @parser.input_values.login.login =\",\n              dumper(@parser.input_values.login?['login']))\n            if (\n              accounts_names? and\n              login_form_info? and (\n                not login_input? or (\n                  not login_input.axt_valueChanged and\n                  not password_input?.axt_valueChanged and (\n                    login_input.value in [\n                      '', login_input.getAttribute('value')\n                    ] or\n                    login_input_readonly or\n                    not @login_val #@parser.input_values.login?['login']\n                  )\n                )\n              )\n            )\n              l.i(\"\"\"#{context.axt_fid}: CA71: login input was not changed by user.\"\"\")\n\n              l.i(\"\"\"#{context.axt_fid}: do chooseUserAccount('#{tag}', #{dumper accounts_names})\"\"\")\n              @_chooseUserAccountReq tag, accounts_names\n              l.ge.apply(l, l.r(context, 0, \"info-alt-end\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n              return\n\n        else if tag = 'change-password'\n          l.i(context.axt_fid + \":\", \"CA72\")\n          if not (login_val and strong_login)\n            accounts_names = acc_lists['login']\n\n            l.i(context.axt_fid + \":\", \"@parser.input_values.login.login =\",\n              dumper(@parser.input_values.login?['login']))\n            if (\n              accounts_names? and\n              login_form_info? and (\n                not login_input? or (\n                  not login_input.axt_valueChanged and\n                  not old_password_input?.axt_valueChanged and (\n                    login_input.value in [\n                      '',\n                      login_input.getAttribute('value')\n                    ] or\n                    login_input_readonly or\n                    not @login_val #@parser.input_values.login?['login']\n                  )\n                )\n              )\n            )\n              l.i(\"\"\"#{context.axt_fid}: CA73: login input was not changed by user.\"\"\")\n\n              l.i(\"\"\"#{context.axt_fid}: do chooseUserAccount('#{tag}', #{dumper accounts_names})\"\"\")\n              @_chooseUserAccountReq tag, accounts_names\n              l.ge.apply(l, l.r(context, 0, \"info-alt-end\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n              return\n\n        else if tag == 'registration'\n          l.i(context.axt_fid + \":\", \"CA74\")\n          #OBJECTIVES: auto insert password only when login value is empty or\n          #            when we have one registration form\n\n          # choice login account (or registration profile if it exists):\n          if accounts_info[tag]?.length == 1\n            # if we have only one account use it by default\n            account = accounts_info[tag][0]\n            l.i(\"\"\"#{context.axt_fid}: CA75: account = #{account}\"\"\")\n          else\n            accounts_names = accounts_info[tag]\n            l.i(\"\"\"#{context.axt_fid}: CA76: do chooseUserAccount('#{tag}', '#{accounts_names}')\"\"\")\n            @_chooseUserAccountReq tag, accounts_names\n            l.ge.apply(l, l.r(context, 0, \"info-alt-end\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n            return\n\n      l.i(\"\"\"#{context.axt_fid}: CA77, tag=#{tag}, account=#{dumper account}\"\"\")\n      if tag and account?\n        l.i(context.axt_fid + \":\", \"CA78: @parser.input_values.login.login =\",\n          dumper(@parser.input_values.login?['login']))\n        if tag == 'login'\n          l.i(\"\"\"#{context.axt_fid}: CA79\"\"\")\n          l.i(context.axt_fid + \"\"\": login_form_info =\"\"\", login_form_info)\n          l.i(context.axt_fid + \"\"\": login_input =\"\"\", login_input)\n          l.i(context.axt_fid + \"\"\": login_input?.value =\"\"\", login_input?.value)\n          l.i(context.axt_fid + \"\"\": (login_input?.getAttribute('value') ? '') =\"\"\", (login_input?.getAttribute('value') ? ''))\n          l.i(context.axt_fid + \"\"\": login_input_readonly =\"\"\", login_input_readonly)\n          l.i(context.axt_fid + \"\"\": @login_val =\"\"\", @login_val)\n          l.i(context.axt_fid + \"\"\": login_input?.axt_valueChanged =\"\"\", login_input?.axt_valueChanged)\n          l.i(context.axt_fid + \"\"\": password_input?.axt_valueChanged =\"\"\", password_input?.axt_valueChanged)\n          if (\n            login_form_info? and (\n              not login_input? or (\n                (login_input.disabled or not login_input.axt_valueChanged) and\n                not password_input?.axt_valueChanged\n              )\n            )\n          )\n            l.i(\"\"\"#{context.axt_fid}: CA80: getSelectedUserAccountInfo('#{tag}', #{dumper account})\"\"\")\n            @$$getSelectedUserAccountInfo\n              tag:     tag\n              account: account.login\n          else\n            l.i(\"\"\"#{context.axt_fid}: CA81: cancel\"\"\")\n            @$$done \"cancel applierManager.chooseAccount 2\"\n\n        else if tag == 'change-password'\n          l.i(\"\"\"#{context.axt_fid}: CA82\"\"\")\n          l.i(context.axt_fid + \"\"\": login_form_info =\"\"\", login_form_info)\n          l.i(context.axt_fid + \"\"\": login_input =\"\"\", login_input)\n          l.i(context.axt_fid + \"\"\": login_input?.value =\"\"\", login_input?.value)\n          l.i(context.axt_fid + \"\"\": (login_input?.getAttribute('value') ? '') =\"\"\", (login_input?.getAttribute('value') ? ''))\n          l.i(context.axt_fid + \"\"\": login_input_readonly =\"\"\", login_input_readonly)\n          l.i(context.axt_fid + \"\"\": @login_val =\"\"\", @login_val)\n          l.i(context.axt_fid + \"\"\": login_input?.axt_valueChanged =\"\"\", login_input?.axt_valueChanged)\n          l.i(context.axt_fid + \"\"\": password_input?.axt_valueChanged =\"\"\", password_input?.axt_valueChanged)\n#          if (\n#            login_form_info? and (\n#              old_password_input? and not old_password_input?.axt_valueChanged\n#            )\n#          )\n          l.i(\"\"\"#{context.axt_fid}: CA83: getSelectedUserAccountInfo('#{tag}', #{dumper account})\"\"\")\n          @$$getSelectedUserAccountInfo\n            tag:     tag\n            account: account.login\n#          else\n#            #verbose [comm|label]: CA84: cancel\n#            #!!!\n#            @$$done \"cancel applierManager.chooseAccount 3\"\n\n        else if tag == 'registration'\n          l.i(\"\"\"#{context.axt_fid}: CA85\"\"\")\n          @$$getSelectedUserAccountInfo\n            tag:     tag\n            account: account\n      else\n        l.i(\"\"\"#{context.axt_fid}: CA86: cancel\"\"\")\n        @$$done \"cancel applierManager.chooseAccount 4\"\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"ApplierManager.$$chooseAccount\"\"\"))\n    return\n\n\n  $$getSelectedUserAccountInfo: (account_info) ->\n    try expect((account_info), \"\"\"account_info\"\"\") .to.have.property('account')\\\n      .which.is.a 'string' catch e then throw e\n    try expect((account_info), \"\"\"account_info\"\"\") .to.have.property('tag')\\\n      .which.is.a 'string' catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$getSelectedUserAccountInfo\"\"\"))\n    l.i(context.axt_fid + \"\"\": * PARAM account_info:\"\"\", account_info)\n    l.i(context.axt_fid + \"\"\": dumper @accounts_info =\"\"\", dumper @accounts_info)\n\n    @tag = account_info.tag\n    tag = if @tag == 'change-password' then 'login' else @tag\n    account_name = account_info.account.toLowerCase()\n    accounts_info = @accounts_info[tag]\n\n    @account = null\n    account_info = null\n\n    l.i(context.axt_fid + \":\", \"SUA0: accounts_info=\", accounts_info)\n    if accounts_info?\n      for acc_info in accounts_info\n        l.i(context.axt_fid + \"\"\": dumper acc_info =\"\"\", dumper acc_info)\n        if (\n          (tag == 'login' and acc_info.login?.toLowerCase() == account_name) or\n          (tag == 'registration' and acc_info.toLowerCase() == account_name)\n        )\n          @account = account_name\n          account_info = acc_info\n          account_info.autoSubmit = false #NOTE: temporary. we do not use it now\n          break\n\n    l.i(context.axt_fid + \":\", \"SUA1: account_name =\", account_name,\n      \"@account =\", @account)\n    l.i(context.axt_fid + \"\"\": dumper account_info =\"\"\", dumper account_info)\n    if tag and account_info?\n      try expect((tag), \"\"\"tag\"\"\") .to.be.an('string').and.not.to.be.empty catch e then throw e\n      l.i(context.axt_fid + \":\", \"SUA2: @tag =\", @tag, \"tag =\", tag)\n      switch @tag\n        when 'login'\n          l.i(\"\"\"#{context.axt_fid}: SUA3\"\"\")\n          # if @forms_info.forms?['login']?.inputs?['login']? and\n          #    @forms_info.forms['login'].inputs['password']?\n\n          #   @forms_info.forms.login.form.classList.add 'axt-autofilled'\n\n          #TODO: get user to choice an account from the list\n          #      (if there are many accounts there)\n\n          #@ga.send 'timing', 'parser',\n          #         'request password startTime',\n          #         performance.now()\n\n          if @forms_info.forms?['login']?.inputs?['password']?\n            @_getUserPasswordReq account_info\n          else\n            @$$applyInputData account_info\n\n        when 'change-password'\n          l.l.apply(l, l.r(context, 0, \"info\", \"front|comm\", \"\"\"SUA4: change password\"\"\"))\n          if @forms_info.forms?['change-password']?.inputs?['old-password']?\n            @_getUserPasswordReq account_info\n          else\n            @$$applyInputData account_info\n\n        when 'registration'\n          l.l.apply(l, l.r(context, 0, \"info\", \"front|comm\", \"\"\"SUA5: TODO: choice primary registration profile\"\"\"))\n          #@_getRegistrationProfilesInfoReq account_name\n          #TEMPORARY: ==========================================================\n          if @extended_mode and not @accounts_info?['login']?.length > 0\n            if confirm(\n              \"KeyReel does not have an account for this site.\\n\\n\" +\n              \"Let KeyReel automatically register on your behalf?\"\n            )\n              @registration_autosubmit = true\n              @_getRegistrationProfilesInfoReq account_name\n            else\n              @$$done \"applierManager.chooseAccount 3\"\n          #TEMPORARY: END ======================================================\n        else\n          l.i(\"\"\"#{context.axt_fid}: SUA6\"\"\")\n          @$$done \"applierManager.chooseAccount 1\"\n    else\n      l.i(\"\"\"#{context.axt_fid}: SUA7\"\"\")\n      @$$done \"applierManager.chooseAccount 2\"\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"ApplierManager.$$getSelectedUserAccountInfo\"\"\"))\n    return\n\n\n  ###\n   * apply information for authorization to form's inputs (either for login or\n   * for registration) (autoSubmit, userName, password, ...)\n   *\n   * @param  {object} input_data {autoSubmit, userName, password, ...}\n   *\n   * @return null\n  ###\n  $$applyInputData: (input_data) ->\n    try expect((input_data), \"\"\"input_data\"\"\") .to.exist.and.to.be.an 'object' catch e then throw e\n    try expect((input_data), \"\"\"input_data\"\"\") .to.have.property('autoSubmit')\\\n      .which.is.a 'boolean' catch e then throw e\n\n    tag = input_data?.tag ? @tag\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$applyInputData #{futils.getFramePath()}\"\"\"))\n    l.i(context.axt_fid + \"\"\": * PARAM @account:\"\"\", @account)\n    l.i(context.axt_fid + \"\"\": * PARAM tag:\"\"\", tag)\n    l.i(context.axt_fid + \"\"\": * PARAM @forms_info.current_step:\"\"\", @forms_info.current_step)\n    l.i(context.axt_fid + \"\"\": * PARAM @forms_info.steps:\"\"\", @forms_info.steps)\n    l.i(context.axt_fid + \"\"\": * PARAM @forms_info.forms[tag]:\"\"\", @forms_info.forms[tag])\n    l.i(context.axt_fid + \"\"\": * PARAM dumper input_data:\"\"\", dumper input_data)\n    l.i(context.axt_fid + \"\"\": @forms_info =\"\"\", @forms_info)\n    try\n      if tag == 'login'\n        if input_data.password?\n          l.i(\"\"\"#{context.axt_fid}: AID-1: login\"\"\")\n          # refresh password in `input_values` struct from saved account\n          @parser.input_values.login ?= {}\n          @parser.input_values.login['password'] = input_data.password\n      else if tag == 'change-password'\n        l.i(\"\"\"#{context.axt_fid}: AID-2: change-password\"\"\")\n        # refresh password in `input_values` struct from saved account\n        #@parser.input_values['change-password'] ?= {}\n        #@parser.input_values['change-password']['old-password'] = input_data.password\n\n        input_data['old-password'] = input_data.password\n\n        # generate new password\n        new_password = \"new-password-12345\"\n        #@parser.input_values.login['password'] = new_password\n\n        #TODO: send new password to the phone with empty login\n\n        # type new password to the new password inputs\n        input_data['password'] = new_password\n        input_data['confirm-password'] = new_password\n        input_data['new-password'] = new_password\n        input_data['confirm-new-password'] = new_password\n\n      @_applier\n        account:      @account\n        tag:          tag\n        current_step: @forms_info.current_step\n        steps:        @forms_info.steps\n        form_info:    @forms_info.forms[tag]\n        input_data:   input_data\n    catch e\n      console.error e\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"ApplierManager.$$applyInputData\"))\n    return\n\n\n  $$dataStored: (info) ->\n    test_credentials = info.test_credentials\n    if info.updated\n      action = 'UPDATED'\n    else\n      action = 'SAVED'\n\n    console.warn '=== BINGO! ==='\n    console.warn \"CREDENTIALS ARE #{action}:\\n\" +\n      JSON.stringify(test_credentials, null, '  ')\n    alert \"CREDENTIALS ARE #{action}:\\n\" +\n      JSON.stringify(test_credentials, null, ' ')\n    \n\n    #???#if not info.updated\n    l.i(\"\"\"#{context.axt_fid}: dataStored: CLEAR LAST_EVENT\"\"\")\n    @parser.last_event = null\n    @parser.last_form = null\n\n    return\n\n\n  ###\n   * Get MFA (2FA) code for a given url and account\n  ###\n  $$apply2FACode: (mfa_data) ->\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|comm\", \"\"\"ApplierManager.$$apply2FACode\"\"\"))\n\n    try expect((mfa_data), \"\"\"mfa_data\"\"\") .to.exist.and.to.be.an 'object' catch e then throw e\n    try expect((mfa_data), \"\"\"mfa_data\"\"\") .to.have.property('code').which.is.a 'string' catch e then throw e\n    try expect((mfa_data), \"\"\"mfa_data\"\"\") .to.have.property('prevCode').which.is.a 'string' catch e then throw e\n    try expect((mfa_data), \"\"\"mfa_data\"\"\") .to.have.property('nextCode').which.is.a 'string' catch e then throw e\n    try expect((mfa_data), \"\"\"mfa_data\"\"\") .to.have.property('period').which.is.a 'number' catch e then throw e\n    # #assert expect mfa_data .to.have.property('startTimestamp').which.is.a 'number'\n\n    l.i(context.axt_fid + \"\"\": * PARAM mfa_data.code:\"\"\", mfa_data.code)\n    l.i(context.axt_fid + \"\"\": * PARAM mfa_data.prevCode:\"\"\", mfa_data.prevCode)\n    l.i(context.axt_fid + \"\"\": * PARAM mfa_data.nextCode:\"\"\", mfa_data.nextCode)\n    l.i(context.axt_fid + \"\"\": * PARAM mfa_data.period:\"\"\", mfa_data.period)\n    l.i(context.axt_fid + \"\"\": * PARAM mfa_data.startTimestamp:\"\"\", mfa_data.startTimestamp)\n\n    if (\n      @forms_info.forms?['mfa-setup']?.inputs['mfa-code2']? or\n      @forms_info.forms?['verify']?.inputs['mfa-code2']?\n    )\n      data = {\n        \"mfa-code\": mfa_data.prevCode\n        \"mfa-code2\": mfa_data.code\n        \"autoSubmit\": false\n      }\n    else\n      data = {\n        \"mfa-code\": mfa_data.code\n        \"autoSubmit\": false\n      }\n\n    @$$applyInputData data\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front|comm\", \"\"\"ApplierManager.$$apply2FACode\"\"\"))\n    return\n\n\n  ###\n   * Send message to background script (ExtManager)\n   *\n   * @param  {string}      method_name - $$method-name of ExtManager\n   *                                    (see back/ext-manager.coffee for detail)\n   * @param  {json-object} param       - parameter\n  ###\n  _passToExt: (method_name, param) ->\n    l.d.apply(l, l.r(context, 1, \"debug\", \"\", \"\"\">>= Send message '#{method_name}' >>= to the background\"\"\"))\n\n    #debug-begin   [_passToExt|comm]: ApplierManager._passToExt\n    #verbose-param [_passToExt|comm]: param\n\n    @transport.sendToExt context, method_name, {param: param}\n\n    #debug-end [_passToExt|comm]: ApplierManager._passToExt\n    return\n\n\n  ###\n   * Passing messages to ExtManager\n  ###\n  _initReq: () ->\n    @_passToExt 'init',\n      navigation_type: performance.navigation.type\n      redirect_count:  performance.navigation.redirectCount\n      referrer:        document.referrer\n\n\n  _startReq: () ->\n    if window == window.parent and @parser.last_event?\n      #reset saving_in_progress because \"start\" terminates saving\n      @parser.last_event.saving_in_progress = false\n    @_passToExt 'start'\n\n\n  _sendLogReq: (log_obj) ->\n    @_passToExt 'sendLog', log_obj\n\n\n  _getExtInfoReq: () ->\n    @_passToExt 'getExtInfo'\n\n\n  _storeLastEventReq: (last_event) ->\n    ###DEBUG [disable-last-event]:\n    console.warn \"==== LAST EVENT DISABLED ====\"\n    if (\n      last_event? and\n      last_event.changed and\n      last_event.form_tag in ['login', 'registration']\n    )\n      console.warn \"SAVE LOGIN FORM\"\n      @_saveLoginFormReq 0, last_event\n      return\n    ###\n\n    if last_event?\n      delete last_event.saving_in_progress\n      delete last_event.is_active_event\n      l.l.apply(l, l.r(context, 0, \"info\", \"\", \"\"\"STORE LAST EVENT\"\"\"))\n    @_passToExt 'storeLastEvent', last_event\n\n\n  _saveLoginFormReq: (pause, last_event) ->\n    if last_event?\n      l.l.apply(l, l.r(context, 0, \"info\", \"\", \"\"\"** SAVE lOGIN FORM **\"\"\"))\n      last_event.saving_in_progress = true\n      @_passToExt 'saveLoginForm',\n        pause:       pause\n        credentials: last_event.values\n        urls:        last_event.urls\n\n\n  _cancelLoginFormSavingReq: (last_event) ->\n    l.w.apply(l, l.r(context, 0, \"warn\", \"\", \"\"\"CANCEL SAVING LOGIN DATA\"\"\"))\n    last_event?.saving_in_progress = false\n    @_passToExt 'cancelLoginFormSaving'\n\n\n  _beforeUnloadReq: () ->\n    @_passToExt 'beforeUnload'\n\n\n  _getParserInfoReq: () ->\n    @_passToExt 'getParserInfo'\n\n\n  _getFormsInfoReq: (forms_req_info) ->\n    @_passToExt 'getFormsInfo', {tags: forms_req_info }\n\n\n  _getUserPasswordReq: (account) ->\n    @_passToExt 'getUserPassword', account\n\n\n  _getRegistrationProfilesInfoReq: (account) ->\n    @_passToExt 'getRegistrationProfilesInfo', account\n\n  _get2FACodeReq: (account) ->\n    @_passToExt 'get2FACode', account\n\n  stopChooseUserAccountTimer: () ->\n    if @chooseUserAccountTimerId?\n      clearTimeout(@chooseUserAccountTimerId)\n      @chooseUserAccountTimerId = undefined\n      @$$done \"cancel chooseUserAccount request\"\n\n\n  _chooseUserAccountReq: (tag, accounts) ->\n    @stopChooseUserAccountTimer()\n    @chooseUserAccountTimerId = utils.delayCall 500, =>\n      l.i(context.axt_fid + \":\", \"Send CHOOSE USER ACCOUNT REQ\")\n      @_passToExt 'chooseUserAccount', {tag: tag, accounts: accounts}\n      @_chooseUserAccountTimerId = undefined\n    , \"_chooseUserAccountReq error\"\n\n  _importCredentialsReq: (credentials) ->\n    @_passToExt 'importCredentials', credentials\n\n  _readyToSaveReq: () ->\n    @_passToExt 'readyToSave'\n\n\n  ###\n   * prevent input control from changing by browser's password manager\n   *\n   * @param  {jq_input} input_control - jquery input object\n   *\n   * @return null\n  ###\n  ###DISABLE\n  _protectInput: (input_control) ->\n    try expect((input_control), \"\"\"input_control\"\"\") .to.be.exist catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front\", \"ApplierManager._protectInput\"))\n\n    # coffeelint: disable=missing_fat_arrows\n    # `this` in this case means control this handler is connected to\n    _enable_field_event_handler = ->\n      # event's callback function for\n      # cleaning input field by removing\n      # 'readonly' attribute and event\n      # handlers that are added below\n      @removeAttribute 'readonly'\n      @removeEventListener 'mouseover', _enable_field_event_handler\n      @removeEventListener 'focusin', _enable_field_event_handler\n    # coffeelint: enable=missing_fat_arrows\n\n    # HACK: 'focus' event must be added to the field only when user\n    # press any key in the window because this event is triggered\n    # when browser's password manager tries to fill the field\n    # --------------------------------------------------------------\n    # coffeelint: disable=missing_fat_arrows\n    # `this` in this case means control the handler is connected to\n    _keydown_event_handler = (input) ->\n      _cur_keydown_eh = -> # keydown_event_handler for current\n                           # input control\n\n        input.addEventListener 'focusin', _enable_field_event_handler, false\n\n        @removeEventListener 'keydown', _cur_keydown_eh\n    # coffeelint: enable=missing_fat_arrows\n\n    # set readonly attribute to the input control\n    input_control.setAttribute 'readonly', true\n\n    # ... and remove readonly attribute when user selects\n    # this control by mouse\n    input_control.addEventListener 'mouseover', _enable_field_event_handler\n\n    document.body.addEventListener 'keydown',\n                                   _keydown_event_handler(input_control),\n                                   false\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front\", \"ApplierManager._protectInput\"))\n  ###\n\n\n  _getApplier: (tag, step) ->\n    appliers = @appliers\n    applier = null\n\n    if utils.isObject appliers\n      appliers = appliers[tag]\n\n    if utils.isArray appliers\n      cur_step = Math.min(step, appliers.length)\n      applier = appliers[cur_step - 1]\n\n    return applier\n\n\n  ###\n   * execute applier code and fill controls with data from args parameter\n   *\n   * @param  {object} args - Data to fill input controls from.\n   *         Structure of args:\n   *         { current_step: <num>,\n   *           steps: <num>,\n   *           tag: <string>,\n   *           account: <string>,\n   *           form: <form control>,\n   *           form_info: {\n   *             form: <form control>,\n   *             inputs: {\n   *               login: <login input control>,\n   *               password: <password input control>,\n   *               userName: <username input control>\n   *               ... #any of keys in `inputs` are optional\n   *             }\n   *             buttons: { login: <buttons, ... }\n   *             input_data: {\n   *               login: <data for login input control>,\n   *               password: <data for password input control>,\n   *               userName: <data for username input control>\n   *               ... #any of keys in `input_data` are optional\n   *            }\n   *           }\n   *         }\n   *\n   * @param  {string} code - Applier's js-code to execute\n   *\n   * @return null\n  ###\n  _applier: (args) ->\n    try expect((args), \"\"\"args\"\"\") .to.exist catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('account') catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('tag').which.is.a 'string' catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('current_step').which.is.a 'number' catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('steps').which.is.a 'number' catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('form_info').which.is.an 'object' catch e then throw e\n    try expect((args), \"\"\"args\"\"\") .to.have.property('input_data').which.is.an 'object' catch e then throw e\n\n    l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"front|_applier\", \"\"\"ApplierManager._applier\"\"\"))\n    l.i(context.axt_fid + \"\"\": * PARAM args:\"\"\", args)\n    l.i(context.axt_fid + \"\"\": dumper args.input_data =\"\"\", dumper args.input_data)\n    l.i(context.axt_fid + \"\"\": @tag, @forms_info.forms =\"\"\", @tag, @forms_info.forms)\n\n    try\n      if @DOMChanged\n        @$$done \"cancel applierManager._applier (DOM was changed!)\"\n      else\n        status = undefined\n\n        # NOTE: input_data is an alias of args.input_data:\n        input_data = args.input_data\n\n        current_login = input_data.login\n        isLoginFinal = !!input_data.isLoginFinal\n        l.i(\"\"\"#{context.axt_fid}: APPL1 [_applier]: isLoginFinal = #{input_data.isLoginFinal}\"\"\")\n        if 'login' == args.tag and not isLoginFinal\n\n          l.i(\"\"\"#{context.axt_fid}: APPL2\"\"\")\n          # if login field is not finally defined, and 'email,phone or userName'\n          # fields are not empty, use one of them as a login if an appropriate\n          # tag (email,phone) is in login's rates.tags array\n\n          login_tags = args.form_info.inputs['login']?.rates.tags ? []\n\n          if input_data.email and 'email' in login_tags\n            l.i(\"\"\"#{context.axt_fid}: APPL3\"\"\")\n            input_data.login = input_data.email\n            isLoginFinal = true\n          else if (\n            input_data.phone and\n            utils.isInList([['phone', 'mobile-phone']], login_tags)\n          )\n            l.i(\"\"\"#{context.axt_fid}: APPL4\"\"\")\n            input_data.login = input_data.phone\n            isLoginFinal = true\n          else if input_data.userName\n            l.i(\"\"\"#{context.axt_fid}: APPL5\"\"\")\n            input_data.login = input_data.userName\n            isLoginFinal = true\n\n        l.i(\"\"\"#{context.axt_fid}: APPL6: isLoginFinal = #{isLoginFinal}\"\"\")\n        l.i(\"\"\"#{context.axt_fid}: input_data.isLoginFinal = #{input_data.isLoginFinal}\"\"\")\n        l.i(\"\"\"#{context.axt_fid}: input_data.login = #{input_data.login}\"\"\")\n\n        if (\n          isLoginFinal and\n          isLoginFinal != input_data.isLoginFinal\n        ) or not input_data.login\n          l.i(\"\"\"#{context.axt_fid}: APPL7: prepare updating the account in the database\"\"\")\n          # if last event will have `currentLogin` property it means to update\n          # current record rather then to insert a new one\n          input_data.isLoginFinal = isLoginFinal\n          input_data.currentLogin = current_login\n\n        if input_data.currentLogin? and args.form_info.inputs['password']?\n          input_data.currentPassword = input_data.password\n\n        # fill input_value from selected account\n        ival = @parser.input_values  # create an alias of input_values\n        ival.login ?= {}\n        fillInputValue(ival.login, input_data)\n\n        applier = @_getApplier(args.tag, args.current_step)\n        status = applier(args) if applier\n        l.i(context.axt_fid + \"\"\": applier, status =\"\"\", applier, status)\n\n        if not status?\n          l.d.apply(l, l.r(context, 0, \"debug\", \"front|_applier\", \"\"\"restart with default applier\"\"\"))\n          step = Math.min(@default_appliers.length, args.current_step)\n          status = @default_appliers[step - 1](args)\n        l.i(context.axt_fid + \"\"\": status =\"\"\", status)\n\n        #HACK: TEMPORARY =======================================================\n        # autoSubmit login form for sites from logout_urls.json db\n        if status and @auto_submit\n          l.l.apply(l, l.r(context, 0, \"info\", \"front|_applier\", \"\"\"testing autoSubmit mode: @tag = #{@tag}, last_event?.form_tag  = #{@parser.last_event?.form_tag}\"\"\"))\n          url = new Url(document.location.href)\n          domain = domainExtractor(url)\n          if true or domain of logout_urls #TODO: TEMPORARY SET TRUE FOR ALL\n                                           #      DOMAINS\n            login_form_info = @forms_info.forms?['login']\n            login_button = login_form_info?.buttons['login']\n            if login_form_info?\n              l.i(\"\"\"#{context.axt_fid}: click 'login' button on 'login' form\"\"\")\n              login_button?.click()\n            else if @parser.last_event?.form_tag == 'login'\n              l.i(\"\"\"#{context.axt_fid}: click 'verify' button on 'verify' form\"\"\")\n              verify_form_info = @forms_info.forms?['verify']\n              verify_button = verify_form_info?.buttons['verify']\n              verify_button?.click()\n            else if (\n              @tag == 'registration' and\n              @registration_autosubmit and\n              domain of logout_urls\n            )\n              @registration_autosubmit = false\n              reg_form_info = @forms_info.forms?['registration']\n              reg_button = reg_form_info?.buttons['registration']\n              if reg_form_info?\n                l.i(\"\"\"#{context.axt_fid}: click 'registration' button on 'reg' form\"\"\")\n                reg_button.click()\n\n        #HACK: TEMPORARY =======================================================\n\n        l.i(context.axt_fid + \":\", \"APPL8: args=\", args)\n        for tag of args.input_data when tag not in [\n          'login', 'password', 'currentLogin', 'currentPassword',\n          'email', 'userName', 'phone'\n        ]\n          if !args.input_data[tag]?\n            ival.login[tag] = null\n        l.i(context.axt_fid + \":\", \"APPL9: ival=\", dumper ival)\n\n        #if args.tag == 'login' and status\n        #\n        #  ##verbose [_applier]: Store Login+Password MD5 to prevent saving \\\n        #  ##                    stored auth info\n        #  #@auth_md5_str =\n        #  #  md5(args.input_data.login + '§' + args.input_data.password)\n\n        # if applier returns true and autoSubmit is true then do autoSubmit\n        #status = status and args.input_data.autoSubmit\n        # form = args.form_info.form\n        # inputs = args.form_info.inputs\n\n        # #verbose-val [_applier] inputs\n\n        # # protect all inputs from changes by browser's password manager\n        # for input_type, input of inputs\n        #   @_protectInput input if input?\n\n        #TODO: cookies refactorings\n        #\n        # # coffeelint: disable=missing_fat_arrows\n        # #HACK: `this` in this case means a control the handler is connected to\n        # _submit_event_handler = () ->\n        #   #info [_applier._submit_event_handler] 'SUBMIT_EVENT_HANDLER'\n        #   Cookies.set AUXOFT_COOKIE_NAME, '1'\n        #   #info [_applier._submit_event_handler] 'SET AUXOFT_COOKIE_NAME = 1'\n        #   @removeEventListener 'submit', _submit_event_handler\n        # # coffeelint: enable=missing_fat_arrows\n\n        # #FIX: fix it to save login form\n        # # form?.bind 'submit', _submit_event_handler\n\n        # auxoft_cookie = Cookies.get(AUXOFT_COOKIE_NAME)\n        # #verbose-val [cookie] auxoft_cookie\n\n        # new_login = (not auxoft_cookie? || auxoft_cookie != '1')\n        # #verbose-val [cookie] new_login\n\n        # #verbose [cookie] \"remove cookie\"\n        # Cookies.remove AUXOFT_COOKIE_NAME\n\n        # if new_login and status\n        #   #verbose \"AUTO-SUBMIT!\"\n        #   #verbose \"set cookie\"\n        #   Cookies.set AUXOFT_COOKIE_NAME, '1'\n        #   # form?.submit()\n        @$$done \"applierManager._applier\"\n\n    catch err\n      try\n        url = new Url(document.location.href)\n        url = \"#{url.protocol}://#{url.host}\"\n      catch url_err\n        url = \"[#{url_err.name}: #{url_err.message}]\"\n\n      @ga.sendException err, \\\n        \"#{@tag} applier for #{url} was interrupted with an error:\"\n\n      throw err\n      @$$done \"applierManager._applier error\"\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"front\", \"\"\"ApplierManager._applier\"\"\"))\n    return\n\n\n  #HACK: TEMPORARY =============================================================\n  messageEventHandler: (ctx, name, msg) =>\n    `var context = {axt_fid: null};` # declare local context\n\n    return if not name? or not name.startsWith 'axt-'\n\n    switch name\n      when 'axt-parse-forms'\n        l.w.apply(l, l.r(context, 0, \"warn\", \"front\", \"\"\"SIGNAL axt-parse-forms IS RECEIVED\"\"\"))\n        context = global.axt_context\n        if not context.axt_sid? and ctx.axt_sid?\n          context.axt_tid = ctx.axt_tid\n          context.axt_sid = ctx.axt_sid\n          context.axt_url = ctx.axt_url\n\n        l.d.apply(l, l.r(context, 0, \"debug-val\", \"front\", \"\"\"@parser_init =\"\"\", @parser_init))\n        if @parser_init\n          l.d.apply(l, l.r(context, 0, \"debug\", \"\", \"\"\"## RE-PARSE FORMS: #{context.axt_sid} autoSubmit = #{msg.autoSubmit} ##\"\"\"))\n          @parser.checkInputs()\n          @parseForm()\n\n  #HACK: TEMPORARY =============================================================\n\n\n  #HACK: TEMPORARY (double click on reg form inputs uses to start form filling)\n  doubleClickEventHandler: (evt) =>\n    target = evt.target\n    if utils.isVisible.fn(target, false)\n      form = target.axt_form\n      l.i(context.axt_fid + \":\", \"### DOUBLE CLICK EVENT: form =\", form)\n      if @extended_mode and form?.rates?.winner == 'registration'\n        l.i(\"\"\"#{context.axt_fid}: Fill registration form\"\"\")\n        @_getRegistrationProfilesInfoReq('test')\n    else\n\n      l.i(context.axt_fid + \":\", \"### DOUBLE CLICK EVENT: !!! SKIP: Unvisible target:\" , target)\n    return\n  #HACK: TEMPORARY =============================================================\n\nmodule.exports = ApplierManager\n","###\n * iframe-visibility.coffee\n *\n *   monitor iframe visibility\n *\n *   Copyright (c) 2018 auxoft.com. All rights reserved.\n###\n\n#MODULE-TAGS: [iframe-observer]\n\nl = require('../../common/log.coffee'); context = global.axt_context\n\ndo ({expect, assert} = chai = require \"chai\").should\nfutils = require(\"../common/frame-utils.coffee\")\nutils = require(\"../../common/utils.coffee\")\nputils = require('./parser-helpers.coffee')\nga = require('../common/ga.coffee')()\n\nGET_VISIBILITY_CMD = \"getIframeVisibilityInfo\"\nSET_VISIBILITY_CMD = \"setIframeVisibilityInfo\"\n\nFPATH = futils.getFramePath()\n\nTRANSITION_PROPERTIES = [\n  'all', 'visibility', 'transform', 'opacity',\n  'width', 'max-width', 'height', 'max-height', 'right',\n  'left', 'top', 'bottom', 'padding-left', 'padding-right', 'padding-top',\n  'padding-bottom'\n]\n\n\n\nrequestVisibilityInfo = () ->\n  #verbose \"requestVisibilityInfo for\", FPATH\n  parent.postMessage {cmd: GET_VISIBILITY_CMD}, \"*\"\n  return\n\n\nsendVisibilityInfo = (frameElement, visible) ->\n  #verbose-begin \"sendVisibilityInfo to:\", \\\n  #  futils.getFramePath(frameElement.contentWindow)\n  #debug \"sendVisibilityInfo:\", \\\n  #  futils.getFramePath(frameElement.contentWindow), \"visible=\", visible\n  #verbose \"iframe:\", frameElement\n  frameElement.contentWindow.postMessage(\n    cmd:     SET_VISIBILITY_CMD\n    visible: visible\n  , \"*\")\n  #verbose-end \"sendVisibilityInfo:\", \\\n  #  futils.getFramePath(frameElement.contentWindow)\n  return\n\n\nsendVisibilityToAllIframes = () ->\n  #verbose-begin \"sendVisibilityToAllIframes\", FPATH\n  _frames = document.getElementsByTagName('iframe')\n  #verbose \"send new visibility to all child iframes(\", _frames.length, ')', \\\n  #  _frames\n  for frameElement in _frames\n    v = utils.isVisible.fn(frameElement)\n    #verbose \"SEND NEW VISIBILITY TO\", frameElement.id, 'visibility=', v\n    sendVisibilityInfo(frameElement, v)\n  #verbose-end \"sendVisibilityToAllIframes\", FPATH\n  return\n\n\ncheckAndSendVisibilityInfo = () ->\n  #verbose-begin \"checkAndSendVisibilityInfo:\", FPATH\n  for frameElement in document.getElementsByTagName('iframe')\n    #verbose [IframeObserver] \"frame \" + \\\n    #  futils.getFramePath(frameElement.contentWindow) + \" visibilty:\", \\\n    # utils.isVisible.fn(frameElement, false), frameElement\n    if utils.elementVisibilityChanged(frameElement, true)\n      #verbose [IframeObserver] \\\n      #  \"IFRAME DOM changing detected!!!\"\n      visible = utils.isVisible.fn(frameElement)\n      sendVisibilityInfo(frameElement, visible)\n  #verbose-end \"checkAndSendVisibilityInfo\", FPATH\n  return\n\n\n# check iframes after transition finishing\nonTransitionEventHandler = (evt) ->\n  target = evt.target\n  #verbose [event.transition] \"EVENT #{evt.type}: \", evt, \\\n  #  \"propertyName=\", evt.propertyName\n  if (\n    evt.type in ['animationend', 'transitionend'] or\n      evt.propertyName in TRANSITION_PROPERTIES\n  ) and (\n    target.tagName == 'IFRAME' or\n      target.getElementsByTagName('IFRAME').length > 0\n  )\n    #debug [event.transition]: TRANSITION EVENT '#{evt.type}' on \\\n    #  #{evt.propertyName}: #{target.tagName}\\\n    #  #{if target.type then '[' + target.type + ']' else ''}\n    #  #{if target.id then '.' + target.id else ''}\\\n    #  #{if target.className then '#'+target.className else ''}\n    checkAndSendVisibilityInfo()\n\n\nclass IframeObserver\n  constructor: () ->\n    #verbose-begin [constructor]: IframeObserver.constructor #{FPATH}\n\n    @observer = new MutationObserver (mutations) =>\n      ##verbose-begin [observer|IframeObserver|label|callback] \\\n      ##  \">>> base mutation callback <<<\"\n\n      # @observer?.disconnect()\n      try\n        if @_isIframeDOMmutated(mutations)\n          document.body.axt_stamp = performance.now() # clear visibility cache\n          checkAndSendVisibilityInfo()\n      catch e\n        ga.sendException e\n      finally\n        ###@observer.observe document,\n          childList:         true\n          subtree:           true\n          characterData:     false\n          attributes:        true\n          attributeFilter:   ['hidden', 'style', 'class']\n          attributeOldValue: true\n        ###\n      ##verbose-end [observer|IframeObserver|label|callback]: \\\n      ##  >>> base mutation callback <<<\n      return\n\n    #verbose-end [constructor]: IframeObserver.constructor #{FPATH}\n    return\n\n\n  setVisibilityChangedCallback: (callback) ->\n    try expect(\n      not callback? or\n      utils.isFunction(callback),\n      \"@callback should be null or a callback function\"\n    ).to.be.true catch e then throw e\n\n    #verbose \"setVisibilityChangedCallback:\", FPATH\n    @_iframeVisibilityChangedCallback = callback\n    return\n\n\n  _isIframeDOMmutated: (mutations) ->\n    t = performance.now()\n    #verbose-begin [IframeObserver._isIframeDOMmutated]: \\\n    #  IframeObserver._isIframeDOMmutated #{FPATH}\n\n    #VERBOSE [IframeObserver._isIframeDOMmutated|list] for mutation in mutations\n      #VERBOSE [IframeObserver._isIframeDOMmutated|list] \\\n      #if mutation.type =='childList' \\\n      #  null\n        #verbose [IframeObserver._isIframeDOMmutated|list] \\\n        #  \"#{(performance.now() - @start_time).toFixed(2)}ms:\", \\\\\n        #  mutation.type, mutation.target.tagName, \\\\\n        #  \"ADD:\", mutation.addedNodes, \"DEL:\", mutation.removedNodes\n        #verbose-val [IframeObserver._isIframeDOMmutated|list] mutation.target\n      #VERBOSE [IframeObserver._isIframeDOMmutated|list] else \\\n      #  null\n        #verbose [IframeObserver._isIframeDOMmutated|list.] \\\n        #  \"#{(performance.now() - @start_time).toFixed(2)}ms:\", \\\\\n        #  mutation.type, mutation.target.tagName, \\\\\n        #  mutation.attributeName, ':', '\"'+mutation.oldValue+'\"', '=>', \\\\\n        #  (if mutation.attributeName then \\\\\n        #    '\"'+mutation.target.getAttribute(mutation.attributeName)+'\"' \\\\\n        #   else '\"\"')\n        #verbose-val [IframeObserver._isIframeDOMmutated|list] mutation.target\n\n    hasMutations = mutations.some (mutation, idx, arr) ->\n      changed = false\n\n      switch mutation.type\n        when 'childList'\n          nodes = Array.from(mutation.addedNodes)\n\n          if mutation.removedNodes.length > 0\n            nodes.push mutation.target\n\n          changed = nodes.some (node) ->\n            #verbose-val [IframeObserver._isIframeDOMmutated] node.nodeType\n            #verbose-val [IframeObserver._isIframeDOMmutated] node.nodeName\n            #verbose-val [IframeObserver._isIframeDOMmutated] \\\n            #  node.getElementsByTagName('iframe') if node.nodeType == 1\n            result = node.nodeType == 1 and (\n              node.nodeName == 'IFRAME' or (\n                node.nodeName != 'IFRAME' and\n                node.getElementsByTagName('iframe').length > 0\n              )\n            ) and not node.classList.contains('axt-element')\n            #VERBOSE [IframeObserver._isIframeDOMmutated] if result\n              #verbose [IframeObserver._isIframeDOMmutated] \\\n              #  \"BINGO! Node was changed!\", node\n            result\n\n        when 'attributes'\n          node = mutation.target\n          nodeName = node.nodeName\n          attrName = mutation.attributeName\n          oldValue = mutation.oldValue\n          newValue = node.getAttribute(attrName)\n          if oldValue != newValue\n            if nodeName == 'IFRAME'\n              if (\n                attrName != 'style' or (\n                  attrName == 'style' and\n                  putils.compareVisibleStyleAttributes(oldValue, newValue)\n                ) and not node.classList.contains('axt-element')\n              )\n                changed = true\n              #VERBOSE [IframeObserver._isIframeDOMmutated] if changed\n                #verbose [IframeObserver._isIframeDOMmutated] \\\n                # \"BINGO! Changed1\", node, attrName, oldValue, newValue\n            else if (\n              node.tagName != 'IFRAME' and\n              node.getElementsByTagName('iframe').length > 0\n            )\n              if (\n                attrName != 'style' or (\n                  attrName == 'style' and\n                  putils.compareVisibleStyleAttributes(oldValue, newValue)\n                ) and not node.classList.contains('axt-element')\n              )\n                changed = true\n                #VERBOSE [IframeObserver._isIframeDOMmutated] if changed\n                  #verbose [IframeObserver._isIframeDOMmutated] \\\n                  #  \"BINGO! Changed2\", node, attrName, \"oldValue=\", oldValue, \\\n                  # \"newValue=\", newValue\n      return changed\n\n    #verbose-val [IframeObserver._isIframeDOMmutated] hasMutations\n    #verbose [IframeObserver._isIframeDOMmutated] \"elapsed:\", \\\n    #  (performance.now() - t).toFixed(2)\n\n    #verbose-end [IframeObserver._isIframeDOMmutated]: \\\n    #  IframeObserver._isIframeDOMmutated\n    return hasMutations\n\n\n  observe: () ->\n    #verbose-begin [IframeObserver.observe]: IframeObserver.observe\n    #VERBOSE [IframeObserver] @start_time = performance.now()\n\n    window.addEventListener 'message', @iframeMessageHandler\n    document.body.addEventListener 'transitionend', onTransitionEventHandler\n    document.body.addEventListener 'animationend', onTransitionEventHandler\n\n    @observer.observe document,\n      childList:         true\n      subtree:           true\n      characterData:     false\n      attributes:        true\n      attributeFilter:   ['hidden', 'style', 'class']\n      attributeOldValue: true\n\n    if window.top == window\n      #debug \"set window.axt_frameVisibility =\", true\n      window.axt_frameVisibility = true\n      sendVisibilityToAllIframes()\n    else\n      # init call\n      requestVisibilityInfo()\n\n    #verbose-end [IframeObserver.observe]: IframeObserver.observe\n    return\n\n\n  disconnect: () ->\n    #verbose-begin [IframeObserver.disconnect]: IframeObserver.disconnect\n    #@setVisibilityChangedCallback(null)\n    do @observer.disconnect\n    window.removeEventListener 'message', @iframeMessageHandler\n    document.body.removeEventListener 'transitionend', onTransitionEventHandler\n    document.body.removeEventListener 'animationend', onTransitionEventHandler\n    #verbose-end   [IframeObserver.disconnect]: IframeObserver.disconnect\n    return\n\n\n  iframeMessageHandler: (event) =>\n    frameWin = null\n    frame = null\n\n    switch (event.data.cmd)\n      when GET_VISIBILITY_CMD\n        if Array.from(window.frames).includes(event.source)\n          frameWin = event.source\n          frameElements = document.getElementsByTagName('iframe')\n\n          for frm in frameElements\n            if frm.contentWindow == frameWin\n              frame =  frm\n              break\n\n        if frame?\n          #verbose-begin [IframeObserver.messageHandler]: IframeObserver \\\n          #  get-message: #{futils.getFramePath(frameWin)}\n          #verbose-param [IframeObserver.messageHandler]: event\n\n          if window.top != window and not window.axt_frameVisibility?\n            # visibility info is not defined yet. Send a request to the parent\n            requestVisibilityInfo()\n          else\n            #verbose 'SOURCE is IFRAME element:', frame.id\n            visible = utils.isVisible.fn(frame)\n            #verbose 'IFRAME element is visible:', visible\n            sendVisibilityInfo(frame, visible)\n          #verbose-end [IframeObserver.messageHandler]: IframeObserver \\\n          # get-message #{futils.getFramePath(frameWin)}\n\n      when SET_VISIBILITY_CMD\n        if event.source == window.parent\n          #verbose-begin [IframeObserver.messageHandler]: IframeObserver \\\n          #  set-message: #{FPATH}\n          #verbose-param [IframeObserver.messageHandler]: event\n\n          #verbose \"CURRENT IFRAME WINDOW (FPATH}) \" + \\\n          # \"VISIBILITY:\", event.data.visible, window.axt_frameVisibility\n          newFrameVisibility = event.data.visible\n          #verbose \"newFrameVisibility =\", newFrameVisibility\n\n          if window.axt_frameVisibility != newFrameVisibility\n            window.axt_frameVisibility = newFrameVisibility\n            #debug \"set window.axt_frameVisibility =\", newFrameVisibility\n            sendVisibilityToAllIframes()\n            #verbose \"Execute iframeVisibilityChangedCallback for:\", \\\n            # FPATH, \"callback exists:\", \\\n            #  !!(@_iframeVisibilityChangedCallback)\n            @_iframeVisibilityChangedCallback?()\n\n          #verbose-end [IframeObserver.messageHandler]: IframeObserver \\\n          # set-message: #{FPATH}\n    return\n\nmodule.exports = IframeObserver\n","###\n * parser_helpers.coffee\n *\n *   Functions and classes used for parser and raters implementation\n *\n *   Copyright (c) 2015 auxoft.com. All rights reserved.\n###\n\n#MODULE-TAGS: [parser-helpers]\n\nl = require('../common/log.coffee'); context = global.axt_context\nutils = require('../common/utils.coffee')\ndumper = require('../common/dumper.coffee')\nga = require('../common/ga.coffee')()\nOptimalSelect = require('optimal-select')\ncssParser = require \"gonzales\"\nSoundex = require('../thirdparty/soundex')\ndo ({expect, assert} = chai = require \"chai\").should\n\nMAX_PLACEHOLDER_LENGTH = 300\n\nSOCIAL_SITES = [\n  'google'\n  'linkedin'\n  'twitter'\n  'facebook'\n  'yahoo'\n  'vkontakte'\n  'odnoklassniki'\n  'pinterest'\n  'instagram'\n  'amazon'\n  'disqus'\n  'github'\n]\n\ntags =\n  LOGIN_CANDIDATES: [\n    'login'\n    'email'\n    'phone'\n    'mobile-phone',\n    'firstName'\n    'lastName'\n    'fullName'\n    'company-id'\n    'company'\n    'account'\n    'account-number'\n  ],\n  REGISTRATION_FIELDS: [\n    \"agreement\"\n    \"fullName\"\n    \"firstName\"\n    \"middleName\"\n    \"lastName\"\n    \"job-title\"\n    \"customer-name\"\n    \"email\"\n    \"confirm-email\"\n    \"confirm-password\"\n    \"confirm-phone\"\n    \"phone-ext\"\n    \"company-phone\"\n    \"company-phone-ext\"\n    \"confirm-login\"\n    \"alt-email\"\n    \"company-name\"\n    \"company-address\"\n    \"company-size\"\n    \"city\"\n    \"url\"\n    \"address\"\n    \"street\"\n    \"apartment\"\n    \"skype\"\n    \"nationality\"\n    \"birthday\"\n    \"birthmonth\"\n    \"birthyear\"\n    \"zipcode\"\n    'ssn'\n    'csc'\n    'card-number'\n    'day'\n    'state'\n    'age'\n    'tos'\n    'month'\n    'year'\n    'account#'\n    'account-type'\n    'num'\n    'card-id'\n    'location'\n    \"team\"\n    \"gender\"\n    \"female\"\n    \"male\"\n    \"sex\"\n    \"expiry-date\"\n    \"agreement\"\n    \"answer\"\n    \"security-answer\"\n    \"question\"\n    \"security-question\"\n    \"create\"\n    \"ethnicity\"\n    \"invite-code\"\n    #\"country\" # digitick.com login uses country (phone as login)\n  ]\n\nselectors =\n  FORM_SELECTORS: \"form,div[data-bind*='LoginForm'],div[data-bind*='modal'],\" +\n    \"div[role='dialog'],div[node-type='box'],apple-auth,bb-newsletter-form,\" +\n    \"div[data-name='form'],div[ng-form],body\"\n\n  INPUT_SELECTORS: \"select,input:not([type=button]):not([type=submit])\" +\n    \":not([type=image]),textarea,div[data-role=textarea]\"\n\n  BUTTON_SELECTORS: \"button,input[type='button'],input[type='submit'],\" +\n    \"input[type='image'],input[type='reset']\"\n\n  ANCHOR_SELECTORS: [\n    \"a[href^='javascript:']\"\n    \"a[id*=login][href='#']\"\n    \"a[onclick]\"\n    \"a[id*=btn]\"\n    \"a[id*=Btn]\"\n    \"a[id*=butt]\"\n    \"a[id*=Butt]\"\n    \"a[class*=butt]\"\n    \"a[class*=Butt]\"\n    \"a[class*=Btn]\"\n    \"a[class*=btn]\"\n    \"a[role=button]\"\n    \"a[pb-role=submit]\"\n    \"a[class*=submit]\"\n    \"a[data-action=submit]\"\n    # -- divs --\n    \"div[onclick]\"\n    \"div[id*=btn]\"\n    \"div[id*=Btn]\"\n    \"div[id*=butt]\"\n    \"div[id*=Butt]\"\n    \"div[class*=btn]\"\n    \"div[class*=Btn]\"\n    \"div[class*=butt]\" #:not([class*=buttons])\"\n    \"div[class*=Butt]\" #:not([class*=Buttons])\"\n    \"div[role*=button]\"\n    \"div[pb-role=submit]\"\n    \"div[class*=submit]\"\n    \"div[data-action=submit]\"\n    # -- spans --\n    \"span[onclick]\"\n    \"span[id*=btn]:not([id*=text])\"\n    \"span[id*=Btn]:not([id*=text])\"\n    \"span[id*=button]:not([id*=text])\"\n    \"span[id*=Button]:not([id*=text])\"\n    \"span[id*=submit]:not([id*=text])\"\n    \"span[id*=Submit]:not([id*=text])\"\n    \"span[class*=btn]:not([class*=text])\"\n    \"span[class*=Btn]:not([class*=text])\"\n    \"span[class*=butt]:not([class*=text])\"\n    \"span[class*=Butt]:not([class*=text])\"\n    \"span[role*=butt]\"\n    \"span[pb-role=submit]\"\n    \"span[class*=submit]:not([class*=text])\"\n    \"span[data-action=submit]\"\n  ].map( (sel) ->\n    # -- instead of --\n    sel + ':not(' + [\n      '[id*=group]'\n      '[id*=Group]'\n      '[id*=tooltip]'\n      '[id*=Tooltip]'\n      '[id*=inner]'\n      '[id*=checkBox]'\n      #'[class*=group]'\n      #'[class*=Group]'\n      '[class*=tooltip]'\n      '[class*=Tooltip]'\n      '[class*=inner]'\n      '[class*=Inner]'\n      '[class*=checkBox]'\n      '[class*=Dropdown]'\n      '[class*=dropdown]'\n      '[role=tooltip]'\n    ].join('):not(') + ')'\n  ).join(',')\n\n\nSUBMIT_ETALONS = {\n  \"registration\": [[[\"choose password\",\n                   \"注册\",  \"サインアップ\", 'register', 'sign up', 'signup',\n                   '=sign', 'join', 'registraciya', 'sozdat akkaunt', 'enlist',\n                   'stvoriti', 'sozdat', 'get started',\n                   'free trial', 'reg', 'registration', 'enroll', 'start free',\n                   'create one', 'createyourprofile', 'zarejestruj sie',\n                   'tilmeld dig', 'opret profil', 'registre se', 'registrieren',\n                   ['create', ['id', 'profile', 'account', 'free']]\n                   'reyestruvati', 'complete sign in', 'sign me up',\n                   'creer un compte', 'luo tili', 'skapa konto', 'registrarse',\n                   'start shopping', 'zalozit ucet', 'vytvorit ucet',\n                   'konto erstellen', 'zaregistrirovat sya', 'suivant',\n                   'ouvrir un compte', 'sozdanie uchetnoi zapisi',\n                   'zareyestruvatisya', 'sign button', 'try for free'],\n                   ['!', 'log in', 'logon', 'log on', ['sign in', '!complete'],\n                     'login', 'signin', 'confirm', 'confirmation', 'verify',\n                     'browsing', 'thanks', 'dismiss', 'add', 'bookmark', 'can',\n                     'sign on', 'signon', 'return', 'search', 'sok',\n                     'promo', 'sog', 'suchen', 'job', 'resend'\n                     'accedez a votre compte', 'anmelden', 'kirjaudu sisaan',\n                     'logga in', 'prihlaste se', 'prihlasit sa', 'send', 'help'\n                     'show', 'payment', 'platizh', 'platezh', 'voiti'\n                     'photo', 'vidgyk', 'otzyv', 'feedback', 'review', 'alert',\n                     'vzhe mayete', 'yzhe est', 'have', 'enable', 'disable',\n                     'turn on', 'turn off', 'disabling'\n                  ]]]\n  \"save\":         [[['save', 'zberegty', 'sohranit', 'save edit but',\n                  'zberegti'], ['!', 'profile']]]\n  \"clear\":        ['=clear', '=reset']\n  \"update\":       [[['update', 'change', 'settings', 'save changes',\n                   'pryminyty', 'apply', 'primenit'],\n                   ['!', 'password', 'cancel', 'profile', 'picture', 'image',\n                     'country']]]\n  \"login\":        [[[\"log in\", \"log on\", \"logon\", \"log into\", \"login\", 'signon',\n                   \"signin\", \"sign in\", \"sign into\", \"ingresar\", \"vhod\", \"登录\",\n                   \"uviiti\", \"voiti\", \"ログイン\", \"sign on\", \"vhid\", \"התחבר\",\n                   '/^auth/', 'submitlogbtn', '/logbtn/', 'btn login', 'accede',\n                   'prijavite se', 'iniciar sesion', '登 录', '登录', 'log me in',\n                   'accedez a votre compte', 'anmelden', 'kirjaudu sisaan',\n                   'logga in', 'prihlaste se', 'prihlasit sa', 'zaloguj sie',\n                   'log ind', 'log pa', 'voiti', 'zeregistrirovat sya',\n                   'acessar conta', 'logg inn', '登入', 'loginbox', \"let me in\"],\n                   ['!', ['create', '!sign in'], 'join', 'no account',\n                     'confirm', 'verify', 'confirmation', 'one time', 'resend',\n                     'odnorazovi', 'browsing', 'remember', 'forgot', 'complete',\n                     'thanks', 'dismiss', 'show', 'hide', 'demo', 'add', 'back',\n                     'social', 'networking', 'bookmark', 'can', 'free', 'promo',\n                     \"already have an account\", 'return', ['form', '!button'],\n                     'search', 'send', 'help', 'payment', 'enviar', 'sok',\n                     'sog', 'suchen', 'photo', 'vidgyk', 'otzyv', 'feedback',\n                     'review', 'upgrade', 'vzhe mayete', 'yzhe est', 'have',\n                     'enable', 'disable', 'turn on', 'turn off', 'link'\n                   ]]]\n  \"login-link\":    [\"already have an account\"]\n  \"change-password\": [\"save password\", 'change password', 'update password',\n                      'pass /^but(ton)?$/', 'zminiti parol', 'smenit parol',\n                      'izmenit parol', [['create', 'choose'], 'new password']]\n  \"change-phone\":   [\"change phone\", 'add phone', 'add mobile phone']\n  \"change-email\":   [[[\"change email\", 'submit new email',\n                      'make any corrections to the email'\n                     ], ['!', 'cancel']]]\n  \"reset-password\":  [\"=reset\", [\"reset\", \"password\"], \"forgot password\",\n                      \"email me reset\", \"new password\", \"reset instructions\",\n                      [[\"request\", \"recover\"], \"password\"], \"otrimati parol\",\n                      \"忘了密码\", '無法登入', [\"recover\", \"account\"],\n                      'napomnit parol', 'nagadaty parol', 'glemt passordet'\n                      'password recovery', 'forgot pass', 'send login link'],\n\n  \"forgot-email\":   [\"forgot email\"]\n  \"forgot-login\":  [['forgot', ['login', 'user id', 'username', 'apple id']],\n                    'find appleid' ]\n  \"reset-security-question\": ['reset /(security)?/ /question[s]?/']\n  \"password-gen\":    [[\"/^generat/\", \"/^password/\"]]\n  \"load\":         ['load']\n  \"delete\":       ['delete', 'del', 'erase', 'remove', 'viluchiti', 'udalit']\n  \"disable\":      ['disable']\n  \"play\":         ['play']\n  \"show\":         ['show', 'pokazati', 'pokazat']\n  #\"try\":          ['try']\n  \"special-requests\": [\"special requests\"]\n  \"send\":         [[[\"send\", \"=email\", \"resend\", 'enviar', 'otpravit',\n                   'vidpraviti', 'request', 'nadislati'\n                  ], [ '!',\n                   'reset', 'code', 'forgot', 'cancel', 'skip', 'busqueda'\n                  ]]]\n  \"go\":           [[['=start', '=start shopping', 'let s go', '=go', '=run',\n                   '=submit', '=enter', '=done', '=connexion', '=ok',\n                   '=shop now', '=entrar'],\n                   ['!', 'back']]]\n  \"create\":       [[['create', 'stvoriti', 'sozdat'], ['!', 'profile', 'order',\n                   'platizh', 'platezh']]]\n  \"profile\":      ['=profile', [['save', 'update', 'create'], 'profile']]\n  \"next\":         [[['next', 'dali', 'dalee', 'adelante', 'continue',\n                   'nastupnii', 'sleduyuschii', '下一步', 'siguiente',\n                   'go to second step'\n                   ], ['!', 'thanks', 'browsing', 'with']]]\n  \"add\":          [[['add', 'dodati', 'dobavit', '=activate'],\n                   ['!', 'photo', 'video', 'friend', 'card' ]]]\n  \"prev\":         ['prev', 'previous', 'back', 'go back', 'atras', 'return',\n                   'nazad']\n  \"order\":        ['order', 'popovniti', 'popolnit', 'perekazati', 'perevesti',\n                   'platizh', 'platezh', 'oplata', 'zamoviti', 'zakazat']\n  \"search\":       [\"search\", \"find\", \"quicksearch\", \"quick search\", \"ya ischu\",\n                   \"poshuk\", \"znaiti\", \"naiti\", \"minisearch\", \"sok\", 'sog',\n                   \"buscar\", 'busqueda'\n                   \"etsi\", 'recherche', \"hledat\", \"hladat\", 'suche', 'suchen']\n  \"confirm\":      ['confirm', 'confirmation', 'yes', 'complete']\n  \"verify\":       ['verify', 'proverit', 'pereviriti', 'get code', 'validate',\n                   'verification', 'validation', 'verifikuvati',\n                   'verificirovat', 'vvedite kod', 'vvedit kod', 'authenticate']\n  \"subscription\": [[[\"subscribe\", 'news', 'newsletters', 'newsletter',\n                   'promo', 'unsubscribe', 'sign me up', 'join us', 'sign up',\n                   'notify me', 'send me deals', 'send me updated',\n                   'be the first', [['latest', ['looks', 'sales', 'events']]],\n                   'waiting list', 'podpiska', 'pidpiska', 'podpisat sya'],\n                   ['!', 'reset', 'forgot']]]\n  \"cancel\":       [\"cancel\", \"vidminiti\", \"skasuvaty\", \"otmenit\", \"otmena\",\n                   \"no thanks\", \"dismiss\", '=no', '关闭', 'skip']\n  \"github\":       [\"github\", \"git hub\"]\n  \"google\":       [\"gplus\", \"google\", \"google+\"]\n  \"yahoo\":        [\"yahoo\"]\n  \"linkedin\":     [\"linkedin\"]\n  \"twitter\":      [\"twitter\"]\n  \"facebook\":     [\"facebook\", 'fb', 'btn fb']\n  \"odnoklassniki\": ['odnoklassniki', 'btn ok']\n  \"vkontakte\":    [\"vkontakte\", 'vk', 'vk com', 'btn vk']\n  \"disqus\":       [\"disqus\"]\n  \"amazon\":       ['amazon', 'amzn', 'amz']\n  \"help\":         [\"help\", \"tooltip\"]\n  \"add-photo\":    [[['add', 'dodati'], 'photo']]\n  \"add-video\":    [[['add', 'dodati'], 'video']]\n  \"send-code\":    [['send', 'code']]\n  \"language\":     ['spanish', 'espanol', 'english', 'portugues', 'ukrainska',\n                   'russkii']\n  \"add-card\":     [\"add card\", \"add to card\", 'dodati kartku']\n  \"mfa-setup\":    [\"assign mfa\"]\n  \"other\":        [\"download\", \"result\", \"results\", \"enable\", \"turn on\",\n                   'pozhertvuvati', 'pozhertvovat',\n                   'dobavit kartku', 'post your answer', 'comment',\n                   'vidguk', 'otzyv', 'feedback', 'review', 'alert',\n                   'errorpage', 'kupit', 'kupiti', '=looks good']\n}\n\n\nFORMS_ETALONS = {\n  \"login-reg\":       ['register or login','login register','sign up or log in',\n                      'sign in or register', 'sign in or to create an account',\n                      'sign in sign up', 'sign in or sign up']\n  \"login\":           [[['login', 'log in', 'log into', 'user name', 'loginform',\n                      'username', 'account', 'vhod', 'vhid', #'auth',\n                      '登录', '登入', 'ingresar', 'sign in', 'signin', 'vhodu',\n                      'signon', 'sign on', 'voiti', 'vviiti', 'vhoda',\n                      'prijavi se', 'sign inform', 'avtoryzaciya',\n                      'acesse', 'uzhe zaregistrirovany', 'authentication'\n                     ], ['!', 'authenticator', 'lostpassword', 'lost password',\n                      'verify', 'verifying', 'sign up', 'signup', 'update',\n                       'create', 'security-code', 'forgot', 'reset', 'new',\n                       'add', 'change', 'forget', 'forgotten', 'trouble',\n                       'free', 'for info', ['special', ['offers', 'deals']],\n                       'resetting', 'forgotpass', 'new posting',\n                       ['recovery', '!or recovery'],\n                       ['vidnovlennya', '!abo vidnovlennya'],\n                       'mailing list', 'update', 'help', 'protect', 'my account'\n                       'invite', 'reply', 'recover', 'recoverform', 'show',\n                       'period', 'remind', 'zabyli', 'zabuli', 'can t', 'cannot'\n                     ]]]\n  \"registration\":    [[['registration', 'register', 'reg', 'sign up', '=sign',\n                      'signup', 'join', 'get started', 'try', 'stvoriti',\n                      'sozdat', [['free', 'activate', 'create'], 'reyestraciyi',\n                      ['account', 'userid', 'id', 'profile', 'username',\n                       'user name']], 'sozdanie uchetnoi zapisi', 'registracii',\n                      'registracya', 'reyestraciya', '注册', 'registrar',\n                      'new user sign in', 'registrn', 'invite',\n                      'never miss a post', 'get the latest content first',\n                      'tilmeld dig', 'registre se', 'melde dich'\n                     ], ['!', 'verify', 'verifying', 'security-code',\n                       'newsletter', 'login', 'reset', 'change', 'forgotten',\n                       'forget', 'trouble', 'for info', 'zabyli', 'zabuli',\n                       ['special', ['offers', 'deals']], 'email', 'sign in',\n                       'log in', 'sign on', 'forgot', 'update', 'help',\n                       'protect', 'mailing list', 'job', 'email collector',\n                       'invite', 'for savings', 'recover', 'recoverform',\n                       'show', 'location', 'promote', 'campaign', 'funnel'\n                       ['recovery', '!or recovery'],\n                       ['vidnovlennya', '!abo vidnovlennya'], 'can t', 'cannot'\n                     ]]]\n  \"payment-info\":    ['payment', 'creditcard', 'credit card']\n  \"security-code\":   ['security code']\n  \"order\":           [[['order', 'billing', 'oplata'], '!in order to']]\n  \"search\":          ['query', 'find', 'quicksearch', 'quick search', 'search',\n                      'search for answers', '=f', 'recherche', 'searchform',\n                      'etsi', 'sok', 'sog', \"hledat\", \"hladat\", 'suche',\n                      'suchen']\n  \"subscription\":    [[['subscribe', 'subscription', 'pidpysatys', 'podpysatsa',\n                      'podpyska', 'poluchat', 'post', 'newsletter', 'news',\n                       'sbscribe',\n                       'notify',  'unsubscribe', 'subscriber', 'contact',\n                       'email collector', ['request', 'invite'], 'newsletter',\n                       'be the first', 'mailing list',\n                       ['receive', 'first order']\n                       [['email', 'emails', 'newsletter', 'info'],\n                        ['signup', 'sign up', 'signed up', 'join']\n                       ],\n                       'get email updates', 'mailing list', 'enter your email',\n                       [['be the first', 'get', 'special', 'latest'],\n                         ['deals', 'offers']], 'offer',\n                      ], ['!', 'edit', 'update', 'change', 'rediger', 'trial']]]\n  \"security-questions\": [[['security questions', 'security question',\n                         ['answer', 'question']],\n                         ['!', 'search for answers', 'reset']]]\n  \"change-password\": [[['update', 'change', 'setting', 'edit', 'rediger',\n                       'set'], ['pass', 'password', 'pwd']], 'zminiti parol',\n                       'parol', 'formpwd',\n                       [['create', 'choose'], 'new password']]\n  \"change-username\":  [[['update', 'change', 'edit'], 'username']]\n  \"change-email\":    [[['update', 'change', 'edit'], 'email']]\n  \"change-phone\":    [[['change', 'add', 'update'], 'phone']]\n  \"change-mobile-phone\":   ['change mobile phone', 'add mobile phone',\n                            'update mobile phone']\n  \"change-name\":     [ [['change','update'], 'name'] ]\n  \"profile\":         ['profile', 'account info', 'preferences', 'edit',\n                      'update', 'rediger']\n  \"password-gen\":    ['password generator']\n  \"reset-password\":  [[['password', 'forgotsel', 'reset', 'need a new password',\n                      'forgot', '找回密码', 'retrieve password', 'forgotpass',\n                      'remind password', 'reset my password',\n                      'recover password', 'forgot password', 'lostpassword',\n                      'lost password', 'forgotpassword', 'resetpassword',\n                      'password verify', 'forgotpw', 'need password',\n                      'password recovery', 'forgotform', 'forget pwd',\n                      'zabutii parol', ['password', 'verifying'],\n                      'forgotten password', 'recoverusername',\n                      'recover account', 'auth remind', 'redefinir a senha',\n                      'vosstanovlenie parolya', 'vidnovlennya parolya',\n                      'esqueceu a senha', 'tilbakestilling av passord',\n                      'skydannya parolya', 'nulstilling af adgangskode',\n                      'passwortrucksetzung'\n                     ], ['!', 'question', 'questions', 'click here to',\n                       'signup', 'sugnin', 'sign up', 'sign in']]]\n  \"forgot-email\":  ['forgot email']\n  \"forgot-login\":  [['forgot', ['login', 'user id', 'username', 'apple id']],\n                    'find appleid'\n                   ]\n  \"verify\":        ['verify', 'verifying', 'verification', 'validate',\n                    'validation', 'check', 'pidtverdzhennya vhodu',\n                    'two factor\"']\n  \"other\":         ['your answer', 'new posting', 'happening now', 'paying',\n                    'zadat vopros', 'comment', 'vidguk', 'otzyv','feedback',\n                    'review', 'promote', 'campaign', 'funnel', 'job', 'kupit',\n                    'kupiti']\n}\n\n\nTITLES_ETALONS = {\n  \"login-reg\":    ['register or login','login register','sign up or log in',\n                   'sign in or register', 'sign in or to create an account',\n                   'sign in sign up', 'sign in or sign up',\n                   ['voiti', 'zaregistrirovat sya'],\n                   ['uviiti', 'zareyestruvatisya'],\n                  ]\n  \"login\":        [[['sign in', 'signin', 'sign into', 'login', 'log in',\n                   'log into', 'come in', '=enter', 'vhod', 'vhodu', 'vhoda',\n                   'enter the apple id password for', '登录', '登入', 'vhid',\n                   'welcome back ', 'sign on', 'authentication',\n                   'z povernennyam'\n                   ], ['!', 'sign up', 'signup', 'verify', 'security code',\n                    'reset', 'receive', 'new', 'add', 'change', 'complete',\n                    'forget', 'forgot', 'forgotten', 'free', 'resetting',\n                     'trouble', 'new posting', ['recovery', '!or recovery'],\n                       ['vidnovlennya', '!abo vidnovlennya'], 'update', 'help',\n                     'protect', 'mailing list', 'my account', 'invite',\n                     ['special', ['deals', 'offers']], 'recover', 'can t',\n                     'cannot', 'sign in with google', 'sign in with facebook',\n                     'log in with git hub', 'platezhi', 'order',\n                     'add mobile phone number', 'acesse', 'campaign', 'promote'\n                  ]]]\n  \"registration\": [[['sign up', 'join now', 'join', 'register', 'registration',\n                   'get started', 'free account', 'sozdanie uchetnoi zapisi'\n                   'registraciya', 'try', 'reestraciya', 'nachnite', 'pochnit',\n                   'stvoriti', 'sozdat', [['free', 'activate', 'create'],\n                    ['a new', 'account', 'userid', 'id', 'profile']],\n                    'zaregistrirovat sya', 'tilmeld dig', 'registre se',\n                    'melde dich', 'reestracii', 'registracii',\n                    'create your master password', ['start', 'free trial']\n                   ], ['!', 'newsletter', 'verify', 'edit', 'update', 'news'\n                    'security code', 'reset', 'change', 'forget', 'forgot',\n                    'forgotten', ['special', ['offers', 'deals']], 'sign in',\n                    'login', 'log in', 'sign on', 'help', 'mailing list', 'job',\n                    'email', 'old email', 'protect', 'invite', 'recover',\n                    'add mobile phone number', 'voiti', 'rediger','location'\n                    'campaign', 'promote', 'funnel', 'can t', 'cannot',\n                    ['recovery', '!or recovery'], 'please activate your account'\n                    ['vidnovlennya', '!abo vidnovlennya']\n                  ]]]\n  \"security-questions\": [[['security questions', 'security question',\n                         ['answer', 'question']],\n                         ['!', 'reset', 'search for answers']]]\n  \"payment-info\":    ['payment', 'creditcard', 'credit card']\n  \"security-code\": [[['security code', 'securitycode'], ['!', 'authenticator']]]\n  \"order\":        [[['order', 'oplata'], ['!', 'sign up', 'in order to']]]\n  \"search\":       ['search', 'poshuk', 'poisk', 'quick search', 'query', 'find',\n                   'recherche', 'etsi', 'sok', 'sog', \"hledat\", \"hladat\",\n                   'suche', 'suchen']\n  \"subscription\":  [[['post', 'subscribe', 'subscription', 'podpysatsa',\n                    'pidpysatys', 'podpyska', 'pidpyska', 'newsletter', 'news',\n                    'unsubscribe', 'contact', 'news letter', 'invite',\n                    'get a weekly email', 'never miss a thing', 'spammers',\n                    'get the latest content', 'never miss a post',\n                    'be the first', ['/^deliver/', 'weekly'], 'mailing list',\n                    [['sign up', 'signup', 'signed up', 'join'],\n                     ['for', 'newsletter', 'info', 'news', 'email', 'mail']\n                    ], 'podpishites', 'rozsilku', 'pidpishites',\n                    [['get', 'special'], ['deals', 'offers']],\n                    ['to', 'inbox'], 'get notified',\n                   ], ['!', 'password', 'log in', 'get started' ]]]\n  \"change-username\":  [[['update', 'change', 'edit'], 'username']]\n  \"change-email\":  [ [['update', 'change', 'correct'], 'email'],\n                    ['current', 'new', 'email', 'changed'],\n                    ['old email address', 'new email address'],\n                    ['make', 'corrections', 'email address']\n                   ]\n  \"change-password\":  [[['update', 'change', 'create', 'setting',\n                      'edit', 'rediger', 'set'], ['pass', 'password', 'pwd']],\n                      'zminiti parol', ['choose', 'new password']]\n  \"change-phone\":     ['change phone', 'add phone', 'update phone']\n  \"change-mobile-phone\":  ['change mobile phone', 'add mobile phone',\n                           'update mobile phone']\n  \"profile\":          ['profile', 'account info', 'preferences', 'edit',\n                      'update', 'rediger', 'general information']\n  \"password-gen\":     ['password generator']\n  \"reset-password\":   [[[[['forgot', 'reset', 'retrieve', 'recover', 'recovery',\n                       'remind', 'resetting', 'forgotten', 'verify', #'need'\n                      ],\n                       'password'], '找回密码', 'receive email', 'reset account',\n                       'recover account', 'having trouble signing',\n                       'vosstanovlenie parolya', 'vidnovlennya parolya',\n                       'esqueceu a senha', 'tilbakestilling av passord'\n                       'skydannya parolya', 'nulstilling af adgangskode',\n                       'passwortrucksetzung',\n                       ['enter', ['username', 'login', 'email'], 'we', 'send',\n                        'link']\n                      ], ['!', 'question', 'questions', 'click here to']]]\n  \"disable-account\":  [[['disable', 'disabled'], 'account']]\n  \"forgot-email\":     ['forgot email']\n  \"forgot-login\":     [ ['forgot', ['login', 'user id', 'username']]]\n  \"forgot-pin\":       ['forgot pin', 'forgot your pin']\n  \"verify\":           ['verify', 'verification', 'check', 'enter code',\n                       'pidtverdzhennya vhodu', 'authenticator', 'proverka'],\n  '-mfa':            [[['mfa', 'two factor', 'totp', 'authentication app'],\n                      ['!', 'emailed', 'sms', ['email', 'send', 'code'],\n                        ['check', 'email']]]]\n  '-emailed':        ['emailed', ['email', 'send', 'code'], ['check', 'email']]\n  \"mfa-setup\":        [[['set up', 'setup'], 'mfa']]\n  \"other\":            ['new posting', 'your answer', 'happening now', 'paying'\n                       'zadat vopros', 'comment', 'comentar', 'vidguk', 'job',\n                       'otzyv', 'feedback', 'promote', 'campaign', 'funnel',\n                       'discussion', 'pay', 'bill', 'kupit', 'kupiti',\n                       'platezhi'\n                      ]\n}\n\n#BUTTONS_ETALONS = [\n#  #          OR        AND        OR          OR        AND        OR\n#  [[['BUTTON', 'INPUT'], ['SUBMIT', 'BUTTON']], ['INPUT', 'IMAGE'],\n#  #      OR       AND\n#  [['DIV', 'SPAN', 'A'], '']]\n#]\nBUTTON_SELECTORS = selectors.BUTTON_SELECTORS\n\nALL_BUTTON_SELECTORS = [\n  BUTTON_SELECTORS,\n  selectors.ANCHOR_SELECTORS\n].join(',')\n\nBUTTON_INPUT_SELECTORS = BUTTON_SELECTORS + ',A'\n\ng_const = ZINDEX_DELTA: 5  #TODO: rewrite zindex detection part of parser\nRATE_DELTA = 1 #0.5\n\nFULL_MATCHING_RANK  = 1\nSUBSTR_MATCHING_RANK = 1\n\nABBREVIATIONS = ['URL', 'eMail', 'FREE', 'EMAIL', 'Email', 'login', 'password',\n  'WWW', 'HTTP', 'OK', 'ID', 'TOTP', 'MFA', 'OTP', 'OTC']\nABBREVIATIONS_RE = RegExp \"(#{ABBREVIATIONS.join('|')})\", 'g'\n\nFORM_TITLE_TAG_NAMES = [\n  'h1','h2','h3','h4','h5','h6', 'p', 'div', 'span', 'dt', 'dd', 'td',\n  'hero', 'header', 'content', 'label', 'section'\n]\n\nGT = {\n  'iframe_url':       'dimension1'\n  'iframe_level':     'metric1'\n  'parser_run':       'metric2'\n  'input_visibility': 'metric3'\n  'page_state':       'dimension2'\n  'form_selector':    'dimension3'\n  'input_label':      'dimension4'\n  'input_kind':       'dimension6'\n  'input_id':         'dimension7'\n  'input_type':       'dimension8'\n  'input_ptype':      'dimension9'\n  'form_ptype':       'dimension10'\n}\n\nEMAILS_RE = ///([-a-z0-9~!$%^&*_=+}{\\'?]+(?:\\.[-a-z0-9~!$%^&*_=+}{\\'?]+)*\n              @(?:[a-z0-9_][-a-z0-9_]*(?:\\.[-a-z0-9_]+)*\\.\n              (?:aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|\n               org|pro|travel|mobi|[a-z][a-z])|(?:[0-9]{1,3}\\.[0-9]{1,3}\\.\n              [0-9]{1,3}\\.[0-9]{1,3}))(?::[0-9]{1,5})?)\n           ///gi\nEMAIL_RE = ///^\\s*([-a-z0-9~!$%^&*_=+}{\\'?]+(\\.[-a-z0-9~!$%^&*_=+}{\\'?]+)*\n              @([a-z0-9_][-a-z0-9_]*(\\.[-a-z0-9_]+)*\\.\n              (aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|\n               org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\\.[0-9]{1,3}\\.\n              [0-9]{1,3}\\.[0-9]{1,3}))(:[0-9]{1,5})?)\\s*$\n           ///i\n\n\nPHONE_RE = ///\n  ^\\s*\n  (\n    \\+ \\d{7,15}\n  | (?:\n      (?: \\+? \\d{1,3} (?: \\s \\(? \\d{1,3} \\)? )?\n        | \\(? \\d{1,3} \\)?\n      )\n      (?: \\s? \\/ \\s? | [\\s-] )\n      (?: \\d{7,8}\n        | (?: \\d{2} \\s \\d{2} | \\d{3,4} ) \\s (?: \\d{2} \\s \\d{2} | \\d{3,4} )\n        | (?: \\d{2}  - \\d{2} | \\d{3,4} )  - (?: \\d{2}  - \\d{2} | \\d{3,4} )\n      )\n    )\n  | (?: (?: \\d{2} \\s \\d{2} | \\d{3,4} ) \\s (?: \\d{2} \\s \\d{2} | \\d{3,4} )\n      | (?: \\d{2}  - \\d{2} | \\d{3,4} )  - (?: \\d{2}  - \\d{2} | \\d{3,4} )\n    )\n  )\n  \\s*$\n///\n\n\nPHONES_RE = ///\n  (?:^|[^\\d+])\n  (\n    \\+ \\d{7,15}\n  | (?:\n      (?: \\+? \\d{1,3} (?: \\s \\(? \\d{1,3} \\)? )?\n        | \\(? \\d{1,3} \\)?\n      )\n      (?: \\s? \\/ \\s? | [\\s-] )\n      (?: \\d{7,8}\n        | (?: \\d{2} \\s \\d{2} | \\d{3,4} ) \\s (?: \\d{2} \\s \\d{2} | \\d{3,4} )\n        | (?: \\d{2}  - \\d{2} | \\d{3,4} )  - (?: \\d{2}  - \\d{2} | \\d{3,4} )\n      )\n    )\n  | (?: (?: \\d{2} \\s \\d{2} | \\d{3,4} ) \\s (?: \\d{2} \\s \\d{2} | \\d{3,4} )\n      | (?: \\d{2}  - \\d{2} | \\d{3,4} )  - (?: \\d{2}  - \\d{2} | \\d{3,4} )\n    )\n  )\n  (?![\\d+])\n///g\n\n\nVISIBLE_STYLE_ATTRIBUTES = [\n  'opacity', 'visible', 'z-index', 'display', 'left', 'right', 'top',\n  'bottom', 'height', 'margin-top', 'margin-bottom', 'padding-top',\n  'padding-bottom' #, 'position'\n]\n\n\nnormalizePhone = (value) ->\n  if value\n    match = value.match(PHONE_RE)\n    if match?\n      #normalize phone number (remove spaces and () from it)\n      value = match[1].replace(/[\\s()+-]/g, '')\n  return value\n\n\nselect = (selector) ->\n  try\n    OptimalSelect.select selector,\n      ignore:\n        attribute: (name) ->\n          /^(axt-|gigya-|data-|action|name|title|onsubmit)/.test(name)\n  catch e\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers\", \"optimal_Select error on selector = #{selector}: #{e.stack ? e}\"))\n    return \"#ERROR#\"\n\n\ngetSelectedCssAttributes = (src, attr_list) ->\n  cssParser.srcToCSSP(\"{#{src}}\")[1][1][1...].filter( (i) ->\n    i[0] == 'declaration' and\n      i[1][0] == 'property' and\n      i[1][1][0] == 'ident' and\n      i[1][1][1] in attr_list\n  ).reduce( (nodes, node) ->\n    # fill dictionary with keys: \"css-attribute_name\" and values: \"css_value\"\n    for i in node[2] when i[0] in ['number', 'ident', 'dimension']\n      if i[0] == 'dimension'\n        value = i[1][1] + i[2][1]\n      else\n        value = i[1]\n      break\n\n    nodes[node[1][1][1]] = value\n    nodes\n  , {}\n  )\n\n\ncompareSimpleDict = (first_dict, second_dict, ignore_values) ->\n  # simple comparison of one level objects\n  first_dict_keys = Object.keys(first_dict)\n  second_dict_keys = Object.keys(second_dict)\n\n  diff = first_dict_keys.length != second_dict_keys.length\n  if not diff\n    for key in first_dict_keys\n      if (\n        key not of second_dict or (\n          first_dict[key] != second_dict[key] and\n          first_dict[key] not in ignore_values and\n          second_dict[key] not in ignore_values\n        )\n      )\n\n        diff = true\n        break\n  return diff\n\n\ncompareVisibleStyleAttributes = (old_style, new_style) ->\n  old_style ?= \"\"\n  new_style ?= \"\"\n\n  old_css = utils.safeApply(\n    getSelectedCssAttributes, undefined, [old_style, VISIBLE_STYLE_ATTRIBUTES],\n    \"getSelectedCssAttributes error (old_style='#{old_style}'')\"\n  )\n  old_css = {} if old_css instanceof Error\n\n  new_css = utils.safeApply(\n    getSelectedCssAttributes, undefined, [new_style, VISIBLE_STYLE_ATTRIBUTES],\n    \"getSelectedCssAttributes error (new_style='#{new_style}'')\"\n  )\n  new_css = {} if new_css instanceof Error\n\n  return compareSimpleDict old_css, new_css, ['auto']\n\n\ntransferInput = (input, old_form, new_form) ->\n  #console.warn(\n  #  \"transferInput: input=\", input, \"old_form=\", old_form,\n  #  \"new_form=\", new_form\n  #)\n\n  if input? and old_form? and new_form?\n    # add input from old form into newly created form\n    if 'rates' not of input\n      input.rates = new RatesProp(\n        -1, input, new_form.inputs.becomesDirty\n      )\n    else\n      input.rates.onRateChanged new_form.inputs.becomesDirty\n\n    old_form.inputs.remove input\n    new_form.inputs.add input\n    new_form.axt_elements ?= []\n    new_form.axt_elements.push(input) if input not in new_form.axt_elements\n    input.axt_form = new_form\n  return\n\n\ntransferHiddenInput = (input, old_form, new_form) ->\n  #console.warn(\n  #  \"transferHiddenInput: input=\", input, \"old_form=\", old_form,\n  #  \"new_form=\", new_form\n  #)\n\n  if input? and old_form? and new_form?\n    # add input from old form into newly created form\n    if 'rates' not of input\n      input.rates = new RatesProp(\n        -1, input, new_form.hidden_inputs.becomesDirty\n      )\n    else\n      input.rates.onRateChanged new_form.hidden_inputs.becomesDirty\n\n    old_form.hidden_inputs.remove input\n    new_form.hidden_inputs.add input\n    new_form.axt_elements ?= []\n    new_form.axt_elements.push(input) if input not in new_form.axt_elements\n    input.axt_form = new_form\n  return\n\n\ntransferButton = (button, old_form, new_form) ->\n  if button? and new_form?\n    # add button from old form into newly created form\n    if 'rates' not of button\n      button.rates = new RatesProp(\n        -1, button, new_form.buttons.becomesDirty\n      )\n    else\n      button.rates.onRateChanged new_form.buttons.becomesDirty\n\n    #console.error \"BUTTON:\", button\n    #console.warn  \"OLD_FORM:\", old_form\n    old_form?.buttons?.remove button\n    new_form.buttons.add button\n    new_form.axt_elements ?= []\n    new_form.axt_elements.push(button) if button not in new_form.axt_elements\n    button.axt_form = new_form\n  return\n\n\n###:\n  * Show label ('login', 'password', etc.) and KeyReel icon in the\n  * given input element\n  *\n  * @param {HTMLElement} input - destination input element\n  * @param {string}      tag   - label name\n  * @param {integer|''}  value - number for showing in KeyReel icon\n  * @param {Boolean}     debug - true - add label for not next inputs\n###\nadd_input_icon = (input, tag, value, debug) ->\n  try expect((input), \"\"\"input\"\"\") .to.be.an.instanceOf HTMLElement catch e then throw e\n  #verbose-begin [add_input_icon]: add_input_icon\n\n  offset_parent = input.offsetParent\n  if not utils.isElementVisible(input) or not offset_parent?\n    # offset_parent equals to null if input is not visible\n    # (css: visible: none) or it's position is 'fixed'\n    #verbose-alt-end [add_input_icon]: add_input_icon\n    return\n\n  parent = input.parentNode\n  input_style = utils.getStyle(input)\n\n  if Number(input_style.zIndex) > 0\n    zIndex = input_style.zIndex + 1\n  else\n    zIndex = 'auto'\n\n  prev = input.style.position\n  input.style.position = 'relative' #!!!!!!!!!\n  input_offsetLeft = input.offsetLeft\n  #input_offsetRight = input.offsetRight\n  input_offsetTop = input.offsetTop\n  #input_offsetBottom = input.offsetBottom\n  input_offsetWidth = input.offsetWidth\n  #input_offsetHeight = input.offsetHeight\n  input.style.position = prev\n\n  #NOTE: commented out because it doesn't work correctly on ups.com\n  #      (adding 'relative' to <TD> makes <input> freeze (user cannot click\n  #      the submit button))\n  #TODO: check it on other sites\n#  if (\n#    offset_parent.tagName in ['TD', 'TH'] and\n#    utils.getStyle(offset_parent).position == 'static'\n#  )\n#    offset_parent.style.position = 'relative'\n\n  if input.axt_spans?[0]?\n    reposition_input_icon(input)\n    change_icon_value(input, tag, value)\n  else\n    if utils.isTextInput(input) or utils.isSelectInput(input)\n      span1 = document.createElement('span')\n      span1.className = 'keyreel axt-element axt-label'\n      span1.textContent = tag || '???'\n      span1.setAttribute('style',\n        \"opacity: 0;\" + \\\n        \"cursor: default !important;\" + \\\n        \"background-color: #ffffff !important;\" + \\\n        \"position: absolute !important;\" + \\\n        \"color: #25A3B6 !important;\" + \\\n        \"line-height: 10px !important;\" + \\\n        \"min-width: initial !important;\" + \\\n        \"height: initial !important;\" + \\\n        \"win-height: initial !important;\" + \\\n        \"width: initial !important;\" + \\\n        \"border-radius: 4px !important;\" + \\\n        \"border-width: 0px !important;\" + \\\n        \"border-style: none !important;\" + \\\n        \"box-shadow: none !important;\" + \\\n        \"display: inline !important;\" + \\\n        \"visibility: visible !important;\" + \\\n        \"z-index: #{zIndex} !important; \" + \\\n        \"left: #{input_offsetLeft + 10}px;\" + \\\n        \"top: #{input_offsetTop - 10 / 2}px;\" + \\\n        \"right: initial !important;\" + \\\n        \"bottom: initial !important;\" + \\\n        \"padding: 0px 3px !important;\" + \\\n        \"margin: 0 0 0 0 !important;\" + \\\n        \"font-size: 8px !important;\" + \\\n        'font-family: HelveticaNeue,Helvetica Neue,' + \\\n        'Helvetica,Arial,sans-serif !important;' + \\\n        '-webkit-text-stroke-width: initial !important;' + \\\n        \"transition: opacity 1s ease 0s !important;\" # + \\\n        #\"border: solid 1px !important;\"\n      )\n\n      span1.addEventListener 'transitionend', () ->\n        span1.style.transition = null\n\n      #span1.addEventListener 'click', (event) -> alert(event)\n      parent.insertBefore(span1, input.nextSibling)\n\n      input.axt_spans = [span1]\n\n      # start transition:\n      utils.delayCall 1, (-> span1.style.opacity = 0.9), \"set opacity error\"\n\n    if utils.isTextInput(input) and debug\n      corner_svg = \\\n        '<svg viewBox=\"0 0 14 14\" ' +\n          'xmlns=\"http://www.w3.org/2000/svg\" ' +\n          #'width=\"19px\" height=\"19px\"' +\n          '><g transform=\"translate(0.5, -0.5)\"><path ' +\n          'd=\"M0,0 C0,6.627417 5.372583,12 12,12 L12,0 L0,0 Z\" ' +\n          'stroke=\"#25A3B6\" fill=\"#25A3B6\" /><text ' +\n          'font-family=\"Helvetica\" font-size=\"8\" ' +\n          'font-weight=\"normal\" text-anchor=\"middle\" ' +\n          'fill=\"#FFFFFF\"><tspan id=\"ts1\" x=\"7\" y=\"8\">' + value +\n          '</tspan></text></g></svg>'\n\n      span2 = document.createElement('span')\n      span2.innerHTML = corner_svg\n      span2.className = 'keyreel axt-element axt-icon'\n      span2.setAttribute('style',\n        \"cursor: default !important;\" + \\\n        \"opacity: 0;\" + \\\n        \"width: 19px !important;\" + \\\n        \"height: 19px !important;\" + \\\n        \"min-width: 19px !important;\" + \\\n        \"max-width: 19px !important;\" + \\\n        \"min-height: 19px !important;\" + \\\n        \"max-height: 19px !important;\" + \\\n        \"position: absolute !important;\" + \\\n        \"border: none !important;\" + \\\n        \"display: inline !important;\" + \\\n        \"visibility: visible !important;\" + \\\n        \"z-index: #{zIndex} !important;\" + \\\n        \"font-size: 8px !important;\" + \\\n        \"left: #{input_offsetLeft + input_offsetWidth - 19}px;\" + \\\n        \"top: #{input_offsetTop + 1}px;\" + \\\n        \"margin: 0 0 0 0 !important;\" + \\\n        \"padding: 0 0 0 0 !important;\" + \\\n        \"transition: opacity 1s ease 0s !important;\" + \\\n        \"-webkit-transition: opacity 1s ease 0s !important;\" #+ \\\n        #  \"border: solid 1px !important;\" + \\\n        #  \"background-image: url(#{@ext_url}img/corner-3.png);\" + \\\n        #  \"background-position: 0px 0px !important;\" + \\\n        #  \"background-repeat: no-repeat !important;\"\n      )\n\n      span2.addEventListener 'transitionend', () ->\n        span2.style.transition = null\n\n      #span2.addEventListener 'click', (event) -> alert(event)\n      parent.insertBefore(span2, input.nextSibling)\n      input.axt_spans.push span2\n\n      # start transition:\n      utils.delayCall 1, ( -> span2.style.opacity = 1), \"set opacity error (2)\"\n  #verbose-end [add_input_icon]: add_input_icon\n\nreposition_input_icon = (input) ->\n  input_style = utils.getStyle(input)\n\n  if Number(input_style.zIndex) > 0\n    zIndex = input_style.zIndex + 1\n  else\n    zIndex = 'auto'\n\n  input_offsetLeft  = input.offsetLeft\n  input_offsetTop   = input.offsetTop\n  input_offsetWidth = input.offsetWidth\n\n  axt_spans = input.axt_spans\n  if axt_spans?\n    if axt_spans[0]?\n      style1 = axt_spans[0].style\n      style1.visibility = 'visible'\n      new_left = \"#{input_offsetLeft + 10}px\"\n      new_top = \"#{input_offsetTop - 10 / 2}px\"\n      if (\n        style1.zIndex != zIndex or\n        style1.left != new_left or\n        style1.top != new_top\n      )\n        style1.zIndex = zIndex\n        style1.left = new_left\n        style1.top = new_top\n\n    if axt_spans[1]?\n      style2 = axt_spans[1].style\n      style2.visibility = 'visible'\n      new_left = \"#{input_offsetLeft + input_offsetWidth - 19}px\"\n      new_top = \"#{input_offsetTop + 1}px\"\n      if (\n        style2.zIndex != zIndex or\n        style2.left != new_left or\n        style2.top != new_top\n      )\n        style2.zIndex = zIndex\n        style2.left = new_left\n        style2.top = new_top\n\n\nremove_input_icon = (input) ->\n  l.l.apply(l, l.r(context, 0, \"info\", \"parser-helpers\", \"remove_input_icon:\", input))\n  axt_spans = input.axt_spans\n  if axt_spans?\n    axt_spans.forEach (span) -> span.remove()\n    delete input.axt_spans\n\n\nchange_icon_value = (input, tag, value) ->\n  input_icon_spans = input?.axt_spans\n  if input_icon_spans?\n    if tag?\n      input_icon_spans[0]?.textContent = tag || '???'\n\n    if value?\n      input_icon_spans[1]?.getElementsByTagName('tspan')[0]?.textContent = value\n\n\n# every input has two values we can use as its right value:\n#  typed_value - we store this value in @input_values when user types\n#  current_value - value from input.value property\n# We cannot always use current_value, because it sometimes changes for some\n# reasons with js on sites (e.g. replace correct values with v***s masks, etc)\n# This function tries to select correct values from these two values.\n#\n# NOTE: typed_value has a preference for now\ngetCorrectValue = (typed_value, current_value) ->\n  #verbose: GCV1\n  value = null\n  if typed_value?\n    #verbose: GCV2\n    if current_value?\n      #verbose: GCV3\n      if current_value.startsWith(typed_value)\n        #verbose: GCV4\n        #HACK: workaround for inputs, values in which inserted from pull down\n        # menu (autofill from previous typed values). When user type one or\n        # two characters and then select the value from the menu,\n        # login_value consists only these one or two characters but\n        # current_value consists them all\n        value = current_value\n      else\n        #verbose: GCV5\n        value = typed_value\n    else\n      #verbose: GCV6\n      value = typed_value\n  else\n    #verbose: GCV7\n    value = current_value\n  return value\n\n\n\n#onResizeEvent = (callback, timeout = 40)  ->\n#  resizeTimeout = null\n#  window.addEventListener \"resize\", () ->\n#    # ignore resize events as long as a callback execution is in the queue\n#    if not resizeTimeout\n#      resizeTimeout = utils.delayCall timeout, () ->\n#        #verbose [onResizeEvent] \"onResize FIRED!\"\n#        resizeTimeout = null\n#        callback()\n\n# replace dictionary's keynames from GT with it's values\n# For example:\n#   If we have the param parameter equals 'iframe_url',\n#   the function returns 'dimension1'\n#   If the param parameter == { page_state: '', parser_run: 1 }\n#   the function returns { dimension2: '', metric2: 1 }\nreplaceCustomNames = (param) ->\n  #verbose-begin [replaceCustomNames] \"replaceCustomNames\"\n  #verbose-param [replaceCustomNames] param\n  if utils.isObject(param)\n    new_param = {}\n    for k,v of param\n      key = GT[k] ? k\n      new_param[key] = v\n  else\n    new_param = GT[param] ? param\n  #verbose-val [replaceCustomNames] new_param\n  #verbose-end [replaceCustomNames] \"replaceCustomNames\"\n  return new_param\n\n\n# dummy analytics class. it should disable analytics at all\nclass Analytics\n  constructor: () ->\n  setEnabled: () ->\n  send: () ->\n  set: () ->\n  sendException: (error, msg, fatal) ->\n    l.e.apply(l, l.r(context, 0, \"error\", \"\", \"#{msg}\\n\", error?.stack ? error))\n    return\n\nclass GoogleAnalytics extends Analytics\n  constructor: (init_info) ->\n    # NOTE! call this function after config is read from storage\n    #verbose-begin[GoogleAnalytics]: GoogleAnalytics.constructor\n    #verbose-param[GoogleAnalytics]: init_info\n    @axt_ga_id = init_info.config.axt_ga_id\n    @pageview_sent = false\n\n    ga.initGoogleAnalytics(init_info.config)\n\n    @set\n      location:   context.axt_url\n      iframe_url: window.location.toString()\n      title:      init_info.title\n      #page: '/'\n      #hostname: 'https://www.google.com'\n    #verbose-end [GoogleAnalytics]: GoogleAnalytics.constructor\n\n  # enable and disable google analytics\n  # parameter:\n  #   new_state Boolean  true - enable gathering of analytics; false - disable\n  setEnabled: (new_state) -> ga.setEnabled(@axt_ga_id, new_state)\n\n  # send messages to Google Analytics. First parameter is hitType\n  # other parameters are the same as a parameters for ga('send', hitType, ...)\n  send: () ->\n    #verbose-begin [GoogleAnalytics.send] \"GoogleAnalytics.send\"\n    process = true\n\n\n    # replace custom additional properties' names with standard ones\n    param = Array.from(arguments)\n\n    ##debug!(1) [ga.dump!]: GA.SEND(#{dumper(param)[1...-1]})\n\n    #verbose-param [GoogleAnalytics.send] param\n    for p, idx in param\n      param[idx] = replaceCustomNames(p) if utils.isObject(p)\n\n    param = ['send'].concat(param)\n    if param[1] == 'pageview' and not @pageview_sent\n      iframe_level = getFrameDepth()\n      #verbose-val [GoogleAnalytics.send] iframe_level\n\n      #@set 'iframe_level', iframe_level\n\n      if iframe_level == 0\n        # send only one pageview per root page\n        process = not @pageview_sent\n      else\n        process = false\n\n      @pageview_sent = true\n\n    ga.apply(window, param) if process\n    #verbose-end [GoogleAnalytics.send] \"GoogleAnalytics.send\"\n\n  # set variables of Google Analytics.\n  set: () ->\n    #verbose-begin [GoogleAnalytics.send]: GoogleAnalytics.set\n    #verbose-val   [GoogleAnalytics.send]: arguments\n\n    #debug!(1) [ga.dump!]: GA.SET(#{dumper(arguments)[1...-1]})\n\n    if arguments.length\n      params = ['set'].concat(Array.from(arguments))\n      params[1] = replaceCustomNames(params[1])\n\n      #verbose-val [GoogleAnalytics.send] params\n      ga.apply(null, params)\n    #verbose-end [GoogleAnalytics.send]: GoogleAnalytics.set\n\n  # print and send to ga information about the error\n  # @parameters\n  #  @param error - Error object\n  #  @param msg   - error message\n  #  @param fatal - set true if error is fatal\n  sendException: (error, msg, fatal) ->\n    ga.sendException(error, msg, fatal, true)\n\n\nframeDepthCache = null\n# return depth of iframe (0 - root page, 1 - first level iframe, ...)\ngetFrameDepth = () ->\n  _getFrameDepth = (winToID) ->\n    if winToID == window.top\n      return 0\n    else if winToID.parent == window.top\n      return 1\n    return 1 + _getFrameDepth (winToID.parent)\n\n  if frameDepthCache?\n    frameDepthCache\n  else\n    frameDepthCache = _getFrameDepth(window.self)\n\n\n# return 'block' for block html elements (e.g. div) or 'inline' (em, span, etc.)\n# or null otherwise\ngetElementDisplayStyle = (html_element) ->\n  try expect((html_element), \"\"\"html_element\"\"\") .to.be.instanceOf HTMLElement catch e then throw e\n\n  #verbose-begin [getElementDisplayStyle]: getElementDisplayStyle\n  displayStyle = null\n\n  if html_element  # Only if the element exists\n    displayStyle = utils.getStyle(html_element).getPropertyValue 'display'\n\n  #verbose-val [getElementDisplayStyle]: displayStyle\n  #verbose-end [getElementDisplayStyle]: getElementDisplayStyle\n  return displayStyle\n\n\n# transliterate, lowercase and split string into separate words\n# (templates: word-word, word_word, wordWord, word[any_not_alphabet_char]word)\nsplitString = (str) ->\n  try expect((str), \"\"\"str\"\"\") .to.be.a 'string' catch e then throw e\n\n  #verbose-begin [splitString]: splitString\n  #verbose-param [splitString]: str\n\n  # replace abbreviation with lowercase and spaces around it:\n  # wordABBRword ==> word abbr word\n  str = str.replace ABBREVIATIONS_RE, (w) -> ' ' + w.toLowerCase() + ' '\n\n  #verbose [translit-word] '-- BEFORE: word=', str\n  str = Soundex.translit(str)\n\n  # split names:\n  words = str\n          .replace(/([a-z](?=[A-Z]))/g, '$1-')\n          .replace(/([A-Z](?=[a-z]))/g, '-$1')\n          .toLowerCase()\n          .replace(/[1-9\\s,.:\\u2026;'\"#@<>§±^`~*=，|\\\\\\/!?%&()_\\[\\]{}]/g, '-')\n          .replace(/-+/g, '-')\n          .split('-')\n  #verbose [translit-word] '-- AFTER: words=', words\n\n  do words.shift if not words[0]\n  do words.pop if not words[-1..][0]\n\n  #verbose-val [splitString]: words\n  #verbose-end [splitString]: splitString\n  return words\n\n\n# compare two arrays (first level elements are only compared)\n#  0 - arrays are equal, -1 - a < b, 1 - a > b\ncompareArrays = (a, b) ->\n  #verbose-begin [compareArrays]: compareArrays\n  #verbose-param [compareArrays]: a, b\n  a_len = a?.length\n  b_len = b?.length\n\n  if a_len < b_len\n    #verbose [compareArrays]: CA-1: return -1\n    #verbose-alt-end [compareArrays]: compareArrays\n    return -1\n  else if a_len > b_len\n    #verbose [compareArrays]: CA-2: return 1\n    #verbose-alt-end [compareArrays]: compareArrays\n    return 1\n  else\n    for idx in [0...a_len]\n      a_rate = a[idx]\n      b_rate = b[idx]\n      if a_rate < b_rate\n        #verbose [compareArrays]: CA-3: return -1\n        #verbose-alt-end [compareArrays]: compareArrays\n        return -1\n      else if a_rate > b_rate\n        #verbose [compareArrays]: CA-4: return 1\n        #verbose-alt-end [compareArrays]: compareArrays\n        return 1\n  #verbose     [compareArrays]: CA-5: return 0\n  #verbose-end [compareArrays]: compareArrays\n  return 0\n\n\n# return array with titles for given form\ngetFormTitle = (form) ->\n  #verbose-begin [getFormTitle]: getFormTitle\n  #verbose-param [getFormTitle]: form\n  titles = []\n  form_rect = form.getBoundingClientRect()\n  curr = form\n  while curr != document.body\n    #verbose [getFormTitle|label] \"GFT-1 check block =\", curr\n    prev = curr.previousElementSibling\n    #verbose [getFormTitle|label] \"GFT-2: prev element:\", prev\n    if prev?\n      # if previous element contains other form - revoke it\n      if prev.querySelector(selectors.FORM_SELECTORS)?\n        #verbose [getFormTitle|label]: GFT-3: break 1\n        prev = null\n        break\n      else\n        rect = prev.getBoundingClientRect()\n        #verbose [getFormTitle|label] \"GFT-4: rect =\", rect\n        while prev? and (\n          rect.width == 0 or\n          rect.height == 0 or\n          prev.tagName.toLowerCase() == 'br'\n        )\n          #verbose [getFormTitle|label] \"GFT-5: prev =\", prev\n          prev = prev.previousElementSibling\n          rect = prev?.getBoundingClientRect()\n\n        #verbose [getFormTitle|label] \"GFT-6: form_rect =\", form_rect\n        if prev? and rect.width > 0 and rect.height > 0 and (\n          rect.bottom >= form_rect.top or rect.right <= form_rect.left\n        )\n          #verbose [getFormTitle|label]: GFT-7: break 2\n          prev = null\n          break\n\n        #verbose [getFormTitle|label] \"GFT-8: prev =\", prev\n        #verbose-val [getFormTitle] prev?.tagName.toLowerCase()\n        #verbose-val [getFormTitle] dumper FORM_TITLE_TAG_NAMES\n        #verbose-val [getFormTitle] prev?.tagName.toLowerCase() in \\\n        #  FORM_TITLE_TAG_NAMES\n        if prev? and prev.tagName.toLowerCase() in FORM_TITLE_TAG_NAMES\n          titles = getNodeText(prev, false, true, true)\n#          titles = utils.innerTextList(prev, null, true, true,\n#            ['SCRIPT', 'SELECT', 'INPUT', 'BUTTON', 'FORM']\n#          )\n          #verbose [getFormTitle|label] \"GFT-9: titles =\", titles\n          break if not utils.isEmptyObject(titles)\n\n    parent = curr.parentElement\n    #verbose [getFormTitle|label] \"GFT-10: parent =\", parent\n    parent_child_forms = parent?.querySelectorAll(selectors.FORM_SELECTORS)\n    #verbose [getFormTitle|label] \"GFT-11: parent_child_forms =\", \\\n    #  parent_child_forms\n    if (\n      parent? and\n      parent.tagName.toLowerCase() in FORM_TITLE_TAG_NAMES and\n      1 == parent_child_forms.length and\n      parent.contains(form) #== parent_child_forms[0]\n    )\n      curr = parent\n      #verbose [getFormTitle|label] \"GFT-12: next step: curr=\", curr\n      continue\n    break\n\n  #verbose [getFormTitle|label] \"GFT-13: titles =\", titles\n  #verbose-end [getFormTitle]: getFormTitle\n  return titles\n\n\n# return list of parent's children according to selector_or_array\ngetParentsChildren = (parent, child, selector_or_array) ->\n  try assert(not parent? or parent instanceof HTMLElement,\n    \"getParentsChildren-1: parent should be null or HTMLElement but not\" +\n    \" #{parent}\") catch e then throw e\n  try assert(not child? or child instanceof HTMLElement,\n    \"getParentsChildren-2: child should be null or HTMLElement but not\" +\n    \" #{child}\") catch e then throw e\n  try assert((not selector_or_array? or\n    utils.isString(selector_or_array) or\n    utils.isArray(selector_or_array)),\n    \"getParentsChildren-3: selector should be null, a string or an \" +\n    \"array of HTMLElements\") catch e then throw e\n\n  #verbose-begin [getParentsChildren]: getParentsChildren\n  #verbose-param [getParentsChildren]: parent\n  #verbose-param [getParentsChildren]: child\n  #verbose-param [getParentsChildren]: selector_or_array\n\n  children = []\n  if parent?\n    if child?\n      if selector_or_array\n        if utils.isArray(selector_or_array)\n          children = selector_or_array.filter (e) ->\n            utils.belongToAncestor(e, parent)\n        else\n          if parent.matches(selector_or_array)\n            #verbose [getParentsChildren] \"PC-1 children = []\"\n            #verbose-alt-end [getParentsChildren]: getParentsChildren\n            return [] # ???\n\n          children = parent.querySelectorAll(selector_or_array)\n      else\n        children = parent.getElementsByTagName(child.tagName)\n\n      children.push(child) if child not in children\n\n      #verbose [getParentsChildren] \"PC-2 children =\", children\n      children = Array.from(children).filter (el) ->\n        not utils.belongToAncestor(el, child)\n      #verbose [getParentsChildren] \"PC-3 children =\", children\n\n    else # child is null -> parent has one any child\n      if selector_or_array\n        if utils.isArray(selector_or_array)\n          if parent in selector_or_array\n            #verbose [getParentsChildren] \"PC-4 retcode = false\"\n            #verbose-alt-end [getParentsChildren]: getParentsChildren\n            return []\n\n          children = selector_or_array.filter (e) ->\n            utils.belongToAncestor(e, parent)\n        else\n          if parent.matches(selector_or_array)\n            #verbose [getParentsChildren] \"PC-5 retcode = false\"\n            #verbose-alt-end [getParentsChildren]: getParentsChildren\n            return []\n\n          children = parent.querySelectorAll(selector_or_array)\n      else\n        children = parent.children\n\n  #verbose-val [getParentsChildren]: children\n  #verbose-end [getParentsChildren]: getParentsChildren\n  return children\n\n\n# return true when parent node has only one child with tagName == child.tagName\nparentHasOnlyOneChild = (parent, child, selector_or_array) ->\n  try assert(not parent? or parent instanceof HTMLElement,\n    \"parentHasOnlyOneChild-1: parent should be null or HTMLElement but not\" +\n    \" #{parent}\") catch e then throw e\n  try assert(not child? or child instanceof HTMLElement,\n    \"parentHasOnlyOneChild-2: child should be null or HTMLElement but not\" +\n    \" #{child}\") catch e then throw e\n  try assert((not selector_or_array? or\n    utils.isString(selector_or_array) or\n    utils.isArray(selector_or_array)),\n    \"parentHasOnlyOneChild-3: selector should be null, a string or an \" +\n    \"array of HTMLElements\") catch e then throw e\n\n  #verbose-begin [parentHasOnlyOneChild]: parentHasOnlyOneChild\n  #verbose-param [parentHasOnlyOneChild]: parent\n  #verbose-param [parentHasOnlyOneChild]: child\n  #verbose-param [parentHasOnlyOneChild]: selector_or_array\n  children = getParentsChildren(parent, child, selector_or_array)\n  #verbose-val [parentHasOnlyOneChild]: children\n  if child?\n    retcode = (children.length == 1 and children[0] == child)\n  else\n    retcode = (children.length == 1)\n  #verbose-val [parentHasOnlyOneChild]: retcode\n  #verbose-end [parentHasOnlyOneChild]: parentHasOnlyOneChild\n  return retcode\n\n\n###!\n # Return list of tags for given str\n #\n # @param {String|List of String} str - string or array of strings/words for\n #                                      tagging\n # @param {Object} etalons - dict of type:\n #                             tag: ['word', 'word'...]\n #                           or:\n #                             words:\n #                               <tag>: ['word', 'word',...]\n #                             tags:\n #                               <complex_tag>: ['tag', 'tag', ...]\n # @param {Boolean} already_splitted - false: str contains array of strings\n #                                     true:  str contains array of words\n # @paranm {Boolean} use_opt -         false: [keyword] in etalons means set of\n #                                            keywords with only one element\n #                                     true:  [keyword] in etalons means\n #                                            optional parameter\n###\ntagsByStr = (str, etalons, already_splitted = false, use_opt = false) ->\n  try assert(utils.isString(str ? '') or utils.isArray(str),\\\n    \"rateByStr: str must be a string or an array of strings and not: #{str}\") catch e then throw e\n  try expect((etalons), \"\"\"etalons\"\"\") .to.be.an 'object' catch e then throw e\n\n  #verbose-begin [tagsByStr]: tagsByStr\n  #verbose-param [tagsByStr]: str\n  #verbose-param [tagsByStr]: etalons\n  tags = []\n\n  _rate = (word_list, _etalons, _already_splitted, _use_opt) ->\n    #verbose-val [tagsByStr._rate] word_list\n    _rated_tags = []\n    for etalon_tag, etalons_list of _etalons\n      #verbose [tagsByStr._rate] etalon_tag\n      #verbose [tagsByStr._rate] etalons_list\n      matched_words = []\n      matched_rank = utils.isInList [etalons_list], word_list, false,\n        (word, etalon_word) ->\n          #verbose-begin [tagsByStr._rate.callback] 'comp callback'\n          _rank = 0\n          if word\n            if etalon_word instanceof RegExp\n              _rank = SUBSTR_MATCHING_RANK if word.match etalon_word\n            else\n              if etalon_word[0] == '/'\n                etalon_word = etalon_word.split('/')[1]\n                if etalon_word? and word.match etalon_word\n                  _rank = SUBSTR_MATCHING_RANK\n              else\n                _rank = FULL_MATCHING_RANK if (word == etalon_word)\n\n          matched_words.push word if _rank and _already_splitted\n          #VERBOSE [tagsByStr._rate.callback] if _rank\n            #verbose [tagsByStr._rate.callback] \\\n            #  \">>> word = '#{word}', etalon_word = '#{etalon_word}', \" + \\\n            #  \"_rank =  #{_rank}\"\n\n          #NOTE: Soundex comparisson is disabled\n          # _rank = SOUNDEX_RANK if !_rank and\n          #   etalon_word.length >= SOUNDEX_MIN_WORD_LENGTH and\n          #   word.length >= SOUNDEX_MIN_WORD_LENGTH and\n          #   Soundex.compare(word, etalon_word)\n\n          #verbose-end [tagsByStr._rate.callback] 'comp callback'\n          return _rank\n      , _use_opt\n\n      #verbose-val [tagsByStr._rate] etalon_tag, matched_rank\n      if matched_rank\n        info =\n          tag: etalon_tag\n          rank: matched_rank\n        info.words = matched_words if _already_splitted\n        _rated_tags.push info\n    return _rated_tags\n\n  if not utils.isEmptyObject(str)\n    if 'words' of etalons and typeof(etalons.words) == 'object'\n      words_etalons = etalons.words\n      tags_etalons = etalons.tags\n    else\n      words_etalons = etalons\n      tags_etalons = null\n\n    if utils.isString(str)\n      strings = [str]\n    else\n      strings = str\n\n    if already_splitted\n      if words_etalons\n        tags = _rate(strings, words_etalons, true, use_opt)\n      else\n        tags = words.map (word) -> {tag: word}\n    else\n      tags = []\n      for str in strings\n        word_list = splitString(str)\n        #verbose[tagsByStr-0|label] \"tagsByStr-0: word_list=\", word_list\n        tags.push.apply(tags, _rate(word_list, words_etalons, false, use_opt))\n\n    tags = tags.map (info) -> info.tag\n    #verbose [tagsByStr|label] \"tagsByStr-1: tags =\", dumper tags\n    if tags.length > 0 and tags_etalons\n      added_rules = {}\n      used_tags = []\n      prev_added_rules_count = -1\n      while prev_added_rules_count != Object.keys(added_rules).length\n        prev_added_rules_count = Object.keys(added_rules).length\n        complex_tags = _rate(tags, tags_etalons, true, false)\n        #verbose [tagsByStr|label] \"tagsByStr-2: complex_tags =\", \\\n        #  dumper complex_tags\n\n        complex_tags.forEach (info) ->\n          #verbose [tagsByStr|label] \"tagsByStr-3: info =\", dumper info\n          if info?\n            tag = info.tag\n            if tag?\n              tag_hash = tag + ':' + info.words.join(':')\n              #verbose [tagsByStr|label] \"tagsByStr-4: tag_hash =\", \\\n              #  dumper tag_hash\n              if tag_hash not of added_rules\n                used_tags.push.apply(used_tags, info.words)\n                tags.push tag\n                added_rules[tag_hash] = true\n\n      # group by tag-names, value = cnt\n      tags_dict = tags.reduce (_dict, tag) ->\n        if tag of _dict\n          _dict[tag] += 1\n        else\n          _dict[tag] = 1\n        _dict\n      , {}\n      #verbose [tagsByStr|label] \"tagsByStr-5: tags_dict =\", dumper tags_dict\n      #verbose [tagsByStr|label] \"tagsByStr-6: used_tags =\", dumper used_tags\n\n      #remove tags which were used as a part of other tags\n      used_tags.forEach (tag) ->\n        cnt = tags_dict[tag]\n        if cnt > 0\n          tags_dict[tag] = cnt -= 1\n        if cnt == 0\n          delete tags_dict[tag]\n\n      # return tags sorted by cnt: select k from\n      tags = ([k, v] for k, v of tags_dict)\n        .sort((a, b) -> a[1] < b[1])\n        .map (p) -> p[0]\n      #OLD VERSION: tags = Object.keys(tags_dict)\n\n      #remove 'trigger' tags (additional tags to create complex tags from)\n      tags = tags.filter (tag) -> not tag.startsWith '+'\n\n  #verbose [tagsByStr|label] \"tagsByStr-7: tags =\", dumper tags\n  #verbose-end [tagsByStr]: tagsByStr\n  return tags\n\n\n# class for gathering rate information for forms and inputs.\n# This information is used to make a decision about form's/input's purpose\n# example:  add('login') will create property @login = 1\n#           second add('login') will increase value to 2: @login = 2, ...\nclass RatesProp\n  constructor: (idx, outer, on_rate_changed) ->\n    try expect(((idx ? 0)), \"\"\"(idx ? 0)\"\"\") .to.be.a 'number' catch e then throw e\n    try assert((not outer? or outer instanceof HTMLElement ),\n      \"outer (#{outer}) should be null or HTMLElement\") catch e then throw e\n\n    #verbose-begin [RatesProp.constructor]: RatesProp.constructor\n    #verbose-param [RatesProp.constructor]: outer\n    #verbose-param [RatesProp.constructor]: on_rate_changed\n\n    @_idx = [idx]\n    @_outer = outer\n    @_dirty_winners = true\n    @_winners = undefined\n\n    @tags = [] # all tags ordered by rates in descending order: ['t1', 't2'...]\n    @_rateChangedCallback = null\n    @tag_dict = {} # dict of rates_info:  {tag: [ rate, rate... ], tag2: ...}\n                   # all rates sorted in descending order (the highest is\n                   # the first)\n\n    @_log = [] # logging of all operations with this Rates instance\n\n    @onRateChanged(on_rate_changed)\n\n\n    # read-only property which returns the tag with max rate\n    Object.defineProperty this, 'winner',\n      enumerable: false\n      get: () -> @winners[0] #tags[0]\n\n\n    # read-only property object with an array of winner tag(s) which have equal\n    # max rate (see getWinners() for detail)\n    Object.defineProperty this, 'winners',\n      enumerable: false\n      get: () -> if @_dirty_winners then @getWinners() else @_winners\n\n\n    # read-only property which returns the idx of element in\n    # array (forms|elements)\n    Object.defineProperty this, 'idx',\n      enumerable: false\n      get: () -> return @_idx[0]\n\n\n    # read-only property which returns count of elements\n    Object.defineProperty this, 'count',\n      enumerable: false\n      get: () -> Object.keys(@tag_dict).length\n\n    #verbose-end [RatesProp.constructor]: RatesProp.constructor\n    return\n\n\n  ###!\n  # add event with additional parameters to the _log list\n  #\n  # @param {String} event - event name\n  # @param {String} [rater] - rater name\n  # @param {String} [tag] - tag name\n  # @param {Number|Array of Numbers} [value] - rates value (for adding)\n  ###\n  log: (event, rater, tag, value) ->\n    @_log.push {event: event, rater: rater, tag: tag, value: value}\n\n\n  ###!\n  # Return rater logs on the browser console/log file as an array of strings\n  #\n  # @param {Number=0} offset - offset all lines of the report left on\n  #                            given number of spaces\n  # @return {Array of Strings} -\n  ###\n  getLog: (offset) ->\n    result = []\n    @_log.forEach (record) ->\n      val = record.value\n      if val?\n        if Array.isArray(val)\n          val = val.map (i) ->\n            if utils.isNumber(i) then i.toFixed(1) else i\n          val = '[' + val.join(', ') + ']'\n        else\n          val = val.toFixed(1) if utils.isNumber(val)\n      else\n        val = ''\n\n      result.push \"#{Array(offset ? 0).join(' ')}# \" + \\\n        \"#{record.rater ? 'unknown'}: \" + \\\n        \"#{record.event ? 'unknown'}\" + \\\n        \"#{if record.tag? then ' ' + dumper record.tag else ''}\" + \\\n        \"#{if val then \", \" + val else ''}\"\n    #verbose [RatesProp.getLog] \"GetLog: result =\", result\n    return result\n\n\n  ###!\n  # Reset rates to their initial state\n  #\n  # @param {String} rater_name - name of a program, which has called this\n  #                              method (e.g. a rater). It uses to log this\n  #                              action into the rater's log. Call @showLog()\n  #                              to see all actions on this rater\n  ###\n  reset: (rater_name) ->\n    #verbose-begin [RatesProp.reset]: RatesProp.reset\n    @tags = []\n    @tag_dict = {}\n    if rater_name == 'reset'\n      # special rater_name 'reset' uses to clear @_log array\n      @_log = []\n    else\n      @log \"reset\", rater_name\n    do @becomesDirty\n    #verbose-end [RatesProp.reset]: RatesProp.reset\n\n\n  # call this callback when rate is changed\n  onRateChanged: (callback) ->\n    try expect(((not callback? or utils.isFunction callback)), \"\"\"(not callback? or utils.isFunction callback)\"\"\") .to.be.true catch e then throw e\n\n    #verbose-begin [RatesProp.onRateChanged]: RatesProp.onRateChanged\n    #verbose-param [RatesProp.onRateChanged]: callback\n\n    old_callback = @_rateChangedCallback\n\n    if callback? and utils.isFunction callback\n      @_rateChangedCallback = callback\n    else\n      @_rateChangedCallback = null\n\n    #verbose-val [RatesProp.onRateChanged]: old_callback\n    #verbose-end [RatesProp.onRateChanged]: onRateChanged\n    return old_callback\n\n\n  # enable _dirty_* flags and call rateChangedCallback\n  becomesDirty: () ->\n    #verbose-begin [RatesProp.becomesDirty]: RatesProp.becomesDirty\n    @_dirty_winners = true\n    #verbose-var [RatesProp.becomesDirty] @_rateChangedCallback\n    @_rateChangedCallback?()\n    #verbose-end [RatesProp.becomesDirty] \"RatesProp.becomesDirty\"\n\n\n  # return true if there isn't any tags in this object\n  isEmpty: () ->  Object.keys(@tag_dict).length == 0\n\n\n  _insertSortedTag: (tag) ->\n    compFunc = (t1, t2) =>\n      l1 = @tag_dict[t1]\n      l1_len = l1.length\n\n      l2 = @tag_dict[t2]\n      l2_len = l2.length\n\n      min_l = Math.min(l1_len, l2_len)\n      max_l = Math.max(l1_len, l2_len)\n\n      for idx in [0 ... Math.min(min_l + 1, max_l)]\n        r1 = l1[idx] ? 0\n        r2 = l2[idx] ? 0\n        continue if r1 == r2\n        return -1 if r1 > r2\n        return  1 if r1 < r2\n      return 0\n\n    # there is only one element in the 'tags' list\n    @tags = [tag] if @tags.length == 0\n    idx = @tags.indexOf tag\n    return if idx >= 0 and @tags.length == 1\n    # remove the tag we want to add in right position into sorted tag list\n    # from current tag list\n\n    @tags.splice idx, 1 if idx >= 0\n    # now we have the 'tag' and sorted list of tags to add it in\n    utils.insertSorted @tags, tag, compFunc\n\n\n  ###!\n  # Increase rank for a tag or create a new tag with a given rank\n  # rank can be a number or a list of numbers (ranks)\n  #\n  # @param {String} rater_name - name of a program, which has called this\n  #                              method (e.g. a rater). It uses to log this\n  #                              action into the rater's log. Call @showLog()\n  #                              to see all actions on this rater\n  # @param {String} tag - name of a tag to add\n  # @param {Number} rank - rank of the added tag\n  ###\n  add: (rater_name, tag, rank = 1) ->\n    try expect(((tag ? '')), \"\"\"(tag ? '')\"\"\") .to.be.a 'string' catch e then throw e\n    try expect((\n      (utils.isNumber(rank) and not isNaN(rank)) or utils.isArray(rank)\n     ), \"\"\"(utils.isNumber(rank) and not isNaN(rank)) or utils.isArray(rank)\"\"\") .to.be.true catch e then throw e\n\n    #verbose-begin [RatesProp.add]: RatesProp.add\n    #verbose-param [RatesProp.add]: tag\n    #verbose-param [RatesProp.add]: rank\n\n    # number to number descending order comparator\n    desc = (a, b) -> return if a > b then -1 else if a < b then 1 else 0\n\n    if tag\n      if rank\n        @tag_dict[tag] = [] if tag not of @tag_dict\n\n        if utils.isArray rank\n          for r in rank\n            utils.insertSorted @tag_dict[tag], r, desc\n        else\n          utils.insertSorted @tag_dict[tag], rank, desc\n\n        @_insertSortedTag tag\n        do @becomesDirty\n\n    @log 'add', rater_name, tag, rank\n\n    #verbose     [RatesProp.add] \"@tag_dict[#{tag}] =\", @tag_dict[tag]\n    #verbose-end [RatesProp.add]: RatesProp.add\n    return @tag_dict[tag]\n\n\n  getSummaryRate: (tag) ->\n    summary_rate  = (@tag_dict[tag] ? []).reduce(\n      (summary_rate, rate, idx) -> summary_rate += rate / (1.5 ** idx)\n    , 0\n    )\n    #verbose [getSummaryRate] \"summary_rate for\", tag, \":\", summary_rate\n    summary_rate\n\n\n  # return array of winners if we have two or more elements with the same rates\n  # e.g.: if we have { tag1: [2,2], tag2: [2,2] } --> we get: ['tag1', tag2']\n  getWinners: (delta = RATE_DELTA) ->\n    #verbose-begin [RatesProp.getWinners]: RatesProp.getWinners\n\n    winners = [@tags[0]]\n    if @tags.length > 1\n      #verbose [RatesProp.getWinners|label] \"GW-1: tags=\", dumper @tags\n      # get first element from @tag_dict and compare it's rates with next ones\n\n      summary_rates = {}\n      for tag in @tags\n        #verbose [RatesProp.getWinners|label] \"GW-2: tag=\", tags\n        summary_rates[tag] = @getSummaryRate(tag)\n\n      #verbose [RatesProp.getWinners|label]\"GW-3: summary_rates=\", summary_rates\n      sorted_tags = @tags.sort (a, b) -> summary_rates[b] - summary_rates[a]\n\n      win_tag = sorted_tags[0]\n      #verbose [RatesProp.getWinners|label] \"GW-4: win_tag=\", win_tag\n\n      win_summary_rate = summary_rates[win_tag]\n      #verbose [RatesProp.getWinners|label] \"GW-5: win_summary_rate=\", \\\n      #  win_summary_rate\n\n      winners = [win_tag]\n      for tag in sorted_tags[1..]\n        summary_rate = summary_rates[tag]\n        #verbose [RatesProp.getWinners|label]\"GW-6: summary_rate=\", summary_rate\n        #break if summary_rate < .5\n        break if win_summary_rate - summary_rate > delta\n        winners.push tag\n\n    @_winners = winners\n    @_dirty_winners = false\n\n    #verbose-val [RatesProp.getwinners]: winners\n    #verbose-end [RatesProp.getWinners]: RatesProp.getWinners\n    return winners\n\n\n  ###!\n  # Remove `tag` from rates\n  #\n  # @param {String} rater_name - name of a program, which has called this\n  #                              method (e.g. a rater). It uses to log this\n  #                              action into the rater's log. Call @showLog()\n  #                              to see all actions on this rater\n  # @param {String} tag - name of a tag to remove from this rater\n  ###\n  remove: (rater_name, tag) ->\n    try expect((tag), \"\"\"tag\"\"\") .to.be.a 'string' catch e then throw e\n\n    #verbose-begin [RatesProp.remove]: RatesProp.remove\n    #verbose-val   [RatesProp.remove]: tag, @tag_dict\n\n    if tag of @tag_dict\n      removed_tag_dict = @tag_dict[tag]\n      #verbose-val [RatesProp.remove]: removed_tag_dict\n      delete @tag_dict[tag]\n      #verbose-val [RatesProp.remove]: @tag_dict\n\n      idx = @tags.indexOf tag\n\n      # remove deleted tag from @tags list too\n      #verbose-val [RatesProp.remove]: @tags\n      @tags.splice(idx, 1) if idx >= 0\n      #verbose-val [RatesProp.remove]: @tags\n\n      #verbose [RatesProp.remove]: do becomesDirty:\n      do @becomesDirty\n\n    @log 'remove', rater_name, tag\n    #verbose-val [RatesProp.remove]: removed_tag_dict\n    #verbose-end [RatesProp.remove]: RatesProp.remove\n    return removed_tag_dict\n\n\n  # Compare string with etalons keywords for different tags and add rates\n  # for all matched tags. Structure of keywords templates is:\n  #   { tag1: ['word', 'word', ...], tag2: [...], ...}\n  rateByStr: (rater_name, str, etalons, rank = 1) ->\n    try expect((rank), \"\"\"rank\"\"\") .to.be.a('number').and.not.to.be.NaN catch e then throw e\n    #verbose-begin [RatesProp.rateByStr]: RatesProp.rateByStr\n    #verbose-param [RatesProp.rateByStr]: rater_name\n    #verbose-param [RatesProp.rateByStr]: str\n    #verbose-param [RatesProp.rateByStr]: etalons\n    #verbose-param [RatesProp.rateByStr]: rank\n\n    # all etalon_words are found in word_list\n    tags = tagsByStr(str, etalons)\n    #console.warn \"str=>>>>\" , str\n    #console.warn \"tagByStr=>>>\", r\n    for tag in tags\n      @add rater_name, tag, rank\n      #verbose [RatesProp.rateByStr] 'Suggested tag is', tag, rank\n\n    #verbose-val [RatesProp.rateByStr]: tags\n    #verbose-end [RatesProp.rateByStr]: RatesProp.rateByStr\n    return tags\n\n\n  rateByParentsAttrs: (rater_name, attrs, etalons, top_element, rank = 1) ->\n    try expect((utils.isArray(attrs)), \"\"\"utils.isArray(attrs)\"\"\") .to.be.true catch e then throw e\n    try expect((etalons), \"\"\"etalons\"\"\") .to.be.an 'object' catch e then throw e\n\n    try expect((\n      not top_element? or typeof top_element is 'object'\n     ), \"\"\"not top_element? or typeof top_element is 'object'\"\"\") .to.be.true catch e then throw e\n\n    try expect((rank), \"\"\"rank\"\"\") .to.be.a('number').and.not.to.be.NaN catch e then throw e\n\n    try assert(@_outer instanceof HTMLElement,\n      \"@_outer should be HTMElement but not #{@_outer}\") catch e then throw e\n\n    #verbose-begin [RatesProp.rateByParentsAttrs]: RatesProp.rateByParentsAttrs\n    #verbose-param [RatesProp.rateByParentsAttrs]: attrs\n    #verbose-param [RatesProp.rateByParentsAttrs]: etalons\n    #verbose-param [RatesProp.rateByParentsAttrs]: rank\n    element = @_outer\n\n    if element?\n      parent = element.parentElement\n\n      INPUT_BUTTON_SELECTORS = selectors.INPUT_SELECTORS + ',' +\n        selectors.BUTTON_SELECTORS\n\n      if element.matches(INPUT_BUTTON_SELECTORS)\n        selector = INPUT_BUTTON_SELECTORS\n      else\n        selector = null\n\n      while parentHasOnlyOneChild(parent, element, selector)\n        break if parent == top_element\n        for attr in attrs\n          attr_text = parent.getAttribute(attr)\n          if utils.isString attr_text\n            @rateByStr rater_name, attr_text, etalons, rank\n\n        parent = parent.parentElement\n\n    #verbose-end [RatesProp.rateByParentsAttrs]: RatesProp.rateByParentsAttrs\n    return\n\n\n  rateByParentsTagText: (\n    rater_name,\n    tag_names,\n    etalons,\n    top_element = null,\n    rank = 1,\n    only_visible = false\n  ) ->\n    try assert(utils.isArray(tag_names),\\\n      \"tag_names should be an Array of tags, but not: #{tag_names}\") catch e then throw e\n\n    try expect((etalons), \"\"\"etalons\"\"\") .to.be.an 'object' catch e then throw e\n\n    try assert((not top_element?) or (top_element instanceof HTMLElement),\\\n      \"top_element should be null or an HTMLElement but not: #{top_element}\") catch e then throw e\n\n    try expect((rank), \"\"\"rank\"\"\") .to.be.a('number').and.not.to.be.NaN catch e then throw e\n\n\n    try assert(@_outer instanceof HTMLElement,\n      \"@_outer should be HTMLElement but not: #{@_outer}\"\n    ) catch e then throw e\n\n    #verbose-begin [RatesProp.rateByParentsTagText]: \\\n    #  RatesProp.rateByParentsTagText\n\n    #verbose-param [RatesProp.rateByParentsTagText]: tag_names\n    #verbose-param [RatesProp.rateByParentsTagText]: etalons\n    #verbose-param [RatesProp.rateByParentsTagText]: rank\n\n    element = @_outer\n    if element?\n      prev_parent = null\n      parent = element.parentElement\n\n      INPUT_BUTTON_SELECTORS = selectors.INPUT_SELECTORS + ',' +\n        selectors.BUTTON_SELECTORS\n\n      if element.matches(INPUT_BUTTON_SELECTORS)\n        selector = INPUT_BUTTON_SELECTORS\n      else\n        selector = null\n\n      # get only ancestors where our element is only one child of its tagName\n      while parentHasOnlyOneChild(parent, element, selector)\n        break if parent == top_element\n\n        #DEBUG! [colored_div] parent.style.backgroundColor = \"#C3C5C4\"\n        prev_parent = parent\n        parent = parent.parentElement\n\n      if prev_parent?\n        #DEBUG! [colored_div] prev_parent.style.backgroundColor = \"#B1A7A9\"\n\n        for tag_name in tag_names\n          #verbose-val [RatesProp.rateByParentsTagText] tag_name\n          #verbose-val [RatesProp.rateByParentsTagText] prev_parent, \\\n          #  prev_parent.getElementsByTagName(tag_name), prev_parent.tagName\n          if prev_parent.tagName == tag_name\n            inner_text = utils.innerTextList(prev_parent, element, only_visible)\n            #verbose [RatesProp.rateByParentsTagText] 'L1>>>', inner_text, \\\n            #  prev_parent.textContent\n            @rateByStr rater_name, inner_text, etalons, rank\n          else\n            for el in prev_parent.getElementsByTagName(tag_name)\n              if not element.contains el\n                inner_text = putils.getNodeText(el, false, true, only_visible)\n                #inner_text = utils.innerTextList(el, element, only_visible)\n                #verbose [RatesProp.rateByParentsTagText] 'L2>>>', inner_text\n                @rateByStr rater_name, inner_text, etalons, rank\n\n    #verbose-end [RatesProp.rateByParentsTagText]: \\\n    #  RatesProp.rateByParentsTagText\n    return\n\n\n\n# forms/inputs arrays with additional methods for ratings\n\nclass RangedArray extends Array\n  constructor: () ->\n    #verbose-begin [RangedArray.constructor]: RangedArray.constructor\n\n    super()\n    @_winners = {}\n    @_dirty_winners = true\n\n    # read-only property object with winner tags as keys and correspondents\n    # forms/inputs as a values (see getWinners() for detail)\n    Object.defineProperty this, 'winners',\n      enumerable: false\n      get: () -> if @_dirty_winners then @getWinners() else @_winners\n\n    # read-only property which returns an array of all winners tags in the\n    # descendant rate order\n    Object.defineProperty this, 'tags',\n      enumerable: false\n      get: () -> Object.keys(@winners)\n\n    #verbose-end [RangedArray.constructor]: RangedArray.constructor\n\n\n  becomesDirty: () =>\n    #verbose-begin [RangedArray.becomesDirty]: RangedArray.becomesDirty\n    @_dirty_winners = true\n    @_winners = {}\n    #verbose-end [RangedArray.becomesDirty]: RangedArray.becomesDirty\n\n\n  # return true if there isn't any tags in this array\n  isEmpty: () -> (this.length == 0)\n\n\n  add: (element) ->\n    #verbose-begin [RangedArray.add]: RangedArray.add\n    #verbose-param [RangedArray.add]: element\n\n    if element not in this # NOTE: only unique elements are permitted\n      @push element\n      do @becomesDirty\n\n    #verbose-end [RangedArray.add]: RangedArray.add\n\n\n  remove: (index_or_object) ->\n    #verbose-begin [RangedArray.remove]: RangedArray.remove\n    #verbose-param [RangedArray.remove]: index_or_object\n\n    if typeof(index_or_object) == 'number'\n      idx = index_or_object\n    else\n      idx = @indexOf(index_or_object)\n\n    if idx >= 0\n      deleted_element = @splice idx, 1\n      deleted_element.rates?.onRateChanged = null\n      #verbose-var [RangedArray.remove]: deleted_element\n      do @becomesDirty\n\n    #verbose-end [RangedArray.remove]: RangedArray.remove\n\n\n  # return form/input winners in structure:\n  #   winners = {\n  #     \"<tag_name>\": [ form/input, ...],\n  #     ...\n  #   }\n  # NOTE: forms/inputs are sorted by the SummaryRate in descendant order\n  getWinners: () ->\n    #verbose-begin [RangedArray.getWinners]: RangedArray.getWinners\n    _winners = @reduce (winners, element) ->\n      tag = element.rates.winner\n      if tag?\n        rate = element.rates.getSummaryRate(tag)\n        if tag of winners\n          winners[tag].push [rate, element]\n        else\n          winners[tag] = [[rate, element]]\n      winners\n    , {}\n\n    Object.keys(_winners).forEach (tag) ->\n      _winners[tag] = _winners[tag].sort((a, b) -> b[0] - a[0]).map (a) -> a[1]\n\n    @_winners = _winners\n    @_dirty_winners = false\n    #verbose [RangedArray.getWinners] \"@_winners:\", @_winners\n    #verbose-end [RangedArray.getWinners]: RangedArray.getWinners\n    return _winners\n\n\n  getWinners_old: (rate = RATE_DELTA) ->\n    #verbose-begin [RangedArray.getWinners]: RangedArray.getWinners\n    @_winners = @filter((element) ->\n      Boolean(element.rates.winner)\n    ).reduce((winners, element) ->\n      tag = element.rates.winner\n      if tag of winners\n        utils.insertSorted winners[tag], element, (a, b) ->\n          b.rates.getSummaryRate(tag) - a.rates.getSummaryRate(tag)\n          #compareArrays b.rates.tag_dict[tag],\n          #              a.rates.tag_dict[tag]\n      else\n        winners[tag] = [element]\n      winners\n    , {}\n    )\n\n    #verbose [RangedArray.getWinners|label] \"RAGW1: @_winners:\", @_winners\n    for tag, winners of @_winners\n      #verbose [RangedArray.getWinners|label] \"RAGW2: tag:\", tag, \\\n      #  \"winners:\", winners\n      winner = winners[0]\n      #verbose [RangedArray.getWinners|label] \"RAGW3: winner:\", winner, \\\n      #   \"winner.rates:\", winner.rates\n      win_summary_rate = winner.rates?.getSummaryRate(tag) ? 0\n      #verbose [RangedArray.getWinners|label] \"RAGW4 win_summary_rate:\", \\\n      #   win_summary_rate\n      for el, idx in winners[1..]\n        #verbose [RangedArray.getWinners|label] \"RAGW5: el:\", el, \"idx:\", idx\n        summary_rate = el.rates?.getSummaryRate(tag) ? 0\n        #verbose  [RangedArray.getWinners|label] \"RAGW6: summary_rate:\", \\\n        #  summary_rate\n        if win_summary_rate - summary_rate > rate\n          @_winners[tag] = winners[0..idx]\n          break\n\n    @_dirty_winners = false\n    #verbose [RangedArray.getWinners] \"@_winners:\", @_winners\n    #verbose-end [RangedArray.getWinners]: RangedArray.getWinners\n    return @_winners\n\n\n  # return true if some of winners has more then one input connected to it\n  winnersHaveManyElements: (applyTags) ->\n    #verbose \"@tags=\", @tags, \"winners=\", @getWinners(rate)\n    @tags.some (tag) =>\n      (not applyTags or tag in applyTags) and @getWinners()[tag].length > 1\n\n\n\nclass FormsObserver\n  constructor: (@_hasInputMutationsCallback) ->\n    try expect(\n      not @_hasInputMutationsCallback? or\n      utils.isFunction(@_hasInputMutationsCallback),\n      \"@_hasInputMutationsCallback should be null or a callback function\"\n    ).to.be.true catch e then throw e\n\n    #verbose-begin [FormsObserver.constructor]: FormsObserver.constructor\n    #@parserScanTimerId = undefined\n\n    @start_time = performance.now()\n\n    @observer = new MutationObserver (mutations) =>\n      ##verbose-begin [observer|FormsObserver|label|callback] \\\n      ##  \">>> base mutation callback <<<\"\n      try\n        if @_isInputDOMmutated(mutations)\n          #verbose [observer|FormsObserver|callback] \\\n          #  \"INPUT DOM changing detected!!!\"\n          @_hasInputMutationsCallback?()\n      catch e\n        ga.sendException e\n      finally\n        ##verbose-end [observer|FormsObserver|label|callback]: \\\n        ##  >>> base mutation callback <<<\n\n\n  _isInputDOMmutated: (mutations) ->\n    #verbose-begin [FormsObserver._isInputDOMmutated]: \\\n    #  FormsObserver._isInputDOMmutated\n\n    #VERBOSE [FormsObserver._isInputDOMmutated] for mutation in mutations\n      #verbose [FormsObserver._isInputDOMmutated] \\\n      #  \"#{(performance.now() - @start_time).toFixed(2)}ms:\", \\\\\n      #  mutation.type, mutation.target.tagName, mutation.target\n\n      #VERBOSE [FormsObserver._isInputDOMmutated] \\\n      #if 'childList' == mutation.type \\\n      #  null\n        #verbose [FormsObserver._isInputDOMmutated] \"ADD:\", \\\n        #  mutation.addedNodes\n        #verbose [FormsObserver._isInputDOMmutated] \"DEL:\", \\\n        #  mutation.removedNodes\n      #VERBOSE [FormsObserver._isInputDOMmutated] else  \\\n      #  null\n        #VERBOSE [FormsObserver._isInputDOMmutated] if (mutation.oldValue != \\\\\n        #mutation.target.getAttribute(mutation.attributeName))\n          #verbose [FormsObserver._isInputDOMmutated] \\\n          #  mutation.attributeName, ':', '\"'+mutation.oldValue+'\"', '=>', \\\\\n          #  (if mutation.attributeName then \\\\\n          #    '\"'+mutation.target.getAttribute(mutation.attributeName)+'\"' \\\\\n          #   else null)\n\n    hasMutations = mutations.some( (mutation, idx, arr) ->\n      changed = false\n\n      switch mutation.type\n        when 'childList'\n          Array.from(mutation.removedNodes).forEach (node) ->\n            # Remove our input icons and labels if they exist.\n            # Information about them are in axt_spans array of\n            # the same input elements\n            if node.nodeType == 1\n              if node.nodeName == 'INPUT'\n                if node.type.toLowerCase() not in [\n                  'hidden', 'button', 'submit', 'image'\n                ] and not node.classList.contains('axt-element')\n                  # if removedNode is a single input element:\n                  node.axt_spans?.forEach (span) -> span.remove()\n                  delete node.axt_spans\n                  #verbose [FormsObserver] 'BINGO! removed1', node\n                  changed = true\n              else\n                inputs = node.querySelectorAll(\n                  \"input:not([type='hidden']):not([type='button'])\" + \\\n                  \":not([type='submit']):not([type='image']):not(.axt-element)\"\n                )\n                # if removedNode is a form or a div with many inputs:\n                inputs.forEach (i) ->\n                  i.axt_spans?.forEach (span) -> span.remove()\n                  delete i.axt_spans\n                #VERBOSE [FormsObserver] if inputs.length > 0\n                  #verbose [FormsObserver] 'BINGO! removed2', node, inputs\n                if inputs.length > 0\n                  changed = true\n\n          if not changed\n            changed = Array.from(mutation.addedNodes).some (node) ->\n              result = (\n                node.nodeType == 1 and (\n                  (\n                    node.nodeName == 'INPUT' and\n                    node.type.toLowerCase() not in [\n                      'hidden', 'button', 'submit', 'image'\n                    ] and\n                    not node.classList.contains('axt-element')\n                  ) or (\n                    node.nodeName != 'INPUT' and\n                    node.querySelector(\n                      \"input:not([type='hidden']):not([type='button'])\" + \\\n                      \":not([type='submit']):not([type='image'])\" + \\\n                      \":not(.axt-element)\"\n                    )\n                  )\n                )\n              )\n              #VERBOSE [FormsObserver] if result\n                #verbose [FormsObserver] \"BINGO! Node was changed!\", node\n              result\n\n        when 'attributes'\n          node = mutation.target\n          nodeName = node.nodeName\n          attrName = mutation.attributeName\n          oldValue = mutation.oldValue\n          newValue = node.getAttribute(attrName)\n          if oldValue != newValue\n            if (\n              nodeName == 'INPUT' and\n              node.type.toLowerCase() not in [\n                'hidden', 'button', 'submit', 'image'\n              ] and\n              not node.classList.contains('axt-element')\n            )\n              if (\n                attrName != 'style' or (\n                  attrName == 'style' and\n                  compareVisibleStyleAttributes(oldValue, newValue)\n                )\n              )\n                changed = true\n                #VERBOSE [FormsObserver] if changed\n                  #verbose [FormsObserver] \"BINGO! Changed1\", node, attrName, \\\n                  #  oldValue, newValue\n            else if (\n              node.tagName != 'INPUT' and (\n                node.querySelector(\n                  \"input:not([type='hidden']):not([type='button'])\" + \\\n                  \":not([type='submit']):not([type='image'])\" + \\\n                  \":not(.axt-element)\"\n                )\n              )\n            )\n              if (\n                attrName != 'style' or (\n                  attrName == 'style' and\n                  compareVisibleStyleAttributes(oldValue, newValue)\n                )\n              )\n                changed = true\n                #VERBOSE [FormsObserver] if changed\n                  #verbose [FormsObserver] \"BINGO! Changed2\", node, \\\n                  #  attrName, \"oldValue=\", oldValue, \"newValue=\", newValue\n\n      return changed\n    )\n\n\n    ###VERBOSE [FormsObserver._isInputDOMmutated]:\n    if hasMutations\n      for mutation in mutations\n    ###\n        #verbose-val [FormsObserver._isInputDOMmutated] hasMutations\n        #verbose [FormsObserver._isInputDOMmutated] \\\n        #  \"#{(performance.now() - @start_time).toFixed(2)}ms:\", \\\\\n        #  mutation.type, mutation.target.tagName, \\\\\n        #  mutation.addedNodes, mutation.removedNodes, \\\\\n        #  mutation.attributeName, ':', '\"'+mutation.oldValue+'\"', '=>', \\\\\n        #  (if mutation.attributeName then \\\\\n        #    '\"'+mutation.target.getAttribute(mutation.attributeName)+'\"' \\\\\n        #   else '\"\"'), mutation.target\n\n    ##verbose-end [FormsObserver._isInputDOMmutated]: \\\n    ##  FormsObserver._isInputDOMmutated\n    return hasMutations\n\n\n  observe: () ->\n    #verbose-begin [FormsObserver.observe]: FormsObserver.observe\n    #VERBOSE [FormsObserver] @start_time = performance.now()\n\n    @observer.observe document,\n      childList:         true\n      subtree:           true\n      attributes:        true\n      attributeFilter:   ['hidden', 'style', 'class']\n      attributeOldValue: true\n      characterData:     false\n    #verbose-end [FormsObserver.observe]: FormsObserver.observe\n\n\n  disconnect: () ->\n    #verbose-begin [FormsObserver.disconnect]: FormsObserver.disconnect\n    do @observer.disconnect\n    #verbose-end   [FormsObserver.disconnect]: FormsObserver.disconnect\n\n\n  # #TEMPORARY:\n  #takeRecords: () ->\n  #   @observer.takeRecords()\n\n  hasInputMutationsInDOM: () ->\n    #verbose-begin [FormsObserver.hasInputMutationsInDOM]: \\\n    #  FormsObserver.hasInputMutationsInDOM\n\n    has_mutations = @_isInputDOMmutated(@observer.takeRecords())\n\n    #verbose-val [FormsObserver.hasInputMutationsInDOM]: has_mutations\n    #verbose-end [FormsObserver.hasInputMutationsInDOM]: \\\n    #  FormsObserver.hasInputMutationsInDOM\n    return has_mutations\n\n\nshow_rate_info = (name, form_box) ->\n  l.gs.apply(l, l.r(context, 0, \"debug-begin\", \"extra\", \"\"\"*** show_rate_info: #{name} ***\"\"\"))\n\n  result = ['--------------------------------']\n  for form, form_idx in window.axt_forms\n    result.push \"#{if utils.isElementVisible(form) then '+' else ' '}\" + \\\n      \"[#{form_idx}] #{form.tagName}#{select(form)}\"\n  result.push '--------------------------------'\n\n  result.push \"FORMS (#{form_box.length} of #{window.axt_forms.length}):\"\n\n  for form in form_box\n    form_class = if form.className then \".[#{form.className}]\" else ''\n    form_name = if form.name then ' \"' + form.name + '\"' else ''\n    form_id = if form.id then '#' + form.id else ''\n\n    form_rates = form.rates.tags.map( (tag) ->\n      rates = form.rates.tag_dict[tag].map (rate) -> rate.toFixed(1)\n      \"#{tag}:[#{rates}]\"\n    ).join(' > ')\n\n    #form_visibility = if utils.isElementVisible(form) then '+' else ' '\n\n    form_visibility = if utils.isVisible.fn(form, false) then '+' else ' '\n\n    form_zIndex = utils.getZIndex(form)\n    form_zIndex = if form_zIndex then \"(zi:#{form_zIndex})\" else ''\n\n    result.push \"#{form_visibility} FORM#{form_zIndex} [#{form.rates.idx}].\" + \\\n      \"#{form.tagName}#{form_id}#{form_class}#{form_name}: #{form_rates}\"\n\n    result = result.concat form.rates.getLog(3)\n\n    show_input = (input, mark) ->\n      input_class = if input.className then \".[#{input.className}]\" else ''\n      input_id = if input.id then '#' + input.id else ''\n      input_type = if input.type then \"[#{input.type}]\" else ''\n\n      input_rates = input.rates.tags.map( (tag) ->\n        rates = input.rates.tag_dict[tag].map (rate) -> rate.toFixed(1)\n        \"#{tag}:[#{rates}]\"\n      ).join(' > ')\n\n      input_zIndex = utils.getZIndex(input)\n      input_zIndex = if input_zIndex then \"(zi:#{input_zIndex})\" else ''\n      #input_rates = (\n      #  \"#{tag}:[#{input.rates.tag_dict[tag]}]\" for tag in input.rates.tags\n      #).join(' > ')\n\n      input_name = if input.name then ' \"' + input.name + '\"' else ''\n\n      #input_visibility = if utils.isElementVisible(input) then '+' \\\n      #  else '-'\n\n      input_visibility = ''\n      if process.env.DEBUG\n        input_visibility = if utils.isVisible.fn(input, false) then '[+]' \\\n          else '[-]'\n\n      result.push \"   #{mark}#{input_visibility} [#{input.rates.idx}].\" + \\\n        \"#{input.tagName}#{input_type}\" + \\\n        \"#{input_id}#{input_class}#{input_name}: #{input_rates} \" + \\\n        \"#{input_zIndex}\"\n\n      if input.labels?[0]?.textContent\n        result.push \\\n          \"     * label: #{dumper input.labels[0].textContent.trim()}\"\n\n      if input.placeholder?.length < MAX_PLACEHOLDER_LENGTH\n        placeholder = input.placeholder || input.defaultValue\n\n      if placeholder?\n        result.push \"     * placeholder: \" + dumper placeholder.trim()\n\n      if input.axt_prev_title or (not input.axt_prev_title? and input.title)\n        result.push \\\n          \"     * title: #{dumper (input.axt_prev_title ? input.title)?.trim()}\"\n\n      if (input.tagName in ['A', 'BUTTON']) and input.innerText\n        result.push \"     * text: #{dumper input.innerText?.trim()}\"\n\n      result = result.concat input.rates.getLog(4)\n\n    for input  in form.inputs        then show_input(input, '+')\n    for input  in form.hidden_inputs then show_input(input, '-')\n    for button in form.buttons       then show_input(button, 'B')\n\n  result.forEach (line) ->\n    l.d.apply(l, l.r(context, 0, \"debug\", \"extra|line\", line))\n\n  l.ge.apply(l, l.r(context, 0, \"debug-end\", \"extra\", \"\"\"*** show_rate_info: #{name} ***\"\"\"))\n\n\nprepParserFun = (source) ->\n  try\n    #verbose-begin [prepParserFun]:        prepParserFun\n    #verbose-param [prepParserFun|source]: source\n    parser_fun = Function(source)() if source\n\n    #verbose-val [prepParserFun] parser_fun\n    return parser_fun\n  catch err\n    message = \"Parser script was parsed with the error:\\n#{err.stack ? err}\"\n\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepParserFun\", \"-ERROR!------------------\"))\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers\", message))\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepParserFun\", err.message))\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepParserFun\", \"-PARSER BEGIN------------\"))\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepParserFun\", source))\n    l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepParserFun\", \"-PARSER END--------------\"))\n    throw new utils.EvalCodeError message\n  finally\n    null\n    #verbose-end [prepParserFun]: prepParserFun\n\n\nprepRaters = (source) ->\n  try\n    #verbose-begin [prepRaters]: prepRaters\n    #verbose-param [prepRaters|source]: source\n\n    if source? and utils.isArray(source)\n      # compile raters\n      try expect(((source ? [])), \"\"\"(source ? [])\"\"\") .to.be.an.instanceOf Array catch e then throw e\n      raters = []\n\n      for rater_src in source\n        #verbose-val [prepRaters|source] rater_src\n        continue if not rater_src or\n          (utils.isArray(rater_src) and rater_src.length == 0)\n\n        try\n          rater = utils.evalCode('args', null, rater_src)\n          #verbose-val [prepRaters] rater\n\n          if rater?\n            utils.expandArrayWithArrayOrObject raters, rater, 'function'\n            #verbose-val [prepRaters|source] raters\n          else\n            throw Error(\n              \"ParserDB Loader's Error: null returned but aA function or an\" + \\\n              \" array of functions expected\"\n            )\n\n        catch err\n          message = \"Rater parsing was failed with error:\\n#{err.stack ? err}\"\n\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepRaters\", \"-ERROR!--------------\"))\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers\", message))\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepRaters\", err.message))\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepRaters\", \"-RATER BEGIN---------\"))\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepRaters\", rater_src))\n          l.e.apply(l, l.r(context, 0, \"error\", \"parser-helpers|prepRaters\", \"-RATER END-----------\"))\n          throw new utils.EvalCodeError message\n    else\n      raters = []\n\n    #verbose-val [prepRaters|source] raters\n    return raters\n  catch err\n    throw err\n  finally\n    null\n    #verbose-end [prepRaters]: prepRaters\n\n\n# source can be:\n#   1. \"src\" - a string with js source - universal applier\n#      for all tags (\"login\", \"registration\") and all steps\n#   2. array of strings with js sources - universal applier for\n#      all tags and for each step. If parser returns more steps\n#      that they are in appliers, last step will be used for\n#      missed steps. e.g. parser returns steps=[1,2,3,4,5], and\n#      appliers has only steps [1,2,3]. Will be executed appliers:\n#      1,2,3,3,3\n#   2. dictionary with different appliers (strings with js source)\n#      for each tag and any steps:\n#         {'login': \"log.src\", 'registration': \"reg.src\"}\n#   3. dictionary with lists of appliers for each step:\n#   {'login': [\"log.src.1\", \"log.src.2\", ...], 'registration':...}\n#   NOTE: each tag can have eather js source or a list of js sources\nprepAppliers = (source) ->\n  #verbose-begin [prepAppliers]: prepAppliers\n  #verbose-param [prepAppliers|source] source\n\n  appliers = null\n  if source?\n    if utils.isString source\n      source = [source]\n\n    if utils.isArray source\n      appliers = prepRaters source\n    else if utils.isObject source\n      appliers = {}\n      for key, src of source\n        continue if not src\n        appliers[key] = prepRaters src\n  #verbose-val [prepAppliers|source] appliers\n  #verbose-end [prepAppliers]: prepAppliers\n  return appliers\n\n\n\nclass FormParser\n  constructor: () ->\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.constructor\"\"\")\n\n    l.i(\"\"\"#{context.axt_fid}: FP-0\"\"\")\n    #@restartParsingFun = restartParsingFun ? () -> false\n    @page_rates = null\n    @ga = null\n    @form_box = null\n    @input_values = {} # {form-tag > input-tag > value} dictionary\n    @prev_last_event = null\n    @last_event = null\n    @last_event_unload = false\n    @last_form = null\n    @last_event_urls = null\n\n    @parser_fun = null\n\n    # array of functions called 'raters'. Each rater try to investigate\n    # one of aspects of HTML-page and make a decision about kind of the page\n    @form_raters   = [] # raters for form\n    @input_raters  = [] # raters for inputs\n    @button_raters = [] # raters for buttons\n\n    @pre_raters  = [] # pre raters for the whole form_box\n    @post_raters = [] # post raters for the whole form_box\n\n    @pre_page_raters  = [] # pre raters for page status\n    @post_page_raters = [] # post raters for page status\n    @fill_forms = [] # fill forms: function to fill forms\n    @check_inputs = [] # check inputs: function to detect inputs changing\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.constructor\"\"\")\n\n\n  init: (\n    check_inputs,\n    fill_forms,\n    parser_fun,\n    form_raters,\n    input_raters,\n    button_raters,\n    pre_raters,\n    post_raters,\n    pre_page_raters,\n    post_page_raters,\n    #restartParsingFun,  # func returns true when to restart parsing\n    analytics\n  ) ->\n    try expect(\n      not check_inputs? or\n      utils.isFunction(check_inputs) or\n      utils.isArray(check_inputs),\n      \"check_inputs must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not fill_forms? or\n      utils.isFunction(fill_forms) or\n      utils.isArray(fill_forms),\n      \"fill_forms must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not parser_fun? or utils.isFunction(parser_fun),\n      \"parser_fun must be null or a function\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not form_raters? or\n      utils.isFunction(form_raters) or\n      utils.isArray(form_raters),\n      \"form_raters must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not input_raters? or\n      utils.isFunction(input_raters) or\n      utils.isArray(input_raters),\n      \"input_raters must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not button_raters? or\n      utils.isFunction(button_raters) or\n      utils.isArray(button_raters),\n      \"button_raters must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not pre_raters? or\n      utils.isFunction(pre_raters) or\n      utils.isArray(pre_raters),\n      \"pre_raters must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    try expect(\n      not post_raters? or\n      utils.isFunction(post_raters) or\n      utils.isArray(post_raters),\n      \"post_raters must be null, or a function or an array of functions\"\n    ).to.be.true catch e then throw e\n\n    ####assert expect(\n    #  not restartParsingFun? or\n    #  utils.isFunction(restartParsingFun),\n    #  \"restartParsingFun must be null, or a function\"\n    #).to.be.true###\n\n    try expect((analytics), \"\"\"analytics\"\"\") .to.be.instanceOf Analytics catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.init\"\"\")\n    @ga = analytics\n    @page_rates = new RatesProp()\n\n    @form_box = new RangedArray()\n      # form_box is a list of forms from window.window.axt_forms object\n      # all form's elements filtered between four arrays:\n      #  inputs - visible inputs\n      #  hidden_inputs - hidden (invisible) inputs\n      #  buttons - buttons of the form\n      #  axt_elements - all form's elements\n\n      # structure of @form_box:\n      #  [ form: <form>.rates: {....} # rates == instance of RatesProp (each\n      #                               # tag is represented here as a key-value\n      #                               # property with a numeric value. e.g.\n      #                               # rates['login'] = 1\n      #      .inputs:        [ input: <input1>.rates: { ... } }\n      #                        input: <input2>.rates: { ... } }\n      #                        ...\n      #                      ] #     ...\n      #      .hidden_inputs: [ input: <input1>.rates: { ... } }\n      #                        input: <input2>.rates: { ... } }\n      #                        ...\n      #                      ] #     ...\n      #      .buttons:       [ button: <button1>.rates: { ... } }\n      #                        button: <button2>.rates: { ... } }\n      #                        ...\n      #                      ] #     ...\n      #   ]\n\n    l.i(\"\"\"#{context.axt_fid}: FP-1\"\"\")\n    # user-defined (or default) parser function\n    @parser_fun = parser_fun\n\n    # post raters are functions which started after finishing all functions in\n    # @[input|form]raters arrays. Post raters (usually) are order-dependent\n\n    l.i(\"\"\"#{context.axt_fid}: FP-2\"\"\")\n    @addCheckInputs check_inputs if check_inputs?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-3\"\"\")\n    @addFillForms fill_forms if fill_forms?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-4\"\"\")\n    @addFormRater form_raters if form_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-5\"\"\")\n    @addInputRater input_raters if input_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-6\"\"\")\n    @addButtonRater button_raters if button_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-7\"\"\")\n    @addPreRater pre_raters if pre_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-8\"\"\")\n    @addPostRater post_raters if post_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-9\"\"\")\n    @addPrePageRater pre_page_raters if pre_page_raters?\n\n    l.i(\"\"\"#{context.axt_fid}: FP-10\"\"\")\n    @addPostPageRater post_page_raters if post_page_raters?\n\n    @startUserActivityMonitoring()\n    l.i(\"\"\"#{context.axt_fid}: FP-11\"\"\")\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.init\"\"\")\n\n\n  close: () ->\n    @removeLastEventListeners()\n\n    Array.from(document.querySelectorAll('input,select') ? []).forEach(\n      (input) =>\n        remove_input_icon(input)\n        @removeElementEventListeners(input)\n    )\n\n\n  _regLastEvent: (evt_type, form, target_type, tag, is_active_event) ->\n    l.gs(l.c(context.axt_fid + \":\", \">>\", \"_reg_last_event\"))\n    l.i(context.axt_fid + \"\"\": * PARAM evt_type:\"\"\", evt_type)\n    l.i(context.axt_fid + \"\"\": * PARAM form:\"\"\", form)\n    l.i(context.axt_fid + \"\"\": * PARAM target_type:\"\"\", target_type)\n    l.i(context.axt_fid + \"\"\": * PARAM tag:\"\"\", tag)\n    l.i(context.axt_fid + \"\"\": * PARAM is_active_event:\"\"\", is_active_event)\n\n    last_event = @last_event\n    if last_event? and last_event.saving_in_progress\n      l.i(\"\"\"#{context.axt_fid}: IGNORE CURRENT EVENT until previous last_event's saving is in progress\"\"\")\n      l.ge(l.c(context.axt_fid + \":\", \"<<\", \"_reg_last_event\"))\n      return\n\n    target_type = target_type.toLowerCase()\n    form_tag = form?.rates?.winner\n    if not form_tag?\n      if form and target_type == 'form' and tag == 'submit'\n        parent = form.parentNode\n        while parent\n          form_tag = parent.rates?.winner\n          if form_tag\n            form = parent\n            break\n          parent = parent.parentNode\n      else\n        form_tag = 'unknown'\n\n    l.i(context.axt_fid + \"\"\": form =\"\"\", form)\n    l.i(context.axt_fid + \"\"\": form_tag =\"\"\", form_tag)\n    if form_tag != 'unknown'\n      ival = @input_values[form_tag] ? {}\n    else\n      ival = {}\n      if (last_event?.form_tag == tag)\n        form_tag = tag\n        ival.has_password = last_event.has_password\n        ival._password_changed = last_event.password_changed\n        ival._changed = last_event.changed\n        ival.login = last_event.values.login\n        ival.password = last_event.values.password\n        ival.userName = last_event.values.userName\n        ival.email    = last_event.values.email\n        ival.phone    = last_event.values.phone\n        ival.phone_prefix = last_event.values.phone_prefix\n        ival.firstName = last_event.values.firstName\n        ival.lastName  = last_event.values.lastName\n        ival.fullName = last_event.values.fullName\n        ival.company = last_event.values.company\n        ival.account = last_event.values.account\n        ival.applicantId = last_event.values.applicantId\n        ival.zipcode = last_event.values.zipcode\n        ival.isLoginFinal = last_event.values.isLoginFinal\n        ival.currentLogin = last_event.values.currentLogin\n        ival.currentPassword = last_event.values.currentPassword\n\n    l.i(context.axt_fid + \"\"\": form_tag =\"\"\", form_tag)\n    l.i(context.axt_fid + \"\"\": dumper ival =\"\"\", dumper ival)\n\n    login_value    = undefined # if input is not exist -> undefined\n                               # if input exists but not changed -> null\n    password_value = undefined\n    userName_value = undefined\n    email_value    = undefined\n    phone_value    = undefined\n    phone_prefix_value = undefined\n    firstName_value = undefined\n    lastName_value  = undefined\n    fullName_value = undefined\n    company_value = undefined\n    account_value = undefined\n    applicantId_value = undefined\n    zipcode_value = undefined\n    isLoginFinal = false\n    currentLogin = undefined\n    currentPassword = undefined\n\n    winner_inputs = form?.inputs?.winners ? {}\n\n    # additional conditions for non login inputs\n    _getVal = (tags) ->\n      l.i(context.axt_fid + \":\", \"GV1\", tags)\n      typed_value = null\n      input = null\n\n      for _tag in tags\n        typed_value ?= ival[_tag]\n        break if typed_value?\n      l.i(context.axt_fid + \":\", \"GV2: typed_value=\", typed_value)\n\n      for _tag in tags\n        input ?= winner_inputs[_tag]?[0]\n        break if input?\n      l.i(context.axt_fid + \":\", \"GV3: input=\", input)\n\n      if input?\n        current_value = input.value\n        prev_value = input.getAttribute('value') ? ''\n        l.i(context.axt_fid + \":\", \"GV4 : current_value =\", current_value)\n        l.i(context.axt_fid + \":\", \"GV5 : prev_value =\", prev_value)\n\n      value = getCorrectValue(typed_value, current_value)\n      l.i(context.axt_fid + \":\", \"GV6 : value =\", value)\n\n      # if value == input.value and input is not readonly - set value = null\n      # it means that value was not changed and equals to the default input\n      # state. However when input is readonly and it has non empty value it\n      # means that this is an important value that we need to keep in mind\n      if (\n        value? and\n          value == prev_value and\n          not input.getAttribute('readonly') == 'true'\n      )\n        #verbose \"GV7\"\n        value = null\n      return value\n\n    switch form_tag\n      when 'login'\n        l.i(context.axt_fid + \":\", \"_L1\", winner_inputs)\n        if winner_inputs?\n          isLoginFinal = true\n\n          login  = winner_inputs.login?[0]\n          l.i(context.axt_fid + \":\", \"_L2\", login)\n          login_value = ival['login']\n          l.i(context.axt_fid + \"\"\": login_value =\"\"\", login_value)\n          if (\n            login? and utils.isTextInput(login) and\n            not login.hasAttribute('readonly')\n          )\n            current_login_value = login?.value\n            prev_login_value = login?.getAttribute('value') ? ''\n            l.i(context.axt_fid + \":\", \"_L3: login_value =\",\n              login_value, \"current_login_value =\", current_login_value,\n              \"prev_login_value =\", prev_login_value)\n            login_value = getCorrectValue(login_value, current_login_value)\n\n          l.i(context.axt_fid + \":\", \"_L4\", login_value,\n             prev_login_value)\n          #NOTE: do not uncomment this \"if\": login always be stored\n          #if login_value? and login_value == prev_login_value\n          #  login_value = null\n          if not login_value? and prev_login_value\n            login_value = prev_login_value\n          l.i(context.axt_fid + \":\", \"_L5\", login_value)\n\n          password = winner_inputs.password?[0]\n          password_value = getCorrectValue(ival['password'], password?.value)\n\n          l.i(context.axt_fid + \":\", \"_L6\", password_value)\n\n          #NOTE: do not uncomment this \"if\": password always be stored\n          #prev_passw_value = password?.getAttribute('value') ? ''\n          ##verbose [_regLastEvent|label] \"_L7\", prev_passw_value\n          #if password_value? and password_value == prev_passw_value\n          #  password_value = null\n\n          company_value     = _getVal ['company', 'company-name', 'company-id']\n          account_value     = _getVal ['account', 'account-number']\n          applicantId_value = _getVal ['applicantId']\n          zipcode_value     = _getVal ['zipcode']\n\n          email_value       = _getVal ['email']\n          phone_value       = _getVal ['mobile-phone', 'phone']\n          phone_prefix_value = _getVal ['phone_prefix', 'country']\n          firstName_value   = _getVal ['firstName']\n          lastName_value    = _getVal ['lastName']\n          fullName_value    = _getVal ['fullName']\n\n          if 'currentLogin' of ival\n            currentLogin = ival.currentLogin\n            currentPassword = ival.currentPassword\n\n          ###\n          if EMAIL_RE.test(login_value)\n            if not email_value\n              email_value = login_value\n            l.i(context.axt_fid + \":\", \"_L8\", email_value)\n          else if PHONE_RE.test(login_value)\n            if not phone_value\n              phone_value = login_value\n            l.i(context.axt_fid + \":\", \"_L9\", phone_value)\n          else\n            if not userName_value\n              userName_value = login_value\n          ###\n\n      when 'change-password'\n        l.i(context.axt_fid + \":\", \"_C1\", winner_inputs)\n        if not utils.isEmptyObject(ival)\n          password_value = _getVal [\n            'new-password',\n            'password',\n            'confirm-new-password',\n            'confirm-password'\n          ]\n          l.i(context.axt_fid + \":\", \"@input_values =\", @input_values)\n          login_value = @input_values.login?['login']\n          isLoginFinal = true\n\n      when 'registration'\n        l.i(context.axt_fid + \":\", \"_R1\")\n        if not utils.isEmptyObject(ival)\n          userName_value    = _getVal ['login']\n          password_value    = _getVal ['password', 'confirm-password']\n          email_value       = _getVal ['email']\n          firstName_value   = _getVal ['firstName']\n          lastName_value    = _getVal ['lastName']\n          fullName_value    = _getVal ['fullName']\n          company_value     = _getVal ['company', 'company-name', 'company-id']\n          account_value     = _getVal ['account', 'account-number']\n          applicantId_value = _getVal ['applicantId']\n          zipcode_value     = _getVal ['zipcode']\n          phone_value       = _getVal ['mobile-phone', 'phone']\n          phone_prefix_value = _getVal ['phone_prefix', 'country']\n          # remove country name and leave phone code only\n          phone_prefix_value = \\\n            phone_prefix_value?.replace(/[^+\\d -]/g, '').trim()\n\n          if not email_value and EMAIL_RE.test(userName_value)\n            email_value = userName_value\n\n          if not phone_value and PHONE_RE.test(userName_value)\n            phone_value = userName_value\n\n        l.i(context.axt_fid + \":\", \"_R2\")\n        # select login input among registration fields:\n        if userName_value?\n          isLoginFinal = not (email_value? or phone_value?)\n          login_value = userName_value\n          l.i(context.axt_fid + \":\", \"_R3\", login_value)\n        else if email_value?\n          isLoginFinal = not phone_value?\n          login_value = email_value\n          l.i(context.axt_fid + \":\", \"_R4\", login_value)\n        else if phone_value?\n          isLoginFinal = true\n          login_value = phone_value\n          if (\n            phone_prefix_value and not (\n              phone_value.startsWith(phone_prefix_value) or\n              phone_value.startsWith('(' + phone_prefix_value + ')')\n            )\n          )\n            login_value = phone_prefix_value + phone_value\n          l.i(context.axt_fid + \":\", \"_R5\", login_value)\n\n    if form_tag == 'login' and @last_event_urls?\n      #use it to support urls chaining for login forms\n      urls = @last_event_urls.slice(0)\n    else\n      urls = [context.axt_url]\n\n    l.i(context.axt_fid + \":\", \"RLE1\")\n    _now = Date.now()\n    if is_active_event\n      l.i(context.axt_fid + \":\", \"RLE1-1\")\n      #if @prev_last_event? and\n      @prev_last_event = null\n    else # pasive event\n      l.i(context.axt_fid + \":\", \"RLE1-2\")\n      if @prev_last_event? and not @prev_last_event.is_active_event\n        @prev_last_event = null\n      if @last_event?.is_active_event\n        @prev_last_event = @last_event\n\n    l.i(context.axt_fid + \":\", \"RLE2: @prev_last_event =\",\n      dumper(@prev_last_event, null, null, null, null, null))\n    @last_form = form\n    @last_event =\n      saving_in_progress: false\n      is_active_event:  is_active_event\n      timestamp:        _now\n      type:             evt_type\n      form_tag:         form_tag\n      has_password:     !!password_value\n      changed:          !!ival._changed\n      password_changed: !!ival._password_changed\n      target:           target_type\n      tag:              tag\n      urls:             urls\n      values:\n        login:          login_value\n        password:       password_value\n        userName:       userName_value\n        email:          email_value\n        phone:          phone_value\n        phone_prefix:   phone_prefix_value\n        firstName:      firstName_value\n        lastName:       lastName_value\n        fullName:       fullName_value\n        company:        company_value\n        account:        account_value\n        applicantId:    applicantId_value\n        zipcode:        zipcode_value\n        isLoginFinal:   isLoginFinal\n\n    if currentLogin?\n      @last_event.values.currentLogin = currentLogin\n      @last_event.values.currentPassword = currentPassword\n\n    l.i(context.axt_fid + \":\", \"RLE3: \\n@last_event =\",\n      dumper(@last_event, null, null, null, null, null))\n    l.i(context.axt_fid + \"\"\": @last_form =\"\"\", @last_form)\n    l.ge(l.c(context.axt_fid + \":\", \"<<\", \"_reg_last_event\"))\n    return\n\n\n  clearLastEvent: () ->\n    @last_event = null\n    @prev_last_event = null\n    @last_form = null\n\n\n  _regChangeEvent: (evt) =>\n    target = evt.target\n    if utils.isVisible.fn(target, false)\n      form = target.axt_form\n      form_tag = form?.rates?.winner ? 'unknown'\n      tag = target.rates?.winner\n      target_type = target.axt_type ? target.tagName.toLowerCase()\n\n      l.i(context.axt_fid + \":\", \"### CHANGE EVENT: #{evt.type} event:\", evt)\n      l.i(\"\"\"#{context.axt_fid}: CHE-1: activity on #{form?.rates.winner ? 'unknown'} form\"\"\")\n      if form_tag not of @input_values\n        @input_values[form_tag] = {}\n      @input_values[form_tag]._changed = true\n\n      if tag == 'password' or target.type == 'password'\n        @input_values[form_tag]._password_changed = true\n\n      @_regLastEvent(evt.type, form, target_type, tag, false)\n    else\n\n      l.i(context.axt_fid + \":\", \"### CHANGE EVENT: !!! SKIP: Unvisible target:\" , target)\n      return\n\n\n  _regSubmitEvent: (evt) =>\n    target = evt.target\n    form_tag = target.rates?.winner\n    if form_tag or utils.isVisible.fn(target, false)\n\n      l.i(context.axt_fid + \":\", \"### SUBMIT EVENT: #{evt.type} event:\", evt)\n      tag = 'submit'\n      target_type = target.axt_type ? 'form'\n      @_regLastEvent(evt.type, target, target_type, tag, true)\n    else\n\n      l.i(context.axt_fid + \":\", \"### SUBMIT EVENT: !!! SKIP: Unvisible target:\" , target)\n      return\n\n\n  _regKeyEvent: (evt) =>\n    utils.delayCall 0, () =>\n      target = evt.target\n      l.i(context.axt_fid + \":\", \"evt.key=\", evt.key)\n      if utils.isVisible.fn(target, false)\n        if evt.key in ['Tab', 'Enter', 'Space']\n          l.i(context.axt_fid + \":\", \"### KEY EVENT: #{evt.type} event:\", evt)\n          form = target.axt_form\n          _now = Date.now()\n\n          if (\n            not @last_form? or\n            not @last_event? or\n            form != @last_form or (\n              form == @last_form and (\n                @last_event.type.toLowerCase() not in ['submit', 'keydown'] or\n                _now - @last_event.timestamp > 300\n              )\n            )\n          )\n            tag = target.rates?.winner ? 'unknown'\n            target_type = target.axt_type ? target.tagName.toLowerCase()\n            @_regLastEvent(\n              evt.type,\n              form,\n              target_type,\n              tag,\n              ( # active_event\n                target_type in ['input', 'select', 'hidden_input', 'a'] and\n                evt.key == 'Enter') or (\n                  target_type == 'button' and\n                  evt.key in ['Enter', 'Space']\n                )\n              )\n      else\n        l.i(context.axt_fid + \":\", \"### KEY EVENT: !!! SKIP: Unvisible target:\",\n          target)\n        null\n      return\n    , \"_regKeyEvent error\"\n    return\n\n  _regClickEvent: (evt) =>\n    utils.delayCall 0, () =>\n\n      l.i(context.axt_fid + \":\", \"### CLICK EVENT: #{evt.type} event:\", evt)\n      _now = Date.now()\n      target = evt.target\n\n      if (evt.x == 0 and evt.y == 0) or not utils.isVisible.fn(target, false)\n\n        l.i(context.axt_fid + \":\", \"### CLICK EVENT: !!! SKIP: Unvisible target:\" , target)\n        return\n\n      # if clicked area is inside a button|input|select get that ext target:\n      ext_target = target.closest(selectors.BUTTON_SELECTORS)\n      ext_target = target.closest(selectors.ANCHOR_SELECTORS) if not ext_target?\n\n      return if not ext_target?\n\n      l.i(context.axt_fid + \"\"\": ext_target =\"\"\", ext_target)\n      l.i(context.axt_fid + \"\"\": ext_target.axt_form =\"\"\", ext_target.axt_form)\n\n      target = ext_target\n      form = target.axt_form ? target.closest(selectors.FORM_SELECTORS)\n      l.i(context.axt_fid + \":\", \"CL1: form =\", form,\n        \"\\n@last_form =\", @last_form,\n        \"\\nprev saved @last_event =\", dumper(@last_event, null, null, null,\n        null, null),\n        \"\\ntimestamp =\", _now - @last_event?.timestamp)\n      if (\n        not @last_form? or\n        not @last_event? or\n        form != @last_form or (\n          form == @last_form and (\n            @last_event.type.toLowerCase() != 'submit' or\n            _now - @last_event.timestamp > 300\n          )\n        )\n      )\n        tag = target.rates?.winner\n        tag_name = target.tagName.toLowerCase()\n        target_type = target.axt_type ? tag_name\n        l.i(context.axt_fid + \":\", \"CL2: tag =\", tag,\n          \"tag_name=\", tag_name, \"target_type=\", target_type)\n        if (\n          not tag and\n          tag_name in ['button', 'input', 'div', 'span', 'a', 'i', 'td']\n        )\n          if (\n            tag_name == 'input' and\n            target.type.toLowerCase() in ['submit', 'button']\n          )\n            text = target.value\n          text = target.innerText if not text\n          l.i(\"\"\"#{context.axt_fid}: CL3: text = '#{text}'\"\"\")\n          # guess button by its inner text.\n          if text.length < 30\n            # buttons don't have a long text as a title\n            tags = tagsByStr(text, SUBMIT_ETALONS)\n            l.i(context.axt_fid + \":\", \"CL4: tags =\", tags)\n          else\n            l.i(context.axt_fid + \":\", \"CL5: tags = []\")\n            tags = []\n\n          l.i(\"\"\"#{context.axt_fid}: CL6: tags = #{dumper tags}\"\"\")\n          if tags.length > 0\n  #          rated_tags = tags.reduce (t, i) ->\n  #            if t[i.tag]\n  #              t[i.tag] += i.rank\n  #            else\n  #              t[i.tag] = i.rank\n  #            return t\n  #          , {}\n  #\n  #          #verbose [_regClickEvent]: CL7: rated_tags = #{dumper rated_tags}\n  #          winner_tag = undefined\n  #          winner_rank = 0\n  #          for tag, rank of rated_tags\n  #            if rank > winner_rank\n  #              winner_rank = rank\n  #              winner_tag = tag\n\n            winner_tag = tags[0]\n            l.i(\"\"\"#{context.axt_fid}: CL8: winner_tag = '#{winner_tag}'\"\"\")\n            if winner_tag\n              tag = winner_tag\n              if not target.axt_type\n                target_type = 'button'\n\n              l.i(\"\"\"#{context.axt_fid}: CL9: text = '#{text}', tag = '#{tag}', CssSelector = '#{select target}'\"\"\")\n              #TODO: add ga if tag is exist. Add text, tag and CSSSelector\n\n              if (\n                form?.buttons? and\n                target_type == 'button' and\n                tag of form.buttons\n              )\n                # We have already had the same tag for this form. Ignore it\n                l.i(\"\"\"#{context.axt_fid}: CL10: button with tag '#{tag}' already exists. IGNORE IT!\"\"\")\n                tag = undefined\n                target_type = undefined\n\n        l.i(context.axt_fid + \":\", \"CL11: target_type =\", target_type,\n          \"target.type =\", target.type, 'tag =', tag)\n        is_active_event = (\n          target_type in ['a', 'button'] or (\n            target_type == 'input' and\n            target.type.toLowerCase() in ['submit', 'button', 'image']\n          )\n        )\n        l.i(\"\"\"#{context.axt_fid}: CL12: is_active_event= #{is_active_event}\"\"\")\n        @_regLastEvent(evt.type, form, target_type, tag, is_active_event)\n    , \"regClickEvent error\"\n    return\n\n\n  startUserActivityMonitoring: () ->\n    l.gs(l.c(context.axt_fid + \":\", \">>\", \"startUserActivityMonitoring\"))\n    body = document.body\n    body.addEventListener('submit',  @_regSubmitEvent, true)\n    body.addEventListener('click',   @_regClickEvent,  true)\n    body.addEventListener('keyup',   @_regKeyEvent,    true)\n    body.addEventListener('keydown', @_regKeyEvent,    true)\n    body.addEventListener('change',  @_regChangeEvent, true)\n    l.ge(l.c(context.axt_fid + \":\", \"<<\", \"startUserActivityMonitoring\"))\n\n\n  removeLastEventListeners: () ->\n    body = document.body\n    body.removeEventListener('submit',  @_regSubmitEvent, true)\n    body.removeEventListener('click',   @_regClickEvent,  true)\n    body.removeEventListener('keyup',   @_regKeyEvent,    true)\n    body.removeEventListener('keydown', @_regKeyEvent,    true)\n    body.removeEventListener('change',  @_regChangeEvent, true)\n\n\n  # return true if inputs on the page change their quantity or visibility\n  checkInputs: () ->\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.checkInputs\"\"\")\n    changed = false\n    for check_inputs, idx in @check_inputs\n      l.i(\"\"\"#{context.axt_fid}: Start check_inputs ##{idx} of '\"\"\")\n      #  #{@check_inputs.length}\n      if utils.safeApply(\n        check_inputs, this, [], \"Check_inputs' error\"\n      )\n        changed = true\n\n    l.i(context.axt_fid + \"\"\": changed =\"\"\", changed)\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.checkInputs\"\"\")\n    return changed\n\n\n  ###!\n   * keypress/keydown/paste events eventHandler\n   * Make copy of input value in input_values dictionary.\n   * We need it because some sites can shrink or hide its value\n   * when there is no focus on the input in that case we have to\n   * have our own version of it\n   * @param {Event} evt - fired KeyboardEvent\n  ###\n  _copyInputValueEventHandler: (evt) =>\n    target = evt.target\n\n    l.i(context.axt_fid + \"\"\": target.axt_form =\"\"\", target.axt_form)\n    if target.axt_form?.rates? and utils.isTextInput(target)\n      # process only inputs with injected 'rates' property\n      utils.delayCall 0, () =>\n        #HACK: we use delay 0 because input.value changes later\n        #      then this (keydown/paste) event is fired\n\n        target = evt.target\n        l.i(\"\"\"#{context.axt_fid}: EVENT '#{evt.type}' on #{target.tagName}#{if target.type then '[' + target.type + ']' else ''}\"\"\")\n        #  #{if target.id then '.' + target.id else ''}\\\n        #  #{if target.className then '#'+target.className else ''}\n        l.i(context.axt_fid + \":\", \"COPY-INPUT-VALUE: SAVE VALUE FOR TAG: \",\n           evt.target.rates.winner, evt, evt.key, evt.target.value)\n        ##verbose [event.input] \"selection: begin=\", evt.target.selectionStart, \\\n        ##  toString.call(evt.target.selectionStart), \\\n        ##  \"end=\", evt.target.selectionEnd, \\\n        ##  toString.call(evt.target.selectionEnd), \\\n        ##  evt.srcElement?.value, '>>', evt.clipboardData, \\\n        ##  'clip-data:', evt.clipboardData?.getData('text')\n        l.i(context.axt_fid + \"\"\": target.axt_form.rates.winner =\"\"\", target.axt_form.rates.winner)\n        l.i(context.axt_fid + \"\"\": target.rates.winner =\"\"\", target.rates.winner)\n        l.i(context.axt_fid + \"\"\": @input_values =\"\"\", @input_values)\n        if target.axt_form.rates.winner not of @input_values\n          @input_values[target.axt_form.rates.winner] = {}\n        @input_values[target.axt_form.rates.winner][target.rates.winner] = \\\n          target.value\n        l.i(context.axt_fid + \":\", \"COPY-INPUT-VALUE: input_value =\",\n          @input_values[target.axt_form.rates.winner]?[target.rates.winner])\n      , \"_copyInputValueEventHandler error\"\n    return\n\n\n  removeElementEventListeners: (element) ->\n    #element.removeEventListener('focus', @_copyInputValueEventHandler)\n    element.removeEventListener('paste', @_copyInputValueEventHandler)\n    #element.removeEventListener('change', @_copyInputValueEventHandler)\n    element.removeEventListener('keyup', @_copyInputValueEventHandler)\n    element.removeEventListener('keydown', @_copyInputValueEventHandler)\n\n\n  ###!\n   * Fill FormParser instance with data from window.axt_forms object\n   * or (if documents.axt_forms is empty) use all page content as a forms\n  ###\n  fillForms: () ->\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.fillForms\"\"\")\n    for fill_forms, idx in @fill_forms\n      l.i(\"\"\"#{context.axt_fid}: Start fill_forms ##{idx} of #{@fill_forms.length}\"\"\")\n      utils.safeApply(\n        fill_forms, this, [], \"Fill_forms' error\"\n      )\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.fillForms\"\"\")\n\n\n  # add one check_inputs function or an array of functions to\n  # @check_inputs array\n  addCheckInputs: (check_inputs) ->\n    try expect(((utils.isArray(check_inputs) or\n      utils.isFunction(check_inputs))), \"\"\"(utils.isArray(check_inputs) or utils.isFunction(check_inputs))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addCheckInputs\"\"\")\n    l.i(context.axt_fid + \"\"\": check_inputs =\"\"\", check_inputs)\n\n    utils.expandArrayWithArrayOrObject @check_inputs, check_inputs, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addCheckInputs\"\"\")\n\n\n  # add check_input function  before `before_pos` in the @check_inputs array\n  insertCheckInputs: (check_input, before_pos) ->\n    try expect(((utils.isArray(check_inputs) or\n      utils.isFunction(check_inputs))), \"\"\"(utils.isArray(check_inputs) or utils.isFunction(check_inputs))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertCheckInputs\"\"\")\n    l.i(context.axt_fid + \"\"\": checkInputs =\"\"\", checkInputs)\n    l.i(context.axt_fid + \"\"\": before_pos =\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @check_inputs,\n      check_inputs,\n      'function',\n      before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertCheckInputs\"\"\")\n\n\n  # add one fill_forms function or an array of functions to @fill_forms array\n  addFillForms: (fill_forms) ->\n    try expect(((utils.isArray(fill_forms) or\n      utils.isFunction(fill_forms))), \"\"\"(utils.isArray(fill_forms) or utils.isFunction(fill_forms))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addFillForms\"\"\")\n    l.i(context.axt_fid + \"\"\": fill_forms =\"\"\", fill_forms)\n\n    utils.expandArrayWithArrayOrObject @fill_forms, fill_forms, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addFillForms\"\"\")\n\n\n  # add fill_forms function before `before_pos` in the @fill_forms array\n  insertFillForms: (fill_forms, before_pos) ->\n    try expect(((utils.isArray(fill_forms) or\\\n      utils.isFunction(fill_forms))), \"\"\"(utils.isArray(fill_forms) or utils.isFunction(fill_forms))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertFillForms\"\"\")\n    l.i(context.axt_fid + \"\"\": fill_forms =\"\"\", fill_forms)\n    l.i(context.axt_fid + \"\"\": before_pos =\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @fill_forms,\n      fill_forms,\n      'function',\n      before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertFillForms\"\"\")\n\n\n  # add one rater function or an array of functions to @form_raters array\n  addFormRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addFormRater\"\"\")\n    l.i(context.axt_fid + \"\"\": rater =\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @form_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addFormRater\"\"\")\n\n\n  # add rater before `before_pos` in the @form_raters array\n  insertFormRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertFormRater\"\"\")\n    l.i(context.axt_fid + \"\"\": rater =\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": before_pos =\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @form_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertFormRater\"\"\")\n\n\n  # add one rater function or an array of functions to @input_rater array\n  addInputRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addInputRater\"\"\")\n    l.i(context.axt_fid + \"\"\": rater =\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @input_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addInputRater\"\"\")\n\n\n  # add rater before `before_pos` in the @input_raters array\n  insertInputRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertInputRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @input_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertInputRater\"\"\")\n\n\n  # add one rater function or an array of functions to @button_rater array\n  addButtonRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addButtonRater\"\"\")\n    l.i(context.axt_fid + \"\"\": rater =\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @button_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addButtonRater\"\"\")\n\n\n  # add rater before `before_pos` in the @button_raters array\n  insertButtonRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertButtonRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @button_raters,\n      rater,\n      'function',\n      before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertButtonRater\"\"\")\n\n\n  # add rater at the and of the @pre_raters array\n  addPreRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addPreRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @pre_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addPreRater\"\"\")\n\n\n  # add rater before `before_pos` in the @pre_raters array\n  insertPreRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertPreRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @pre_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertPreRater\"\"\")\n\n\n  # add rater at the and of the @post_raters array\n  addPostRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addPostRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @post_raters, rater, 'function'\n\n    l.ge.apply(l, l.r(context, 0, \"debug-end\", \"parser-helpers|FormParser.addPostRater\", 'FormParser.addPostRater'))\n\n\n  # add rater before `before_pos` in the @post_raters array\n  insertPostRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertPostRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @post_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertPostRater\"\"\")\n\n  # add rater at the and of the @pre_page_raters array\n  addPrePageRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addPrePageRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @pre_page_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addPrePageRater\"\"\")\n\n\n  # add rater before `before_pos` in the @pre_page_raters array\n  insertPrePageRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertPrePageRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @pre_page_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertPrePageRater\"\"\")\n\n\n  # add rater at the and of the @post_raters array\n  addPostPageRater: (rater) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.addPostPageRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n\n    utils.expandArrayWithArrayOrObject @post_page_raters, rater, 'function'\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.addPostPageRater\"\"\")\n\n\n  # add rater before `before_pos` in the @post_page_raters array\n  insertPostPageRater: (rater, before_pos) ->\n    try expect(((utils.isArray(rater) or utils.isFunction(rater))\\\n     ), \"\"\"(utils.isArray(rater) or utils.isFunction(rater))\"\"\") .to.be.true catch e then throw e\n    try expect((before_pos), \"\"\"before_pos\"\"\") .to.be.a 'number' catch e then throw e\n\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.insertPostPageRater\"\"\")\n    l.i(context.axt_fid + \"\"\": * PARAM rater:\"\"\", rater)\n    l.i(context.axt_fid + \"\"\": * PARAM before_pos:\"\"\", before_pos)\n\n    utils.expandArrayWithArrayOrObject @post_page_raters,\n                                       rater,\n                                       'function',\n                                       before_pos\n\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.insertPostPageRater\"\"\")\n\n\n  # If form_to_reset is not defined, reset all forms\n  #\n  # @param {Object|null} form_to_reset - form to reset or null (reset all forms\n  # @param {Boolean} reset_form_inputs - true - reset all inputs' raters\n  # @param {Boolean} reset_buttons     - true - reset all buttons' raters\n  resetFormRaters: (form_to_reset, reset_form_inputs, reset_buttons) ->\n    #verbose-begin [resetFormRaters] \"resetFormRaters\"\n    #verbose-param [resetFormRaters]: form_to_reset\n    #verbose-param [resetFormRaters]: reset_form_inputs\n    #verbose-param [resetFormRaters]: reset_buttons\n\n    _reset_form = (form) ->\n      #verbose-begin [resetFormRaters._reset_form]: resetFormRaters._reset_form\n      #verbose-param [resetFormRaters._reset_form]: form\n      try expect((form), \"\"\"form\"\"\") .to.be.instanceOf HTMLElement catch e then throw e\n      form.rates.reset 'reset'\n\n      if reset_form_inputs\n        for input in form.inputs\n          input.rates.reset 'reset'\n\n        for input in form.hidden_inputs\n          input.rates.reset 'reset'\n\n      if reset_buttons\n        for input in form.buttons\n          input.rates.reset 'reset'\n      #verbose-end [resetFormRaters._reset_form]: resetFormRaters._reset_form\n\n    if form_to_reset?\n      #verbose [resetFormRaters] \"reset raters of one form:\", form_to_reset\n      _reset_form(form_to_reset)\n    else\n      #verbose [resetFormRaters] \"reset raters of all forms:\", @form_box\n      _reset_form(form) for form in @form_box\n\n    changed = true\n    #verbose-end [resetFormRaters] \"resetFormRaters\"\n\n\n  # parse page (once the page was loaded)\n  ratePageStatus: () ->\n    rater_name = \"-begin-\"\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.ratePageStatus\"\"\")\n    for rater in @pre_page_raters\n      rater_name = utils.safeApply(\n        rater, this, null, \"Pre page rater after '#{rater_name}' error\"\n      )\n      l.d.apply(l, l.r(context, 0, \"debug\", \"parser-helpers|parser|FormParser.ratePageStatus\", \"#{rater_name} is done\"))\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.ratePageStatus\"\"\")\n\n  ###\n  gatherAnalytics: () ->\n    # gather information ONLY if there is any password field on the page\n    if document.querySelector('input[type=\"password\"]')\n      @ga.set('page_state', @page_rates.winner)\n      l.i(context.axt_fid + \"\"\": @form_box =\"\"\", @form_box)\n      for form in @form_box\n        l.i(context.axt_fid + \"\"\": form =\"\"\", form)\n        @ga.set\n          form_selector: select(form)\n          form_ptype:    form.rates.winner\n\n        for input in form.inputs\n          @ga.send 'event', 'input', 'info',\n            input_visibility: Number(utils.isElementVisible(input))\n            input_kind: 'input'\n            input_id:    input.id\n            input_type:  input.type\n            input_ptype: input.rates.winner\n            input_label: (label.innerText for label in input.labels).join('|')\n\n        for button in form.buttons\n          if button.tagName == 'INPUT'\n            label = button.value\n          else\n            label = button.innerText\n\n          @ga.send 'event', 'button', 'info',\n            input_visibility: Number(utils.isElementVisible(button))\n            input_kind: 'button'\n            input_id:    button.id\n            input_type:  button.tagName\n            input_label: label\n  ###\n\n\n  repackForm: (form, new_form) ->\n    try assert((not form? or form instanceof HTMLElement),\n      \"'form' should be null or HTMLElement but not #{form}\") catch e then throw e\n    try assert((not new_form? or new_form instanceof HTMLElement),\n      \"'new_form' should be null or HTMLElement but not #{new_form}\") catch e then throw e\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.repackForm\"\"\")\n    if not form? or not new_form?\n      l.i(context.axt_fid + \":\", \"repackForm-1: form or new_form \" +\n        \"is empty: form =\", form, \"new_form =\", new_form)\n      l.ge(\"\"\"#{context.axt_fid}: << FormParser.repackForm\"\"\")\n      return\n\n    l.i(context.axt_fid + \":\", \"repackForm-2:\", form, new_form)\n    if form in @form_box\n      l.i(\"\"\"#{context.axt_fid}: repackForm-3: BINGO! form is in @form_box\"\"\")\n      if 'rates' not of new_form\n        new_form.rates = new RatesProp(\n          -1, new_form, @form_box.becomesDirty\n        )\n      else\n        new_form.rates.onRateChanged @form_box.becomesDirty\n\n      new_form.inputs        = new RangedArray()\n      new_form.hidden_inputs = new RangedArray()\n      new_form.buttons       = new RangedArray()\n\n      # scan all forms and gather elements from them which belong to new_form:\n      for _form in @form_box\n        for_del = []\n        for i, idx in _form.inputs\n          l.i(context.axt_fid + \":\", \"repackForm-4: inputs:\",\n            idx, new_form.contains(i), i)\n          if new_form.contains(i)\n            new_form.inputs.add i\n            if 'rates' not of i\n              i.rates = new RatesProp(-1, i, new_form.inputs.becomesDirty)\n            else\n              i.rates.onRateChanged new_form.inputs.becomesDirty\n            i.axt_form = new_form\n            for_del.unshift idx\n\n        for_del.forEach (idx) -> _form.inputs.remove idx\n\n        for_del = []\n        for i, idx in _form.hidden_inputs\n          l.i(context.axt_fid + \":\", \"repackForm-5: \" +\n            \"hidden_inputs:\", idx, new_form.contains(i), i)\n          if new_form.contains(i)\n            new_form.hidden_inputs.add i\n            if 'rates' not of i\n              i.rates = new RatesProp -1, i, new_form.hidden_inputs.becomesDirty\n            else\n              i.rates.onRateChanged new_form.hidden_inputs.becomesDirty\n            for_del.unshift idx\n\n        for_del.forEach (idx) -> _form.hidden_inputs.remove idx\n\n        for_del = []\n        for i, idx in _form.buttons\n          l.i(context.axt_fid + \":\", \"repackForm-6: buttons:\",\n            idx, new_form.contains(i), i)\n          if new_form.contains(i)\n            new_form.buttons.add i\n            if 'rates' not of i\n              i.rates = new RatesProp(-1, i, new_form.buttons.becomesDirty)\n            else\n              i.rates.onRateChanged new_form.buttons.becomesDirty\n            for_del.unshift idx\n\n        for_del.forEach (idx) -> _form.buttons.remove idx\n\n      new_form.axt_elements = Array.from(new_form.inputs).concat(\n        Array.from(new_form.hidden_inputs),\n        Array.from(new_form.buttons)\n      )\n      @form_box.add new_form\n      l.i(context.axt_fid + \":\", \"repackForm-7: form_box =\",\n        @form_box, \"new_form =\", new_form, \"@form_box =\", @form_box)\n\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.repackForm\"\"\")\n\n\n  # rate forms (run raters on forms and inputs)\n  # NOTE: if @changed is TRUE after finishing rateForms() it means we need to\n  #       restart form parsing, because DOM was changed during rateForms()\n  #       running\n  rateForms: () ->\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.rateForms\"\"\")\n    #verbose-time-begin [FormParser.rateForms]: FormParser.rateForms\n    rater_name = '-begin-'\n\n    @ratePageStatus()\n\n    for rater in @pre_raters\n      rater_name = utils.safeApply(rater, this, [],\n        \"Pre rater after '#{rater_name}' error\"\n      )\n      #DEBUG [parser] if utils.isString(rater_name)\n        #debug [parser] \"#{rater_name} is done (pre-)\"\n\n    for form in @form_box\n      # rate buttons\n      for button in form.buttons\n        # rate inputs of form:\n        for rater in @button_raters\n          rater_name = utils.safeApply(rater, this, [form, button],\n            \"Button rater after '#{rater_name}' error\"\n          )\n          #DEBUG [parser] if utils.isString(rater_name)\n            #debug [parser] \"#{rater_name} is done (buttons)\"\n\n      for input in form.inputs when utils.isParsedInput(input)\n        # rate inputs of form:\n        for rater in @input_raters\n          rater_name = utils.safeApply(rater, this, [form, input, false],\n            \"Input rater after '#{rater_name}' error\"\n          )\n          #DEBUG [parser] if utils.isString(rater_name)\n            #debug [parser] \"#{rater_name} is done\"\n\n      # rate hidden inputs\n      for input in form.hidden_inputs\n        # rate inputs of form:\n        for rater in @input_raters\n          rater_name = utils.safeApply(rater, this, [form, input, true],\n            \"Input (hidden) rater after '#{rater_name}' error\"\n          ) # true == hidden\n          #DEBUG [parser] if utils.isString(rater_name)\n            #debug [parser] \"#{rater_name} is done (hidden)\"\n\n      for rater in @form_raters\n        rater_name = utils.safeApply(rater, this, [form],\n          \"Form rater after '#{rater_name}' error\"\n        )\n        #DEBUG [parser] if utils.isString(rater_name)\n          #debug [parser] \"#{rater_name} is done (form)\"\n\n    for rater in @post_raters\n      rater_name = utils.safeApply(rater, this, [],\n        \"Post rater after '#{rater_name}' error\"\n      )\n      #DEBUG [parser] if utils.isString(rater_name)\n        #debug [parser] \"#{rater_name} is done (post-)\"\n\n    for rater in @post_page_raters\n      rater_name = utils.safeApply(rater, this, [],\n        \"Post page rater after '#{rater_name}' error\"\n      )\n      #DEBUG [parser] if utils.isString(rater_name)\n        #debug [parser] \"#{rater_name} is done (post page)\"\n\n    show_rate_info 'FINAL RATERS INFO', @form_box\n\n    #do @gatherAnalytics\n\n    #verbose-time-end [FormParser.rateForms]: FormParser.rateForms\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.rateForms\"\"\")\n\n\n  getParsedForms: () ->\n    ###\n     *  parser returns object with all rated forms on the page:\n     *  result = {\n     *    current_step: 1, # current step\n     *    steps: 1,  # total steps\n     *    forms: {\n     *      <form-tag>: { # form-tag can be 'login', 'registration', ...\n     *        form: <form object>\n     *        inputs: {\n     *          <inputType>: <input object>, # <inputType can be\n     *                                       # 'login', 'password',\n     *                                       # 'name', 'address', etc.\n     *          ...\n     *        }\n     *        buttons: {\n     *          <buttonType>: <button object (or input or anchor or div)>\n     *      }\n     *    }\n     *  }\n     *\n    ###\n\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.getParsedForms\"\"\")\n    rated_forms =\n      Object.keys(@form_box.winners).filter( (tag) =>\n        form = @form_box.winners[tag][0]\n        form.rates.winner and Object.keys(form.inputs).length > 0\n      ).reduce( (forms, tag) =>\n        form = @form_box.winners[tag][0]\n        inputs = Object.keys(form.inputs.winners)\n                      .reduce( (inputs, tag) ->\n                        inputs[tag] = form.inputs.winners[tag][0]\n                        inputs\n                      , {}\n                      )\n        buttons = Object.keys(form.buttons.winners)\n                      .reduce( (buttons, tag) ->\n                        buttons[tag] = form.buttons.winners[tag][0]\n                        buttons\n                      , {}\n                      )\n\n        if form.rates.winner == 'login' and\n           not inputs['login'] and\n           'login' in form.hidden_inputs.tags\n          inputs['login'] = form.hidden_inputs.winners['login'][0]\n\n        forms[form.rates.winner] =\n          form: form\n          inputs: inputs\n          buttons: buttons\n        forms\n      , {}\n      )\n\n    ###DEBUG! [parser|titled]\n    # set DEBUG titles of forms and inputs FOR TESTING PURPOSE\n    #-------------------------------------------\n    page_title = String(\" [#{tag}:#{@page_rates.tag_dict[tag]}]\" \\\\\n      for tag in @page_rates.tags)\n\n    for form in @form_box\n      form.title = form.axt_prev_title +\n        String(\" [#{tag}:#{form.rates.tag_dict[tag]}]\" \\\\\n          for tag in form.rates.tags)\n\n      for input in form.inputs\n        input.title = input.axt_prev_title +\n          String(\" [#{tag}:#{input.rates.tag_dict[tag]}]\" \\\\\n            for tag in input.rates.tags)\n    ###\n\n    ###DEBUG! [parser|colored]\n    # color forms and inputs FOR TESTING PURPOSE\n    #-------------------------------------------\n    for tag, form_info of rated_forms\n      if tag == 'login'\n        form_info.form.style.backgroundColor = \"#F6C9D4\"\n        #form_info.form.style.border = \"thin solid #8A4556\"\n        for tag, input of form_info.inputs\n          #input.style.border = \"thin solid #346851\"\n          input.style.backgroundColor = \"#EFFACD\"\n          input.style.color = \"#346851\"\n      else if tag == 'registration'\n        form_info.form.style.backgroundColor = \"#B5DDCC\"\n        #form_info.form.style.border = \"thin solid #346851\"\n        for tag, input of form_info.inputs\n          #input.style.border = \"thin solid #8A4556\"\n          input.style.backgroundColor = \"#F6C9D4\"\n          input.style.color = \"#8A4556\"\n      else\n        form_info.form.style.backgroundColor = \"#EFFACD\"\n        #form_info.form.style.border = \"thin solid #7F9048\"\n        for tag, input of form_info.inputs\n          #input.style.border = \"thin solid #346851\"\n          input.style.backgroundColor = \"#D2D4CB\"\n          input.style.color = \"#346851\"\n    ###\n\n    ###DEBUG! [parser]\n    # ASSERT (TODO: replace with chai.structJSON assert)\n    for tag, form_info of rated_forms\n      expect(form_info).has.to.be.an 'object'\n      expect(form_info.form).has.to.be.an.instanceOf HTMLElement\n\n      for tag, input of form_info.inputs\n        expect(input).has.to.be.an.instanceOf HTMLElement\n    ###\n\n    l.i(context.axt_fid + \"\"\": Object.keys(rated_forms) =\"\"\", Object.keys(rated_forms))\n    l.l.apply(l, l.r(context, 0, \"info\", \"parser-helpers|FormParser.getParsedForms\", 'PAGE_RATES: tag_dict = ',\n      dumper(@page_rates.tag_dict), 'winner=', dumper(@page_rates.winner)))\n\n    if Object.keys(rated_forms).length > 0\n      forms_info =\n        logged_in: @page_rates.winner is 'logged-in'\n        current_step: 1\n        steps: 1\n        forms: rated_forms\n        #DEBUG [parser] page_title: page_title\n    else\n      forms_info =\n        logged_in: @page_rates.winner is 'logged-in'\n        current_step: 0\n        steps: 0\n        forms: {}\n        #DEBUG [parser] page_title: page_title\n\n    l.d.apply(l, l.r(context, 0, \"debug-val\", \"parser-helpers|FormParser.getParsedForms\", \"\"\"forms_info =\"\"\", forms_info))\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.getParsedForms\"\"\")\n    return forms_info\n\n\n  # full parse's cycle: check, rate and return parsed forms\n  parse: () ->\n    #verbose-begin: [FormParser.parse]: FormParser.parse\n    #if @checkInputs()\n    do @fillForms\n    do @rateForms\n    l.ge(\"\"\"#{context.axt_fid}: << FormParser.parse\"\"\")\n    return @getParsedForms()\n\n\n  # execute default or specific parser for given url\n  getFormsInfo: (done) ->\n    l.gs(\"\"\"#{context.axt_fid}: >> FormParser.getFormsInfo\"\"\")\n    l.i(\"\"\"#{context.axt_fid}: \\\"FormsInfo:1\\\", @parser_fun, this, this.parse\"\"\")\n\n    @parser_fun.call this, (form_info) =>\n      # input_values uses to save original login/reg forms':w\n      # fields' values\n      # when form disappears, this values must be removed\n      if form_info?\n        for tag of @input_values\n          if tag not of form_info.forms\n            #verbose: ${tag} form  doesn't exist. Delete input_values[#{tag}]\n            delete @input_values[tag]\n      else\n        # there is no any forms, remove all input_values here\n        @input_values = {}\n\n      l.i(\"\"\"#{context.axt_fid}: FormsInfo:2\"\"\")\n      l.i(context.axt_fid + \"\"\": form_info =\"\"\", form_info)\n      l.ge(\"\"\"#{context.axt_fid}: << FormParser.getFormsInfo\"\"\")\n      done(form_info)\n\n#-------------------------------------------------------------------------------\n# return list of node's inner strings\n#\n# @param {Node} node    - the node look test for\n# @param {boolean} skip_node_with_inputs - if true return empty list if this\n#                                          node contains any input or button\n#                                          element\n# @param {boolean} cached = true       - use cached values (from isVisible())\n# @param {boolean} visible = false     - look for only visible elements\n# @param {boolean} with_pseudo = true  - add text from pseudo elements\n#                                        (:before, :after)\n# @param {boolean} skip_buttons = true - skip text from buttons or links and\n#                                        divs which look like buttons\n#\n# @return {string[]} - the node's inner text in an array\n#-------------------------------------------------------------------------------\ngetNodeText = (\n  node,\n  skip_node_with_inputs = false,\n  cached = true,\n  visible = false,\n  with_pseudo = true,\n  skip_links_buttons = true\n) ->\n  #verbose-begin [getNodeText]: getNodeText\n  #verbose-param [getNodeText]: node\n  #verbose-param [getNodeText]: skip_node_with_inputs\n  #verbose-param [getNodeText]: cached\n  #verbose-param [getNodeText]: visible\n  #verbose-param [getNodeText]: with_pseudo\n  #verbose-param [getNodeText]: skip_links_buttons\n\n  _getNodeText = (node) ->\n    #verbose [getNodeText._getNodeText]: BEGIN: getNodeText._getNodeText\n    #verbose-param [getNodeText._getNodeText]: node\n\n    #verbose-val [getNodeText] utils.isVisible.fn(node, cached)\n    #verbose-val [getNodeText] utils.isVisible.fn(node, true)\n    if visible and not utils.isVisible.fn(node, cached)\n      #verbose [getNodeText._getNodeText]: END-2: getNodeText._getNodeText\n      return []\n\n    text_list = []\n    line_list = []\n\n    _add_line_to_text = () ->\n      if line_list.length > 0\n        s = line_list.join(' ').trim()\n        text_list.push(s) if s\n        line_list = []\n\n    if with_pseudo\n      before = window\n        .getComputedStyle(node, ':before')\n        .getPropertyValue('content')\n        .trim()\n      #verbose [getNodeText._getNodeText|label] \"_GNT-0: before =\", before\n      text_list.push(before) if before and before != 'none'\n\n    for curr in node.childNodes\n      #verbose [getNodeText._getNodeText|label] \"_GNT-1: curr=\", curr\n      continue if curr.nodeType == 1 and curr.hasAttribute('axt_element')\n\n      node_name = curr.nodeName\n      switch node_name\n        when '#text'\n          s = curr.nodeValue.trim()\n          #verbose [getNodeText._getNodeText|label] \"_GNT-2 #text: s=\", s\n          line_list.push(s) if s\n        when '#comment', 'SCRIPT', 'STYLE', 'svg', 'NOSCRIPT'\n          #verbose [getNodeText._getNodeText|label] \"_GNT-3\"\n          null\n        when 'BR'\n          #verbose [getNodeText._getNodeText|label] \"_GNT-4\"\n          _add_line_to_text()\n        when 'B', 'I', 'U', 'STRONG','EM', 'TT', 'A', 'SPAN'\n\n          if skip_links_buttons and (\n            node_name == 'A' or\n            'button' == curr.axt_type\n          )\n            #verbose [getNodeText._getNodeText|label] \"_GNT-5\"\n            _add_line_to_text()\n          else\n            value = _getNodeText(curr)\n            #verbose [getNodeText._getNodeText|label] \"_GNT-6: value =\", value\n            value_len = value.length\n            if value_len == 1\n              line_list.push(value[0])\n              #verbose [getNodeText._getNodeText] \"_GNT-7: line_list =\", \\\n              #  line_list\n            else\n              _add_line_to_text()\n              if value_len > 0\n                utils.extendArray(text_list, value)\n                #verbose [getNodeText._getNodeText] \"_GNT-8: text_list =\", \\\n                #  text_list\n        when 'INPUT'\n          if curr.getAttribute('type') != 'hidden' and (\n            !visible or (\n              visible and utils.isVisible.fn(curr)\n            )\n          )\n            if skip_node_with_inputs\n              #verbose [getNodeText._getNodeText|label]: _GNT-9: \\\n              #  input detected\n              #verbose [getNodeText._getNodeText]: \\\n              #  END-3: getNodeText._getNodeText\n              throw new Error('input_detected')\n            else\n              if skip_links_buttons\n                #verbose [getNodeText._getNodeText|label] \"_GNT-10\"\n                _add_line_to_text()\n              else\n                value = _getNodeText(curr)\n                #verbose [getNodeText._getNodeText|label] \"_GNT-11: value=\", \\\n                #  value\n                utils.extendArray(text_list, value) if value.length > 0\n        when \"SELECT\", \"TEXTAREA\", \"IFRAME\", \"FORM\"\n          if skip_node_with_inputs\n            #verbose [getNodeText._getNodeText]: END-4: getNodeText._getNodeText\n            throw new Error('input_detected')\n          else\n            #verbose [getNodeText._getNodeText|label]: _GNT-12: #{node_name} \\\n            #  detected\"\n            _add_line_to_text()\n        when 'LABEL'\n          _add_line_to_text()\n          if skip_node_with_inputs\n            value = _getNodeText(curr)\n            #verbose [getNodeText._getNodeText|label] \"_GNT-13: label=\", value\n            if value.length > 0\n              utils.extendArray(text_list, [value.join('\\n')])\n        else\n          #verbose [getNodeText._getNodeText|label] \"_GNT-14\"\n          _add_line_to_text()\n\n          if 'form' == curr.axt_type or (\n            skip_links_buttons and (\n              'BUTTON' == node_name or\n              'button' == curr.axt_type\n            )\n          )\n            #verbose [getNodeText._getNodeText|label] \"_GNT-15\"\n            if skip_node_with_inputs\n              #verbose [getNodeText._getNodeText|label] \"_GNT-16\"\n              #verbose [getNodeText._getNodeText]: \\\n              #  END-5: getNodeText._getNodeText\n              throw new Error('input_detected')\n          else\n            value = _getNodeText(curr)\n            #verbose [getNodeText._getNodeText|label] \"_GNT-17: value =\", value\n            if value.length > 0\n              utils.extendArray(text_list, value)\n\n    if with_pseudo\n      after = window\n        .getComputedStyle(node, ':after')\n        .getPropertyValue('content')\n        .trim()\n      #verbose [getNodeText._getNodeText|label] \"_GNT-18: after =\", after\n      text_list.push(after) if after and after != 'none'\n\n    #verbose [getNodeText._getNodeText|label] \"_GNT19: text_list=\", text_list\n    _add_line_to_text()\n\n    #verbose [getNodeText._getNodeText|label] \"_GNT-20: text_list=\", text_list\n    #verbose [getNodeText._getNodeText]: END: getNodeText._getNodeText\n    return text_list\n\n  try\n    result = _getNodeText(node)\n  catch e\n    #verbose \"input_detected\"\n    if e.message == 'input_detected'\n      result = null\n    else\n      #verbose [getNodeText] \"error=\", \"getNodeText error:\", e\n      #verbose-alt-end [getNodeText]: getNodeText\n      throw e\n\n  #verbose-val [getNodeText]: result\n  #verbose-end [getNodeText]: getNodeText\n  return result\n\n\n##!\n# get array of texts above and on the left hand side of element which we can\n# found as a label of the input element.\n# when all_above = false - get only text for current element\n# when all_above = true - get all texts above the element up to the form's top\n#\n# @param {HTMLElement} element       - the element look test for\n# @param {HTMLElement} form          - limit text searching within the _form_\n# @param {boolean} all_above = false - if true - look for all the text above\n#                                      the _element_\n#                                      if false - stop when previous input or\n#                                      button is detected\n# @param {boolean} cached = true     - use cached values\n# @param {boolean} visible = false   - look for only visible elements\n# @param {boolean} with_pseudo = true - add text from pseudo elements\n#                                       (:before, :after)\n# @param {boolean} skip_links_and_buttons = true - skip text from buttons or\n#                                        links and divs which look as buttons\n# @return {string[]} - the element's labels in an array\ngetAltInputLabels = (\n  element,\n  form,\n  all_above = false,\n  cached = true,\n  visible = false,\n  with_pseudo = true,\n  skip_links_and_buttons = true\n) ->\n  #verbose-begin [getAltInputLabels]: getAltInputLabels\n  #verbose-param [getAltInputLabels] element\n  #verbose-param [getAltInputLabels] form\n  #verbose-param [getAltInputLabels] all_above\n  #verbose-param [getAltInputLabels] cached\n  #verbose-param [getAltInputLabels] visible\n\n  form ?= document.body\n  prev = element\n  line_list = []\n  text_list = []\n  stop = false\n\n  _add_line_to_text = () ->\n    if line_list.length > 0\n      s = line_list.join(' ').trim()\n      text_list.unshift(s) if s\n      line_list = []\n\n  while prev? and prev != form\n    curr = prev.previousSibling\n\n    #verbose [getAltInputLabels|label] \"AIL-1: curr=\", curr?.nodeName, curr\n    while not curr?\n      _add_line_to_text()\n\n      parent = prev.parentNode\n      #verbose-val [getAltInputLabels] parent\n\n      if with_pseudo\n        before = window\n          .getComputedStyle(parent, ':before')\n          .getPropertyValue('content')\n          .trim()\n        #verbose-val [getAltInputLabels] before\n        text_list.unshift(before) if before and before != 'none'\n\n      prev = parent\n      break if prev == form\n\n      curr = prev.previousSibling\n\n    #verbose [getAltInputLabels|label] \"AIL-2: curr=\", curr?.nodeName, curr\n    break if not curr?\n\n    if curr.nodeType == 1 and curr.classList.contains('axt-element')\n      #verbose [getAltInputLabels|label] \"AIL-2-2: skip axt-element\"\n      prev = prev.previousSibling\n      continue\n\n    #verbose [getAltInputLabels|label] \"AIL-3: curr=\", curr\n\n    #VERBOSE [getAltInputLabels] if curr.nodeName == '#text'\n      #verbose [getAltInputLabels] \"===> CURR=\", curr, \"= '\" + \\\n      #  curr.nodeValue.trim() + \"'\"\n    #VERBOSE [getAltInputLabels] else\n      #verbose [getAltInputLabels] \"===> CURR=\", curr\n\n    node_name = curr.nodeName\n    #verbose [getAltInputLabels] \"nodeName=\", node_name\n    switch node_name\n      when '#text'\n        s = curr.nodeValue.trim()\n        #verbose [getAltInputLabels] \"AIL-4 #text: s=\", s\n        line_list.unshift(s) if s\n      when '#comment', 'SCRIPT', 'STYLE', 'svg', 'NOSCRIPT'\n        #verbose [getAltInputLabels|label] \"AIL-5\"\n        null\n      when 'BR'\n        #verbose [getAltInputLabels|label] \"AIL-6\"\n        _add_line_to_text()\n      when 'B', 'I', 'U', 'STRONG', 'EM', 'TT', 'A', 'SPAN'\n        if skip_links_and_buttons and (\n          node_name == 'A' or\n          'button' == curr.axt_type\n        )\n          #verbose [getAltInputLabels|label] \"AIL-7\"\n          _add_line_to_text()\n        else\n          value = getNodeText(\n            curr, !all_above, cached, visible,\n            with_pseudo, skip_links_and_buttons\n          )\n          #verbose [getAltInputLabels|label] \"AIL-8: val=\", value\n          if not value?\n            _add_line_to_text()\n            #verbose [getAltInputLabels|label] \"AIL-9: stop\", !all_above\n            stop = !all_above\n          else\n            value_len = value.length\n            if value_len == 1\n              line_list.unshift(value[0])\n              #verbose [getAltInputLabels|label] \"AIL-10: line_list=\", line_list\n            else if value_len > 1\n              _add_line_to_text()\n              utils.extendArray(text_list, value, true)\n              #verbose [getAltInputLabels|label] \"AIL-11: text_list=\", text_list\n      when 'LABEL'\n        _add_line_to_text()\n        if not all_above\n          value = getNodeText(\n            curr,\n            true, #!all_above\n            cached,\n            visible,\n            with_pseudo,\n            false #skip_links_and_buttons\n          )\n          #verbose [getAltInputLabels|label] \"AIL-12: val=\", dumper value\n          if not value?\n            #verbose [getAltInputLabels|label] \"AIL-13: stop\"\n            stop = true\n          else if value.length > 0\n            utils.extendArray(text_list, [value.join('\\n')], true)\n      when 'INPUT'\n        #verbose [getAltInputLabels|label] \"AIL-14\"\n        if curr.getAttribute('type') != 'hidden' and (\n          !visible or (\n            visible and utils.isVisible.fn(curr)\n          )\n        )\n          _add_line_to_text()\n          if all_above\n            if not skip_links_and_buttons\n              value = getNodeText(\n                curr, false, cached, visible, with_pseudo, false\n              )\n              if value?.length > 0\n                #verbose [getAltInputLabels|label] \"AIL-15: value=\", value\n                utils.extendArray(text_list, value, true)\n          else\n            #verbose [getAltInputLabels|label] \"AIL-16: stop\"\n            stop = true\n      when \"SELECT\", \"TEXTAREA\", \"IFRAME\", \"FORM\"\n        #verbose [getAltInputLabels|label] \"AIL-17\"\n        _add_line_to_text()\n        if not !all_above\n          #verbose [getAltInputLabels|label] \"AIL-18: stop\"\n          stop = true\n      else\n        _add_line_to_text()\n\n        if 'form' == curr.axt_type or (\n          skip_links_and_buttons and (\n            'BUTTON' == node_name or\n            'button' == curr.axt_type\n          )\n        )\n          #verbose [getAltInputLabels|label] \"AIL-19\"\n          if not all_above\n            #verbose [getAltInputLabels|label] \"AIL-20: stop\"\n            stop = true\n        else\n          value = getNodeText(\n            curr, !all_above, cached, visible,\n            with_pseudo, skip_links_and_buttons\n          )\n          #verbose [getAltInputLabels|label] \"AIL-21: value=\", value\n          if not value?\n            stop = !all_above\n            #verbose [getAltInputLabels|label] \"AIL-22 stop\"\n          else if value.length > 0\n            utils.extendArray(text_list, value, true)\n\n    #verbose-val [getAltInputLabels|label] dumper text_list\n    #verbose [getAltInputLabels|label] \"AIL-23: stop=\", stop\n    break if (stop)\n\n    prev = curr\n\n  _add_line_to_text()\n  #verbose [getAltInputLabels|label] \"AIL-24: text_list=\", text_list\n\n  #verbose-end [getAltInputLabels]: getAltInputLabels\n  return text_list\n\n\ngetButtonText = (button) ->\n  #verbose [isButtonTextCorrect] \"btc-1: button = \", button\n  return \"\" if not button?\n\n  txt = \"\"\n  #verbose [isButtonTextCorrect] \"btc-2: txt = \", txt\n\n  if button.tagName.toUpperCase() in ['INPUT', 'BUTTON']\n    txt = button.value?.trim() ? \"\"\n    #verbose [isButtonTextCorrect] \"btc-3: txt = \", txt\n    if not txt\n      txt = button.getAttribute('aria-label')?.trim()\n      #verbose [isButtonTextCorrect] \"btc-4: txt = \", txt\n\n    if not txt\n      label_id = button.getAttribute('aria-labelledby')\n      #verbose [isButtonTextCorrect] \"btc-5: label_id = \", label_id\n\n      if label_id?\n        txt = getNodeText(document.getElementById(label_id)).join().trim()\n        #verbose [isButtonTextCorrect] \"btc-6: txt = \", txt\n\n  if not txt\n    txt = button.innerText?.trim() ? \"\"\n    #verbose [isButtonTextCorrect] \"btc-7: txt = \", txt\n\n  return txt\n\n\nisButtonTextCorrect = (button) ->\n  return false if not button?\n  txt = getButtonText(button)\n  return (txt.length > 0 and txt.indexOf('?') < 0)\n\n\nfilterButtons = (buttons, checkVisible = true) ->\n  #verbose-begin [filterButtons]: filterButtons\n  #verbose-param [filterButtons]: buttons\n\n  buttons = buttons.filter (a) ->\n    inner_anchors_cnt = a.getElementsByTagName('a').length\n    has_inner_input = a.querySelector(\n      'input,button,textarea,form,select,iframe')?\n    parent = a.parentElement\n\n    return inner_anchors_cnt <= 1 and\n      not has_inner_input and (\n        a.nodeName in ['BUTTON', 'INPUT'] or\n        not parent.closest('button,select,a')? or (\n          # if SPAN \"button\" is recognised in the same scope as a BUTTON/INPUT,\n          # ignore it, because it's not a button, but (mostly) a button's title\n          a.nodeName == 'SPAN' and\n          parent.querySelectorAll(BUTTON_SELECTORS).length == 1\n        )\n      ) and ( not checkVisible or utils.isElementVisible(a) )\n  #verbose [filterButtons|label] \"FB-0: button=\", buttons\n\n  button_pairs = buttons.map (b) -> [b, utils.parentIsInList(b, buttons)]\n  #verbose [filterButtons|label] \"FB-1: button_pairs=\", button_pairs\n\n  button_groups = button_pairs.reduce (bg, b) ->\n    parent = b[1]\n    bg.push(parent) if parent?\n    bg\n  , []\n  #verbose [filterButtons|label] \"FB-2: button_groups=\", button_groups\n\n  button_pairs = button_pairs.filter (b) ->\n    button = b[0]\n    ( #HACK: <a> inside <button>: see https://www.zendesk.com/login/#support\n      button.matches(BUTTON_INPUT_SELECTORS) or\n        not button.querySelector(BUTTON_INPUT_SELECTORS)?\n    ) and (\n      button not in button_groups or\n        button_groups.filter((b2) -> b2 == button).length == 1\n    )\n  #verbose [filterButtons|label] \"FB-3: button_pairs=\", button_pairs\n\n  buttons = button_pairs.map (b) -> b[0]\n  #verbose [filterButtons|label] \"FB-4: buttons=\", buttons\n\n  button_pairs = button_pairs.map (b) ->\n    b[1] = null if b[1] not in buttons\n    b\n  #verbose [filterButtons|label] \"FB-5: button_pairs=\", button_pairs\n\n  buttons = button_pairs.reduce (bs, b) ->\n    bs.push b[0] if not b[1]?\n    bs\n  , []\n  #verbose [filterButtons|label] \"FB-6: buttons=\", buttons\n\n  #verbose-end [filterButtons]: filterButtons\n  return buttons\n\n\ngetPageButtons = (checkVisible = true) ->\n  buttons = Array.from(document.querySelectorAll(ALL_BUTTON_SELECTORS))\n    .filter (button) -> not button.classList.contains 'axt-element'\n\n  buttons.forEach (b) -> b.axt_type = 'button'\n  #verbose [getPageButtons|label] \"GPB-1: buttons=\", buttons\n\n  b = document.querySelector(\"body > div:nth-child(27) > div > div > div > \" +\n    \"div.ms-Panel-main.main-163 > div.ms-Panel-contentInner.contentInner-144\"+\n    \"> div > div > div > div > ul > li:nth-child(3) > button\")\n\n  #verbose-val [getPageButtons]: b\n  #verbose-val [getPageButtons]: b in buttons\n\n  buttons = filterButtons(buttons, checkVisible)\n  #verbose [getPageButtons|label] \"GPB-2: buttons=\", buttons\n\n  return buttons\n\n\n#-------------------------------------------------------------------------------\nmodule.exports =\n  splitString:            splitString\n  getParentsChildren:      getParentsChildren\n  parentHasOnlyOneChild:  parentHasOnlyOneChild\n  getElementDisplayStyle: getElementDisplayStyle\n  tagsByStr:              tagsByStr\n  prepRaters:             prepRaters\n  prepAppliers:           prepAppliers\n  prepParserFun:          prepParserFun\n  FormParser:             FormParser\n  FormsObserver:          FormsObserver\n  compareArrays:          compareArrays\n  Analytics:              Analytics\n  GoogleAnalytics:        GoogleAnalytics\n  show_rate_info:         show_rate_info\n  #onResizeEvent:          onResizeEvent\n  add_input_icon:         add_input_icon\n  change_icon_value:      change_icon_value\n  reposition_input_icon:  reposition_input_icon\n  remove_input_icon:      remove_input_icon\n  EMAIL_RE:               EMAIL_RE\n  EMAILS_RE:              EMAILS_RE\n  PHONE_RE:               PHONE_RE\n  PHONES_RE:              PHONES_RE\n  SOCIAL_SITES:           SOCIAL_SITES\n  SUBMIT_ETALONS:         SUBMIT_ETALONS\n  FORMS_ETALONS:          FORMS_ETALONS\n  TITLES_ETALONS:         TITLES_ETALONS\n  g_const:                g_const\n  #GT:                     GT\n  selectors:              selectors\n  tags:                   tags\n  RatesProp:              RatesProp\n  RangedArray:            RangedArray\n  getFrameDepth:          getFrameDepth\n  normalizePhone:         normalizePhone\n  getFormTitle:           getFormTitle\n  compareVisibleStyleAttributes: compareVisibleStyleAttributes\n  transferInput:          transferInput\n  transferHiddenInput:    transferHiddenInput\n  transferButton:         transferButton\n  getNodeText:            getNodeText\n  getAltInputLabels:      getAltInputLabels\n  getPageButtons:         getPageButtons\n  getButtonText:          getButtonText\n  isButtonTextCorrect:    isButtonTextCorrect\n  filterButtons:          filterButtons\n  # for unit tests only\n  FULL_MATCHING_RANK:     FULL_MATCHING_RANK\n  SUBSTR_MATCHING_RANK:   SUBSTR_MATCHING_RANK\n  ALL_BUTTON_SELECTORS:   ALL_BUTTON_SELECTORS\n","# send log from content page to background page and then to the service\n\nif process.env.DEBUG == 'mock' or process.env.DEBUG == 'test-mock'\n  # disable remote logging in mock mode\n  sendMessage = () -> ### empty ###\nelse\n  Transport = require('./front-transport.coffee')\n\n  transport = new Transport(->)\n\n  sendMessage = (context, type, tags, filename, line, funcname, message) ->\n    transport.sendToExt context, 'sendRemoteLog', {\n      param:\n        context:  context\n        type:     type\n        tags:     tags\n        filename: filename\n        line:     line\n        funcname: funcname\n        message:  message\n    }\n\nmodule.exports = sendMessage\n","var clone = (function() {\n'use strict';\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `buffer_class` - Buffer class when we need it in browser.\n *                         Without this parameter clone does not use Buffer in\n *                         browsers\n*/\nfunction clone(parent, circular, depth, prototype, buffer_class) {\n  var filter;\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    filter = circular.filter;\n    circular = circular.circular\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  // hack: prevent Buffer from loading by browserify\n  var Buf = buffer_class || global['Buffer'], useBuffer = Buf != undefined;\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth == 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buf.isBuffer(parent)) {\n      child = new Buf(parent.length);\n      parent.copy(child);\n      return child;\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n};\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n};\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n};\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n};\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n};\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","# select existent or define new AXTGui namespace\n\ncodes = {\n  A: {\n    0: [0, -1, -1],\n    I: [[0, 1, -1]],\n    J: [[0, 1, -1]],\n    Y: [[0, 1, -1]],\n    U: [[0, 7, -1]]\n  },\n  B: [[7, 7, 7]],\n  C: {\n    0: [5, 5, 5],\n    1: [4, 4, 4],\n    Z: {\n      0: [4, 4, 4],\n      S: [[4, 4, 4]]\n    },\n    S: {\n      0: [4, 4, 4],\n      Z: [[4, 4, 4]]\n    },\n    K: [[5, 5, 5], [45, 45, 45]],\n    H: {\n      0: [5, 5, 5],\n      1: [4, 4, 4],\n      S: [[5, 54, 54]]\n    }\n  },\n  D: {\n    0: [3, 3, 3],\n    T: [[3, 3, 3]],\n    Z: {\n      0: [4, 4, 4],\n      H: [[4, 4, 4]],\n      S: [[4, 4, 4]]\n    },\n    S: {\n      0: [4, 4, 4],\n      H: [[4, 4, 4]],\n      Z: [[4, 4, 4]]\n    },\n    R: {\n      S: [[4, 4, 4]],\n      Z: [[4, 4, 4]]}\n    },\n  E: {\n    0: [0, -1, -1],\n    I: [[0, 1, -1]],\n    J: [[0, 1, -1]],\n    Y: [[0, 1, -1]],\n    U: [[1, 1, -1]],\n    W: [[1, 1, -1]]\n  },\n  F: {\n    0: [7, 7, 7],\n    B: [[7, 7, 7]]\n  },\n  G: {\n    0: [5, 5, 5],\n    S: [[5, 54, 54]],\n    Z: [[5, 54, 54]]\n  },\n  H: [[5, 5, -1]],\n  I: {\n    0: [0, -1, -1],\n    A: [[1, -1, -1]],\n    E: [[1, -1, -1]],\n    O: [[1, -1, -1]],\n    U: [[1, -1, -1]]\n  },\n  J: [[4, 4, 4]],\n  K: {\n    0: [5, 5, 5],\n    H: [[5, 5, 5]],\n    S: [[5, 54, 54]],\n    Z: [[5, 54, 54]]\n  },\n  L: [[8, 8, 8]],\n  M: {\n    0: [6, 6, 6],\n    N: [[66, 66, 66]]\n  },\n  N: {\n    0: [6, 6, 6],\n    M: [[66, 66, 66]]\n  },\n  O: {\n    0: [0, -1, -1],\n    I: [[0, 1, -1]],\n    J: [[0, 1, -1]],\n    Y: [[0, 1, -1]]\n  },\n  P: {\n    0: [7, 7, 7],\n    F: [[7, 7, 7]],\n    H: [[7, 7, 7]]\n  },\n  Q: [[5, 5, 5]],\n  R: {\n    0: [9, 9, 9],\n    Z: [[94, 94, 94], [94, 94, 94]],\n    S: [[94, 94, 94], [94, 94, 94]]\n  },\n  S: {\n    0: [4, 4, 4],\n    Z: {\n      0: [4, 4, 4],\n      T: [[2, 43, 43]],\n      C: {\n        Z: [[2, 4, 4]],\n        S: [[2, 4, 4]]\n      },\n      D: [[2, 43, 43]]\n    },\n    D: [[2, 43, 43]],\n    T: {\n      0: [2, 43, 43],\n      R: {\n        Z: [[2, 4, 4]],\n        S: [[2, 4, 4]]\n      },\n      C: {\n        H: [[2, 4, 4]]\n      },\n      S: {\n        H: [[2, 4, 4]],\n        C: {\n          H: [[2, 4, 4]]\n        }\n      }\n    },\n    C: {\n      0: [2, 4, 4],\n      H: {\n        0: [4, 4, 4],\n        T: {\n          0: [2, 43, 43],\n          S: {\n            C: {\n              H: [[2, 4, 4]]\n            },\n            H: [[2, 4, 4]]\n          },\n          C: {\n            H: [[2, 4, 4]]\n          }\n        }, D: [[2, 43, 43]]\n      }\n    },\n    H: {\n      0: [4, 4, 4],\n      T: {\n        0: [2, 43, 43],\n        C: {\n          H: [[2, 4, 4]]\n        },\n        S: {\n          H: [[2, 4, 4]]\n        }\n      },\n      C: {\n        H: [[2, 4, 4]]\n      },\n      D: [[2, 43, 43]]\n    }\n  },\n  T: {\n    0: [3, 3, 3],\n    C: {\n      0: [4, 4, 4],\n      H: [[4, 4, 4]]\n    },\n    Z: {\n      0: [4, 4, 4],\n      S: [[4, 4, 4]]\n    },\n    S: {\n      0: [4, 4, 4],\n      Z: [[4, 4, 4]],\n      H: [[4, 4, 4]],\n      C: {\n        H: [[4, 4, 4]]\n      }\n    },\n    T: {\n      S: {\n        0: [4, 4, 4],\n        Z: [[4, 4, 4]],\n        C: {\n          H: [[4, 4, 4]]\n        }\n      },\n      C: {\n        H: [[4, 4, 4]]\n      },\n      Z: [[4, 4, 4]]\n    },\n    H: [[3, 3, 3]],\n    R: {\n      Z: [[4, 4, 4]],\n      S: [[4, 4, 4]]\n    }\n  },\n  U: {\n    0: [0, -1, -1],\n    E: [[0, -1, -1]],\n    I: [[0, 1, -1]],\n    J: [[0, 1, -1]],\n    Y: [[0, 1, -1]],\n    G: [[0, 1, -1]],\n  },\n  V: [[7, 7, 7], [0, -1, -1]],\n  W: [[0, -1, -1]],\n  X: [[5, 54, 54]],\n  Y: [[1, -1, -1]],\n  Z: {\n    0: [4, 4, 4],\n    D: {\n      0: [2, 43, 43],\n      Z: {\n        0: [2, 4, 4],\n        H: [[2, 4, 4]]\n      }\n    },\n    H: {\n      0: [4, 4, 4],\n      D: {\n        0: [2, 43, 43],\n        Z: {\n          H: [[2, 4, 4]]\n        }\n      }\n    },\n    S: {\n      0: [4, 4, 4],\n      H: [[4, 4, 4]],\n      C: {\n        H: [[4, 4, 4]]\n      }\n    }\n  }\n}\n\nru_en = {\n  'А': 'A', 'а': 'a', 'Б': 'B', 'б': 'b', 'В': 'V', 'в': 'v', 'Г': 'G',\n  'г': 'g', 'Д': 'D', 'д': 'd', 'Е': 'E', 'е': 'e', 'Ё': 'E', 'ё': 'e',\n  'Ж': 'ZH', 'ж': 'zh', 'З': 'Z', 'з': 'z', 'И': 'I', 'и': 'i', 'Й': 'I',\n  'й': 'i', 'К': 'K', 'к': 'k', 'Л': 'L', 'л': 'l', 'М': 'M', 'м': 'm',\n  'Н': 'N', 'н': 'n', 'О': 'O', 'о': 'o', 'П': 'P', 'п': 'p', 'Р': 'R',\n  'р': 'r', 'С': 'S', 'с': 's', 'Т': 'T', 'т': 't', 'У': 'U', 'у': 'u',\n  'Ф': 'F', 'ф': 'f', 'Х': 'H', 'х': 'h', 'Ц': 'C', 'ц': 'c', 'Ч': 'CH',\n  'ч': 'ch', 'Ш': 'SH', 'ш': 'sh', 'Щ': 'SCH', 'щ': 'sch', 'Ъ': '\\'',\n  'ъ': '\\'', 'Ы': 'Y', 'ы': 'y', 'Ь': '\\'', 'ь': '\\'', 'Э': 'E', 'э': 'e',\n  'Ю': 'YU', 'ю': 'Yu', 'Я': 'YA', 'я': 'ya', 'І': 'I', 'і': 'i', 'Ї': 'YI',\n  'ї': 'yi', 'Є': 'YE', 'є': 'ye', 'Ґ': 'G', 'ґ': 'g',\n  'ñ': 'n', 'Ñ': 'N', 'ó': 'o', 'Ó': 'O', 'ú': 'u', 'Ú', 'U', 'é': 'e',\n  'É': 'E', 'í': 'i', 'Í': 'I'\n}\n\nru = [\n  'А', 'а', 'Б', 'б', 'В', 'в', 'Г', 'г', 'Д', 'д', 'Е', 'е', 'Ё', 'ё', 'Ж',\n  'ж', 'З', 'з', 'И', 'и', 'Й', 'й', 'К', 'к', 'Л', 'л', 'М', 'м', 'Н', 'н',\n  'О', 'о', 'П', 'п', 'Р', 'р', 'С', 'с', 'Т', 'т', 'У', 'у', 'Ф', 'ф', 'Х',\n  'х', 'Ц', 'ц', 'Ч', 'ч', 'Ш', 'ш', 'Щ', 'щ', 'Ъ', 'ъ', 'Ы', 'ы', 'Ь', 'ь',\n  'Э', 'э', 'Ю', 'ю', 'Я', 'я', 'І', 'і', 'Ї', 'ї', 'Є', 'є', 'Ґ', 'ґ']\n\nen = [\n  'A', 'a', 'B', 'b', 'V', 'v', 'G', 'g', 'D', 'd', 'E', 'e', 'E', 'e', 'Zh',\n  'zh', 'Z', 'z', 'I', 'i', 'I', 'i', 'K', 'k', 'L', 'l', 'M', 'm', 'N', 'n',\n  'O', 'o', 'P', 'p', 'R', 'r', 'S', 's', 'T', 't', 'U', 'u', 'F', 'f', 'H',\n  'h', 'C', 'c', 'Ch', 'ch', 'Sh', 'sh', 'Sch', 'sch', '\\'', '\\'', 'Y', 'y',\n  '\\'', '\\'', 'E', 'e', 'Yu', 'Yu', 'Ya', 'ya', 'I', 'i', 'Yi', 'yi', 'Ye',\n  'ye', 'G', 'g']\n\naccented = {\n  'A': ///[Aa\\xaa\\xc0-\\xc5\\xe0-\\xe5\\u0100-\\u0105\\u01cd\\u01ce\\u0200-\\u0203\\u0226\n          \\u0227\\u1d2c\\u1d43\\u1e00\\u1e01\\u1e9a\\u1ea0-\\u1ea3\\u2090\\u2100\\u2101\n          \\u213b\\u249c\\u24b6\\u24d0\\u3371-\\u3374\\u3380-\\u3384\\u3388\\u3389\n          \\u33a9-\\u33af\\u33c2\\u33ca\\u33df\\u33ff\\uff21\\uff41]///ig\n  'B': ///[Bb\\u1d2e\\u1d47\\u1e02-\\u1e07\\u212c\\u249d\\u24b7\\u24d1\\u3374\n          \\u3385-\\u3387\\u33c3\\u33c8\\u33d4\\u33dd\\uff22\\uff42]///ig\n  'C': ///[Cc\\xc7\\xe7\\u0106-\\u010d\\u1d9c\\u2100\\u2102\\u2103\\u2105\\u2106\\u212d\n          \\u216d\\u217d\\u249e\\u24b8\\u24d2\\u3376\\u3388\\u3389\\u339d\\u33a0\\u33a4\n          \\u33c4-\\u33c7\\uff23\\uff43]///ig\n  'D': ///[Dd\\u010e\\u010f\\u01c4-\\u01c6\\u01f1-\\u01f3\\u1d30\\u1d48\\u1e0a-\\u1e13\n          \\u2145\\u2146\\u216e\\u217e\\u249f\\u24b9\\u24d3\\u32cf\\u3372\\u3377-\\u3379\n          \\u3397\\u33ad-\\u33af\\u33c5\\u33c8\\uff24\\uff44]///ig\n  'E': ///[Ee\\xc8-\\xcb\\xe8-\\xeb\\u0112-\\u011b\\u0204-\\u0207\\u0228\\u0229\\u1d31\n          \\u1d49\\u1e18-\\u1e1b\\u1eb8-\\u1ebd\\u2091\\u2121\\u212f\\u2130\\u2147\\u24a0\n          \\u24ba\\u24d4\\u3250\\u32cd\\u32ce\\uff25\\uff45]///ig\n  'F': ///[Ff\\u1da0\\u1e1e\\u1e1f\\u2109\\u2131\\u213b\\u24a1\\u24bb\\u24d5\\u338a-\\u338c\n          \\u3399\\ufb00-\\ufb04\\uff26\\uff46]///ig\n  'G': ///[Gg\\u011c-\\u0123\\u01e6\\u01e7\\u01f4\\u01f5\\u1d33\\u1d4d\\u1e20\\u1e21\\u210a\n          \\u24a2\\u24bc\\u24d6\\u32cc\\u32cd\\u3387\\u338d-\\u338f\\u3393\\u33ac\\u33c6\n          \\u33c9\\u33d2\\u33ff\\uff27\\uff47]///ig\n  'H': ///[Hh\\u0124\\u0125\\u021e\\u021f\\u02b0\\u1d34\\u1e22-\\u1e2b\\u1e96\n          \\u210b-\\u210e\\u24a3\\u24bd\\u24d7\\u32cc\\u3371\\u3390-\\u3394\\u33ca\\u33cb\n          \\u33d7\\uff28\\uff48]///ig\n  'I': ///[Ii\\xcc-\\xcf\\xec-\\xef\\u0128-\\u0130\\u0132\\u0133\\u01cf\\u01d0\n          \\u0208-\\u020b\\u1d35\\u1d62\\u1e2c\\u1e2d\\u1ec8-\\u1ecb\\u2071\\u2110\\u2111\n          \\u2139\\u2148\\u2160-\\u2163\\u2165-\\u2168\\u216a\\u216b\\u2170-\\u2173\n          \\u2175-\\u2178\\u217a\\u217b\\u24a4\\u24be\\u24d8\\u337a\\u33cc\\u33d5\\ufb01\n          \\ufb03\\uff29\\uff49]///ig\n  'J': ///[Jj\\u0132-\\u0135\\u01c7-\\u01cc\\u01f0\\u02b2\\u1d36\\u2149\\u24a5\\u24bf\n          \\u24d9\\u2c7c\\uff2a\\uff4a]///ig\n  'K': ///[Kk\\u0136\\u0137\\u01e8\\u01e9\\u1d37\\u1d4f\\u1e30-\\u1e35\\u212a\\u24a6\\u24c0\n          \\u24da\\u3384\\u3385\\u3389\\u338f\\u3391\\u3398\\u339e\\u33a2\\u33a6\\u33aa\n          \\u33b8\\u33be\\u33c0\\u33c6\\u33cd-\\u33cf\\uff2b\\uff4b]///ig\n  'L': ///[Ll\\u0139-\\u0140\\u01c7-\\u01c9\\u02e1\\u1d38\\u1e36\\u1e37\\u1e3a-\\u1e3d\n          \\u2112\\u2113\\u2121\\u216c\\u217c\\u24a7\\u24c1\\u24db\\u32cf\\u3388\\u3389\n          \\u33d0-\\u33d3\\u33d5\\u33d6\\u33ff\\ufb02\\ufb04\\uff2c\\uff4c]///ig\n  'M': ///[Mm\\u1d39\\u1d50\\u1e3e-\\u1e43\\u2120\\u2122\\u2133\\u216f\\u217f\\u24a8\\u24c2\n          \\u24dc\\u3377-\\u3379\\u3383\\u3386\\u338e\\u3392\\u3396\\u3399-\\u33a8\\u33ab\n          \\u33b3\\u33b7\\u33b9\\u33bd\\u33bf\\u33c1\\u33c2\\u33ce\\u33d0\\u33d4-\\u33d6\n          \\u33d8\\u33d9\\u33de\\u33df\\uff2d\\uff4d]///ig\n  'N': ///[Nn\\xd1\\xf1\\u0143-\\u0149\\u01ca-\\u01cc\\u01f8\\u01f9\\u1d3a\\u1e44-\\u1e4b\n          \\u207f\\u2115\\u2116\\u24a9\\u24c3\\u24dd\\u3381\\u338b\\u339a\\u33b1\\u33b5\n          \\u33bb\\u33cc\\u33d1\\uff2e\\uff4e]///ig\n  'O': ///[Oo\\xba\\xd2-\\xd6\\xf2-\\xf6\\u014c-\\u0151\\u01a0\\u01a1\\u01d1\\u01d2\\u01ea\n          \\u01eb\\u020c-\\u020f\\u022e\\u022f\\u1d3c\\u1d52\\u1ecc-\\u1ecf\\u2092\\u2105\n          \\u2116\\u2134\\u24aa\\u24c4\\u24de\\u3375\\u33c7\\u33d2\\u33d6\\uff2f\\uff4f\n          \\xf8\\xd8]///ig\n  'P': ///[Pp\\u1d3e\\u1d56\\u1e54-\\u1e57\\u2119\\u24ab\\u24c5\\u24df\\u3250\\u3371\\u3376\n          \\u3380\\u338a\\u33a9-\\u33ac\\u33b0\\u33b4\\u33ba\\u33cb\\u33d7-\\u33da\\uff30\n          \\uff50]///ig\n  'Q': ///[Qq\\u211a\\u24ac\\u24c6\\u24e0\\u33c3\\uff31\\uff51]///ig\n  'R': ///[Rr\\u0154-\\u0159\\u0210-\\u0213\\u02b3\\u1d3f\\u1d63\\u1e58-\\u1e5b\\u1e5e\n          \\u1e5f\\u20a8\\u211b-\\u211d\\u24ad\\u24c7\\u24e1\\u32cd\\u3374\\u33ad-\\u33af\n          \\u33da\\u33db\\uff32\\uff52]///ig\n  'S': ///[Ss\\u015a-\\u0161\\u017f\\u0218\\u0219\\u02e2\\u1e60-\\u1e63\\u20a8\\u2101\n          \\u2120\\u24ae\\u24c8\\u24e2\\u33a7\\u33a8\\u33ae-\\u33b3\\u33db\\u33dc\\ufb06\n          \\uff33\\uff53]///ig\n  'T': ///[Tt\\u0162-\\u0165\\u021a\\u021b\\u1d40\\u1d57\\u1e6a-\\u1e71\\u1e97\\u2121\n          \\u2122\\u24af\\u24c9\\u24e3\\u3250\\u32cf\\u3394\\u33cf\\ufb05\\ufb06\\uff34\n          \\uff54]///ig\n  'U': ///[Uu\\xd9-\\xdc\\xf9-\\xfc\\u0168-\\u0173\\u01af\\u01b0\\u01d3\\u01d4\n          \\u0214-\\u0217\\u1d41\\u1d58\\u1d64\\u1e72-\\u1e77\\u1ee4-\\u1ee7\\u2106\n          \\u24b0\\u24ca\\u24e4\\u3373\\u337a\\uff35\\uff55]///ig\n  'V': ///[Vv\\u1d5b\\u1d65\\u1e7c-\\u1e7f\\u2163-\\u2167\\u2173-\\u2177\\u24b1\\u24cb\n          \\u24e5\\u2c7d\\u32ce\\u3375\\u33b4-\\u33b9\\u33dc\\u33de\\uff36\\uff56]///ig\n  'W': ///[Ww\\u0174\\u0175\\u02b7\\u1d42\\u1e80-\\u1e89\\u1e98\\u24b2\\u24cc\\u24e6\n          \\u33ba-\\u33bf\\u33dd\\uff37\\uff57]///ig\n  'X': ///[Xx\\u02e3\\u1e8a-\\u1e8d\\u2093\\u213b\\u2168-\\u216b\\u2178-\\u217b\\u24b3\n          \\u24cd\\u24e7\\u33d3\\uff38\\uff58]///ig\n  'Y': ///[Yy\\xdd\\xfd\\xff\\u0176-\\u0178\\u0232\\u0233\\u02b8\\u1e8e\\u1e8f\\u1e99\n          \\u1ef2-\\u1ef9\\u24b4\\u24ce\\u24e8\\u33c9\\uff39\\uff59]///ig\n  'Z': ///[Zz\\u0179-\\u017e\\u01f1-\\u01f3\\u1dbb\\u1e90-\\u1e95\\u2124\\u2128\\u24b5\n          \\u24cf\\u24e9\\u3390-\\u3394\\uff3a\\uff5a]///ig\n}\n\nword = (str, iscyr) ->\n  str = str.toUpperCase()\n  l = str.length\n  output = ''\n  i = 0\n  iscyr = iscyr or true\n  previous = -1\n  power = 6\n  while i < l\n    current = last = codes[str[i]]\n    j = 1\n    for k in [1..power]\n      if not str[i + k] or not current[str[i + k]]\n        break\n\n      current = current[str[i + k]]\n\n      if current[0]\n        last = current\n        j = k + 1\n\n    if i == 0\n      code = last[0][0]\n    else if not str[i + j] or codes[str[i + j]][0][0] != 0\n      code = (\n        if iscyr\n          if last.length > 1\n            last[1][2]\n          else\n            last[0][2]\n        else\n          last[0][2]\n      )\n    else\n      code = (\n        if iscyr\n          if last.length > 1\n            last[1][1]\n          else\n            last[0][1]\n        else\n          last[0][1]\n      )\n\n    if code != -1 and code != previous\n      output += code\n    previous = code\n    i += j\n\n  output = output.substr(0, power).replace(/^03(8|$)/, '53$1')\n\n  # отель, готель, хотел\n  if output and output.length < 3\n    output += new Array(3 - (output.length) + 1).join('0')\n  return output\n\ntranslit = (str) ->\n  matches = str.match(/[а-яіїґєёЭАБ-ЯІЇҐЄЁñÑóÓúÚéÉíÍ]/g)\n  if matches\n    for c in matches\n      tc = ru_en[c]\n      str = str.replace(c, tc) if tc\n\n  # remove accents\n  str =  str.normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .replace(/\\u0141/g, 'L')\n    .replace(/\\u0142/g, \"l\")\n    .replace(/\\u00D8/g, 'O')\n    .replace(/\\u00F8/g, 'o')\n  return str\n\ncalc = (str) ->\n  str = str.toUpperCase()\n  for letter of accented\n    str.replace accented[letter], letter\n\n  iscyr = Boolean(str.match(/[АБ-ЯІЇҐЄЁñÑóÓúÚéÉíÍ]/))\n  if iscyr\n    str = translit(str)\n\n  str = str.replace(/[^\\sA-Z]/g, '')\n    .replace(/\\s{2,}/g, ' ')\n    .replace(/^\\s+|\\s+$/g, '')\n\n  return null if not str\n\n  matches = str.split(' ')\n  for m, i in matches\n    matches[i] = word(m, iscyr)\n\n  return String(matches)\n\ncompare = (str1, str2) -> calc(str1) == calc(str2)\n\nmodule.exports.calc = calc\nmodule.exports.translit = translit\nmodule.exports.compare = compare\n\n","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\nvar fs = require('fs');\n\n// hack: to prevent Buffer loading by browserify in browser.\n//       atob() is used instead\nvar Buf = global['Buffer'], useBuffer = Buf != undefined;\nvar _atob = global['atob'] || function (raw) {\n  return useBuffer ? new Buf(raw, \"base64\").toString() : null;\n};\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Maps a given position to one from source map\nvar positionCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function'));\n}\nvar inBrowser = isInBrowser();\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction handlerExec(list) {\n//console.log('l0: handlerExec.list.length', list.length);\n  return function(arg) {\n//console.log('l1: handlerExec.list=', list);\n//console.log('l2: handlerExec.arg=', arg);\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n//console.log('l3: handlerExec.BINGO!');\n        return ret;\n      }\n    }\n//console.log('l4: handlerExec null');\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  var contents;\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  try {\n    // Use SJAX if we are in the browser\n    if (inBrowser) {\n      var xhr = new XMLHttpRequest();\n//console.log(\"retrieveFileHandlers: path=\",path);\n      xhr.open('GET', path, false);\n      xhr.send(null);\n      contents = null;\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        contents = xhr.responseText;\n//console.log(\"retrieveFileHandlers: content retrieveved!\");\n      }\n    }\n\n    // Otherwise, use the filesystem\n    else {\n      contents = fs.readFileSync(path, 'utf8');\n    }\n  } catch (e) {\n    console.warn(e);\n    contents = null;\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\")\nfunction supportRelativeURL(file, url) {\n//console.log('supportRelativeURL: file=', file, 'url=', url);\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^[\\w-]+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  var result  = protocol + path.resolve(dir.slice(protocol.length), url);\n//console.log('supportRelativeURL: result=', result);\n  return result;\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n//console.log('retrieveSourceMapURL: source=', source);\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n\n  if (!fileData && inBrowser) {\n//console.log('retrieveSourceMapUrl: source=', source);\n    try {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', source, false);\n      xhr.send(null);\n      fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n      // Support providing a sourceMappingURL via the SourceMap header\n      var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                            xhr.getResponseHeader(\"X-SourceMap\");\n      if (sourceMapHeader) {\n        return sourceMapHeader;\n      }\n    } catch (e) {\n      console.warn(e);\n      return null;\n    }\n  } else {\n//console.log('BINGOO:!!!');\n  }\n\n  //        //# sourceMappingURL=foo.js.map                       /*# sourceMappingURL=foo.js.map */\n  var re = /(?:\\/\\/[@#][ \\t]+sourceMappingURL=([^\\s'\"]+?)[ \\t]*$)|(?:\\/\\*[@#][ \\t]+sourceMappingURL=([^\\*]+?)[ \\t]*(?:\\*\\/)[ \\t]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n//console.log('sourceMappingURL=', sourceMappingURL);\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = _atob(rawData);\n    sourceMappingURL = null;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n//console.log(\"sourceMappingURL =\", sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n//console.log('position=', position);\n  var position_key = position.source+':'+position.line+':'+position.column\n      originalPosition = positionCache[position_key];\n\n  if (originalPosition) return originalPosition;\n\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    var urlAndMap;\n    // Skip getting the source map for 'extensions::*' url\n    if (!position.source.match(/^extensions::/)) {\n      // Call the (overrideable) retrieveSourceMap function to get the source map.\n      var urlAndMap = retrieveSourceMap(position.source);\n//console.log('urlAndMap=', urlAndMap);\n    }\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n//console.log('sourceMap=', sourceMap);\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n//console.log('map has sourcesContent');\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n//console.log('url=', url);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map) {\n    originalPosition = sourceMap.map.originalPositionFor(position);\n//console.log('originalPosition:', originalPosition);\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n//console.log('sourceMap.url=', sourceMap.url, 'originalPosition.source=', originalPosition.source);\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n\n      return positionCache[position_key] = originalPosition;\n    }\n  }\n\n  return positionCache[position_key] = position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame) {\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    if (line === 1 && !inBrowser && !frame.isEval()) {\n      column -= 62;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    frame = cloneCallSite(frame);\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\nfunction prepareStackTrace(error, stack) {\n//console.log('error=', error, 'stack=', stack);\n  try {\n    if (emptyCacheBetweenOperations) {\n      fileContentsCache = {};\n      sourceMapCache    = {};\n      positionCache     = {};\n    }\n\n    return error + stack.map(function (frame) {\n        return '\\n    at ' + wrapCallSite(frame);\n      }).join('');\n  } catch (er) {\n    return error + stack.join('\\n')+'\\n>>>>'+er\n  }\n}\n\nfunction getSource(error, stackLevel) {\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n//console.log('==EEEE| getErrorSource |EEEEE====', error);\n\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync && fs.existsSync(source)) {\n      contents = fs.readFileSync(source, 'utf8');\n    }\n\n    var result = source + ':' + line;\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        result += '\\n' + code + '\\n' + new Array(column).join(' ') + '^';\n      }\n    }\n    return result;\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  process.exit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment +\n            \" was unknown. Available options are {auto, browser, node}\");\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n//console.log(\"!options:retrieveHandler!\", options.retrieveFile);\n    retrieveFileHandlers.unshift(options.retrieveFile);\n//console.log('!retrieveFileHandlers=', retrieveFileHandlers);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n"]}